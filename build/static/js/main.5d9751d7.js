/*! For license information please see main.5d9751d7.js.LICENSE.txt */
(()=>{var __webpack_modules__={9361:(e,t)=>{"use strict";const r="undefined"!==typeof BigUint64Array,n=Symbol(),i=1024;function s(e,t){const r=new Uint32Array(e),n=new Uint16Array(e);var s=r[t+-4>>>2]>>>1,o=t>>>1;if(s<=i)return String.fromCharCode.apply(String,n.subarray(o,o+s));const a=[];do{const e=n[o+i-1],t=e>=55296&&e<56320?1023:i;a.push(String.fromCharCode.apply(String,n.subarray(o,o+=t))),s-=t}while(s>i);return a.join("")+String.fromCharCode.apply(String,n.subarray(o,o+s))}function o(e){const t={};function r(e,t){return e?s(e.buffer,t):"<yet unknown>"}const n=e.env=e.env||{};return n.abort=n.abort||function(e,i,s,o){const a=t.memory||n.memory;throw Error("abort: "+r(a,e)+" at "+r(a,i)+":"+s+":"+o)},n.trace=n.trace||function(e,i){const s=t.memory||n.memory;console.log("trace: "+r(s,e)+(i?" ":"")+Array.prototype.slice.call(arguments,2,2+i).join(", "))},e.Math=e.Math||Math,e.Date=e.Date||Date,t}function a(e,t){const n=t.exports,i=n.memory,o=n.table,a=n.__alloc,c=n.__retain,l=n.__rtti_base||-1;function u(e){const t=new Uint32Array(i.buffer);if((e>>>=0)>=t[l>>>2])throw Error("invalid id: "+e);return t[(l+4>>>2)+2*e]}function d(e){const t=new Uint32Array(i.buffer);if((e>>>=0)>=t[l>>>2])throw Error("invalid id: "+e);return t[(l+4>>>2)+2*e+1]}function p(e){return 31-Math.clz32(e>>>5&31)}function f(e,t,r){const n=i.buffer;if(r)switch(e){case 2:return new Float32Array(n);case 3:return new Float64Array(n)}else switch(e){case 0:return new(t?Int8Array:Uint8Array)(n);case 1:return new(t?Int16Array:Uint16Array)(n);case 2:return new(t?Int32Array:Uint32Array)(n);case 3:return new(t?BigInt64Array:BigUint64Array)(n)}throw Error("unsupported align: "+e)}function y(e){const t=new Uint32Array(i.buffer),r=t[e+-8>>>2],n=u(r);if(!(1&n))throw Error("not an array: "+r);const s=p(n);var o=t[e+4>>>2];const a=2&n?t[e+12>>>2]:t[o+-4>>>2]>>>s;return f(s,1024&n,2048&n).subarray(o>>>=s,o+a)}function g(e,t,r){return new e(m(e,t,r))}function m(e,t,r){const n=i.buffer,s=new Uint32Array(n),o=s[r+4>>>2];return new e(n,o,s[o+-4>>>2]>>>t)}return e.__allocString=function(e){const t=e.length,r=a(t<<1,1),n=new Uint16Array(i.buffer);for(var s=0,o=r>>>1;s<t;++s)n[o+s]=e.charCodeAt(s);return r},e.__getString=function(e){const t=i.buffer;if(1!==new Uint32Array(t)[e+-8>>>2])throw Error("not a string: "+e);return s(t,e)},e.__allocArray=function(e,t){const r=u(e);if(!(3&r))throw Error("not an array: "+e+" @ "+r);const n=p(r),s=t.length,o=a(s<<n,0),l=a(2&r?16:12,e),h=new Uint32Array(i.buffer);h[l+0>>>2]=c(o),h[l+4>>>2]=o,h[l+8>>>2]=s<<n,2&r&&(h[l+12>>>2]=s);const d=f(n,1024&r,2048&r);if(8192&r)for(let i=0;i<s;++i)d[(o>>>n)+i]=c(t[i]);else d.set(t,o>>>n);return l},e.__getArrayView=y,e.__getArray=function(e){const t=y(e),r=t.length,n=new Array(r);for(let i=0;i<r;i++)n[i]=t[i];return n},e.__getArrayBuffer=function(e){const t=i.buffer,r=new Uint32Array(t)[e+-4>>>2];return t.slice(e,e+r)},e.__getInt8Array=g.bind(null,Int8Array,0),e.__getInt8ArrayView=m.bind(null,Int8Array,0),e.__getUint8Array=g.bind(null,Uint8Array,0),e.__getUint8ArrayView=m.bind(null,Uint8Array,0),e.__getUint8ClampedArray=g.bind(null,Uint8ClampedArray,0),e.__getUint8ClampedArrayView=m.bind(null,Uint8ClampedArray,0),e.__getInt16Array=g.bind(null,Int16Array,1),e.__getInt16ArrayView=m.bind(null,Int16Array,1),e.__getUint16Array=g.bind(null,Uint16Array,1),e.__getUint16ArrayView=m.bind(null,Uint16Array,1),e.__getInt32Array=g.bind(null,Int32Array,2),e.__getInt32ArrayView=m.bind(null,Int32Array,2),e.__getUint32Array=g.bind(null,Uint32Array,2),e.__getUint32ArrayView=m.bind(null,Uint32Array,2),r&&(e.__getInt64Array=g.bind(null,BigInt64Array,3),e.__getInt64ArrayView=m.bind(null,BigInt64Array,3),e.__getUint64Array=g.bind(null,BigUint64Array,3),e.__getUint64ArrayView=m.bind(null,BigUint64Array,3)),e.__getFloat32Array=g.bind(null,Float32Array,2),e.__getFloat32ArrayView=m.bind(null,Float32Array,2),e.__getFloat64Array=g.bind(null,Float64Array,3),e.__getFloat64ArrayView=m.bind(null,Float64Array,3),e.__instanceof=function(e,t){const r=new Uint32Array(i.buffer);var n=r[e+-8>>>2];if(n<=r[l>>>2])do{if(n==t)return!0}while(n=d(n));return!1},e.memory=e.memory||i,e.table=e.table||o,h(n,e)}function c(e){return"undefined"!==typeof Response&&e instanceof Response}async function l(e,t){return c(e=await e)?u(e,t):a(o(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}async function u(e,t){return WebAssembly.instantiateStreaming?a(o(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance):l(c(e=await e)?e.arrayBuffer():e,t)}function h(e,t){var r=t?Object.create(t):{},i=e.__argumentsLength?function(t){e.__argumentsLength.value=t}:e.__setArgumentsLength||e.__setargc||function(){};for(let s in e){if(!Object.prototype.hasOwnProperty.call(e,s))continue;const t=e[s];let o=s.split("."),a=r;for(;o.length>1;){let e=o.shift();Object.prototype.hasOwnProperty.call(a,e)||(a[e]={}),a=a[e]}let c=o[0],l=c.indexOf("#");if(l>=0){let r=c.substring(0,l),o=a[r];if("undefined"===typeof o||!o.prototype){let e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.wrap(e.prototype.constructor(0,...r))};e.prototype={valueOf:function(){return this[n]}},e.wrap=function(t){return Object.create(e.prototype,{[n]:{value:t,writable:!1}})},o&&Object.getOwnPropertyNames(o).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t)))),a[r]=e}if(c=c.substring(l+1),a=a[r].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let t=e[s.replace("set:","get:")],r=e[s.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return t(this[n])},set:function(e){r(this[n],e)},enumerable:!0})}}else"constructor"===c?(a[c]=function(){return i(arguments.length),t(...arguments)}).original=t:(a[c]=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i(r.length),t(this[n],...r)}).original=t}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:e[s.replace("set:","get:")],set:e[s.replace("get:","set:")],enumerable:!0}):"function"===typeof t&&t!==i?(a[c]=function(){return i(arguments.length),t(...arguments)}).original=t:a[c]=t}return r}t.instantiate=l,t.instantiateSync=function(e,t){return a(o(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))},t.instantiateStreaming=u,t.demangle=h},9018:(e,t,r)=>{"use strict";e.exports=r(6788)},4242:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},3613:(e,t,r)=>{"use strict";var n=t,i=r(386),s=r(8123);function o(e,t,r,n){if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var s=t.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)t.repeated&&s[o[a]]===t.typeDefault&&e("default:"),e("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",n,s[o[a]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var c=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=s.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof i||r("if(d%s!=null){",c),o(r,a,n,c),a.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],o=[],c=[],l=0;l<t.length;++l)t[l].partOf||(t[l].resolve().repeated?n:t[l].map?o:c).push(t[l]);if(n.length){for(r("if(o.arrays||o.defaults){"),l=0;l<n.length;++l)r("d%s=[]",s.safeProp(n[l].name));r("}")}if(o.length){for(r("if(o.objects||o.defaults){"),l=0;l<o.length;++l)r("d%s={}",s.safeProp(o[l].name));r("}")}if(c.length){for(r("if(o.defaults){"),l=0;l<c.length;++l){var u=c[l],h=s.safeProp(u.name);if(u.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",h,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",h)("}else")("d%s=o.longs===String?%j:%i",h,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var d="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",h,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",h,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",h,h)("}")}else r("d%s=%j",h,u.typeDefault)}r("}")}var p=!1;for(l=0;l<t.length;++l){u=t[l];var f=e._fieldsArray.indexOf(u);h=s.safeProp(u.name);u.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",h,h)("d%s={}",h)("for(var j=0;j<ks2.length;++j){"),a(r,u,f,h+"[ks2[j]]")("}")):u.repeated?(r("if(m%s&&m%s.length){",h,h)("d%s=[]",h)("for(var j=0;j<m%s.length;++j){",h),a(r,u,f,h+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",h,u.name),a(r,u,f,h),u.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(u.partOf.name),u.name)),r("}")}return r("return d")}},7998:(e,t,r)=>{"use strict";e.exports=function(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,l="m"+s.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[c]?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[c]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',l):t("%s[k]=value",l)):a.repeated?(t("if(!(%s&&%s.length))",l,l)("%s=[]",l),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,c)("}else"),void 0===i.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,r):t("%s.push(r.%s())",l,c)):void 0===i.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,r):t("%s=r.%s()",l,c),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var u=e._fieldsArray[r];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",o(u))}return t("return m")};var n=r(386),i=r(7254),s=r(8123);function o(e){return"missing required '"+e.name+"'"}},4105:(e,t,r)=>{"use strict";e.exports=function(e){for(var t,r=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(s.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),u=e._fieldsArray.indexOf(l),h=l.resolvedType instanceof n?"int32":l.type,d=i.basic[h];t="m"+s.safeProp(l.name),l.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType),void 0===d?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,h,t),r("}")("}")):l.repeated?(r("if(%s!=null&&%s.length){",t,t),l.packed&&void 0!==i.packed[h]?r("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",h,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===d?o(r,l,u,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(l.id<<3|d)>>>0,h,t)),r("}")):(l.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,l.name),void 0===d?o(r,l,u,t):r("w.uint32(%i).%s(%s)",(l.id<<3|d)>>>0,h,t))}return r("return w")};var n=r(386),i=r(7254),s=r(8123);function o(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},386:(e,t,r)=>{"use strict";e.exports=o;var n=r(8351);((o.prototype=Object.create(n.prototype)).constructor=o).className="Enum";var i=r(9784),s=r(8123);function o(e,t,r,i,s){if(n.call(this,e,r),t&&"object"!==typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.reserved=void 0,t)for(var o=Object.keys(t),a=0;a<o.length;++a)"number"===typeof t[o[a]]&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}o.fromJSON=function(e,t){var r=new o(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(e,t,r){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=r||null,this},o.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},o.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},o.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},1189:(e,t,r)=>{"use strict";e.exports=l;var n=r(8351);((l.prototype=Object.create(n.prototype)).constructor=l).className="Field";var i,s=r(386),o=r(7254),a=r(8123),c=/^required|optional|repeated$/;function l(e,t,r,i,s,l,u){if(a.isObject(i)?(u=s,l=i,i=s=void 0):a.isObject(s)&&(u=l,l=s,s=void 0),n.call(this,e,l),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!a.isString(s))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}l.fromJSON=function(e,t){return new l(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(l.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),l.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},l.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},l.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"===typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"===typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},l.d=function(e,t,r,n){return"function"===typeof t?t=a.decorateType(t).name:t&&"object"===typeof t&&(t=a.decorateEnum(t).name),function(i,s){a.decorateType(i.constructor).add(new l(s,e,t,r,{default:n}))}},l._configure=function(e){i=e}},9298:(e,t,r)=>{"use strict";var n=e.exports=r(9006);n.build="light",n.load=function(e,t,r){return"function"===typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(4105),n.decoder=r(7998),n.verifier=r(7575),n.converter=r(3613),n.ReflectionObject=r(8351),n.Namespace=r(9784),n.Root=r(4162),n.Enum=r(386),n.Type=r(4957),n.Field=r(1189),n.OneOf=r(5836),n.MapField=r(9827),n.Service=r(3548),n.Method=r(5986),n.Message=r(2380),n.wrappers=r(5939),n.types=r(7254),n.util=r(8123),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},9006:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(3480),n.BufferWriter=r(2685),n.Reader=r(2171),n.BufferReader=r(2552),n.util=r(9460),n.rpc=r(2910),n.roots=r(8393),n.configure=i,i()},6788:(e,t,r)=>{"use strict";var n=e.exports=r(9298);n.build="full",n.tokenize=r(3953),n.parse=r(2867),n.common=r(4242),n.Root._configure(n.Type,n.parse,n.common)},9827:(e,t,r)=>{"use strict";e.exports=o;var n=r(1189);((o.prototype=Object.create(n.prototype)).constructor=o).className="MapField";var i=r(7254),s=r(8123);function o(e,t,r,i,o,a){if(n.call(this,e,t,i,void 0,void 0,o,a),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(e,t){return new o(e,t.id,t.keyType,t.type,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},o.d=function(e,t,r){return"function"===typeof r?r=s.decorateType(r).name:r&&"object"===typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new o(i,e,t,r))}}},2380:(e,t,r)=>{"use strict";e.exports=i;var n=r(9460);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},5986:(e,t,r)=>{"use strict";e.exports=s;var n=r(8351);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(8123);function s(e,t,r,s,o,a,c,l,u){if(i.isObject(o)?(c=o,o=a=void 0):i.isObject(a)&&(c=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!o||void 0,this.responseType=s,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=u}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},9784:(e,t,r)=>{"use strict";e.exports=u;var n=r(8351);((u.prototype=Object.create(n.prototype)).constructor=u).className="Namespace";var i,s,o,a=r(1189),c=r(8123);function l(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function u(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}u.fromJSON=function(e,t){return new u(e,t.options).addJSON(t.nested)},u.arrayToJSON=l,u.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!==typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},u.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(u.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),u.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},u.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?o.fromJSON:void 0!==t.methods?s.fromJSON:void 0!==t.id?a.fromJSON:u.fromJSON)(r[n],t));return this},u.prototype.get=function(e){return this.nested&&this.nested[e]||null},u.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof o)return this.nested[e].values;throw Error("no such enum: "+e)},u.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof o||e instanceof s||e instanceof u))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof u&&e instanceof u)||t instanceof i||t instanceof s)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},u.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},u.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof u))throw Error("path conflicts with non-namespace objects")}else r.add(r=new u(n))}return t&&r.addJSON(t),r},u.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof u?e[t++].resolveAll():e[t++].resolve();return this.resolve()},u.prototype.lookup=function(e,t,r){if("boolean"===typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof u&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof u&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},u.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},u.prototype.lookupEnum=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},u.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,o]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},u.prototype.lookupService=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},u._configure=function(e,t,r){i=e,s=t,o=r}},8351:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,i=r(8123);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var o=s[e];i.setProperty(o,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var a={};a[e]=t,n.push(a)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},5836:(e,t,r)=>{"use strict";e.exports=o;var n=r(8351);((o.prototype=Object.create(n.prototype)).constructor=o).className="OneOf";var i=r(1189),s=r(8123);function o(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}o.fromJSON=function(e,t){return new o(e,t.oneof,t.options,t.comment)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},o.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},o.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},o.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},o.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},o.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new o(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},2867:(e,t,r)=>{"use strict";e.exports=A,A.filename=null,A.defaults={keepCase:!1};var n=r(3953),i=r(4162),s=r(4957),o=r(1189),a=r(9827),c=r(5836),l=r(386),u=r(3548),h=r(5986),d=r(7254),p=r(8123),f=/^[1-9][0-9]*$/,y=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,m=/^-?0[x][0-9a-fA-F]+$/,w=/^0[0-7]+$/,v=/^-?0[0-7]+$/,b=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,E=/^[a-zA-Z_][a-zA-Z_0-9]*$/,_=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,S=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function A(e,t,r){t instanceof i||(r=t,t=new i),r||(r=A.defaults);var k,I,C,R,T,D=r.preferTrailingComment||!1,P=n(e,r.alternateCommentMode||!1),N=P.next,x=P.push,O=P.peek,B=P.skip,L=P.cmnt,M=!0,U=!1,j=t,F=r.keepCase?function(e){return e}:p.camelCase;function z(e,t,r){var n=A.filename;return r||(A.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+P.line+")")}function V(){var e,t=[];do{if('"'!==(e=N())&&"'"!==e)throw z(e);t.push(N()),B(e),e=O()}while('"'===e||"'"===e);return t.join("")}function K(e){var t=N();switch(t){case"'":case'"':return x(t),V();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;"-"===e.charAt(0)&&(r=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(w.test(e))return r*parseInt(e,8);if(b.test(e))return r*parseFloat(e);throw z(e,"number",t)}(t,!0)}catch(r){if(e&&_.test(t))return t;throw z(t,"value")}}function $(e,t){var r,n;do{!t||'"'!==(r=O())&&"'"!==r?e.push([n=q(N()),B("to",!0)?q(N()):n]):e.push(V())}while(B(",",!0));B(";")}function q(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw z(e,"id");if(y.test(e))return parseInt(e,10);if(m.test(e))return parseInt(e,16);if(v.test(e))return parseInt(e,8);throw z(e,"id")}function H(){if(void 0!==k)throw z("package");if(k=N(),!_.test(k))throw z(k,"name");j=j.define(k),B(";")}function W(){var e,t=O();switch(t){case"weak":e=C||(C=[]),N();break;case"public":N();default:e=I||(I=[])}t=V(),B(";"),e.push(t)}function G(){if(B("="),R=V(),!(U="proto3"===R)&&"proto2"!==R)throw z(R,"syntax");B(";")}function Y(e,t){switch(t){case"option":return X(e,t),B(";"),!0;case"message":return function(e,t){if(!E.test(t=N()))throw z(t,"type name");var r=new s(t);Q(r,(function(e){if(!Y(r,e))switch(e){case"map":!function(e){B("<");var t=N();if(void 0===d.mapKey[t])throw z(t,"type");B(",");var r=N();if(!_.test(r))throw z(r,"type");B(">");var n=N();if(!E.test(n))throw z(n,"name");B("=");var i=new a(F(n),q(N()),t,r);Q(i,(function(e){if("option"!==e)throw z(e);X(i,e),B(";")}),(function(){te(i)})),e.add(i)}(r);break;case"required":case"repeated":J(r,e);break;case"optional":J(r,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!E.test(t=N()))throw z(t,"name");var r=new c(F(t));Q(r,(function(e){"option"===e?(X(r,e),B(";")):(x(e),J(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":$(r.extensions||(r.extensions=[]));break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:if(!U||!_.test(e))throw z(e);x(e),J(r,"optional")}})),e.add(r)}(e,t),!0;case"enum":return function(e,t){if(!E.test(t=N()))throw z(t,"name");var r=new l(t);Q(r,(function(e){switch(e){case"option":X(r,e),B(";");break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!E.test(t))throw z(t,"name");B("=");var r=q(N(),!0),n={};Q(n,(function(e){if("option"!==e)throw z(e);X(n,e),B(";")}),(function(){te(n)})),e.add(t,r,n.comment)}(r,e)}})),e.add(r)}(e,t),!0;case"service":return function(e,t){if(!E.test(t=N()))throw z(t,"service name");var r=new u(t);Q(r,(function(e){if(!Y(r,e)){if("rpc"!==e)throw z(e);!function(e,t){var r=L(),n=t;if(!E.test(t=N()))throw z(t,"name");var i,s,o,a,c=t;B("("),B("stream",!0)&&(s=!0);if(!_.test(t=N()))throw z(t);i=t,B(")"),B("returns"),B("("),B("stream",!0)&&(a=!0);if(!_.test(t=N()))throw z(t);o=t,B(")");var l=new h(c,n,i,o,s,a);l.comment=r,Q(l,(function(e){if("option"!==e)throw z(e);X(l,e),B(";")})),e.add(l)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!_.test(t=N()))throw z(t,"reference");var r=t;Q(null,(function(t){switch(t){case"required":case"repeated":J(e,t,r);break;case"optional":J(e,U?"proto3_optional":"optional",r);break;default:if(!U||!_.test(t))throw z(t);x(t),J(e,"optional",r)}}))}(e,t),!0}return!1}function Q(e,t,r){var n=P.line;if(e&&("string"!==typeof e.comment&&(e.comment=L()),e.filename=A.filename),B("{",!0)){for(var i;"}"!==(i=N());)t(i);B(";",!0)}else r&&r(),B(";"),e&&("string"!==typeof e.comment||D)&&(e.comment=L(n)||e.comment)}function J(e,t,r){var n=N();if("group"!==n){if(!_.test(n))throw z(n,"type");var i=N();if(!E.test(i))throw z(i,"name");i=F(i),B("=");var a=new o(i,q(N()),n,t,r);if(Q(a,(function(e){if("option"!==e)throw z(e);X(a,e),B(";")}),(function(){te(a)})),"proto3_optional"===t){var l=new c("_"+i);a.setOption("proto3_optional",!0),l.add(a),e.add(l)}else e.add(a);U||!a.repeated||void 0===d.packed[n]&&void 0!==d.basic[n]||a.setOption("packed",!1,!0)}else!function(e,t){var r=N();if(!E.test(r))throw z(r,"name");var n=p.lcFirst(r);r===n&&(r=p.ucFirst(r));B("=");var i=q(N()),a=new s(r);a.group=!0;var c=new o(n,i,r,t);c.filename=A.filename,Q(a,(function(e){switch(e){case"option":X(a,e),B(";");break;case"required":case"repeated":J(a,e);break;case"optional":J(a,U?"proto3_optional":"optional");break;default:throw z(e)}})),e.add(a).add(c)}(e,t)}function X(e,t){var r=B("(",!0);if(!_.test(t=N()))throw z(t,"name");var n,i=t,s=i;r&&(B(")"),s=i="("+i+")",t=O(),S.test(t)&&(n=t.slice(1),i+=t,N())),B("="),function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,s,Z(e,i),n)}function Z(e,t){if(B("{",!0)){for(var r={};!B("}",!0);){if(!E.test(T=N()))throw z(T,"name");var n,i=T;if(B(":",!0),"{"===O())n=Z(e,t+"."+T);else if("["===O()){var s;if(n=[],B("[",!0)){do{s=K(!0),n.push(s)}while(B(",",!0));B("]"),"undefined"!==typeof s&&ee(e,t+"."+T,s)}}else n=K(!0),ee(e,t+"."+T,n);var o=r[i];o&&(n=[].concat(o).concat(n)),r[i]=n,B(",",!0),B(";",!0)}return r}var a=K(!0);return ee(e,t,a),a}function ee(e,t,r){e.setOption&&e.setOption(t,r)}function te(e){if(B("[",!0)){do{X(e,"option")}while(B(",",!0));B("]")}return e}for(;null!==(T=N());)switch(T){case"package":if(!M)throw z(T);H();break;case"import":if(!M)throw z(T);W();break;case"syntax":if(!M)throw z(T);G();break;case"option":X(j,T),B(";");break;default:if(Y(j,T)){M=!1;continue}throw z(T)}return A.filename=null,{package:k,imports:I,weakImports:C,syntax:R,root:t}}},2171:(e,t,r)=>{"use strict";e.exports=c;var n,i=r(9460),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function h(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=u(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},2552:(e,t,r)=>{"use strict";e.exports=s;var n=r(2171);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(9460);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},4162:(e,t,r)=>{"use strict";e.exports=h;var n=r(9784);((h.prototype=Object.create(n.prototype)).constructor=h).className="Root";var i,s,o,a=r(1189),c=r(386),l=r(5836),u=r(8123);function h(e){n.call(this,"",e),this.deferred=[],this.files=[]}function d(){}h.fromJSON=function(e,t){return t||(t=new h),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=u.path.resolve,h.prototype.fetch=u.fetch,h.prototype.load=function e(t,r,n){"function"===typeof r&&(n=r,r=void 0);var i=this;if(!n)return u.asPromise(e,i,t,r);var a=n===d;function c(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function l(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in o)return r}return null}function h(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){s.filename=e;var n,o=s(t,i,r),h=0;if(o.imports)for(;h<o.imports.length;++h)(n=l(o.imports[h])||i.resolvePath(e,o.imports[h]))&&p(n);if(o.weakImports)for(h=0;h<o.weakImports.length;++h)(n=l(o.weakImports[h])||i.resolvePath(e,o.weakImports[h]))&&p(n,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(d){c(d)}a||f||c(null,i)}function p(e,t){if(!(i.files.indexOf(e)>-1))if(i.files.push(e),e in o)a?h(e,o[e]):(++f,setTimeout((function(){--f,h(e,o[e])})));else if(a){var r;try{r=u.fs.readFileSync(e).toString("utf8")}catch(s){return void(t||c(s))}h(e,r)}else++f,i.fetch(e,(function(r,s){--f,n&&(r?t?f||c(null,i):c(r):h(e,s))}))}var f=0;u.isString(t)&&(t=[t]);for(var y,g=0;g<t.length;++g)(y=i.resolvePath("",t[g]))&&p(y);if(a)return i;f||c(null,i)},h.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,d)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return n.declaringField=t,t.extensionField=n,r.add(n),!0}return!1}h.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||f(0,e)||this.deferred.push(e);else if(e instanceof c)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof l)){if(e instanceof i)for(var t=0;t<this.deferred.length;)f(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},h.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},h._configure=function(e,t,r){i=e,s=t,o=r}},8393:e=>{"use strict";e.exports={}},2910:(e,t,r)=>{"use strict";t.Service=r(8090)},8090:(e,t,r)=>{"use strict";e.exports=i;var n=r(9460);function i(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,i,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(c){return a.emit("error",c,t),void setTimeout((function(){o(c)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},3548:(e,t,r)=>{"use strict";e.exports=a;var n=r(9784);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var i=r(5986),s=r(8123),o=r(2910);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,i=new o.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=s.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=s.codegen(["r","c"],s.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},3953:e=>{"use strict";e.exports=h;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,a=/\s/,c=/\\(.?)/g,l={0:"\0",r:"\r",n:"\n",t:"\t"};function u(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return l[t]||""}}))}function h(e,c){e=e.toString();var l=0,h=e.length,d=1,p=0,f={},y=[],g=null;function m(e){return Error("illegal "+e+" (line "+d+")")}function w(t){return e.charAt(t)}function v(t,r,n){var a,l={type:e.charAt(t++),lineEmpty:!1,leading:n},u=t-(c?2:3);do{if(--u<0||"\n"===(a=e.charAt(u))){l.lineEmpty=!0;break}}while(" "===a||"\t"===a);for(var h=e.substring(t,r).split(o),y=0;y<h.length;++y)h[y]=h[y].replace(c?s:i,"").trim();l.text=h.join("\n").trim(),f[d]=l,p=d}function b(t){var r=E(t),n=e.substring(t,r);return/^\s*\/{1,2}/.test(n)}function E(e){for(var t=e;t<h&&"\n"!==w(t);)t++;return t}function _(){if(y.length>0)return y.shift();if(g)return function(){var t="'"===g?n:r;t.lastIndex=l-1;var i=t.exec(e);if(!i)throw m("string");return l=t.lastIndex,S(g),g=null,u(i[1])}();var i,s,o,p,f,_=0===l;do{if(l===h)return null;for(i=!1;a.test(o=w(l));)if("\n"===o&&(_=!0,++d),++l===h)return null;if("/"===w(l)){if(++l===h)throw m("comment");if("/"===w(l))if(c){if(p=l,f=!1,b(l)){f=!0;do{if((l=E(l))===h)break;if(l++,!_)break}while(b(l))}else l=Math.min(h,E(l)+1);f&&(v(p,l,_),_=!0),d++,i=!0}else{for(f="/"===w(p=l+1);"\n"!==w(++l);)if(l===h)return null;++l,f&&(v(p,l-1,_),_=!0),++d,i=!0}else{if("*"!==(o=w(l)))return"/";p=l+1,f=c||"*"===w(p);do{if("\n"===o&&++d,++l===h)throw m("comment");s=o,o=w(l)}while("*"!==s||"/"!==o);++l,f&&(v(p,l-2,_),_=!0),i=!0}}}while(i);var A=l;if(t.lastIndex=0,!t.test(w(A++)))for(;A<h&&!t.test(w(A));)++A;var k=e.substring(l,l=A);return'"'!==k&&"'"!==k||(g=k),k}function S(e){y.push(e)}function A(){if(!y.length){var e=_();if(null===e)return null;S(e)}return y[0]}return Object.defineProperty({next:_,peek:A,push:S,skip:function(e,t){var r=A();if(r===e)return _(),!0;if(!t)throw m("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t,r=null;return void 0===e?(t=f[d-1],delete f[d-1],t&&(c||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(p<e&&A(),t=f[e],delete f[e],!t||t.lineEmpty||!c&&"/"!==t.type||(r=t.leading?null:t.text)),r}},"line",{get:function(){return d}})}h.unescape=u},4957:(e,t,r)=>{"use strict";e.exports=w;var n=r(9784);((w.prototype=Object.create(n.prototype)).constructor=w).className="Type";var i=r(386),s=r(5836),o=r(1189),a=r(9827),c=r(3548),l=r(2380),u=r(2171),h=r(3480),d=r(8123),p=r(4105),f=r(7998),y=r(7575),g=r(3613),m=r(5939);function w(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function v(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(w.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=w.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof l||((e.prototype=new l).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,l,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),w.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},w.fromJSON=function(e,t){var r=new w(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var l=Object.keys(t.fields),u=0;u<l.length;++u)r.add(("undefined"!==typeof t.fields[l[u]].keyType?a.fromJSON:o.fromJSON)(l[u],t.fields[l[u]]));if(t.oneofs)for(l=Object.keys(t.oneofs),u=0;u<l.length;++u)r.add(s.fromJSON(l[u],t.oneofs[l[u]]));if(t.nested)for(l=Object.keys(t.nested),u=0;u<l.length;++u){var h=t.nested[l[u]];r.add((void 0!==h.id?o.fromJSON:void 0!==h.fields?w.fromJSON:void 0!==h.values?i.fromJSON:void 0!==h.methods?c.fromJSON:n.fromJSON)(l[u],h))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},w.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},w.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},w.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},w.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),v(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),v(this)):n.prototype.add.call(this,e)},w.prototype.remove=function(e){if(e instanceof o&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),v(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),v(this)}return n.prototype.remove.call(this,e)},w.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},w.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},w.prototype.create=function(e){return new this.ctor(e)},w.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:h,types:t,util:d}),this.decode=f(this)({Reader:u,types:t,util:d}),this.verify=y(this)({types:t,util:d}),this.fromObject=g.fromObject(this)({types:t,util:d}),this.toObject=g.toObject(this)({types:t,util:d});var n=m[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},w.prototype.encode=function(e,t){return this.setup().encode(e,t)},w.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},w.prototype.decode=function(e,t){return this.setup().decode(e,t)},w.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},w.prototype.verify=function(e){return this.setup().verify(e)},w.prototype.fromObject=function(e){return this.setup().fromObject(e)},w.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},w.d=function(e){return function(t){d.decorateType(t,e)}}},7254:(e,t,r)=>{"use strict";var n=t,i=r(8123),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=o([0,0,0,1,1],7),n.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},8123:(e,t,r)=>{"use strict";var n,i,s=e.exports=r(9460),o=r(8393);s.codegen=r(496),s.fetch=r(7635),s.path=r(7468),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var a=/\\/g,c=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var l=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(l,(function(e,t){return t.toUpperCase()}))},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(4957));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var u=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(386));var t=new i("Enum"+u++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){if("object"!==typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var i=r.shift();if("__proto__"===i)return t;if(r.length>0)t[i]=e(t[i]||{},r,n);else{var s=t[i];s&&(n=[].concat(s).concat(n)),t[i]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(r(4162)))}})},3750:(e,t,r)=>{"use strict";e.exports=i;var n=r(9460);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"===typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},9460:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:()=>e,set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(7206),n.base64=r(1),n.EventEmitter=r(7111),n.float=r(802),n.inquire=r(7172),n.utf8=r(3861),n.pool=r(8236),n.LongBits=r(3750),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},7575:(e,t,r)=>{"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var l=e._fieldsArray[c].resolve(),u="m"+i.safeProp(l.name);if(l.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,l.name),l.map)t("if(!util.isObject(%s))",u)("return%j",s(l,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),a(t,l,"k[i]"),o(t,l,c,u+"[k[i]]")("}");else if(l.repeated)t("if(!Array.isArray(%s))",u)("return%j",s(l,"array"))("for(var i=0;i<%s.length;++i){",u),o(t,l,c,u+"[i]")("}");else{if(l.partOf){var h=i.safeProp(l.partOf.name);1===n[l.partOf.name]&&t("if(p%s===1)",h)("return%j",l.partOf.name+": multiple values"),n[l.partOf.name]=1,t("p%s=1",h)}o(t,l,c,u)}l.optional&&t("}")}return t("return null")};var n=r(386),i=r(8123);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function o(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var o=Object.keys(t.resolvedType.values),a=0;a<o.length;++a)e("case %i:",t.resolvedType.values[o[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}},5939:(e,t,r)=>{"use strict";var n=t,i=r(2380);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var s=this.lookup(n);s&&(e=s.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),o["@type"]=n,o}return this.toObject(e,t)}}},3480:(e,t,r)=>{"use strict";e.exports=h;var n,i=r(9460),s=i.LongBits,o=i.base64,a=i.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(y,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=s.from(e);return this._push(y,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(y,t.length(),t)},h.prototype.bool=function(e){return this._push(p,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=s.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var m=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var r=h.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}},2685:(e,t,r)=>{"use strict";e.exports=s;var n=r(3480);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(9460);function s(){n.call(this)}function o(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},7206:e=>{"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=!0;for(;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,o){r[n]=function(e){if(s)if(s=!1,e)o(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(a){s&&(s=!1,o(a))}}))}},1:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var i,s=null,o=[],a=0,c=0;t<r;){var l=e[t++];switch(c){case 0:o[a++]=n[l>>2],i=(3&l)<<4,c=1;break;case 1:o[a++]=n[i|l>>4],i=(15&l)<<2,c=2;break;case 2:o[a++]=n[i|l>>6],o[a++]=n[63&l],c=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=n[i],o[a++]=61,1===c&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=i[l]))throw Error(o);switch(a){case 0:n=l,a=1;break;case 1:t[r++]=n<<2|(48&l)>>4,n=l,a=2;break;case 2:t[r++]=(15&n)<<4|(60&l)>>2,n=l,a=3;break;case 3:t[r++]=(3&n)<<6|l,a=0}}if(1===a)throw Error(o);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},496:e=>{"use strict";function t(e,r){"string"===typeof e&&(r=e,e=void 0);var n=[];function i(e){if("string"!==typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var o=Object.keys(e),a=new Array(o.length+1),c=new Array(o.length),l=0;l<o.length;)a[l]=o[l],c[l]=e[o[l++]];return a[l]=r,Function.apply(null,a).apply(null,c)}return Function(r)()}for(var u=new Array(arguments.length-1),h=0;h<u.length;)u[h]=arguments[++h];if(h=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=u[h++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),h!==u.length)throw Error("parameter count mismatch");return n.push(e),i}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=s,i}e.exports=t,t.verbose=!1},7111:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},7635:(e,t,r)=>{"use strict";e.exports=s;var n=r(7206),i=r(7172)("fs");function s(e,t,r){return"function"===typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&i&&i.readFile?i.readFile(e,(function(n,i){return n&&"undefined"!==typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))})):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!==typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},802:e=>{"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2);e((i<<31|s+127<<23|8388607&Math.round(t*Math.pow(2,-s)*8388608))>>>0,r,n)}}function o(e,t,r){var n=e(t,r),i=2*(n>>31)+1,s=n>>>23&255,o=8388607&n;return 255===s?o?NaN:i*(1/0):0===s?1401298464324817e-60*i*o:i*Math.pow(2,s-150)*(o+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=o.bind(null,i),e.readFloatBE=o.bind(null,s)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function o(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(e,t,r,n,i,s){var o=n<0?1:0;if(o&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:2147483648,i,s+r);else if(isNaN(n))e(0,i,s+t),e(2146959360,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((o<<31|2146435072)>>>0,i,s+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,s+t),e((o<<31|a/4294967296)>>>0,i,s+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,i,s+t),e((o<<31|c+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}}function o(e,t,r,n,i){var s=e(n,i+t),o=e(n,i+r),a=2*(o>>31)+1,c=o>>>20&2047,l=4294967296*(1048575&o)+s;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=o.bind(null,i,0,4),e.readDoubleBE=o.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7172:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},7468:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};r.resolve=function(e,t,r){return r||(t=i(t)),n(t)?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},8236:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(r){if(r<1||r>i)return e(r);o+r>n&&(s=e(n),o=0);var a=t.call(s,o,o+=r);return 7&o&&(o=1+(7|o)),a}}},3861:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,s=[],o=0;t<r;)(n=e[t++])<128?s[o++]=n:n>191&&n<224?s[o++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[o++]=55296+(n>>10),s[o++]=56320+(1023&n)):s[o++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))},r.write=function(e,t,r){for(var n,i,s=r,o=0;o<e.length;++o)(n=e.charCodeAt(o))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(i=e.charCodeAt(o+1)))?(n=65536+((1023&n)<<10)+(1023&i),++o,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-s}},6232:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5073);function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function s(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function d(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),u(e/4294967296>>>0,t,r),u(e>>>0,t,r+4),t}function p(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),h(e>>>0,t,r),h(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=i,t.writeInt16BE=i,t.writeUint16LE=s,t.writeInt16LE=s,t.readInt32BE=o,t.readUint32BE=a,t.readInt32LE=c,t.readUint32LE=l,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=o(e,t),n=o(e,t+4);return 4294967296*r+n-4294967296*(n>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r-4294967296*(r>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=l(e,t);return 4294967296*l(e,t+4)+r},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=p,t.writeInt64LE=p,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n},t.writeUintBE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var s=1,o=e/8+i-1;o>=i;o--)r[o]=t/s&255,s*=256;return r},t.writeUintLE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+e/8;o++)r[o]=t/s&255,s*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},8284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6232),i=r(9116);function s(e,t,r){for(var i=1634760805,s=857760878,o=2036477234,a=1797285236,c=r[3]<<24|r[2]<<16|r[1]<<8|r[0],l=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],h=r[15]<<24|r[14]<<16|r[13]<<8|r[12],d=r[19]<<24|r[18]<<16|r[17]<<8|r[16],p=r[23]<<24|r[22]<<16|r[21]<<8|r[20],f=r[27]<<24|r[26]<<16|r[25]<<8|r[24],y=r[31]<<24|r[30]<<16|r[29]<<8|r[28],g=t[3]<<24|t[2]<<16|t[1]<<8|t[0],m=t[7]<<24|t[6]<<16|t[5]<<8|t[4],w=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],b=i,E=s,_=o,S=a,A=c,k=l,I=u,C=h,R=d,T=p,D=f,P=y,N=g,x=m,O=w,B=v,L=0;L<20;L+=2)A=(A^=R=R+(N=(N^=b=b+A|0)>>>16|N<<16)|0)>>>20|A<<12,k=(k^=T=T+(x=(x^=E=E+k|0)>>>16|x<<16)|0)>>>20|k<<12,I=(I^=D=D+(O=(O^=_=_+I|0)>>>16|O<<16)|0)>>>20|I<<12,C=(C^=P=P+(B=(B^=S=S+C|0)>>>16|B<<16)|0)>>>20|C<<12,I=(I^=D=D+(O=(O^=_=_+I|0)>>>24|O<<8)|0)>>>25|I<<7,C=(C^=P=P+(B=(B^=S=S+C|0)>>>24|B<<8)|0)>>>25|C<<7,k=(k^=T=T+(x=(x^=E=E+k|0)>>>24|x<<8)|0)>>>25|k<<7,A=(A^=R=R+(N=(N^=b=b+A|0)>>>24|N<<8)|0)>>>25|A<<7,k=(k^=D=D+(B=(B^=b=b+k|0)>>>16|B<<16)|0)>>>20|k<<12,I=(I^=P=P+(N=(N^=E=E+I|0)>>>16|N<<16)|0)>>>20|I<<12,C=(C^=R=R+(x=(x^=_=_+C|0)>>>16|x<<16)|0)>>>20|C<<12,A=(A^=T=T+(O=(O^=S=S+A|0)>>>16|O<<16)|0)>>>20|A<<12,C=(C^=R=R+(x=(x^=_=_+C|0)>>>24|x<<8)|0)>>>25|C<<7,A=(A^=T=T+(O=(O^=S=S+A|0)>>>24|O<<8)|0)>>>25|A<<7,I=(I^=P=P+(N=(N^=E=E+I|0)>>>24|N<<8)|0)>>>25|I<<7,k=(k^=D=D+(B=(B^=b=b+k|0)>>>24|B<<8)|0)>>>25|k<<7;n.writeUint32LE(b+i|0,e,0),n.writeUint32LE(E+s|0,e,4),n.writeUint32LE(_+o|0,e,8),n.writeUint32LE(S+a|0,e,12),n.writeUint32LE(A+c|0,e,16),n.writeUint32LE(k+l|0,e,20),n.writeUint32LE(I+u|0,e,24),n.writeUint32LE(C+h|0,e,28),n.writeUint32LE(R+d|0,e,32),n.writeUint32LE(T+p|0,e,36),n.writeUint32LE(D+f|0,e,40),n.writeUint32LE(P+y|0,e,44),n.writeUint32LE(N+g|0,e,48),n.writeUint32LE(x+m|0,e,52),n.writeUint32LE(O+w|0,e,56),n.writeUint32LE(B+v|0,e,60)}function o(e,t,r,n,o){if(void 0===o&&(o=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(0===o){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=(c=new Uint8Array(16)).length-t.length,c.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");c=t,l=o}for(var u=new Uint8Array(64),h=0;h<r.length;h+=64){s(u,c,e);for(var d=h;d<h+64&&d<r.length;d++)n[d]=r[d]^u[d-h];a(c,0,l)}return i.wipe(u),0===o&&i.wipe(c),n}function a(e,t,r){for(var n=1;r--;)n=n+(255&e[t])|0,e[t]=255&n,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=o,t.stream=function(e,t,r,n){return void 0===n&&(n=0),i.wipe(r),o(e,t,r,r,n)}},3642:(e,t,r)=>{"use strict";var n=r(8284),i=r(5629),s=r(9116),o=r(6232),a=r(8770);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),l=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,l=t.length+this.tagLength;if(i){if(i.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(l);return n.streamXOR(this._key,o,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},e.prototype.open=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),r),!a.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var u,h=t.length-this.tagLength;if(i){if(i.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(h);return n.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),u,4),s.wipe(o),u},e.prototype.clean=function(){return s.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,n){var a=new i.Poly1305(t);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var l=new Uint8Array(8);n&&o.writeUint64LE(n.length,l),a.update(l),o.writeUint64LE(r.length,l),a.update(l);for(var u=a.digest(),h=0;h<u.length;h++)e[h]=u[h];a.clean(),s.wipe(u),s.wipe(l)},e}();t.OK=l},8770:(e,t)=>{"use strict";function r(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,r){return~(e-1)&t|e-1&r},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=r,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==r(e,t)}},1412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return"undefined"!==typeof e.saveState&&"undefined"!==typeof e.restoreState&&"undefined"!==typeof e.cleanSavedState}},2497:(e,t,r)=>{"use strict";var n=r(5499),i=r(9116),s=function(){function e(e,t,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=n.hmac(this._hash,r,t);this._hmac=new n.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},e}();t.t=s},5499:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1412),i=r(8770),s=r(9116),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return e.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,r){var n=new o(e,t);n.update(r);var i=n.digest();return n.clean(),i},t.equal=i.equal},5073:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},5629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8770),i=r(9116);t.DIGEST_LENGTH=16;var s=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var n=e[2]|e[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=e[4]|e[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=e[6]|e[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=e[8]|e[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var l=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|l<<8),this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],l=this._h[5],u=this._h[6],h=this._h[7],d=this._h[8],p=this._h[9],f=this._r[0],y=this._r[1],g=this._r[2],m=this._r[3],w=this._r[4],v=this._r[5],b=this._r[6],E=this._r[7],_=this._r[8],S=this._r[9];r>=16;){var A=e[t+0]|e[t+1]<<8;i+=8191&A;var k=e[t+2]|e[t+3]<<8;s+=8191&(A>>>13|k<<3);var I=e[t+4]|e[t+5]<<8;o+=8191&(k>>>10|I<<6);var C=e[t+6]|e[t+7]<<8;a+=8191&(I>>>7|C<<9);var R=e[t+8]|e[t+9]<<8;c+=8191&(C>>>4|R<<12),l+=R>>>1&8191;var T=e[t+10]|e[t+11]<<8;u+=8191&(R>>>14|T<<2);var D=e[t+12]|e[t+13]<<8;h+=8191&(T>>>11|D<<5);var P=e[t+14]|e[t+15]<<8,N=0,x=N;x+=i*f,x+=s*(5*S),x+=o*(5*_),x+=a*(5*E),N=(x+=c*(5*b))>>>13,x&=8191,x+=l*(5*v),x+=u*(5*w),x+=h*(5*m),x+=(d+=8191&(D>>>8|P<<8))*(5*g);var O=N+=(x+=(p+=P>>>5|n)*(5*y))>>>13;O+=i*y,O+=s*f,O+=o*(5*S),O+=a*(5*_),N=(O+=c*(5*E))>>>13,O&=8191,O+=l*(5*b),O+=u*(5*v),O+=h*(5*w),O+=d*(5*m),N+=(O+=p*(5*g))>>>13,O&=8191;var B=N;B+=i*g,B+=s*y,B+=o*f,B+=a*(5*S),N=(B+=c*(5*_))>>>13,B&=8191,B+=l*(5*E),B+=u*(5*b),B+=h*(5*v),B+=d*(5*w);var L=N+=(B+=p*(5*m))>>>13;L+=i*m,L+=s*g,L+=o*y,L+=a*f,N=(L+=c*(5*S))>>>13,L&=8191,L+=l*(5*_),L+=u*(5*E),L+=h*(5*b),L+=d*(5*v);var M=N+=(L+=p*(5*w))>>>13;M+=i*w,M+=s*m,M+=o*g,M+=a*y,N=(M+=c*f)>>>13,M&=8191,M+=l*(5*S),M+=u*(5*_),M+=h*(5*E),M+=d*(5*b);var U=N+=(M+=p*(5*v))>>>13;U+=i*v,U+=s*w,U+=o*m,U+=a*g,N=(U+=c*y)>>>13,U&=8191,U+=l*f,U+=u*(5*S),U+=h*(5*_),U+=d*(5*E);var j=N+=(U+=p*(5*b))>>>13;j+=i*b,j+=s*v,j+=o*w,j+=a*m,N=(j+=c*g)>>>13,j&=8191,j+=l*y,j+=u*f,j+=h*(5*S),j+=d*(5*_);var F=N+=(j+=p*(5*E))>>>13;F+=i*E,F+=s*b,F+=o*v,F+=a*w,N=(F+=c*m)>>>13,F&=8191,F+=l*g,F+=u*y,F+=h*f,F+=d*(5*S);var z=N+=(F+=p*(5*_))>>>13;z+=i*_,z+=s*E,z+=o*b,z+=a*v,N=(z+=c*w)>>>13,z&=8191,z+=l*m,z+=u*g,z+=h*y,z+=d*f;var V=N+=(z+=p*(5*S))>>>13;V+=i*S,V+=s*_,V+=o*E,V+=a*b,N=(V+=c*v)>>>13,V&=8191,V+=l*w,V+=u*m,V+=h*g,V+=d*y,i=x=8191&(N=(N=((N+=(V+=p*f)>>>13)<<2)+N|0)+(x&=8191)|0),s=O+=N>>>=13,o=B&=8191,a=L&=8191,c=M&=8191,l=U&=8191,u=j&=8191,h=F&=8191,d=z&=8191,p=V&=8191,t+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=l,this._h[6]=u,this._h[7]=h,this._h[8]=d,this._h[9]=p},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,n=e.length;if(this._leftover){(t=16-this._leftover)>n&&(t=n);for(var i=0;i<t;i++)this._buffer[this._leftover+i]=e[r+i];if(n-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(t=n-n%16,this._blocks(e,r,t),r+=t,n-=t),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=e[r+i];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=s,t.oneTimeAuth=function(e,t){var r=new s(e);r.update(t);var n=r.digest();return r.clean(),n},t.equal=function(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&n.equal(e,r)}},6271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const n=r(933),i=r(6232),s=r(9116);function o(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.defaultRandomSource;return r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.defaultRandomSource;const r=o(4,e),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n};const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource;if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const c=r.length,l=256-256%c;for(;e>0;){const t=o(Math.ceil(256*e/l),n);for(let n=0;n<t.length&&e>0;n++){const s=t[n];s<l&&(i+=r.charAt(s%c),e--)}(0,s.wipe)(t)}return i}t.randomString=c,t.randomStringForEntropy=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultRandomSource;const i=Math.ceil(e/(Math.log(r.length)/Math.LN2));return c(i,r,n)}},8136:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!==typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let r=0;r<t.length;r+=65536)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,65536)));return t}}},8188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const n=r(9116);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=r(5883);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let n=0;n<r.length;n++)r[n]=t[n];return(0,n.wipe)(t),r}}},933:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const n=r(8136),i=r(8188);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},4888:(e,t,r)=>{"use strict";var n=r(6232),i=r(9116);t.k=32,t.cn=64;var s=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=a(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,s=t<<3,o=t%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.state),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,r,i,s){for(;s>=64;){for(var a=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],p=t[6],f=t[7],y=0;y<16;y++){var g=i+4*y;e[y]=n.readUint32BE(r,g)}for(y=16;y<64;y++){var m=e[y-2],w=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,v=((m=e[y-15])>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;e[y]=(w+e[y-7]|0)+(v+e[y-16]|0)}for(y=0;y<64;y++){w=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&p)|0)+(f+(o[y]+e[y]|0)|0)|0,v=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&l^c&l)|0;f=p,p=d,d=h,h=u+w|0,u=l,l=c,c=a,a=w+v|0}t[0]+=a,t[1]+=c,t[2]+=l,t[3]+=u,t[4]+=h,t[5]+=d,t[6]+=p,t[7]+=f,i+=64,s-=64}return i}t.vp=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},9116:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},2029:(e,t,r)=>{"use strict";t.gi=t.Au=t._w=t.KS=t.kz=void 0;const n=r(6271),i=r(9116);function s(e){const t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.kz=32,t.KS=32;const o=new Uint8Array(32);o[0]=9;const a=s([56129,1]);function c(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,r){const n=~(r-1);for(let i=0;i<16;i++){const r=n&(e[i]^t[i]);e[i]^=r,t[i]^=r}}function u(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function h(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function d(e,t,r){let n,i,s=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,p=0,f=0,y=0,g=0,m=0,w=0,v=0,b=0,E=0,_=0,S=0,A=0,k=0,I=0,C=0,R=0,T=0,D=0,P=0,N=0,x=0,O=0,B=0,L=r[0],M=r[1],U=r[2],j=r[3],F=r[4],z=r[5],V=r[6],K=r[7],$=r[8],q=r[9],H=r[10],W=r[11],G=r[12],Y=r[13],Q=r[14],J=r[15];n=t[0],s+=n*L,o+=n*M,a+=n*U,c+=n*j,l+=n*F,u+=n*z,h+=n*V,d+=n*K,p+=n*$,f+=n*q,y+=n*H,g+=n*W,m+=n*G,w+=n*Y,v+=n*Q,b+=n*J,n=t[1],o+=n*L,a+=n*M,c+=n*U,l+=n*j,u+=n*F,h+=n*z,d+=n*V,p+=n*K,f+=n*$,y+=n*q,g+=n*H,m+=n*W,w+=n*G,v+=n*Y,b+=n*Q,E+=n*J,n=t[2],a+=n*L,c+=n*M,l+=n*U,u+=n*j,h+=n*F,d+=n*z,p+=n*V,f+=n*K,y+=n*$,g+=n*q,m+=n*H,w+=n*W,v+=n*G,b+=n*Y,E+=n*Q,_+=n*J,n=t[3],c+=n*L,l+=n*M,u+=n*U,h+=n*j,d+=n*F,p+=n*z,f+=n*V,y+=n*K,g+=n*$,m+=n*q,w+=n*H,v+=n*W,b+=n*G,E+=n*Y,_+=n*Q,S+=n*J,n=t[4],l+=n*L,u+=n*M,h+=n*U,d+=n*j,p+=n*F,f+=n*z,y+=n*V,g+=n*K,m+=n*$,w+=n*q,v+=n*H,b+=n*W,E+=n*G,_+=n*Y,S+=n*Q,A+=n*J,n=t[5],u+=n*L,h+=n*M,d+=n*U,p+=n*j,f+=n*F,y+=n*z,g+=n*V,m+=n*K,w+=n*$,v+=n*q,b+=n*H,E+=n*W,_+=n*G,S+=n*Y,A+=n*Q,k+=n*J,n=t[6],h+=n*L,d+=n*M,p+=n*U,f+=n*j,y+=n*F,g+=n*z,m+=n*V,w+=n*K,v+=n*$,b+=n*q,E+=n*H,_+=n*W,S+=n*G,A+=n*Y,k+=n*Q,I+=n*J,n=t[7],d+=n*L,p+=n*M,f+=n*U,y+=n*j,g+=n*F,m+=n*z,w+=n*V,v+=n*K,b+=n*$,E+=n*q,_+=n*H,S+=n*W,A+=n*G,k+=n*Y,I+=n*Q,C+=n*J,n=t[8],p+=n*L,f+=n*M,y+=n*U,g+=n*j,m+=n*F,w+=n*z,v+=n*V,b+=n*K,E+=n*$,_+=n*q,S+=n*H,A+=n*W,k+=n*G,I+=n*Y,C+=n*Q,R+=n*J,n=t[9],f+=n*L,y+=n*M,g+=n*U,m+=n*j,w+=n*F,v+=n*z,b+=n*V,E+=n*K,_+=n*$,S+=n*q,A+=n*H,k+=n*W,I+=n*G,C+=n*Y,R+=n*Q,T+=n*J,n=t[10],y+=n*L,g+=n*M,m+=n*U,w+=n*j,v+=n*F,b+=n*z,E+=n*V,_+=n*K,S+=n*$,A+=n*q,k+=n*H,I+=n*W,C+=n*G,R+=n*Y,T+=n*Q,D+=n*J,n=t[11],g+=n*L,m+=n*M,w+=n*U,v+=n*j,b+=n*F,E+=n*z,_+=n*V,S+=n*K,A+=n*$,k+=n*q,I+=n*H,C+=n*W,R+=n*G,T+=n*Y,D+=n*Q,P+=n*J,n=t[12],m+=n*L,w+=n*M,v+=n*U,b+=n*j,E+=n*F,_+=n*z,S+=n*V,A+=n*K,k+=n*$,I+=n*q,C+=n*H,R+=n*W,T+=n*G,D+=n*Y,P+=n*Q,N+=n*J,n=t[13],w+=n*L,v+=n*M,b+=n*U,E+=n*j,_+=n*F,S+=n*z,A+=n*V,k+=n*K,I+=n*$,C+=n*q,R+=n*H,T+=n*W,D+=n*G,P+=n*Y,N+=n*Q,x+=n*J,n=t[14],v+=n*L,b+=n*M,E+=n*U,_+=n*j,S+=n*F,A+=n*z,k+=n*V,I+=n*K,C+=n*$,R+=n*q,T+=n*H,D+=n*W,P+=n*G,N+=n*Y,x+=n*Q,O+=n*J,n=t[15],b+=n*L,E+=n*M,_+=n*U,S+=n*j,A+=n*F,k+=n*z,I+=n*V,C+=n*K,R+=n*$,T+=n*q,D+=n*H,P+=n*W,N+=n*G,x+=n*Y,O+=n*Q,B+=n*J,s+=38*E,o+=38*_,a+=38*S,c+=38*A,l+=38*k,u+=38*I,h+=38*C,d+=38*R,p+=38*T,f+=38*D,y+=38*P,g+=38*N,m+=38*x,w+=38*O,v+=38*B,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=p,e[9]=f,e[10]=y,e[11]=g,e[12]=m,e[13]=w,e[14]=v,e[15]=b}function p(e,t){d(e,t,t)}function f(e,t){const r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),f=s(),y=s(),g=s(),m=s();for(let s=0;s<31;s++)r[s]=e[s];r[31]=127&e[31]|64,r[0]&=248,function(e,t){for(let r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(n,t);for(let s=0;s<16;s++)o[s]=n[s];i[0]=y[0]=1;for(let s=254;s>=0;--s){const e=r[s>>>3]>>>(7&s)&1;l(i,o,e),l(f,y,e),u(g,i,f),h(i,i,f),u(f,o,y),h(o,o,y),p(y,g),p(m,i),d(i,f,i),d(f,o,g),u(g,i,f),h(i,i,f),p(o,i),h(f,y,m),d(i,f,a),u(i,i,y),d(f,f,i),d(i,y,m),d(y,o,n),p(o,g),l(i,o,e),l(f,y,e)}for(let s=0;s<16;s++)n[s+16]=i[s],n[s+32]=f[s],n[s+48]=o[s],n[s+64]=y[s];const w=n.subarray(32),v=n.subarray(16);!function(e,t){const r=s();for(let n=0;n<16;n++)r[n]=t[n];for(let n=253;n>=0;n--)p(r,r),2!==n&&4!==n&&d(r,r,t);for(let n=0;n<16;n++)e[n]=r[n]}(w,w),d(v,v,w);const b=new Uint8Array(32);return function(e,t){const r=s(),n=s();for(let i=0;i<16;i++)n[i]=t[i];c(n),c(n),c(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let t=1;t<15;t++)r[t]=n[t]-65535-(r[t-1]>>16&1),r[t-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const e=r[15]>>16&1;r[14]&=65535,l(n,r,1-e)}for(let i=0;i<16;i++)e[2*i]=255&n[i],e[2*i+1]=n[i]>>8}(b,v),b}function y(e){return f(e,o)}function g(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const r=new Uint8Array(e);return{publicKey:y(r),secretKey:r}}t._w=g,t.Au=function(e){const t=(0,n.randomBytes)(32,e),r=g(t);return(0,i.wipe)(t),r},t.gi=function(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==t.kz)throw new Error("X25519: incorrect public key length");const i=f(e,r);if(n){let e=0;for(let t=0;t<i.length;t++)e|=i[t];if(0===e)throw new Error("X25519: invalid shared key")}return i}},6755:(e,t)=>{"use strict";const r=Math.exp;e.exports=function(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let t,n,i=0,s=0,o=0,a={};return a.push=function(a,c){if(n){const l=1-r(-(a-n)/e),u=c-t;t=l*c+(1-l)*t,i=(1-l)*(i+u*(l*u)),s=Math.sqrt(i),o=t+l*u}else t=c;n=a},a.movingAverage=function(){return t},a.variance=function(){return i},a.deviation=function(){return s},a.forecast=function(){return o},a}},7186:(e,t,r)=>{"use strict";const n=Object.freeze({});function i(e){if("object"!==typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._operations=[],this._written=!1}i.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},i.prototype.put=function(e,t,r){this._checkWritten();const i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;return e=this.db._serializeKey(e),t=this.db._serializeValue(t),this._put(e,t,null!=r?r:n),this},i.prototype._put=function(e,t,r){this._operations.push({...r,type:"put",key:e,value:t})},i.prototype.del=function(e,t){this._checkWritten();const r=this.db._checkKey(e);if(r)throw r;return e=this.db._serializeKey(e),this._del(e,null!=t?t:n),this},i.prototype._del=function(e,t){this._operations.push({...t,type:"del",key:e})},i.prototype.clear=function(){return this._checkWritten(),this._clear(),this},i.prototype._clear=function(){this._operations=[]},i.prototype.write=function(e,t){if(this._checkWritten(),"function"===typeof e&&(t=e),"function"!==typeof t)throw new Error("write() requires a callback argument");"object"===typeof e&&null!==e||(e={}),this._written=!0,this._write(e,t)},i.prototype._write=function(e,t){this.db._batch(this._operations,e,t)},i.prototype._nextTick=r(7873),e.exports=i},5400:(e,t,r)=>{"use strict";function n(e){if("object"!==typeof e||null===e)throw new TypeError("First argument must be an abstract-leveldown compliant store");this.db=e,this._ended=!1,this._nexting=!1}n.prototype.next=function(e){var t=this;let r=this;if(void 0===e)r=new Promise((function(t,r){e=function(e,n,i){e?r(e):void 0===n&&void 0===i?t():t([n,i])}}));else if("function"!==typeof e)throw new Error("next() requires a callback argument");return this._ended?(this._nextTick(e,new Error("cannot call next() after end()")),r):this._nexting?(this._nextTick(e,new Error("cannot call next() before previous next() has completed")),r):(this._nexting=!0,this._next((function(r){t._nexting=!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e(r,...i)})),r)},n.prototype._next=function(e){this._nextTick(e)},n.prototype.seek=function(e){if(this._ended)throw new Error("cannot call seek() after end()");if(this._nexting)throw new Error("cannot call seek() before next() has completed");e=this.db._serializeKey(e),this._seek(e)},n.prototype._seek=function(e){},n.prototype.end=function(e){let t;if(void 0===e)t=new Promise((function(t,r){e=function(e){e?r(e):t()}}));else if("function"!==typeof e)throw new Error("end() requires a callback argument");return this._ended?(this._nextTick(e,new Error("end() already called on iterator")),t):(this._ended=!0,this._end(e),t)},n.prototype._end=function(e){this._nextTick(e)},n.prototype[Symbol.asyncIterator]=async function*(){try{let e;for(;void 0!==(e=await this.next());)yield e}finally{this._ended||await this.end()}},n.prototype._nextTick=r(7873),e.exports=n},7025:(e,t,r)=>{"use strict";const n=r(7987),i=r(5586),s=r(5240),o=r(5400),a=r(7186),c=r(9375).R,l=r(9375).F,u=Object.prototype.hasOwnProperty,h=["lt","lte","gt","gte"];function d(e){this.status="new",this.supports=n(e,{status:!0})}function p(e,t){const r={};for(const n in t){if(!u.call(t,n))continue;if("start"===n||"end"===n)throw new Error('Legacy range options ("start" and "end") have been removed');let i=t[n];f(n)&&(i=e._serializeKey(i)),r[n]=i}return r}function f(e){return-1!==h.indexOf(e)}d.prototype.open=function(e,t){const r=this.status;if("function"===typeof e&&(t=e),"function"!==typeof t)throw new Error("open() requires a callback argument");"object"===typeof e&&null!==e||(e={}),e.createIfMissing=!1!==e.createIfMissing,e.errorIfExists=!!e.errorIfExists,this.status="opening",this._open(e,(e=>{if(e)return this.status=r,t(e);this.status="open",t()}))},d.prototype._open=function(e,t){this._nextTick(t)},d.prototype.close=function(e){const t=this.status;if("function"!==typeof e)throw new Error("close() requires a callback argument");this.status="closing",this._close((r=>{if(r)return this.status=t,e(r);this.status="closed",e()}))},d.prototype._close=function(e){this._nextTick(e)},d.prototype.get=function(e,t,r){if("function"===typeof t&&(r=t),"function"!==typeof r)throw new Error("get() requires a callback argument");const n=this._checkKey(e);if(n)return this._nextTick(r,n);e=this._serializeKey(e),"object"===typeof t&&null!==t||(t={}),t.asBuffer=!1!==t.asBuffer,this._get(e,t,r)},d.prototype._get=function(e,t,r){this._nextTick((function(){r(new Error("NotFound"))}))},d.prototype.getMany=function(e,t,r){if(r=c(t,r),r=s.fromCallback(r),t=l(t),function(e,t){if(!e.isOperational())return e._nextTick(t,new Error("Database is not open")),!0;return!1}(this,r))return r.promise;if(!Array.isArray(e))return this._nextTick(r,new Error("getMany() requires an array argument")),r.promise;if(0===e.length)return this._nextTick(r,null,[]),r.promise;"boolean"!==typeof t.asBuffer&&(t={...t,asBuffer:!0});const n=new Array(e.length);for(let i=0;i<e.length;i++){const t=e[i],s=this._checkKey(t);if(s)return this._nextTick(r,s),r.promise;n[i]=this._serializeKey(t)}return this._getMany(n,t,r),r.promise},d.prototype._getMany=function(e,t,r){this._nextTick(r,null,new Array(e.length).fill(void 0))},d.prototype.put=function(e,t,r,n){if("function"===typeof r&&(n=r),"function"!==typeof n)throw new Error("put() requires a callback argument");const i=this._checkKey(e)||this._checkValue(t);if(i)return this._nextTick(n,i);e=this._serializeKey(e),t=this._serializeValue(t),"object"===typeof r&&null!==r||(r={}),this._put(e,t,r,n)},d.prototype._put=function(e,t,r,n){this._nextTick(n)},d.prototype.del=function(e,t,r){if("function"===typeof t&&(r=t),"function"!==typeof r)throw new Error("del() requires a callback argument");const n=this._checkKey(e);if(n)return this._nextTick(r,n);e=this._serializeKey(e),"object"===typeof t&&null!==t||(t={}),this._del(e,t,r)},d.prototype._del=function(e,t,r){this._nextTick(r)},d.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"===typeof t&&(r=t),"function"===typeof e&&(r=e),"function"!==typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return this._nextTick(r,new Error("batch(array) requires an array argument"));if(0===e.length)return this._nextTick(r);"object"===typeof t&&null!==t||(t={});const n=new Array(e.length);for(let i=0;i<e.length;i++){if("object"!==typeof e[i]||null===e[i])return this._nextTick(r,new Error("batch(array) element must be an object and not `null`"));const t=Object.assign({},e[i]);if("put"!==t.type&&"del"!==t.type)return this._nextTick(r,new Error("`type` must be 'put' or 'del'"));const s=this._checkKey(t.key);if(s)return this._nextTick(r,s);if(t.key=this._serializeKey(t.key),"put"===t.type){const e=this._checkValue(t.value);if(e)return this._nextTick(r,e);t.value=this._serializeValue(t.value)}n[i]=t}this._batch(n,t,r)},d.prototype._batch=function(e,t,r){this._nextTick(r)},d.prototype.clear=function(e,t){if("function"===typeof e)t=e;else if("function"!==typeof t)throw new Error("clear() requires a callback argument");(e=p(this,e)).reverse=!!e.reverse,e.limit="limit"in e?e.limit:-1,this._clear(e,t)},d.prototype._clear=function(e,t){e.keys=!0,e.values=!1,e.keyAsBuffer=!0,e.valueAsBuffer=!0;const r=this._iterator(e),n={},i=e=>{if(e)return r.end((function(){t(e)}));r.next(((e,s)=>e?i(e):void 0===s?r.end(t):void this._del(s,n,i)))};i()},d.prototype._setupIteratorOptions=function(e){return(e=p(this,e)).reverse=!!e.reverse,e.keys=!1!==e.keys,e.values=!1!==e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=!1!==e.keyAsBuffer,e.valueAsBuffer=!1!==e.valueAsBuffer,e},d.prototype.iterator=function(e){return"object"===typeof e&&null!==e||(e={}),e=this._setupIteratorOptions(e),this._iterator(e)},d.prototype._iterator=function(e){return new o(this)},d.prototype._chainedBatch=function(){return new a(this)},d.prototype._serializeKey=function(e){return e},d.prototype._serializeValue=function(e){return e},d.prototype._checkKey=function(e){return null===e||void 0===e?new Error("key cannot be `null` or `undefined`"):i(e)&&0===e.length?new Error("key cannot be an empty Buffer"):""===e?new Error("key cannot be an empty String"):Array.isArray(e)&&0===e.length?new Error("key cannot be an empty Array"):void 0},d.prototype._checkValue=function(e){if(null===e||void 0===e)return new Error("value cannot be `null` or `undefined`")},d.prototype.isOperational=function(){return"open"===this.status||this._isOperational()},d.prototype._isOperational=function(){return!1},d.prototype._nextTick=r(7873),e.exports=d},6701:(e,t,r)=>{"use strict";t.AbstractLevelDOWN=r(7025),t.AbstractIterator=r(5400),t.AbstractChainedBatch=r(7186)},9375:(e,t)=>{"use strict";t.R=function(e,t){return"function"===typeof e?e:t},t.F=function(e){return"object"===typeof e&&null!==e?e:{}}},7873:(e,t,r)=>{"use strict";const n=r(4183);e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];0===r.length?n(e):n((()=>e(...r)))}},6622:e=>{function t(e){const t=new globalThis.AbortController;function r(){t.abort();for(const t of e)t&&t.removeEventListener&&t.removeEventListener("abort",r)}for(const n of e)if(n&&n.addEventListener){if(n.aborted){r();break}n.addEventListener("abort",r)}return t.signal}e.exports=t,e.exports.anySignal=t},2009:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=c(e),o=s[0],a=s[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),u=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===a&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[u++]=255&t);1===a&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,c=n-i;a<c;a+=o)s.push(l(e,a,a+o>c?c:a+o));1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1976:(e,t,r)=>{"use strict";const{Buffer:n}=r(9778),i=Symbol.for("BufferList");function s(e){if(!(this instanceof s))return new s(e);s._init.call(this,e)}s._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},s.prototype._new=function(e){return new s(e)},s.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},s.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let n=0;n<t;n++)r+=this._bufs[n].length;return r},s.prototype.get=function(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]},s.prototype.slice=function(e,t){return"number"===typeof e&&e<0&&(e+=this.length),"number"===typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},s.prototype.copy=function(e,t,r,i){if(("number"!==typeof r||r<0)&&(r=0),("number"!==typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||n.alloc(0);if(i<=0)return e||n.alloc(0);const s=!!e,o=this._offset(r),a=i-r;let c=a,l=s&&t||0,u=o[1];if(0===r&&i===this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,l),l+=this._bufs[t].length;return e}if(c<=this._bufs[o[0]].length-u)return s?this._bufs[o[0]].copy(e,t,u,u+c):this._bufs[o[0]].slice(u,u+c);s||(e=n.allocUnsafe(a));for(let n=o[0];n<this._bufs.length;n++){const t=this._bufs[n].length-u;if(!(c>t)){this._bufs[n].copy(e,l,u,u+c),l+=t;break}this._bufs[n].copy(e,l,u),l+=t,c-=t,u&&(u=0)}return e.length>l?e.slice(0,l):e},s.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!==typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},s.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},s.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},s.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"===typeof e&&(e=e.toString()),this._appendBuffer(n.from(e));return this},s.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},s.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"===typeof t&&(r=t,t=void 0),"function"===typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"===typeof e?e=n.from([e]):"string"===typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let s=i[0],o=i[1];for(;s<this._bufs.length;s++){const t=this._bufs[s];for(;o<t.length;){if(t.length-o>=e.length){const r=t.indexOf(e,o);if(-1!==r)return this._reverseOffset([s,r]);o=t.length-e.length+1}else{const t=this._reverseOffset([s,o]);if(this._match(t,e))return t;o++}}o=0}return-1},s.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){s.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.slice(r,r+e[t])[t](0)}}(t)}(),s.prototype._isBufferList=function(e){return e instanceof s||s.isBufferList(e)},s.isBufferList=function(e){return null!=e&&e[i]},e.exports=s},2017:(e,t,r)=>{"use strict";const n=r(6314);e.exports=function(e){return"function"===typeof e.stream?n(e.stream()):n(new Response(e).body)}},3844:(e,t,r)=>{const n=r(5125);e.exports=e=>{let t;"function"===typeof(e=e||{})?(t=e,e={}):t=e.onEnd;let r,i,s,o=new n;const a=e=>i?i(e):(o.push(e),r),c=e=>s?r:a({done:!1,value:e}),l=e=>s?r:(s=!0,e?(e=>(o=new n,i?i({error:e}):(o.push({error:e}),r)))(e):a({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:()=>{if(!o.isEmpty()){if(e.writev){let e;const t=[];for(;!o.isEmpty();){if(e=o.shift(),e.error)throw e.error;t.push(e.value)}return{done:e.done,value:t}}const t=o.shift();if(t.error)throw t.error;return t}return s?{done:!0}:new Promise(((t,n)=>{i=s=>(i=null,s.error?n(s.error):e.writev&&!s.done?t({done:s.done,value:[s.value]}):t(s),r)}))},return:()=>(o=new n,l(),{done:!0}),throw:e=>(l(e),{done:!0}),push:c,end:l},!t)return r;const u=r;return r={[Symbol.asyncIterator](){return this},next:()=>u.next(),throw:e=>(u.throw(e),t&&(t(e),t=null),{done:!0}),return:()=>(u.return(),t&&(t(),t=null),{done:!0}),push:c,end:e=>(u.end(e),t&&(t(e),t=null),r)},r}},6314:e=>{"use strict";e.exports=async function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.getReader();try{for(;;){const e=await r.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&r.cancel(),r.releaseLock()}}},9778:(e,t,r)=>{"use strict";const n=r(2009),i=r(4038),s="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,r)}function l(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Y(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Y(e,ArrayBuffer)||e&&Y(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(Y(e,SharedArrayBuffer)||e&&Y(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=function(e){if(c.isBuffer(e)){const t=0|f(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||Q(e.length)?a(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|f(e))}function d(e){const t=e.length<0?0:0|f(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function y(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Y(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(l(e,s)===l(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(l(e,s+n)!==l(t,n)){r=!1;break}if(r)return s}return-1}function b(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Q(n))return o;e[r+o]=n}return o}function E(e,t,r,n){return G(H(t,e.length-r),e,r,n)}function _(e,t,r,n){return G(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return G(W(t),e,r,n)}function A(e,t,r,n){return G(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128===(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=C));return r}(n)}t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"===typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Y(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Y(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(Y(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),l=this.slice(n,i),u=e.slice(t,r);for(let c=0;c<a;++c)if(l[c]!==u[c]){s=l[c],o=u[c];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function R(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function D(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=t;s<r;++s)i+=J[e[s]];return i}function P(e,t,r){const n=e.slice(t,r);let i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function N(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,i,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n,i){V(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function B(e,t,r,n,i){V(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function L(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,s){return t=+t,r>>>=0,s||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,s){return t=+t,r>>>=0,s||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){K(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){x(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){x(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);x(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=c.isBuffer(e)?e:c.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const j={};function F(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function V(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){K(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||$(t,e.length-(r+1))}(n,i,s)}function K(e,t){if("number"!==typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,r){if(Math.floor(e)!==e)throw K(e,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=z(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function W(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function G(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Y(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Q(e){return e!==e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"===typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},1438:e=>{"use strict";e.exports=function(e,t){if("string"===typeof e)return o(e);if("number"===typeof e)return s(e,t);return null},e.exports.format=s,e.exports.parse=o;var t=/\B(?=(\d{3})+(?!\d))/g,r=/(?:\.0*|(\.[^0]+)0+)$/,n={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function s(e,i){if(!Number.isFinite(e))return null;var s=Math.abs(e),o=i&&i.thousandsSeparator||"",a=i&&i.unitSeparator||"",c=i&&void 0!==i.decimalPlaces?i.decimalPlaces:2,l=Boolean(i&&i.fixedDecimals),u=i&&i.unit||"";u&&n[u.toLowerCase()]||(u=s>=n.pb?"PB":s>=n.tb?"TB":s>=n.gb?"GB":s>=n.mb?"MB":s>=n.kb?"KB":"B");var h=(e/n[u.toLowerCase()]).toFixed(c);return l||(h=h.replace(r,"$1")),o&&(h=h.split(".").map((function(e,r){return 0===r?e.replace(t,o):e})).join(".")),h+a+u}function o(e){if("number"===typeof e&&!isNaN(e))return e;if("string"!==typeof e)return null;var t,r=i.exec(e),s="b";return r?(t=parseFloat(r[1]),s=r[4].toLowerCase()):(t=parseInt(e,10),s="b"),isNaN(t)?null:Math.floor(n[s]*t)}},4037:(e,t,r)=>{"use strict";var n=r(2506),i=r(9722),s=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"===typeof r&&s(e,".prototype.")>-1?i(r):r}},9722:(e,t,r)=>{"use strict";var n=r(3350),i=r(2506),s=i("%Function.prototype.apply%"),o=i("%Function.prototype.call%"),a=i("%Reflect.apply%",!0)||n.call(o,s),c=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(d){l=null}e.exports=function(e){var t=a(n,o,arguments);if(c&&l){var r=c(t,"length");r.configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var h=function(){return a(n,s,arguments)};l?l(e.exports,"apply",{value:h}):e.exports.apply=h},5240:(e,t,r)=>{"use strict";var n=r(9650);t.fromCallback=function(e,t){if(void 0===e){var r=new Promise((function(t,r){e=function(e,n){e?r(e):t(n)}}));e[void 0!==t?t:"promise"]=r}else if("function"!==typeof e)throw new TypeError("Callback must be a function");return e},t.fromPromise=function(e,t){if(void 0===t)return e;e.then((function(e){n((()=>t(null,e)))})).catch((function(e){n((()=>t(e)))}))}},9650:e=>{e.exports="function"===typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e)},8926:function(e,t,r){e.exports=function(){var e=e||function(e,t){var n;if("undefined"!==typeof window&&window.crypto&&(n=window.crypto),"undefined"!==typeof self&&self.crypto&&(n=self.crypto),"undefined"!==typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!==typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&"undefined"!==typeof r.g&&r.g.crypto&&(n=r.g.crypto),!n)try{n=r(2480)}catch(g){}var i=function(){if(n){if("function"===typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(g){}if("function"===typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(g){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),o={},a=o.lib={},c=a.Base={extend:function(e){var t=s(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var o=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=o<<24-(n+s)%4*8}else for(var a=0;a<i;a+=4)t[n+a>>>2]=r[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(i());return new l.init(t,e)}}),u=o.enc={},h=u.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(r,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(r,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r,n=this._data,i=n.words,s=n.sigBytes,o=this.blockSize,a=s/(4*o),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*o,u=e.min(4*c,s);if(c){for(var h=0;h<c;h+=o)this._doProcessBlock(i,h);r=i.splice(0,c),n.sigBytes-=u}return new l.init(r,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),y=(a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new y.HMAC.init(e,r).finalize(t)}}}),o.algo={});return o}(Math);return e}()},9517:function(e,t,r){!function(t,n){var i;e.exports=(i=r(8926),function(e){var t=i,r=t.lib,n=r.WordArray,s=r.Hasher,o=t.algo,a=[],c=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;n<=r;n++)if(!(t%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;i<64;)t(n)&&(i<8&&(a[i]=r(e.pow(n,.5))),c[i]=r(e.pow(n,1/3)),i++),n++}();var l=[],u=o.SHA256=s.extend({_doReset:function(){this._hash=new n.init(a.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],h=r[6],d=r[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var f=l[p-15],y=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=l[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[p]=y+l[p-7]+m+l[p-16]}var w=n&i^n&s^i&s,v=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&h)+c[p]+l[p];d=h,h=u,u=a,a=o+b|0,o=s,s=i,i=n,n=b+(v+w)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+h|0,r[7]=r[7]+d|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(u),t.HmacSHA256=s._createHmacHelper(u)}(Math),i.SHA256)}()},8296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(229);function i(e){const t={};return e.encrypted_key&&(t.encrypted_key=n.fromBase64url(e.encrypted_key)),e.header&&(t.header=e.header),t}function s(e){const t={};return e.encrypted_key&&(t.encrypted_key=n.toBase64url(e.encrypted_key)),e.header&&(t.header=e.header),t}t.default={fromSplit:function(e){const[t,r,n,i,s]=e,o={ciphertext:i,iv:n,protected:t,tag:s};return r&&(o.recipients=[{encrypted_key:r}]),o},decode:function(e){const t={ciphertext:n.toBase64url(e.ciphertext),protected:n.toBase64url(e.protected),iv:n.toBase64url(e.iv),tag:n.toBase64url(e.tag)};return e.aad&&(t.aad=n.toBase64url(e.aad)),e.recipients&&(t.recipients=e.recipients.map(s)),e.unprotected&&(t.unprotected=e.unprotected),t},encode:function(e){const t={ciphertext:n.fromBase64url(e.ciphertext),protected:n.fromBase64url(e.protected),iv:n.fromBase64url(e.iv),tag:n.fromBase64url(e.tag)};return e.aad&&(t.aad=n.fromBase64url(e.aad)),e.recipients&&(t.recipients=e.recipients.map(i)),e.unprotected&&(t.unprotected=e.unprotected),t}}},8990:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decode=t.encode=t.toGeneral=t.code=t.name=void 0;const a=o(r(3744)),c=o(r(8296)),l=s(r(8204));function u(e){return"payload"in e&&"string"===typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function h(e){return"ciphertext"in e&&"string"===typeof e.ciphertext&&"iv"in e&&"string"===typeof e.iv&&"protected"in e&&"string"===typeof e.protected&&"tag"in e&&"string"===typeof e.tag}function d(e){if("string"===typeof e){const t=e.split(".");if(3===t.length)return a.default.fromSplit(t);if(5===t.length)return c.default.fromSplit(t);throw new Error("Not a valid JOSE string")}if(u(e)||h(e))return e;throw new Error("Not a valid unencoded JOSE object")}t.name="dag-jose",t.code=133,t.toGeneral=d,t.encode=function(e){let t;if("string"===typeof e&&(e=d(e)),u(e))t=a.default.encode(e);else{if(!h(e))throw new Error("Not a valid JOSE object");t=c.default.encode(e)}return new Uint8Array(l.encode(t))},t.decode=function(e){let t;try{t=l.decode(e)}catch(n){throw new Error("Not a valid DAG-JOSE object")}if("payload"in(r=t)&&r.payload instanceof Uint8Array&&"signatures"in r&&Array.isArray(r.signatures))return a.default.decode(t);if(function(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}(t))return c.default.decode(t);throw new Error("Not a valid DAG-JOSE object");var r}},3744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(229),i=r(6629);function s(e){const t={signature:n.fromBase64url(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=n.fromBase64url(e.protected)),t}function o(e){const t={signature:n.toBase64url(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=n.toBase64url(e.protected)),t}t.default={fromSplit:function(e){const[t,r,s]=e;return{payload:r,signatures:[{protected:t,signature:s}],link:i.CID.decode(n.fromBase64url(r))}},encode:function(e){const t=n.fromBase64url(e.payload);try{i.CID.decode(t)}catch(r){throw new Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(s)}},decode:function(e){const t={payload:n.toBase64url(e.payload),signatures:e.signatures.map(o)};return t.link=i.CID.decode(new Uint8Array(e.payload)),t}}},229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase64url=t.toBase64url=void 0;const n=r(4426);t.toBase64url=function(e){return n.base64url.encode(e).slice(1)},t.fromBase64url=function(e){return n.base64url.decode(`u${e}`)}},7241:e=>{const t=function(){let e;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length;)e=r.shift()(e);return e},r=e=>e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next),n=e=>e&&"function"===typeof e.sink&&r(e.source),i=e=>t=>(e.sink(t),e.source),s=function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];if(n(s[0])){const e=s[0];s[0]=()=>e.source}else if(r(s[0])){const e=s[0];s[0]=()=>e}if(s.length>1&&n(s[s.length-1])&&(s[s.length-1]=s[s.length-1].sink),s.length>2)for(let t=1;t<s.length-1;t++)n(s[t])&&(s[t]=i(s[t]));return t(...s)};e.exports=s,e.exports.pipe=s,e.exports.rawPipe=t,e.exports.isIterable=r,e.exports.isDuplex=n},7067:(e,t,r)=>{const n=r(5125);e.exports=e=>{let t;"function"===typeof(e=e||{})?(t=e,e={}):t=e.onEnd;let r,i,s,o=new n;const a=e=>i?i(e):(o.push(e),r),c=e=>s?r:a({done:!1,value:e}),l=e=>s?r:(s=!0,e?(e=>(o=new n,i?i({error:e}):(o.push({error:e}),r)))(e):a({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:()=>{if(!o.isEmpty()){if(e.writev){let e;const t=[];for(;!o.isEmpty();){if(e=o.shift(),e.error)throw e.error;t.push(e.value)}return{done:e.done,value:t}}const t=o.shift();if(t.error)throw t.error;return t}return s?{done:!0}:new Promise(((t,n)=>{i=s=>(i=null,s.error?n(s.error):e.writev&&!s.done?t({done:s.done,value:[s.value]}):t(s),r)}))},return:()=>(o=new n,l(),{done:!0}),throw:e=>(l(e),{done:!0}),push:c,end:l},!t)return r;const u=r;return r={[Symbol.asyncIterator](){return this},next:()=>u.next(),throw:e=>(u.throw(e),t&&(t(e),t=null),{done:!0}),return:()=>(u.return(),t&&(t(),t=null),{done:!0}),push:c,end:e=>(u.end(e),t&&(t(e),t=null),r)},r}},312:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,s=7*i,o=365.25*i;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,c){c=c||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return c.long?function(e){var s=Math.abs(e);if(s>=i)return a(e,s,i,"day");if(s>=n)return a(e,s,n,"hour");if(s>=r)return a(e,s,r,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=i)return Math.round(e/i)+"d";if(s>=n)return Math.round(e/n)+"h";if(s>=r)return Math.round(e/r)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8392:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(8472)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},8472:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,s,o=null;function a(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!a.enabled)return;const s=a,o=Number(new Date),c=o-(r||o);s.diff=c,s.prev=r,s.curr=o,r=o,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");let l=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";l++;const i=t.formatters[r];if("function"===typeof i){const t=n[l];e=i.call(s,t),n.splice(l,1),l--}return e})),t.formatArgs.call(s,n);const u=s.log||t.log;u.apply(s,n)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{o=e}}),"function"===typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"===typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(312),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},1022:(e,t,r)=>{"use strict";const{AbstractChainedBatch:n}=r(6701),i=Symbol("operations");e.exports=class extends n{constructor(e){super(e),this[i]=[]}_put(e,t,r){this[i].push({...r,type:"put",key:e,value:t})}_del(e,t){this[i].push({...t,type:"del",key:e})}_clear(){this[i]=[]}_write(e,t){this.db.batch(this[i],e,t)}}},7318:(e,t,r)=>{"use strict";const{AbstractIterator:n}=r(6701),i=r(2534),s=r(5023).R,o=Symbol("options"),a=Symbol("iterator"),c=Symbol("operations"),l=Symbol("promise");function u(e,t){n.call(this,e),this[o]=t,this[a]=null,this[c]=[]}i(u,n),u.prototype.setDb=function(e){this[a]=e.iterator(this[o]);for(const t of this[c].splice(0,this[c].length))this[a][t.method](...t.args)},u.prototype.next=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("open"===this.db.status)return this[a].next(...t);const n=s(t,l,(function(e,t){return void 0===e&&void 0===t?void 0:[e,t]}));return"opening"===this.db.status?this[c].push({method:"next",args:t}):this._nextTick(n,new Error("Database is not open")),n[l]||this},u.prototype.seek=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("open"===this.db.status)this[a].seek(...t);else{if("opening"!==this.db.status)throw new Error("Database is not open");this[c].push({method:"seek",args:t})}},u.prototype.end=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if("open"===this.db.status)return this[a].end(...t);const n=s(t,l);return"opening"===this.db.status?this[c].push({method:"end",args:t}):this._nextTick(n,new Error("Database is not open")),n[l]||this};for(const h of["next","seek","end"])u.prototype["_"+h]=function(){throw new Error("Did not expect private method to be called: "+h)};e.exports=u},5479:(e,t,r)=>{"use strict";const{AbstractLevelDOWN:n}=r(6701),i=r(2534),s=r(7318),o=r(1022),a=r(5023).R,c=["put","get","getMany","del","batch","clear"],l=["approximateSize","compactRange"],u=Symbol("innerDb"),h=Symbol("operations"),d=Symbol("promise");function p(e){n.call(this,e.supports||{});for(const t of l)"function"!==typeof e[t]||this.supports.additionalMethods[t]||(this.supports.additionalMethods[t]=!0);this[u]=e,this[h]=[],function(e){const t=Object.keys(e.supports.additionalMethods);for(const r of c.concat(t))e[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("batch"===r&&0===t.length)return new o(this);if("open"===this.status)return this[u][r](...t);const i=a(t,d);return"opening"===this.status?this[h].push({method:r,args:t}):this._nextTick(i,new Error("Database is not open")),i[d]};e.iterator=function(e){if("open"===this.status)return this[u].iterator(e);if("opening"===this.status){const t=new s(this,e);return this[h].push({iterator:t}),t}throw new Error("Database is not open")};for(const r of c.concat(["iterator"]))e["_"+r]=function(){throw new Error("Did not expect private method to be called: "+r)}}(this)}i(p,n),p.prototype.type="deferred-leveldown",Object.defineProperty(p.prototype,"_db",{enumerable:!0,get(){return this[u]}}),p.prototype._open=function(e,t){const r=e=>{if(e||"open"!==this[u].status)return t(e||new Error("Database is not open"));const r=this[h];this[h]=[];for(const t of r)t.iterator?t.iterator.setDb(this[u]):this[u][t.method](...t.args);if(this[h].length>0)throw new Error("Did not expect further operations");t()};"new"===this[u].status||"closed"===this[u].status?this[u].open(e,r):this._nextTick(r)},p.prototype._close=function(e){this[u].close(e)},p.prototype._isOperational=function(){return"opening"===this.status},e.exports=p,e.exports.DeferredIterator=s},5023:(e,t)=>{"use strict";t.R=function(e,t,r){let n=e[e.length-1];if("function"!==typeof n){const i=new Promise(((t,i)=>{e.push(n=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];e?i(e):t(r?r(...s):s[0])})}));n[t]=i}return n}},2096:e=>{"use strict";const t=()=>{const e=new Error("Delay aborted");return e.name="AbortError",e},r=e=>{let{clearTimeout:r,setTimeout:n,willResolve:i}=e;return function(e){let s,o,a,{value:c,signal:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l&&l.aborted)return Promise.reject(t());const u=r||clearTimeout,h=()=>{u(s),a(t())},d=()=>{l&&l.removeEventListener("abort",h)},p=new Promise(((t,r)=>{o=()=>{d(),i?t(c):r(c)},a=r,s=(n||setTimeout)(o,e)}));return l&&l.addEventListener("abort",h,{once:!0}),p.clear=()=>{u(s),s=null,o()},p}},n=e=>{const t=r({...e,willResolve:!0});return t.reject=r({...e,willResolve:!1}),t.range=(e,r,n)=>t(((e,t)=>Math.floor(Math.random()*(t-e+1)+e))(e,r),n),t},i=n();i.createWithTimers=n,e.exports=i,e.exports.default=i},8718:e=>{"use strict";function t(e,t){t=t||{};this._head=0,this._tail=0,this._capacity=t.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(e)&&this._fromArray(e)}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r||t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(void 0===e)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(void 0===e)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(t>=r||t<-r)){t<0&&(t+=r),t=this._head+t&this._capacityMask;var i,s=this._list[t];if(e<r/2){for(i=e;i>0;i--)this._list[t]=this._list[t=t-1+n&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(i=r-1-e;i>0;i--)this._list[t]=this._list[t=t+1+n&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+n&this._capacityMask}return s}}},t.prototype.remove=function(e,t){var r,n=e,i=t;if(n===(0|n)&&this._head!==this._tail){var s=this.size(),o=this._list.length;if(!(n>=s||n<-s||t<1)){if(n<0&&(n+=s),1===t||!t)return(r=new Array(1))[0]=this.removeOne(n),r;if(0===n&&n+t>=s)return r=this.toArray(),this.clear(),r;var a;for(n+t>s&&(t=s-n),r=new Array(t),a=0;a<t;a++)r[a]=this._list[this._head+n+a&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===s){for(this._tail=this._tail-t+o&this._capacityMask,a=t;a>0;a--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+o&this._capacityMask,a=t-1;a>0;a--)this._list[n=n+1+o&this._capacityMask]=void 0;return r}if(n<s/2){for(this._head=this._head+e+t+o&this._capacityMask,a=e;a>0;a--)this.unshift(this._list[n=n-1+o&this._capacityMask]);for(n=this._head-1+o&this._capacityMask;i>0;)this._list[n=n-1+o&this._capacityMask]=void 0,i--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+o&this._capacityMask,a=s-(t+e);a>0;a--)this.push(this._list[n++]);for(n=this._tail;i>0;)this._list[n=n+1+o&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var i,s,o,a=arguments.length,c=this._list.length,l=2;if(!n||r<n/2){for(s=new Array(r),i=0;i<r;i++)s[i]=this._list[this._head+i&this._capacityMask];for(0===t?(o=[],r>0&&(this._head=this._head+r+c&this._capacityMask)):(o=this.remove(r,t),this._head=this._head+r+c&this._capacityMask);a>l;)this.unshift(arguments[--a]);for(i=r;i>0;i--)this.unshift(s[i-1])}else{var u=(s=new Array(n-(r+t))).length;for(i=0;i<u;i++)s[i]=this._list[this._head+r+t+i&this._capacityMask];for(0===t?(o=[],r!=n&&(this._tail=this._head+r+c&this._capacityMask)):(o=this.remove(r,t),this._tail=this._tail-u+c&this._capacityMask);l<a;)this.push(arguments[l++]);for(i=0;i<u;i++)this.push(s[i])}return o}return this.remove(r,t)}}},t.prototype.clear=function(){this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){for(var t=0;t<e.length;t++)this.push(e[t])},t.prototype._copyArray=function(e){var t,r=[],n=this._list,i=n.length;if(e||this._head>this._tail){for(t=this._head;t<i;t++)r.push(n[t]);for(t=0;t<this._tail;t++)r.push(n[t])}else for(t=this._head;t<this._tail;t++)r.push(n[t]);return r},t.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},e.exports=t},5157:function(e){e.exports=function(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}},5711:(e,t,r)=>{"use strict";const n=r(6701).AbstractLevelDOWN,i=r(6701).AbstractChainedBatch,s=r(6701).AbstractIterator,o=r(2534),a=r(2957),c=r(8520).EncodingError,l=["approximateSize","compactRange"];function u(e,t){if(!(this instanceof u))return new u(e,t);const r=e.supports||{},i=r.additionalMethods||{};n.call(this,r),this.supports.encodings=!0,this.supports.additionalMethods={},l.forEach((function(t){const r="function"===typeof e[t];(i[t]||r)&&(this.supports.additionalMethods[t]=!0,this[t]=function(e,r,n,i){return e=this.codec.encodeKey(e,n),r=this.codec.encodeKey(r,n),this.db[t](e,r,n,i)})}),this),"undefined"===typeof(t=t||{}).keyEncoding&&(t.keyEncoding="utf8"),"undefined"===typeof t.valueEncoding&&(t.valueEncoding="utf8"),this.db=e,this.codec=new a(t)}function h(e,t){s.call(this,e),this.codec=e.codec,this.keys=t.keys,this.values=t.values,this.opts=this.codec.encodeLtgt(t),this.it=e.db.iterator(this.opts)}function d(e,t){i.call(this,e),this.codec=e.codec,this.batch=e.db.batch()}e.exports=u,o(u,n),u.prototype.type="encoding-down",u.prototype._serializeKey=u.prototype._serializeValue=function(e){return e},u.prototype._open=function(e,t){this.db.open(e,t)},u.prototype._close=function(e){this.db.close(e)},u.prototype._put=function(e,t,r,n){e=this.codec.encodeKey(e,r),t=this.codec.encodeValue(t,r),this.db.put(e,t,r,n)},u.prototype._get=function(e,t,r){e=this.codec.encodeKey(e,t),t.asBuffer=this.codec.valueAsBuffer(t),this.db.get(e,t,((e,n)=>{if(e)return r(e);try{n=this.codec.decodeValue(n,t)}catch(e){return r(new c(e))}r(null,n)}))},u.prototype._getMany=function(e,t,r){e=e.map((e=>this.codec.encodeKey(e,t))),t.asBuffer=this.codec.valueAsBuffer(t),this.db.getMany(e,t,((e,n)=>{if(e)return r(e);const i=new Array(n.length);for(let s=0;s<n.length;s++)if(void 0!==n[s])try{i[s]=this.codec.decodeValue(n[s],t)}catch(e){return r(new c(e))}else i[s]=void 0;r(null,i)}))},u.prototype._del=function(e,t,r){e=this.codec.encodeKey(e,t),this.db.del(e,t,r)},u.prototype._chainedBatch=function(){return new d(this)},u.prototype._batch=function(e,t,r){e=this.codec.encodeBatch(e,t),this.db.batch(e,t,r)},u.prototype._iterator=function(e){return e.keyAsBuffer=this.codec.keyAsBuffer(e),e.valueAsBuffer=this.codec.valueAsBuffer(e),new h(this,e)},u.prototype._clear=function(e,t){e=this.codec.encodeLtgt(e),this.db.clear(e,t)},o(h,s),h.prototype._next=function(e){this.it.next(((t,r,n)=>{if(t)return e(t);try{r=this.keys&&"undefined"!==typeof r?this.codec.decodeKey(r,this.opts):void 0,n=this.values&&"undefined"!==typeof n?this.codec.decodeValue(n,this.opts):void 0}catch(t){return e(new c(t))}e(null,r,n)}))},h.prototype._seek=function(e){e=this.codec.encodeKey(e,this.opts),this.it.seek(e)},h.prototype._end=function(e){this.it.end(e)},o(d,i),d.prototype._put=function(e,t,r){e=this.codec.encodeKey(e,r),t=this.codec.encodeValue(t,r),this.batch.put(e,t)},d.prototype._del=function(e,t){e=this.codec.encodeKey(e,t),this.batch.del(e)},d.prototype._clear=function(){this.batch.clear()},d.prototype._write=function(e,t){this.batch.write(e,t)}},7963:e=>{"use strict";function t(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"===typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(i){n.message=e.message,n.stack=e.stack;const r=function(){};r.prototype=Object.create(Object.getPrototypeOf(e));return t(new r,n)}}},3634:(e,t,r)=>{"use strict";const n=r(5413);t.zN=n.EventIterator,n.EventIterator},5413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const t={value:e,done:!1};if(this.pullQueue.length){const e=this.pullQueue.shift();e&&e.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{const t=Promise.reject(e);t.catch((()=>{})),this.pushQueue.push(t)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:e=>{const t=this.pushQueue.shift();return t?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((e,t)=>{this.pullQueue.push({resolve:e,reject:t})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class n{constructor(e){let{highWaterMark:t=100,lowWaterMark:n=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new r;i.highWaterMark=t,i.lowWaterMark=n,i.removeCallback=e({push:e=>i.push(e),stop:()=>i.stop(),fail:e=>i.fail(e),on:(e,t)=>{i.eventHandlers[e]=t}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}}t.EventIterator=n,t.default=n},7143:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,o),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},7465:e=>{"use strict";var t,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}y(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&y(e,"error",t,r)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,s,o,l;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"===typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function y(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"===typeof c)n(c,this,t);else{var l=c.length,u=f(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1167:e=>{e.exports=class{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},5125:(e,t,r)=>{const n=r(1167);e.exports=class{constructor(e){this.hwm=e||16,this.head=new n(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const t=this.head;this.head=t.next=new n(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(void 0===e&&this.tail.next){const e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}}},5187:(e,t)=>{"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.BASE;const n=e.length;for(let r=0;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}Object.defineProperty(t,"__esModule",{value:!0}),r.BASE=2166136261,t.default=r,e.exports=r},5369:(e,t,r)=>{"use strict";var n=r(460),i=Object.prototype.toString,s=Object.prototype.hasOwnProperty,o=function(e,t,r){for(var n=0,i=e.length;n<i;n++)s.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},a=function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},c=function(e,t,r){for(var n in e)s.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))};e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=r),"[object Array]"===i.call(e)?o(e,t,s):"string"===typeof e?a(e,t,s):c(e,t,s)}},222:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,i="[object Function]";e.exports=function(e){var s=this;if("function"!==typeof s||n.call(s)!==i)throw new TypeError(t+s);for(var o,a=r.call(arguments,1),c=function(){if(this instanceof o){var t=s.apply(this,a.concat(r.call(arguments)));return Object(t)===t?t:this}return s.apply(e,a.concat(r.call(arguments)))},l=Math.max(0,s.length-a.length),u=[],h=0;h<l;h++)u.push("$"+h);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),s.prototype){var d=function(){};d.prototype=s.prototype,o.prototype=new d,d.prototype=null}return o}},3350:(e,t,r)=>{"use strict";var n=r(222);e.exports=Function.prototype.bind||n},2506:(e,t,r)=>{"use strict";var n,i=SyntaxError,s=Function,o=TypeError,a=function(e){try{return s('"use strict"; return ('+e+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(T){c=null}var l=function(){throw new o},u=c?function(){try{return l}catch(e){try{return c(arguments,"callee").get}catch(t){return l}}}():l,h=r(697)(),d=Object.getPrototypeOf||function(e){return e.__proto__},p={},f="undefined"===typeof Uint8Array?n:d(Uint8Array),y={"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":p,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?d((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?d((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(r=d(i.prototype))}return y[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=r(3350),v=r(8316),b=w.call(Function.call,Array.prototype.concat),E=w.call(Function.apply,Array.prototype.splice),_=w.call(Function.call,String.prototype.replace),S=w.call(Function.call,String.prototype.slice),A=w.call(Function.call,RegExp.prototype.exec),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,C=function(e){var t=S(e,0,1),r=S(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return _(e,k,(function(e,t,r,i){n[n.length]=r?_(i,I,"$1"):t||e})),n},R=function(e,t){var r,n=e;if(v(m,n)&&(n="%"+(r=m[n])[0]+"%"),v(y,n)){var s=y[n];if(s===p&&(s=g(n)),"undefined"===typeof s&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/g,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=C(e),n=r.length>0?r[0]:"",s=R("%"+n+"%",t),a=s.name,l=s.value,u=!1,h=s.alias;h&&(n=h[0],E(r,b([0,1],h)));for(var d=1,p=!0;d<r.length;d+=1){var f=r[d],g=S(f,0,1),m=S(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==f&&p||(u=!0),v(y,a="%"+(n+="."+f)+"%"))l=y[a];else if(null!=l){if(!(f in l)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&d+1>=r.length){var w=c(l,f);l=(p=!!w)&&"get"in w&&!("originalValue"in w.get)?w.get:l[f]}else p=v(l,f),l=l[f];p&&!u&&(y[a]=l)}}return l}},4430:(e,t,r)=>{"use strict";const n=r(1620),{fromString:i}=r(6765);class s{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._options=e,this._popCount=0,this._parent=t,this._posAtParent=r,this._children=new n,this.key=null}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t)return t.value}async del(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);r&&r.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce(((e,t)=>t instanceof s?e+t.leafCount():e+1),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e)t instanceof s?yield*t.eachLeafSeries():yield t;return[]}serialize(e,t){return t(this._children.reduce(((r,n,i)=>(n&&(n instanceof s?r.push(n.serialize(e,t)):r.push(e(n,i))),r)),[]))}asyncTransform(e,t){return l(this,e,t)}toJSON(){return this.serialize(a,c)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e),r=t.bucket._at(t.pos);if(!(r instanceof s))return r&&r.key===e?r:void 0}async _findPlace(e){const t=this._options.hash("string"===typeof e?i(e):e),r=await t.take(this._options.bits),n=this._children.get(r);return n instanceof s?n._findPlace(t):{bucket:this,pos:r,hash:t,existingChild:n}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){const e=new s(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(t.existingChild.hash);return r.bucket._putAt(r,t.existingChild.key,t.existingChild.value),e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)||this._popCount++,this._children.set(e,t)}_delAt(e){if(-1===e)throw new Error("Invalid position");this._children.get(e)&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent&&this._popCount<=1)if(1===this._popCount){const e=this._children.find(o);if(e&&!(e instanceof s)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(r,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function o(e){return Boolean(e)}function a(e,t){return e.key}function c(e){return e}async function l(e,t,r){const n=[];for(const i of e._children.compactArray())if(i instanceof s)await l(i,t,r);else{const r=await t(i);n.push({bitField:e._children.bitField(),children:r})}return r(n)}e.exports=s},7633:e=>{"use strict";const t=[255,254,252,248,240,224,192,128],r=[1,3,7,15,31,63,127,255];function n(e,n,i){const s=function(e,n){return t[e]&r[Math.min(n+e-1,7)]}(n,i);return(e&s)>>>n}e.exports=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+8*this._currentBytePos}totalBits(){return 8*this._value.length}take(e){let t=e,r=0;for(;t&&this._haveBits();){const e=this._value[this._currentBytePos],i=this._currentBitPos+1,s=Math.min(i,t);r=(r<<s)+n(e,i-s,s),t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return r}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}},8329:(e,t,r)=>{"use strict";const n=r(7633),{concat:i}=r(2110);class s{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let r=0;for(;t>0;){const e=this._buffers[this._currentBufferIndex],n=Math.min(e.availableBits(),t);r=(r<<n)+e.take(n),t-=n,this._availableBits-=n,0===e.availableBits()&&this._currentBufferIndex++}return r}untake(e){let t=e;for(;t>0;){const e=this._buffers[this._currentBufferIndex],r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r),t-=r,this._availableBits+=r,this._currentBufferIndex>0&&e.totalBits()===e.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth?i([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),r=new n(t);this._buffers.push(r),this._availableBits+=r.availableBits()}}e.exports=function(e){return function(t){return t instanceof s?t:new s(t,e)}},e.exports.InfiniteHash=s},7431:(e,t,r)=>{"use strict";const n=r(4430),i=r(8329);e.exports={createHAMT:function(e){if(!e||!e.hashFn)throw new Error("please define an options.hashFn");const t={bits:e.bits||8,hash:i(e.hashFn)};return new n(t)},Bucket:n}},697:(e,t,r)=>{"use strict";var n="undefined"!==typeof Symbol&&Symbol,i=r(3297);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},3297:e=>{"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:(e,t,r)=>{"use strict";var n=r(3297);e.exports=function(){return n()&&!!Symbol.toStringTag}},8316:(e,t,r)=>{"use strict";var n=r(3350);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},4737:e=>{e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},4038:(e,t)=>{t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-l;else{if(s===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=l}return(p?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*c-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&a,p+=f,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[r+p]=255&o,p+=f,o/=256,l-=8);e[r+p-f]|=128*y}},2534:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},8974:e=>{"use strict";const t="[a-fA-F\\d:]",r=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${t})|(?<=${t})(?=\\s|$))`:"",n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",s=`\n(?:\n(?:${i}:){7}(?:${i}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${i}:){6}(?:${n}|:${i}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${i}:){5}(?::${n}|(?::${i}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${i}:){4}(?:(?::${i}){0,1}:${n}|(?::${i}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${i}:){3}(?:(?::${i}){0,2}:${n}|(?::${i}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${i}:){2}(?:(?::${i}){0,3}:${n}|(?::${i}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${i}:){1}(?:(?::${i}){0,4}:${n}|(?::${i}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${i}){0,5}:${n}|(?::${i}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp(`(?:^${n}$)|(?:^${s}$)`),a=new RegExp(`^${n}$`),c=new RegExp(`^${s}$`),l=e=>e&&e.exact?o:new RegExp(`(?:${r(e)}${n}${r(e)})|(?:${r(e)}${s}${r(e)})`,"g");l.v4=e=>e&&e.exact?a:new RegExp(`${r(e)}${n}${r(e)}`,"g"),l.v6=e=>e&&e.exact?c:new RegExp(`${r(e)}${s}${r(e)}`,"g"),e.exports=l},7201:function(e){!function(t){"use strict";const r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")},i=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),o="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(o,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${o})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${o})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${r}\\.${r}\\.${r}\\.${r}(${o})?$`,"i")};function l(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;let r,n,i=0,s=-1,o=(e.match(c.zoneIndex)||[])[0];for(o&&(o=o.substring(1),e=e.replace(/%.+$/,""));(s=e.indexOf(":",s+1))>=0;)i++;if("::"===e.substr(0,2)&&i--,"::"===e.substr(-2,2)&&i--,i>t)return null;for(n=t-i,r=":";n--;)r+="0:";return":"===(e=e.replace("::",r))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){const t=e.split(":"),r=[];for(let e=0;e<t.length;e++)r.push(parseInt(t[e],16));return r}(),zoneId:o}}function u(e,t,r,n){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let i,s=0;for(;n>0;){if(i=r-n,i<0&&(i=0),e[s]>>i!==t[s]>>i)return!1;n-=r,s+=1}return!0}function h(e){if(s.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(i.test(e))return parseInt(e,8);throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function d(e,t){for(;e.length<t;)e=`0${e}`;return e}const p={};p.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");let t,r;for(t=0;t<e.length;t++)if(r=e[t],!(0<=r&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){let r;if(void 0===t&&(r=e,e=r[0],t=r[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return u(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,s;for(n=3;n>=0;n-=1){if(i=this.octets[n],!(i in r))return null;if(s=r[i],t&&0!==s)return null;8!==s&&(t=!0),e+=s}return 32-e},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),p.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[];let s=0;for(;s<4;)i.push(parseInt(r[s],10)|255^parseInt(n[s],10)),s++;return new this(i)}catch(t){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(e){return null!==this.parser(e)},p.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(t){return!1}},p.IPv4.isValidFourPartDecimal=function(e){return!(!p.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{for(t=this.parseCIDR(e),n=t[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],r=0;r<4;)i.push(parseInt(n[r],10)&parseInt(s[r],10)),r++;return new this(i)}catch(o){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(e){const t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},p.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const r=[this.parse(t[1]),e];return Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(e){let t,r,i;if(t=e.match(n.fourOctet))return function(){const e=t.slice(1,6),n=[];for(let t=0;t<e.length;t++)r=e[t],n.push(h(r));return n}();if(t=e.match(n.longValue)){if(i=h(t[1]),i>4294967295||i<0)throw new Error("ipaddr: address outside defined range");return function(){const e=[];let t;for(t=0;t<=24;t+=8)e.push(i>>t&255);return e}().reverse()}return(t=e.match(n.twoOctet))?function(){const e=t.slice(1,4),r=[];if(i=h(e[1]),i>16777215||i<0)throw new Error("ipaddr: address outside defined range");return r.push(h(e[0])),r.push(i>>16&255),r.push(i>>8&255),r.push(255&i),r}():(t=e.match(n.threeOctet))?function(){const e=t.slice(1,5),r=[];if(i=h(e[2]),i>65535||i<0)throw new Error("ipaddr: address outside defined range");return r.push(h(e[0])),r.push(h(e[1])),r.push(i>>8&255),r.push(255&i),r}():null},p.IPv4.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");const t=[0,0,0,0];let r=0;const n=Math.floor(e/8);for(;r<n;)t[r]=255,r++;return n<4&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},p.IPv6=function(){function e(e,t){let r,n;if(16===e.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(e[r]<<8|e[r+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(r=0;r<this.parts.length;r++)if(n=this.parts[r],!(0<=n&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){let r;if(void 0===t&&(r=e,e=r[0],t=r[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return u(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let s=7;s>=0;s-=1){if(n=this.parts[s],!(n in r))return null;if(i=r[n],t&&0!==i)return null;16!==i&&(t=!0),e+=i}return 128-e},e.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){let e;const t=[],r=this.parts;for(let n=0;n<r.length;n++)e=r[n],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(d(this.parts[t].toString(16),4));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const e=this.parts.slice(-2),t=e[0],r=e[1];return new p.IPv4([t>>8,255&t,r>>8,255&r])},e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":");let t="";return this.zoneId&&(t=`%${this.zoneId}`),e+t},e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g,t=this.toNormalizedString();let r,n=0,i=-1;for(;r=e.exec(t);)r[0].length>i&&(n=r.index,i=r[0].length);return i<0?t:`${t.substring(0,n)}::${t.substring(n+i)}`},e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},e}(),p.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[];let s=0;for(;s<16;)i.push(parseInt(r[s],10)|255^parseInt(n[s],10)),s++;return new this(i)}catch(t){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${t})`)}},p.IPv6.isIPv6=function(e){return null!==this.parser(e)},p.IPv6.isValid=function(e){if("string"===typeof e&&-1===e.indexOf(":"))return!1;try{const t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(t){return!1}},p.IPv6.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{for(t=this.parseCIDR(e),n=t[0].toByteArray(),s=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],r=0;r<16;)i.push(parseInt(n[r],10)&parseInt(s[r],10)),r++;return new this(i)}catch(o){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${o})`)}},p.IPv6.parse=function(e){const t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},p.IPv6.parseCIDR=function(e){let t,r,n;if((r=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(r[2]),t>=0&&t<=128))return n=[this.parse(r[1]),t],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(e){let t,r,n,i,s,o;if(n=e.match(c.deprecatedTransitional))return this.parser(`::ffff:${n[1]}`);if(c.native.test(e))return l(e,8);if((n=e.match(c.transitional))&&(o=n[6]||"",t=l(n[1].slice(0,-1)+o,6),t.parts)){for(s=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<s.length;r++)if(i=s[r],!(0<=i&&i<=255))return null;return t.parts.push(s[0]<<8|s[1]),t.parts.push(s[2]<<8|s[3]),{parts:t.parts,zoneId:t.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>128)throw new Error("ipaddr: invalid IPv6 prefix length");const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(e/8);for(;r<n;)t[r]=255,r++;return n<16&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},p.fromByteArray=function(e){const t=e.length;if(4===t)return new p.IPv4(e);if(16===t)return new p.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(e){return p.IPv6.isValid(e)||p.IPv4.isValid(e)},p.parse=function(e){if(p.IPv6.isValid(e))return p.IPv6.parse(e);if(p.IPv4.isValid(e))return p.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(e){try{return p.IPv6.parseCIDR(e)}catch(t){try{return p.IPv4.parseCIDR(e)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(e){const t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},p.subnetMatch=function(e,t,r){let n,i,s,o;for(i in void 0!==r&&null!==r||(r="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,i))for(s=t[i],!s[0]||s[0]instanceof Array||(s=[s]),n=0;n<s.length;n++)if(o=s[n],e.kind()===o[0].kind()&&e.match.apply(e,o))return i;return r},e.exports?e.exports=p:t.ipaddr=p}(this)},7220:e=>{const t=function(){let e;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length;)e=r.shift()(e);return e},r=e=>e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next),n=e=>e&&"function"===typeof e.sink&&r(e.source),i=e=>t=>(e.sink(t),e.source),s=function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];if(n(s[0])){const e=s[0];s[0]=()=>e.source}else if(r(s[0])){const e=s[0];s[0]=()=>e}if(s.length>1&&n(s[s.length-1])&&(s[s.length-1]=s[s.length-1].sink),s.length>2)for(let t=1;t<s.length-1;t++)n(s[t])&&(s[t]=i(s[t]));return t(...s)};e.exports=s,e.exports.pipe=s,e.exports.rawPipe=t,e.exports.isIterable=r,e.exports.isDuplex=n},8914:(e,t,r)=>{const n=r(5125);e.exports=e=>{let t;"function"===typeof(e=e||{})?(t=e,e={}):t=e.onEnd;let r,i,s,o=new n;const a=e=>i?i(e):(o.push(e),r),c=e=>s?r:a({done:!1,value:e}),l=e=>s?r:(s=!0,e?(e=>(o=new n,i?i({error:e}):(o.push({error:e}),r)))(e):a({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:()=>{if(!o.isEmpty()){if(e.writev){let e;const t=[];for(;!o.isEmpty();){if(e=o.shift(),e.error)throw e.error;t.push(e.value)}return{done:e.done,value:t}}const t=o.shift();if(t.error)throw t.error;return t}return s?{done:!0}:new Promise(((t,n)=>{i=s=>(i=null,s.error?n(s.error):e.writev&&!s.done?t({done:s.done,value:[s.value]}):t(s),r)}))},return:()=>(o=new n,l(),{done:!0}),throw:e=>(l(e),{done:!0}),push:c,end:l},!t)return r;const u=r;return r={[Symbol.asyncIterator](){return this},next:()=>u.next(),throw:e=>(u.throw(e),t&&(t(e),t=null),{done:!0}),return:()=>(u.return(),t&&(t(),t=null),{done:!0}),push:c,end:e=>(u.end(e),t&&(t(e),t=null),r)},r}},8860:e=>{function t(e){if("__proto__"===e||"constructor"===e||"prototype"===e)throw new Error("setting of prototype values not supported")}e.exports=function(e,r,n){var i,s,o;Array.isArray(r)&&(i=r.slice(0));"string"==typeof r&&(i=r.split("."));"symbol"==typeof r&&(i=[r]);if(!Array.isArray(i))throw new Error("props arg must be an array, a string or a symbol");if(!(s=i.pop()))return!1;t(s);for(;o=i.shift();)if(t(o),"undefined"==typeof e[o]&&(e[o]={}),!(e=e[o])||"object"!=typeof e)return!1;return e[s]=n,!0}},9125:(e,t,r)=>{const n=r(7465).EventEmitter,{nanoid:i}=r(422),{WORKER_REQUEST_READ_LOCK:s,WORKER_RELEASE_READ_LOCK:o,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:l,MASTER_GRANT_WRITE_LOCK:u}=r(7334),h=r(6885),d=(e,t,r,n,i)=>(s,o)=>{if(!o||!o.data||o.data.type!==r)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.emit(t,a.name,(()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),new Promise((e=>{const t=r=>{if(!r||!r.data)return;const i={type:r.data.type,name:r.data.name,identifier:r.data.identifier};i&&i.type===n&&i.identifier===a.identifier&&(s.removeEventListener("message",t),e())};s.addEventListener("message",t)})))))},p=(e,t,r,n)=>()=>{const s=i();return globalThis.postMessage({type:t,identifier:s,name:e}),new Promise((t=>{const i=o=>{if(!o||!o.data)return;const a={type:o.data.type,identifier:o.data.identifier};a&&a.type===r&&a.identifier===s&&(globalThis.removeEventListener("message",i),t((()=>{globalThis.postMessage({type:n,identifier:s,name:e})})))};globalThis.addEventListener("message",i)}))},f={singleProcess:!1};e.exports=e=>{e=Object.assign({},f,e);if(!!globalThis.document||e.singleProcess){const e=new n;return h.addEventListener("message",d(e,"requestReadLock",s,o,a)),h.addEventListener("message",d(e,"requestWriteLock",c,l,u)),e}return{isWorker:!0,readLock:e=>p(e,s,a,o),writeLock:e=>p(e,c,u,l)}}},7334:e=>{e.exports={WORKER_REQUEST_READ_LOCK:"lock:worker:request-read",WORKER_RELEASE_READ_LOCK:"lock:worker:release-read",MASTER_GRANT_READ_LOCK:"lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK:"lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK:"lock:worker:release-write",MASTER_GRANT_WRITE_LOCK:"lock:master:grant-write"}},3214:(e,t,r)=>{const n=r(9956),i=r(9125),{default:s}=r(6662),{timeout:o}=r(8541),a=r(6885),c={};let l;function u(e,t){let r;const n=new Promise((e=>{r=e}));return e.add((()=>o(new Promise((e=>{r((()=>{e()}))})),t.timeout))),n}const h={concurrency:1/0,timeout:846e5,global:r.g,singleProcess:!1};e.exports=(e,t)=>(t||(t={}),"object"===typeof e&&(t=e,e="lock"),e||(e="lock"),t=Object.assign({},h,t),l||(l=n(t)||i(t),l.isWorker||(l.on("requestReadLock",((e,t)=>{c[e]&&c[e].readLock().then((e=>t().finally((()=>e()))))})),l.on("requestWriteLock",(async(e,t)=>{c[e]&&c[e].writeLock().then((e=>t().finally((()=>e()))))})))),c[e]||(c[e]=((e,t)=>{if(l.isWorker)return{readLock:l.readLock(e,t),writeLock:l.writeLock(e,t)};const r=new s({concurrency:1});let n=null;return{readLock:()=>{if(n)return u(n,t);n=new s({concurrency:t.concurrency,autoStart:!1});const e=n,i=u(n,t);return r.add((()=>(e.start(),e.onIdle().then((()=>{n===e&&(n=null)}))))),i},writeLock:()=>(n=null,u(r,t))}})(e,t)),c[e]),e.exports.Worker=function(e,t){let n;t=t||r.g.Worker;try{n=new t(e)}catch(i){i.message.includes("not a constructor")&&(n=t(e))}if(!n)throw new Error("Could not create Worker from",t);return a(n),n}},9956:(e,t,r)=>{const n=r(7465).EventEmitter,{nanoid:i}=r(422),{WORKER_REQUEST_READ_LOCK:s,WORKER_RELEASE_READ_LOCK:o,MASTER_GRANT_READ_LOCK:a,WORKER_REQUEST_WRITE_LOCK:c,WORKER_RELEASE_WRITE_LOCK:l,MASTER_GRANT_WRITE_LOCK:u}=r(7334);let h;const d=(e,t,r,n,i)=>(s,o)=>{o&&o.type===r&&e.emit(t,o.name,(()=>(s.send({type:i,name:o.name,identifier:o.identifier}),new Promise((e=>{const t=r=>{r&&r.type===n&&r.identifier===o.identifier&&(s.removeListener("message",t),e())};s.on("message",t)})))))},p=(e,t,r,n)=>()=>{const s=i();return process.send({type:t,identifier:s,name:e}),new Promise((t=>{const i=o=>{o&&o.type===r&&o.identifier===s&&(process.removeListener("message",i),t((()=>{process.send({type:n,identifier:s,name:e})})))};process.on("message",i)}))};e.exports=e=>{try{if(h=r(9156),!Object.keys(h).length)return}catch(t){return}if(h.isMaster||e.singleProcess){const e=new n;return h.on("message",d(e,"requestReadLock",s,o,a)),h.on("message",d(e,"requestWriteLock",c,l,u)),e}return{isWorker:!0,readLock:e=>p(e,s,a,o),writeLock:e=>p(e,c,u,l)}}},6885:e=>{const t={},r=e=>{e.addEventListener("message",(t=>{r.dispatchEvent("message",e,t)})),e.port&&e.port.addEventListener("message",(t=>{r.dispatchEvent("message",e,t)}))};r.addEventListener=(e,r)=>{t[e]||(t[e]=[]),t[e].push(r)},r.removeEventListener=(e,r)=>{t[e]&&(t[e]=t[e].filter((e=>e===r)))},r.dispatchEvent=function(){const e=Array.prototype.slice.call(arguments),r=e.shift();t[r]&&t[r].forEach((t=>t.apply(null,e)))},e.exports=r},6662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7143),i=r(4890),s=r(1922),o=()=>{},a=new i.TimeoutError;t.default=class extends n{constructor(e){var t,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=o,this._resolveIdle=o,!("number"===typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=o,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=o,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((r,n)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(a)}));r(await s)}catch(s){n(s)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},5199:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){const s=i/2|0;let o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}},1922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5199);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const i=n.default(this._queue,r,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return null===e||void 0===e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},4890:(e,t,r)=>{"use strict";const n=r(9674);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const s=(e,t,r)=>new Promise(((s,o)=>{if("number"!==typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);const a=setTimeout((()=>{if("function"===typeof r){try{s(r())}catch(a){o(a)}return}const n=r instanceof Error?r:new i("string"===typeof r?r:`Promise timed out after ${t} milliseconds`);"function"===typeof e.cancel&&e.cancel(),o(n)}),t);n(e.then(s,o),(()=>{clearTimeout(a)}))}));e.exports=s,e.exports.default=s,e.exports.TimeoutError=i},6927:(e,t,r)=>{"use strict";const n=r(2193),i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,s=n(),o=i&&!s,a=s&&!i,c=s&&i,l="undefined"!==typeof process&&"undefined"!==typeof process.release&&"node"===process.release.name&&!s,u="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h="undefined"!==typeof process&&!1,d="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:h,isElectron:s,isElectronMain:a,isElectronRenderer:c,isNode:l,isBrowser:o,isWebWorker:u,isEnvWithDom:i,isReactNative:d}},5213:(e,t,r)=>{"use strict";e.exports=r(1900)},5014:(e,t,r)=>{"use strict";const n=r(8257);async function*i(e,t){const r=new n,i=await r.get(e,t);yield*i.iterator()}e.exports=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:i(e,t)})},8257:(e,t,r)=>{"use strict";const{fetch:n,Request:i,Headers:s}=r(2020),{TimeoutError:o,HTTPError:a}=r(8407),c=r(9842).bind({ignoreUndefined:!0}),{URL:l,URLSearchParams:u}=r(6791),h=r(6622),d={throwHttpErrors:!0,credentials:"same-origin"};class p{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=c(d,e)}async fetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=c(this.opts,t),d=new s(r.headers);if("string"!==typeof e&&!(e instanceof l||e instanceof i))throw new TypeError("`resource` must be a string, URL, or Request");const p=new l(e.toString(),r.base),{searchParams:g,transformSearchParams:m,json:w}=r;g&&(p.search="function"===typeof m?m(new u(r.searchParams)):new u(r.searchParams)),w&&(r.body=JSON.stringify(r.json),d.set("content-type","application/json"));const v=new AbortController,b=h([v.signal,r.signal]),E=await((e,t,r)=>{if(void 0===t)return e;const n=Date.now(),i=()=>Date.now()-n>=t;return new Promise(((n,s)=>{const a=setTimeout((()=>{i()&&(s(new o),r.abort())}),t),c=e=>t=>{clearTimeout(a),i()?s(new o):e(t)};e.then(c(n),c(s))}))})(n(p.toString(),{...r,signal:b,timeout:void 0,headers:d}),r.timeout,v);if(!E.ok&&r.throwHttpErrors)throw r.handleError&&await r.handleError(E),new a(E);return E.iterator=async function*(){yield*y(E.body)},E.ndjson=async function*(){for await(const e of f(E.iterator()))t.transform?yield t.transform(e):yield e},E}post(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"POST"})}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"GET"})}put(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"PUT"})}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"DELETE"})}options(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetch(e,{...t,method:"OPTIONS"})}}const f=async function*(e){const t=new TextDecoder;let r="";for await(const n of e){r+=t.decode(n,{stream:!0});const e=r.split(/\r?\n/);for(let t=0;t<e.length-1;t++){const r=e[t].trim();r.length>0&&(yield JSON.parse(r))}r=e[e.length-1]}r+=t.decode(),r=r.trim(),0!==r.length&&(yield JSON.parse(r))},y=e=>{if(w(e)){const t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:t.next.bind(t),return:r=>(e.destroy(),"function"===typeof t.return?t.return():Promise.resolve({done:!0,value:r}))})}}if(m(e)){const t=e.getReader();return async function*(){try{for(;;){const{done:e,value:r}=await t.read();if(e)return;r&&(yield r)}}finally{t.releaseLock()}}()}if(g(e))return e;throw new TypeError("Body can't be converted to AsyncIterable")},g=e=>"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator],m=e=>e&&"function"===typeof e.getReader,w=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");p.HTTPError=a,p.TimeoutError=o,p.streamToAsyncIterator=y,p.post=(e,t)=>new p(t).post(e,t),p.get=(e,t)=>new p(t).get(e,t),p.put=(e,t)=>new p(t).put(e,t),p.delete=(e,t)=>new p(t).delete(e,t),p.options=(e,t)=>new p(t).options(e,t),e.exports=p},8407:(e,t)=>{"use strict";class r extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request timed out"),this.name="TimeoutError"}}t.TimeoutError=r;class n extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted."),this.name="AbortError"}}t.AbortError=n;class i extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}t.HTTPError=i},2020:(e,t,r)=>{"use strict";const{TimeoutError:n,AbortError:i}=r(8407),{Response:s,Request:o,Headers:a,default:c}=r(5213),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);const{timeout:o,headers:c}=t;if(o&&o>0&&o<1/0&&(r.timeout=o),null!=t.overrideMimeType&&r.overrideMimeType(t.overrideMimeType),c)for(const[n,i]of new a(c))r.setRequestHeader(n,i);return t.signal&&(t.signal.onabort=()=>r.abort()),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise(((e,o)=>{const a=t=>{switch(t.type){case"error":e(s.error());break;case"load":e(new d(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:h(r.getAllResponseHeaders())}));break;case"timeout":o(new n);break;case"abort":o(new i)}};r.onerror=a,r.onload=a,r.ontimeout=a,r.onabort=a,r.send(t.body)}))},u=c,h=e=>{const t=new a;for(const r of e.trim().split(/[\r\n]+/)){const e=r.indexOf(": ");e>0&&t.set(r.slice(0,e),r.slice(e+1))}return t};class d extends s{constructor(e,t,r){super(t,r),Object.defineProperty(this,"url",{value:e})}}e.exports={fetch:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!=t.onUploadProgress?l(e,t):u(e,t)},Request:o,Headers:a}},5450:(e,t,r)=>{"use strict";var n=r(4707)(),i=r(4037)("Object.prototype.toString"),s=function(e){return!(n&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},o=function(e){return!!s(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},a=function(){return s(arguments)}();s.isLegacyArguments=o,e.exports=a?s:o},5586:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},460:e=>{"use strict";var t,r,n=Function.prototype.toString,i="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof i&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i((function(){throw 42}),null,t)}catch(u){u!==r&&(i=null)}else i=null;var s=/^\s*class\b/,o=function(e){try{var t=n.call(e);return s.test(t)}catch(r){return!1}},a=Object.prototype.toString,c="function"===typeof Symbol&&!!Symbol.toStringTag,l="object"===typeof document&&"undefined"===typeof document.all&&void 0!==document.all?document.all:{};e.exports=i?function(e){if(e===l)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;try{i(e,null,t)}catch(n){if(n!==r)return!1}return!o(e)}:function(e){if(e===l)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!o(e)&&(n.call(e),!0)}catch(t){return!1}}(e);if(o(e))return!1;var t=a.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},819:e=>{"use strict";var t=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i;e.exports=function(e,r){if(null==r&&(r=!1),e.length<2)return!1;if(e.length>255)return!1;var n=e[e.length-1];if(r){if("."!==n)return!1}else if("."===n)return!1;return t.test(e)}},2193:e=>{e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},5718:(e,t,r)=>{"use strict";var n,i=Object.prototype.toString,s=Function.prototype.toString,o=/^\s*(?:function)?\*/,a=r(4707)(),c=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(o.test(s.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===i.call(e);if(!c)return!1;if("undefined"===typeof n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&c(t)}return c(e)===n}},2795:(e,t,r)=>{"use strict";const n=r(8974),i=e=>n({exact:!0}).test(e);i.v4=e=>n.v4({exact:!0}).test(e),i.v6=e=>n.v6({exact:!0}).test(e),i.version=e=>i(e)?i.v4(e)?4:6:void 0,e.exports=i},2262:(e,t,r)=>{"use strict";const{base58btc:n}=r(6898),{base32:i}=r(1128),s=r(8315),{Multiaddr:o}=r(8719),a=r(8322),{CID:c}=r(6629),{URL:l}=r(6791),{toString:u}=r(2051),h=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,d=/^\/(ip[fn]s)\/([^/?#]+)/,p=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,f=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function y(e){try{return"string"===typeof e?Boolean(c.parse(e)):e instanceof Uint8Array?Boolean(c.decode(e)):Boolean(c.asCID(e))}catch(t){return!1}}function g(e){if(!e)return!1;if(o.isMultiaddr(e))return!0;try{return new o(e),!0}catch(t){return!1}}function m(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;const i=b(e);if(!i)return!1;const s=i.match(t);if(!s)return!1;if("ipfs"!==s[r])return!1;let o=s[n];return o&&t===p&&(o=o.toLowerCase()),y(o)}function w(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;const i=b(e);if(!i)return!1;const s=i.match(t);if(!s)return!1;if("ipns"!==s[r])return!1;let o=s[n];if(o&&t===p){if(o=o.toLowerCase(),y(o))return!0;try{!o.includes(".")&&o.includes("-")&&(o=o.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:e}=new l(`http://${o}`);return f.test(e)}catch(a){return!1}}return!0}function v(e){return"string"===typeof e}function b(e){return e instanceof Uint8Array?u(e,"base58btc"):!!v(e)&&e}const E=e=>m(e,p,2,1),_=e=>w(e,p,2,1),S=e=>E(e)||_(e),A=e=>m(e,h)||E(e),k=e=>w(e,h)||_(e),I=e=>A(e)||k(e)||S(e),C=e=>m(e,d)||w(e,d);e.exports={multihash:function(e){const t=b(e);try{s.decode(n.decode("z"+t))}catch{return!1}return!0},multiaddr:g,peerMultiaddr:function(e){return g(e)&&a.P2P.matches(e)},cid:y,base32cid:e=>function(e){try{i.decode(e)}catch{return!1}return!0}(e)&&y(e),ipfsSubdomain:E,ipnsSubdomain:_,subdomain:S,subdomainGatewayPattern:p,ipfsUrl:A,ipnsUrl:k,url:I,pathGatewayPattern:h,ipfsPath:e=>m(e,d),ipnsPath:e=>w(e,d),path:C,pathPattern:d,urlOrPath:e=>I(e)||C(e),cidPath:e=>v(e)&&!y(e)&&m(`/ipfs/${e}`,d)}},887:e=>{"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},6218:(e,t,r)=>{"use strict";var n=r(5369),i=r(306),s=r(4037),o=s("Object.prototype.toString"),a=r(4707)(),c="undefined"===typeof globalThis?r.g:globalThis,l=i(),u=s("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},h=s("String.prototype.slice"),d={},p=r(636),f=Object.getPrototypeOf;a&&p&&f&&n(l,(function(e){var t=new c[e];if(Symbol.toStringTag in t){var r=f(t),n=p(r,Symbol.toStringTag);if(!n){var i=f(r);n=p(i,Symbol.toStringTag)}d[e]=n.get}}));e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!a||!(Symbol.toStringTag in e)){var t=h(o(e),8,-1);return u(l,t)>-1}return!!p&&function(e){var t=!1;return n(d,(function(r,n){if(!t)try{t=r.call(e)===n}catch(i){}})),t}(e)}},1926:e=>{"use strict";e.exports={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:256,RTLD_LOCAL:0,RTLD_DEEPBIND:8,E2BIG:7,EACCES:13,EADDRINUSE:98,EADDRNOTAVAIL:99,EAFNOSUPPORT:97,EAGAIN:11,EALREADY:114,EBADF:9,EBADMSG:74,EBUSY:16,ECANCELED:125,ECHILD:10,ECONNABORTED:103,ECONNREFUSED:111,ECONNRESET:104,EDEADLK:35,EDESTADDRREQ:89,EDOM:33,EDQUOT:122,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:113,EIDRM:43,EILSEQ:84,EINPROGRESS:115,EINTR:4,EINVAL:22,EIO:5,EISCONN:106,EISDIR:21,ELOOP:40,EMFILE:24,EMLINK:31,EMSGSIZE:90,EMULTIHOP:72,ENAMETOOLONG:36,ENETDOWN:100,ENETRESET:102,ENETUNREACH:101,ENFILE:23,ENOBUFS:105,ENODATA:61,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:37,ENOLINK:67,ENOMEM:12,ENOMSG:42,ENOPROTOOPT:92,ENOSPC:28,ENOSR:63,ENOSTR:60,ENOSYS:38,ENOTCONN:107,ENOTDIR:20,ENOTEMPTY:39,ENOTSOCK:88,ENOTSUP:95,ENOTTY:25,ENXIO:6,EOPNOTSUPP:95,EOVERFLOW:75,EPERM:1,EPIPE:32,EPROTO:71,EPROTONOSUPPORT:93,EPROTOTYPE:91,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:116,ETIME:62,ETIMEDOUT:110,ETXTBSY:26,EWOULDBLOCK:11,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:17,SIGSTKFLT:16,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGSYS:31,SIGUNUSED:31,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488335,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},9070:(e,t,r)=>{"use strict";const{Readable:n}=r(723),i=r(5410);e.exports={randomStream:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,t=0;return new n({read(r){if(t>=e)return this.push(null);t+r>=e&&(r=e-t),t+=r,this.push(i(r))}})},randomBytes:i}},5410:e=>{"use strict";const t=65536;e.exports=function(e){const r=new Uint8Array(e);let n=0;if(e>0)if(e>t)for(;n<e;)n+t>e?(crypto.getRandomValues(r.subarray(n,n+(e-n))),n+=e-n):(crypto.getRandomValues(r.subarray(n,n+t)),n+=t);else crypto.getRandomValues(r);return r}},6791:(e,t,r)=>{"use strict";const{URLWithLegacySupport:n,format:i,URLSearchParams:s,defaultBase:o}=r(5732),a=r(9640);e.exports={URL:n,URLSearchParams:s,format:i,relative:a,defaultBase:o}},9640:(e,t,r)=>{"use strict";const{URLWithLegacySupport:n,format:i}=r(5732);e.exports=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,a=r.protocol?r.protocol.replace(":",""):"http";a=(s[a]||o||a)+":";try{t=new n(e)}catch(l){t={}}const c=Object.assign({},r,{protocol:a||t.protocol,host:r.host||t.host});return new n(e,i(c)).toString()}},5732:e=>{"use strict";const t="undefined"!==typeof navigator&&"ReactNative"===navigator.product;const r=self.URL,n=t?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"";e.exports={URLWithLegacySupport:class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;this.super=new r(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return r.createObjectURL(e)}static revokeObjectURL(e){r.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:n,format:function(e){if("string"===typeof e){return new r(e).toString()}if(!(e instanceof r)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",i=e.protocol?e.protocol+"//":"",s=e.host||"",o=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",l=e.pathname||"";return`${i}${t||r}${s||o+n}${e.path||l+a}${c}`}}}},464:e=>{"use strict";e.exports=async e=>{const t=[];for await(const r of e)t.push(r);return t}},817:e=>{"use strict";e.exports=async function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[];t<1&&(t=1);for await(const n of e)for(r.push(n);r.length>=t;)yield r.slice(0,t),r=r.slice(t);for(;r.length;)yield r.slice(0,t),r=r.slice(t)}},9272:e=>{"use strict";e.exports=async e=>{for await(const t of e);}},2393:e=>{"use strict";e.exports=async function*(e,t){for await(const r of e)await t(r)&&(yield r)}},4744:e=>{"use strict";e.exports=async e=>{for await(const t of e)return t}},1309:e=>{"use strict";e.exports=async function*(e,t){for await(const r of e)await t(r),yield r}},6723:e=>{"use strict";e.exports=async e=>{let t;for await(const r of e)t=r;return t}},3144:e=>{"use strict";e.exports=async e=>{let t=0;for await(const r of e)t++;return t}},7889:e=>{"use strict";e.exports=async function*(e,t){for await(const r of e)yield t(r)}},6155:(e,t,r)=>{"use strict";const n=r(9202);e.exports=async function*(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=n();setTimeout((async()=>{try{await Promise.all(t.map((async e=>{for await(const t of e)i.push(t)}))),i.end()}catch(e){i.end(e)}}),0),yield*i}},9202:(e,t,r)=>{const n=r(5125);e.exports=e=>{let t;"function"===typeof(e=e||{})?(t=e,e={}):t=e.onEnd;let r,i,s,o=new n;const a=e=>i?i(e):(o.push(e),r),c=e=>s?r:a({done:!1,value:e}),l=e=>s?r:(s=!0,e?(e=>(o=new n,i?i({error:e}):(o.push({error:e}),r)))(e):a({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:()=>{if(!o.isEmpty()){if(e.writev){let e;const t=[];for(;!o.isEmpty();){if(e=o.shift(),e.error)throw e.error;t.push(e.value)}return{done:e.done,value:t}}const t=o.shift();if(t.error)throw t.error;return t}return s?{done:!0}:new Promise(((t,n)=>{i=s=>(i=null,s.error?n(s.error):e.writev&&!s.done?t({done:s.done,value:[s.value]}):t(s),r)}))},return:()=>(o=new n,l(),{done:!0}),throw:e=>(l(e),{done:!0}),push:c,end:l},!t)return r;const u=r;return r={[Symbol.asyncIterator](){return this},next:()=>u.next(),throw:e=>(u.throw(e),t&&(t(e),t=null),{done:!0}),return:()=>(u.return(),t&&(t(),t=null),{done:!0}),push:c,end:e=>(u.end(e),t&&(t(e),t=null),r)},r}},857:(e,t,r)=>{"use strict";const n=r(817);e.exports=async function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for await(const r of n(e,t)){const e=r.map((e=>e().then((e=>({ok:!0,value:e})),(e=>({ok:!1,err:e})))));for(let t=0;t<e.length;t++){const r=await e[t];if(!r.ok)throw r.err;yield r.value}}}},1254:(e,t,r)=>{"use strict";const n=r(1069),i=r(7465).EventEmitter;e.exports=async function*(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.concurrency||1/0;r<1&&(r=1/0);const s=null!=t.ordered&&t.ordered,o=new i,a=[];let c,l=n(),u=n(),h=!1,d=!1;function p(){return s?Boolean(a[0]&&a[0].done):Boolean(a.find((e=>e.done)))}function*f(){for(;a.length&&a[0].done;){const e=a[0];if(a.shift(),!e.ok)throw d=!0,l.resolve(),e.err;yield e.value,l.resolve()}}function*y(){for(;p();)for(let e=0;e<a.length;e++)if(a[e].done){const t=a[e];if(a.splice(e,1),e--,!t.ok)throw d=!0,l.resolve(),t.err;yield t.value,l.resolve()}}for(o.on("task-complete",(()=>{u.resolve()})),Promise.resolve().then((async()=>{try{for await(const t of e){if(a.length===r&&(l=n(),await l.promise),d)break;const e={done:!1};a.push(e),t().then((t=>{e.done=!0,e.ok=!0,e.value=t,o.emit("task-complete")}),(t=>{e.done=!0,e.err=t,o.emit("task-complete")}))}h=!0,o.emit("task-complete")}catch(t){c=t,o.emit("task-complete")}}));;){if(p()||(u=n(),await u.promise),c)throw c;if(s?yield*f():yield*y(),h&&0===a.length)break}}},1069:e=>{"use strict";e.exports=()=>{const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}},8217:e=>{"use strict";e.exports=function(e){const[t,r]=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:e=>{n.push(e)},next:()=>n.length?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}},2035:(e,t,r)=>{"use strict";const n=r(464);e.exports=async function*(e,t){const r=await n(e);yield*r.sort(t)}},5959:e=>{"use strict";e.exports=async function*(e,t){let r=0;if(!(t<1))for await(const n of e)if(yield n,r++,r===t)return}},9765:(e,t,r)=>{"use strict";const{concat:n}=r(2110);e.exports=async function(e){let t=new Uint8Array(0);for await(const r of e)t=n([t,r],t.length+r.length);return t}},3003:e=>{e.exports=function(e,t,r){if(!e)return r;var n,i;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");for(;n.length;){if(i=n.shift(),!e)return r;if(void 0===(e=e[i]))return r}return e}},3137:(e,t,r)=>{"use strict";const n=r(2525),{EventEmitter:i}=r(7465);function s(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;++r)if(e[r]!==t[r])return!1;return!0}function o(e,t){if(!(t instanceof Uint8Array))throw new TypeError(e+" is not a Uint8Array")}class a extends i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.localNodeId=e.localNodeId||n(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||a.distance,this.arbiter=e.arbiter||a.arbiter,this.metadata=Object.assign({},e.metadata),o("option.localNodeId as parameter 1",this.localNodeId),this.root={contacts:[],dontSplit:!1,left:null,right:null}}static arbiter(e,t){return e.vectorClock>t.vectorClock?e:t}static distance(e,t){let r=0,n=0;const i=Math.min(e.length,t.length),s=Math.max(e.length,t.length);for(;n<i;++n)r=256*r+(e[n]^t[n]);for(;n<s;++n)r=256*r+255;return r}add(e){o("contact.id",(e||{}).id);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e.id,t++);const n=this._indexOf(r,e.id);return n>=0?(this._update(r,n,e),this):r.contacts.length<this.numberOfNodesPerKBucket?(r.contacts.push(e),this.emit("added",e),this):r.dontSplit?(this.emit("ping",r.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(r,t),this.add(e))}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(o("id",e),!Number.isInteger(t)&&t!==1/0||t<=0)throw new TypeError("n is not positive number");let r=[];for(let n=[this.root],i=0;n.length>0&&r.length<t;){const t=n.pop();if(null===t.contacts){const r=this._determineNode(t,e,i++);n.push(t.left===r?t.right:t.left),n.push(r)}else r=r.concat(t.contacts)}return r.map((t=>[this.distance(t.id,e),t])).sort(((e,t)=>e[0]-t[0])).slice(0,t).map((e=>e[1]))}count(){let e=0;for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e+=r.contacts.length}return e}_determineNode(e,t,r){const n=r>>3,i=r%8;if(t.length<=n&&0!==i)return e.left;return t[n]&1<<7-i?e.right:e.left}get(e){o("id",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);return n>=0?r.contacts[n]:null}_indexOf(e,t){for(let r=0;r<e.contacts.length;++r)if(s(e.contacts[r].id,t))return r;return-1}remove(e){o("the id as parameter 1",e);let t=0,r=this.root;for(;null===r.contacts;)r=this._determineNode(r,e,t++);const n=this._indexOf(r,e);if(n>=0){const e=r.contacts.splice(n,1)[0];this.emit("removed",e)}return this}_split(e,t){e.left={contacts:[],dontSplit:!1,left:null,right:null},e.right={contacts:[],dontSplit:!1,left:null,right:null};for(const n of e.contacts)this._determineNode(e,n.id,t).contacts.push(n);e.contacts=null;const r=this._determineNode(e,this.localNodeId,t);(e.left===r?e.right:e.left).dontSplit=!0}toArray(){let e=[];for(const t=[this.root];t.length>0;){const r=t.pop();null===r.contacts?t.push(r.right,r.left):e=e.concat(r.contacts)}return e}*toIterable(){for(const e=[this.root];e.length>0;){const t=e.pop();null===t.contacts?e.push(t.right,t.left):yield*t.contacts}}_update(e,t,r){if(!s(e.contacts[t].id,r.id))throw new Error("wrong index for _update");const n=e.contacts[t],i=this.arbiter(n,r);i===n&&n!==r||(e.contacts.splice(t,1),e.contacts.push(i),this.emit("updated",n,i))}}e.exports=a},2957:(e,t,r)=>{"use strict";const n=r(8855),i=new Set(["lt","gt","lte","gte"]);function s(e){if(!(this instanceof s))return new s(e);this.opts=e||{},this.encodings=n}e.exports=s,s.prototype._encoding=function(e){return"string"===typeof e&&(e=n[e]),e||(e=n.id),e},s.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},s.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},s.prototype.encodeKey=function(e,t,r){return this._keyEncoding(t,r).encode(e)},s.prototype.encodeValue=function(e,t,r){return this._valueEncoding(t,r).encode(e)},s.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},s.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},s.prototype.encodeBatch=function(e,t){return e.map((e=>{const r={type:e.type,key:this.encodeKey(e.key,t,e)};return this.keyAsBuffer(t,e)&&(r.keyEncoding="binary"),e.prefix&&(r.prefix=e.prefix),"value"in e&&(r.value=this.encodeValue(e.value,t,e),this.valueAsBuffer(t,e)&&(r.valueEncoding="binary")),r}))},s.prototype.encodeLtgt=function(e){const t={};for(const r of Object.keys(e)){if("start"===r||"end"===r)throw new Error('Legacy range options ("start" and "end") have been removed');t[r]=i.has(r)?this.encodeKey(e[r],e):e[r]}return t},s.prototype.createStreamDecoder=function(e){return e.keys&&e.values?(t,r)=>({key:this.decodeKey(t,e),value:this.decodeValue(r,e)}):e.keys?t=>this.decodeKey(t,e):e.values?(t,r)=>this.decodeValue(r,e):function(){}},s.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},s.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},8855:(e,t,r)=>{"use strict";const{Buffer:n}=r(9778);t.utf8=t["utf-8"]={encode:function(e){return o(e)?e:String(e)},decode:s,buffer:!1,type:"utf8"},t.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},t.binary={encode:function(e){return o(e)?e:n.from(e)},decode:s,buffer:!0,type:"binary"},t.none={encode:s,decode:s,buffer:!1,type:"id"},t.id=t.none;const i=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];for(const a of i)t[a]={encode:function(e){return o(e)?e:n.from(e,a)},decode:function(e){return e.toString(a)},buffer:!0,type:a};function s(e){return e}function o(e){return void 0===e||null===e||n.isBuffer(e)}},8520:e=>{"use strict";function t(e,t){const r=function(t,n){if("object"===typeof t&&null!==t&&(n=n||t,t=t.message||t.name),t=t||"","object"===typeof(n=n||void 0)&&n.type===e&&n.message===t)return n;Object.defineProperty(this,"type",{value:e,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"name",{value:e,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"cause",{value:n,enumerable:!1,writable:!0,configurable:!0}),Object.defineProperty(this,"message",{value:t,enumerable:!1,writable:!0,configurable:!0}),Error.call(this),"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)};return r.prototype=new t,r}const r=t("LevelUPError",Error);e.exports={LevelUPError:r,InitializationError:t("InitializationError",r),OpenError:t("OpenError",r),ReadError:t("ReadError",r),WriteError:t("WriteError",r),NotFoundError:t("NotFoundError",r),EncodingError:t("EncodingError",r)},e.exports.NotFoundError.prototype.notFound=!0,e.exports.NotFoundError.prototype.status=404},1057:(e,t,r)=>{"use strict";const n=r(2534),{Readable:i}=r(723);function s(e,t){if(!(this instanceof s))return new s(e,t);t=t||{},i.call(this,Object.assign({},t,{objectMode:!0})),this._iterator=e,this._options=t,this.on("end",this.destroy.bind(this,null,null))}e.exports=s,n(s,i),s.prototype._read=function(){this.destroyed||this._iterator.next(((e,t,r)=>{if(!this.destroyed)return e?this.destroy(e):void(void 0===t&&void 0===r?this.push(null):!1!==this._options.keys&&!1===this._options.values?this.push(t):!1===this._options.keys&&!1!==this._options.values?this.push(r):this.push({key:t,value:r}))}))},s.prototype._destroy=function(e,t){this._iterator.end((function(r){t(e||r)}))}},9521:(e,t,r)=>{"use strict";e.exports=p;const n=r(6701).AbstractLevelDOWN,i=r(2534),s=r(8636),o=r(9718),a=r(5824),c=r(2799),l=r(1260),u=r(5746),h=r(8972),d="level-js-";function p(e,t){if(!(this instanceof p))return new p(e,t);if(n.call(this,{bufferKeys:l.bufferKeys(indexedDB),snapshots:!0,permanence:!0,clear:!0,getMany:!0}),t=t||{},"string"!==typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.prefix=null==t.prefix?d:t.prefix,this.version=parseInt(t.version||1,10)}i(p,n),p.prototype.type="level-js",p.prototype._open=function(e,t){const r=indexedDB.open(this.prefix+this.location,this.version);r.onerror=function(){t(r.error||new Error("unknown error"))},r.onsuccess=()=>{this.db=r.result,t()},r.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.location)||t.createObjectStore(this.location)}},p.prototype.store=function(e){return this.db.transaction([this.location],e).objectStore(this.location)},p.prototype.await=function(e,t){const r=e.transaction;r.onabort=function(){t(r.error||new Error("aborted by user"))},r.oncomplete=function(){t(null,e.result)}},p.prototype._get=function(e,t,r){const n=this.store("readonly");let i;try{i=n.get(e)}catch(s){return this._nextTick(r,s)}this.await(i,(function(e,n){return e?r(e):void 0===n?r(new Error("NotFound")):void r(null,c(n,t.asBuffer))}))},p.prototype._getMany=function(e,t,r){const n=t.asBuffer,i=this.store("readonly"),o=e.map((e=>t=>{let r;try{r=i.get(e)}catch(s){return t(s)}r.onsuccess=()=>{const e=r.result;t(null,void 0===e?e:c(e,n))},r.onerror=e=>{e.stopPropagation(),t(r.error)}}));s(o,16,r)},p.prototype._del=function(e,t,r){const n=this.store("readwrite");let i;try{i=n.delete(e)}catch(s){return this._nextTick(r,s)}this.await(i,r)},p.prototype._put=function(e,t,r,n){const i=this.store("readwrite");let s;try{s=i.put(t,e)}catch(o){return this._nextTick(n,o)}this.await(s,n)},p.prototype._serializeKey=function(e){return a(e,this.supports.bufferKeys)},p.prototype._serializeValue=function(e){return a(e,!0)},p.prototype._iterator=function(e){return new o(this,this.location,e)},p.prototype._batch=function(e,t,r){if(0===e.length)return this._nextTick(r);const n=this.store("readwrite"),i=n.transaction;let s,o=0;i.onabort=function(){r(s||i.error||new Error("aborted by user"))},i.oncomplete=function(){r()},function t(){const r=e[o++],a=r.key;let c;try{c="del"===r.type?n.delete(a):n.put(r.value,a)}catch(l){return s=l,void i.abort()}o<e.length&&(c.onsuccess=t)}()},p.prototype._clear=function(e,t){let r,n;try{r=h(e)}catch(i){return this._nextTick(t)}if(e.limit>=0)return u(this,this.location,r,e,t);try{const e=this.store("readwrite");n=r?e.delete(r):e.clear()}catch(s){return this._nextTick(t,s)}this.await(n,t)},p.prototype._close=function(e){this.db.close(),this._nextTick(e)},p.prototype.upgrade=function(e){if("open"!==this.status)return this._nextTick(e,new Error("cannot upgrade() before open()"));const t=this.iterator(),r={},n=this;function i(e){if(e)return o(e);t.next(s)}function s(e,t,s){if(e||void 0===t)return o(e);const a=n._serializeKey(c(t,!0)),l=n._serializeValue(c(s,!0));n._batch([{type:"del",key:t},{type:"put",key:a,value:l}],r,i)}function o(r){t.end((function(t){e(r||t)}))}t._deserializeKey=t._deserializeValue=function(e){return e},i()},p.destroy=function(e,t,r){"function"===typeof t&&(r=t,t=d);const n=indexedDB.deleteDatabase(t+e);n.onsuccess=function(){r()},n.onerror=function(e){r(e)}}},9718:(e,t,r)=>{"use strict";const n=r(2534),i=r(6701).AbstractIterator,s=r(8972),o=r(2799),a=function(){};function c(e,t,r){if(i.call(this,e),this._limit=r.limit,this._count=0,this._callback=null,this._cache=[],this._completed=!1,this._aborted=!1,this._error=null,this._transaction=null,this._keys=r.keys,this._values=r.values,this._keyAsBuffer=r.keyAsBuffer,this._valueAsBuffer=r.valueAsBuffer,0===this._limit)return void(this._completed=!0);let n;try{n=s(r)}catch(o){return void(this._completed=!0)}this.createIterator(t,n,r.reverse)}e.exports=c,n(c,i),c.prototype.createIterator=function(e,t,r){const n=this.db.db.transaction([e],"readonly");n.objectStore(e).openCursor(t,r?"prev":"next").onsuccess=e=>{const t=e.target.result;t&&this.onItem(t)},this._transaction=n,n.onabort=()=>{this.onAbort(this._transaction.error||new Error("aborted by user"))},n.oncomplete=()=>{this.onComplete()}},c.prototype.onItem=function(e){this._cache.push(e.key,e.value),(this._limit<=0||++this._count<this._limit)&&e.continue(),this.maybeNext()},c.prototype.onAbort=function(e){this._aborted=!0,this._error=e,this.maybeNext()},c.prototype.onComplete=function(){this._completed=!0,this.maybeNext()},c.prototype.maybeNext=function(){this._callback&&(this._next(this._callback),this._callback=null)},c.prototype._next=function(e){if(this._aborted){const t=this._error;this._error=null,this._nextTick(e,t)}else if(this._cache.length>0){let t=this._cache.shift(),r=this._cache.shift();t=this._keys&&void 0!==t?this._deserializeKey(t,this._keyAsBuffer):void 0,r=this._values&&void 0!==r?this._deserializeValue(r,this._valueAsBuffer):void 0,this._nextTick(e,null,t,r)}else this._completed?this._nextTick(e):this._callback=e},c.prototype._deserializeKey=o,c.prototype._deserializeValue=o,c.prototype._end=function(e){if(this._aborted||this._completed)return this._nextTick(e,this._error);this.onItem=a,this.onAbort=e,this.onComplete=e}},5746:e=>{"use strict";e.exports=function(e,t,r,n,i){if(0===n.limit)return e._nextTick(i);const s=e.db.transaction([t],"readwrite"),o=s.objectStore(t);let a=0;s.oncomplete=function(){i()},s.onabort=function(){i(s.error||new Error("aborted by user"))};const c=o.openKeyCursor?"openKeyCursor":"openCursor",l=n.reverse?"prev":"next";o[c](r,l).onsuccess=function(e){const t=e.target.result;t&&(o.delete(t.key).onsuccess=function(){(n.limit<=0||++a<n.limit)&&t.continue()})}}},2799:(e,t,r)=>{"use strict";const n=r(9778).Buffer,i=function(){if(r.g.TextDecoder){const e=new TextDecoder("utf-8");return e.decode.bind(e)}return function(e){return o(e).toString()}}(),s=function(){if(r.g.TextDecoder){const e=new TextDecoder("utf-8");return e.decode.bind(e)}return function(e){return n.from(e).toString()}}();function o(e){const t=n.from(e.buffer);return e.byteLength===e.buffer.byteLength?t:t.slice(e.byteOffset,e.byteOffset+e.byteLength)}e.exports=function(e,t){return e instanceof Uint8Array?t?o(e):i(e):e instanceof ArrayBuffer?t?n.from(e):s(e):t?n.from(String(e)):String(e)}},8972:(e,t,r)=>{"use strict";const n=r(4580),i=Symbol("none");e.exports=function(e){const t=n.lowerBound(e,i),r=n.upperBound(e,i),s=n.lowerBoundExclusive(e,i),o=n.upperBoundExclusive(e,i);return t!==i&&r!==i?IDBKeyRange.bound(t,r,s,o):t!==i?IDBKeyRange.lowerBound(t,s):r!==i?IDBKeyRange.upperBound(r,o):null}},5824:(e,t,r)=>{"use strict";const n=r(9778).Buffer,i=function(){if(r.g.TextEncoder){const e=new TextEncoder("utf-8");return e.encode.bind(e)}return n.from}();e.exports=function(e,t){return t?n.isBuffer(e)?e:i(String(e)):String(e)}},1260:(e,t,r)=>{"use strict";const n=r(9778).Buffer;t.test=function(e){return function(t){try{return t.cmp(e,0),!0}catch(r){return!1}}},t.bufferKeys=t.test(n.alloc(0))},7603:(e,t,r)=>{"use strict";const n=r(9271),i=r(5711);e.exports=function(e){function t(t,s,o){return"function"===typeof t?o=t:"function"===typeof s&&(o=s),r(s)||(s=r(t)?t:{}),n(i(e(t,s),s),s,o)}function r(e){return"object"===typeof e&&null!==e}for(const n of["destroy","repair"])"function"===typeof e[n]&&(t[n]=function(){e[n](...arguments)});return t.errors=n.errors,t}},7987:e=>{"use strict";function t(e){return!!e&&Object.assign({},e)}e.exports=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const i=r.reduce(((e,t)=>Object.assign(e,t)),{});return Object.assign(i,{bufferKeys:i.bufferKeys||!1,snapshots:i.snapshots||!1,permanence:i.permanence||!1,seek:i.seek||!1,clear:i.clear||!1,getMany:i.getMany||!1,keyIterator:i.keyIterator||!1,valueIterator:i.valueIterator||!1,iteratorNextv:i.iteratorNextv||!1,iteratorAll:i.iteratorAll||!1,status:i.status||!1,idempotentOpen:i.idempotentOpen||!1,passiveOpen:i.passiveOpen||!1,serialize:i.serialize||!1,createIfMissing:i.createIfMissing||!1,errorIfExists:i.errorIfExists||!1,deferredOpen:i.deferredOpen||!1,openCallback:i.openCallback||!1,promises:i.promises||!1,streams:i.streams||!1,encodings:t(i.encodings),events:t(i.events),additionalMethods:Object.assign({},i.additionalMethods)})}},2164:(e,t,r)=>{e.exports=r(7603)(r(9521))},3314:(e,t,r)=>{"use strict";const n=r(8520).WriteError,i=r(5240),s=r(8439).R,o=r(8439).F;function a(e){this.db=e,this.batch=e.db.batch(),this.ops=[],this.length=0}a.prototype.put=function(e,t,r){try{this.batch.put(e,t,r)}catch(i){throw new n(i)}return this.ops.push({...r,type:"put",key:e,value:t}),this.length++,this},a.prototype.del=function(e,t){try{this.batch.del(e,t)}catch(r){throw new n(r)}return this.ops.push({...t,type:"del",key:e}),this.length++,this},a.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new n(e)}return this.ops=[],this.length=0,this},a.prototype.write=function(e,t){const r=this.db,a=this.ops;t=s(e,t),t=i.fromCallback(t),e=o(e);try{this.batch.write(e,(function(e){if(e)return t(new n(e));r.emit("batch",a),t()}))}catch(c){throw new n(c)}return t.promise},e.exports=a},8439:(e,t)=>{"use strict";t.R=function(e,t){return"function"===typeof e?e:t},t.F=function(e){return"object"===typeof e&&null!==e?e:{}}},9271:(e,t,r)=>{"use strict";const n=r(7465).EventEmitter,i=r(9639).inherits,s=r(5479),o=r(1057),a=r(3314),c=r(8520),l=r(7987),u=r(5240),h=r(8439).R,d=r(8439).F,p=r(742),f=c.WriteError,y=c.ReadError,g=c.NotFoundError,m=c.OpenError,w=c.InitializationError;function v(e,t,r){if(!(this instanceof v))return new v(e,t,r);let i;if(n.call(this),this.setMaxListeners(1/0),"function"===typeof t&&(r=t,t={}),t=t||{},!e||"object"!==typeof e){if(i=new w("First argument must be an abstract-leveldown compliant store"),"function"===typeof r)return p(r,i);throw i}if("string"!==typeof e.status)throw new Error(".status required, old abstract-leveldown");this.options=d(t),this._db=e,this.db=null,this.open(r||(e=>{e&&this.emit("error",e)})),this.supports=l(this.db.supports,{status:!0,deferredOpen:!0,openCallback:!0,promises:!0,streams:!0});for(const n of Object.keys(this.supports.additionalMethods))null==this[n]&&(this[n]=function(){return this.db[n](...arguments)})}function b(e,t){return!e.isOperational()&&(p(t,new y("Database is not open")),!0)}v.prototype.emit=n.prototype.emit,v.prototype.once=n.prototype.once,i(v,n),Object.defineProperty(v.prototype,"status",{enumerable:!0,get(){return this.db.status}}),v.prototype.isOperational=function(){return"open"===this.db.status||"opening"===this.db.status},v.prototype.open=function(e,t){return"function"===typeof e&&(t=e,e=null),t=u.fromCallback(t),e||(e=this.options),this.db&&this.isOpen()?(p(t,null,this),t.promise):this.db&&this._isOpening()?(this.once("open",(()=>{t(null,this)})),t.promise):(this.db=new s(this._db),this.emit("opening"),this.db.open(e,(e=>{if(e)return t(new m(e));this.db=this._db,t(null,this),this.emit("open"),this.emit("ready")})),t.promise)},v.prototype.close=function(e){var t=this;return e=u.fromCallback(e),this.isOpen()?(this.db.close((function(r){t.emit("closed");for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];e(r,...i)})),this.emit("closing")):this.isClosed()?p(e):"closing"===this.db.status?this.once("closed",e):this._isOpening()&&this.once("open",(()=>{this.close(e)})),e.promise},v.prototype.isOpen=function(){return"open"===this.db.status},v.prototype._isOpening=function(){return"opening"===this.db.status},v.prototype.isClosed=function(){return/^clos|new/.test(this.db.status)},v.prototype.get=function(e,t,r){return r=h(t,r),b(this,r=u.fromCallback(r))||(t=d(t),this.db.get(e,t,(function(t,n){if(t)return t=/notfound/i.test(t)||t.notFound?new g("Key not found in database ["+e+"]",t):new y(t),r(t);r(null,n)}))),r.promise},v.prototype.getMany=function(e,t,r){return this.db.getMany(e,t,r)},v.prototype.put=function(e,t,r,n){return n=h(r,n),b(this,n=u.fromCallback(n))||(r=d(r),this.db.put(e,t,r,(r=>{if(r)return n(new f(r));this.emit("put",e,t),n()}))),n.promise},v.prototype.del=function(e,t,r){return r=h(t,r),b(this,r=u.fromCallback(r))||(t=d(t),this.db.del(e,t,(t=>{if(t)return r(new f(t));this.emit("del",e),r()}))),r.promise},v.prototype.batch=function(e,t,r){return arguments.length?(r="function"===typeof e?e:h(t,r),b(this,r=u.fromCallback(r))||(t=d(t),this.db.batch(e,t,(t=>{if(t)return r(new f(t));this.emit("batch",e),r()}))),r.promise):new a(this)},v.prototype.iterator=function(e){return this.db.iterator(e)},v.prototype.clear=function(e,t){return t=h(e,t),e=d(e),b(this,t=u.fromCallback(t))||this.db.clear(e,(r=>{if(r)return t(new f(r));this.emit("clear",e),t()})),t.promise},v.prototype.readStream=v.prototype.createReadStream=function(e){return"number"!==typeof(e=Object.assign({keys:!0,values:!0},e)).limit&&(e.limit=-1),new o(this.db.iterator(e),e)},v.prototype.keyStream=v.prototype.createKeyStream=function(e){return this.createReadStream(Object.assign({},e,{keys:!0,values:!1}))},v.prototype.valueStream=v.prototype.createValueStream=function(e){return this.createReadStream(Object.assign({},e,{keys:!1,values:!0}))},v.prototype.toString=function(){return"LevelUP"},v.prototype.type="levelup",v.prototype._nextTick=p,v.errors=c,e.exports=v},742:(e,t,r)=>{"use strict";const n=r(4183);e.exports=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];0===r.length?n(e):n((()=>e(...r)))}},4580:(e,t)=>{function r(e){return void 0!==e&&""!==e}function n(e,t){return Object.hasOwnProperty.call(e,t)}function i(e,t){return Object.hasOwnProperty.call(e,t)&&t}t.compare=function(e,t){if(Buffer.isBuffer(e)){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){var i=e[n]-t[n];if(i)return i}return e.length-t.length}return e<t?-1:e>t?1:0};var s=t.lowerBoundKey=function(e){return i(e,"gt")||i(e,"gte")||i(e,"min")||(e.reverse?i(e,"end"):i(e,"start"))||void 0},o=t.lowerBound=function(e,t){var r=s(e);return r?e[r]:t},a=t.lowerBoundInclusive=function(e){return!n(e,"gt")},c=t.upperBoundInclusive=function(e){return!n(e,"lt")},l=t.lowerBoundExclusive=function(e){return!a(e)},u=t.upperBoundExclusive=function(e){return!c(e)},h=t.upperBoundKey=function(e){return i(e,"lt")||i(e,"lte")||i(e,"max")||(e.reverse?i(e,"start"):i(e,"end"))||void 0},d=t.upperBound=function(e,t){var r=h(e);return r?e[r]:t};function p(e){return e}t.start=function(e,t){return e.reverse?d(e,t):o(e,t)},t.end=function(e,t){return e.reverse?o(e,t):d(e,t)},t.startInclusive=function(e){return e.reverse?c(e):a(e)},t.endInclusive=function(e){return e.reverse?a(e):c(e)},t.toLtgt=function(e,r,i,s,o){r=r||{},i=i||p;var a=arguments.length>3,c=t.lowerBoundKey(e),l=t.upperBoundKey(e);return c?"gt"===c?r.gt=i(e.gt,!1):r.gte=i(e[c],!1):a&&(r.gte=i(s,!1)),l?"lt"===l?r.lt=i(e.lt,!0):r.lte=i(e[l],!0):a&&(r.lte=i(o,!0)),null!=e.reverse&&(r.reverse=!!e.reverse),n(r,"max")&&delete r.max,n(r,"min")&&delete r.min,n(r,"start")&&delete r.start,n(r,"end")&&delete r.end,r},t.contains=function(e,n,i){i=i||t.compare;var s=o(e);if(r(s)&&((a=i(n,s))<0||0===a&&l(e)))return!1;var a,c=d(e);if(r(c)&&((a=i(n,c))>0||0===a&&u(e)))return!1;return!0},t.filter=function(e,r){return function(n){return t.contains(e,n,r)}}},8322:(e,t,r)=>{"use strict";const{Multiaddr:n}=r(8719),i=D("dns4"),s=D("dns6"),o=D("dnsaddr"),a=T(D("dns"),o,i,s),c=T(D("ip4"),D("ip6")),l=T(R(c,D("tcp")),R(a,D("tcp"))),u=R(c,D("udp")),h=R(u,D("utp")),d=R(u,D("quic")),p=T(R(l,D("ws")),R(a,D("ws"))),f=T(R(l,D("wss")),R(a,D("wss"))),y=T(R(l,D("http")),R(c,D("http")),R(a,D("http"))),g=T(R(l,D("https")),R(c,D("https")),R(a,D("https"))),m=T(R(p,D("p2p-webrtc-star"),D("p2p")),R(f,D("p2p-webrtc-star"),D("p2p")),R(p,D("p2p-webrtc-star")),R(f,D("p2p-webrtc-star"))),w=T(R(p,D("p2p-websocket-star"),D("p2p")),R(f,D("p2p-websocket-star"),D("p2p")),R(p,D("p2p-websocket-star")),R(f,D("p2p-websocket-star"))),v=T(R(y,D("p2p-webrtc-direct"),D("p2p")),R(g,D("p2p-webrtc-direct"),D("p2p")),R(y,D("p2p-webrtc-direct")),R(g,D("p2p-webrtc-direct"))),b=T(p,f,y,g,m,v,l,h,d,a),E=T(R(b,D("p2p-stardust"),D("p2p")),R(b,D("p2p-stardust"))),_=T(R(b,D("p2p")),m,v,D("p2p")),S=T(R(_,D("p2p-circuit"),_),R(_,D("p2p-circuit")),R(D("p2p-circuit"),_),R(b,D("p2p-circuit")),R(D("p2p-circuit"),b),D("p2p-circuit")),A=()=>T(R(S,A),S),k=A(),I=T(R(k,_,k),R(_,k),R(k,_),k,_);function C(e){return function(t){if(!n.isMultiaddr(t))try{t=new n(t)}catch(i){return!1}const r=e(t.protoNames());return null!==r&&(!0===r||!1===r?r:0===r.length)}}function R(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:C(n),partialMatch:n}}function T(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){let r=null;return t.some((t=>{const n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return!!n&&(r=n,!0)})),r}const i={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:C(n),partialMatch:n};return i}function D(e){const t=e;return{toString:function(){return t},matches:function(e){let r;if("string"===typeof e||e instanceof Uint8Array)try{r=new n(e)}catch(s){return!1}else r=e;const i=r.protoNames();return 1===i.length&&i[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}e.exports={DNS:a,DNS4:i,DNS6:s,DNSADDR:o,IP:c,TCP:l,UDP:u,QUIC:d,UTP:h,HTTP:y,HTTPS:g,WebSockets:p,WebSocketsSecure:f,WebSocketStar:w,WebRTCStar:m,WebRTCDirect:v,Reliable:b,Stardust:E,Circuit:k,P2P:I,IPFS:I}},9842:function(e,t,r){"use strict";const n=r(887),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:s}=Object,o=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},l=e=>{const t=[];for(const r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r)s.call(e,n)&&t.push(n)}return t};function u(e){return Array.isArray(e)?function(e){const t=e.slice(0,0);return l(e).forEach((r=>{o(t,r,u(e[r]))})),t}(e):n(e)?function(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return l(e).forEach((r=>{o(t,r,u(e[r]))})),t}(e):e}const h=(e,t,r,n)=>(r.forEach((r=>{"undefined"===typeof t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?o(e,r,d(e[r],t[r],n)):o(e,r,u(t[r])))})),e);function d(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?((e,t,r)=>{let n=e.slice(0,0),s=0;return[e,t].forEach((t=>{const a=[];for(let r=0;r<t.length;r++)i.call(t,r)&&(a.push(String(r)),o(n,s++,t===e?t[r]:u(t[r])));n=h(n,t,l(t).filter((e=>!a.includes(e))),r)})),n})(e,t,r):n(t)&&n(e)?h(e,t,l(t),r):u(t)}e.exports=function(){const e=d(u(c),this!==a&&this||{},c);let t={_:{}};for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];for(const o of i)if(void 0!==o){if(!n(o))throw new TypeError("`"+o+"` is not an Option Object");t=d(t,{_:o},e)}return t._}},8193:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,s=7*i,o=365.25*i;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,c){c=c||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return c.long?function(e){var s=Math.abs(e);if(s>=i)return a(e,s,i,"day");if(s>=n)return a(e,s,n,"hour");if(s>=r)return a(e,s,r,"minute");if(s>=t)return a(e,s,t,"second");return e+" ms"}(e):function(e){var s=Math.abs(e);if(s>=i)return Math.round(e/i)+"d";if(s>=n)return Math.round(e/n)+"h";if(s>=r)return Math.round(e/r)+"m";if(s>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},3058:(e,t,r)=>{"use strict";const n=r(3516),i=r(23),s=r(4561),{concat:o}=r(2110),{toString:a}=r(2051);function c(e){const t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const s=r[n],o=i(s);if(0!==o.size){if(n++,n>=r.length)throw v("invalid address: "+e);if(o.path){t.push([s,w(r.slice(n).join("/"))]);break}t.push([s,r[n]])}else t.push([s])}return t}function l(e){const t=[];return e.map((e=>{const r=b(e);return t.push(r.name),e.length>1&&t.push(e[1]),null})),w(t.join("/"))}function u(e){return e.map((e=>{Array.isArray(e)||(e=[e]);const t=b(e);return e.length>1?[t.code,n.toBytes(t.code,e[1])]:[t.code]}))}function h(e){return e.map((e=>{const t=b(e);return e[1]?[t.code,n.toString(t.code,e[1])]:[t.code]}))}function d(e){return g(o(e.map((e=>{const t=b(e);let r=Uint8Array.from(s.encode(t.code));return e.length>1&&(r=o([r,e[1]])),r}))))}function p(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;return s.decode(t)+s.decode.bytes}function f(e){const t=[];let r=0;for(;r<e.length;){const n=s.decode(e,r),o=s.decode.bytes,c=p(i(n),e.slice(r+o));if(0===c){t.push([n]),r+=o;continue}const l=e.slice(r+o,r+o+c);if(r+=c+o,r>e.length)throw v("Invalid address Uint8Array: "+a(e,"base16"));t.push([n,l])}return t}function y(e){return d(u(c(e=w(e))))}function g(e){const t=m(e);if(t)throw t;return Uint8Array.from(e)}function m(e){try{f(e)}catch(t){return t}}function w(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function v(e){return new Error("Error parsing address: "+e)}function b(e){return i(e[0])}e.exports={stringToStringTuples:c,stringTuplesToString:l,tuplesToStringTuples:h,stringTuplesToTuples:u,bytesToTuples:f,tuplesToBytes:d,bytesToString:function(e){const t=f(e);return l(h(t))},stringToBytes:y,fromString:function(e){return y(e)},fromBytes:g,validateBytes:m,isValidBytes:function(e){return void 0===m(e)},cleanPath:w,ParseError:v,protoFromTuple:b,sizeForAddr:p}},3516:(e,t,r)=>{"use strict";const n=r(9745),i=r(23),{CID:s}=r(6629),{base32:o}=r(1128),{base58btc:a}=r(6898),c=r(8315),l=r(4561),{toString:u}=r(2051),{fromString:h}=r(6765),{concat:d}=r(2110);function p(e,t){return t instanceof Uint8Array?p.toString(e,t):p.toBytes(e,t)}function f(e){if(!n.isIP(e))throw new Error("invalid ip address");return n.toBytes(e)}function y(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function g(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function m(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2);return u(t,"base32")+":"+g(r)}e.exports=p,p.toString=function(e,t){switch(i(e).code){case 4:case 41:return function(e){const t=n.toString(e);if(!t||!n.isIP(t))throw new Error("invalid ip address");return t}(t);case 6:case 273:case 33:case 132:return g(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(e){const t=l.decode(e);if((e=e.slice(l.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return u(e)}(t);case 421:return function(e){const t=l.decode(e),r=e.slice(l.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return u(r,"base58btc")}(t);case 444:case 445:return m(t);default:return u(t,"base16")}},p.toBytes=function(e,t){switch(i(e).code){case 4:case 41:return f(t);case 6:case 273:case 33:case 132:return y(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(e){const t=h(e),r=Uint8Array.from(l.encode(t.length));return d([r,t],r.length+t.length)}(t);case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?c.decode(a.decode(`z${e}`)).bytes:s.parse(e).multihash.bytes;const r=Uint8Array.from(l.encode(t.length));return d([r,t],r.length+t.length)}(t);case 444:return function(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(16!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion address.");const r=o.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=y(n);return d([r,i],r.length+i.length)}(t);case 445:return function(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: "+t+" does not contain a port number");if(56!==t[0].length)throw new Error("failed to parse onion addr: "+t[0]+" not a Tor onion3 address.");const r=o.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=y(n);return d([r,i],r.length+i.length)}(t);default:return h(t,"base16")}}},8719:(e,t,r)=>{"use strict";const n=r(3058),i=r(23),s=r(4561),{CID:o}=r(6629),{base58btc:a}=r(6898),c=r(7963),l=Symbol.for("nodejs.util.inspect.custom"),{toString:u}=r(2051),{equals:h}=r(8779),d=new Map,p=Symbol.for("@multiformats/js-multiaddr/multiaddr");class f{constructor(e){if(null==e&&(e=""),Object.defineProperty(this,p,{value:!0}),e instanceof Uint8Array)this.bytes=n.fromBytes(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=n.fromString(e)}else{if(!f.isMultiaddr(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=n.fromBytes(e.bytes)}}toString(){return n.bytesToString(this.bytes)}toJSON(){return this.toString()}toOptions(){const e={},t=this.toString().split("/");return e.family="ip4"===t[1]?4:6,e.host=t[2],e.transport=t[3],e.port=parseInt(t[4]),e}protos(){return this.protoCodes().map((e=>Object.assign({},i(e))))}protoCodes(){const e=[],t=this.bytes;let r=0;for(;r<t.length;){const o=s.decode(t,r),a=s.decode.bytes,c=i(o);r+=n.sizeForAddr(c,t.slice(r+a))+a,e.push(o)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return n.bytesToTuples(this.bytes)}stringTuples(){const e=n.bytesToTuples(this.bytes);return n.tuplesToStringTuples(e)}encapsulate(e){return e=new f(e),new f(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw new Error("Address "+this+" does not contain subaddress: "+e);return new f(r.slice(0,n))}decapsulateCode(e){const t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new f(n.tuplesToBytes(t.slice(0,r)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===i.names.ipfs.code)),t=e.pop();if(t&&t[1]){const e=t[1];return"Q"===e[0]||"1"===e[0]?u(a.decode(`z${e}`),"base58btc"):u(o.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>!!i(e[0]).path))[0][1],e||(e=null)}catch(t){e=null}return e}equals(e){return h(this.bytes,e.bytes)}async resolve(){const e=this.protos().find((e=>e.resolvable));if(!e)return[this];const t=d.get(e.name);if(!t)throw c(new Error(`no available resolver for ${e.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await t(this)).map((e=>new f(e)))}nodeAddress(){const e=this.protoCodes(),t=this.protoNames(),r=this.toString().split("/").slice(1);if(r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6}/{address}/{tcp, udp}/{port}".');if(4!==e[0]&&41!==e[0]&&54!==e[0]&&55!==e[0])throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns4, dns6}".`);if("tcp"!==r[2]&&"udp"!==r[2])throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===e[0]||55===e[0]?6:4,address:r[1],port:parseInt(r[3])}}isThinWaistAddress(e){const t=(e||this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}static fromNodeAddress(e,t){if(!e)throw new Error("requires node address object");if(!t)throw new Error("requires transport protocol");let r;switch(e.family){case 4:r="ip4";break;case 6:r="ip6";break;default:throw Error(`Invalid addr family. Got '${e.family}' instead of 4 or 6`)}return new f("/"+[r,e.address,t,e.port].join("/"))}static isName(e){return!!f.isMultiaddr(e)&&e.protos().some((e=>e.resolvable))}static isMultiaddr(e){return e instanceof f||Boolean(e&&e[p])}[l](){return"<Multiaddr "+u(this.bytes,"base16")+" - "+n.bytesToString(this.bytes)+">"}inspect(){return"<Multiaddr "+u(this.bytes,"base16")+" - "+n.bytesToString(this.bytes)+">"}}f.protocols=i,f.resolvers=d,e.exports={Multiaddr:f,multiaddr:function(e){return new f(e)},protocols:i,resolvers:d}},9745:(e,t,r)=>{"use strict";const n=r(2795),{toString:i}=r(2051),s=n,o=n.v4,a=n.v6,c=function(e,t,r){let n;if(r=~~r,o(e))n=t||new Uint8Array(r+4),e.split(/\./g).map((function(e){n[r++]=255&parseInt(e,10)}));else if(a(e)){const s=e.split(":",8);let a;for(a=0;a<s.length;a++){let e;o(s[a])&&(e=c(s[a]),s[a]=i(e.slice(0,2),"base16")),e&&++a<8&&s.splice(a,0,i(e.slice(2,4),"base16"))}if(""===s[0])for(;s.length<8;)s.unshift("0");else if(""===s[s.length-1])for(;s.length<8;)s.push("0");else if(s.length<8){for(a=0;a<s.length&&""!==s[a];a++);const e=[a,"1"];for(a=9-s.length;a>0;a--)e.push("0");s.splice.apply(s,e)}for(n=t||new Uint8Array(r+16),a=0;a<s.length;a++){const e=parseInt(s[a],16);n[r++]=e>>8&255,n[r++]=255&e}}if(!n)throw Error("Invalid ip address: "+e);return n};e.exports={isIP:s,isV4:o,isV6:a,toBytes:c,toString:function(e,t,r){t=~~t,r=r||e.length-t;const n=[];let i;const s=new DataView(e.buffer);if(4===r){for(let i=0;i<r;i++)n.push(e[t+i]);i=n.join(".")}else if(16===r){for(let e=0;e<r;e+=2)n.push(s.getUint16(t+e).toString(16));i=n.join(":"),i=i.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),i=i.replace(/:{3,4}/,"::")}return i}}},23:e=>{"use strict";function t(e){if("number"===typeof e){if(t.codes[e])return t.codes[e];throw new Error("no protocol with code: "+e)}if("string"===typeof e){if(t.names[e])return t.names[e];throw new Error("no protocol with name: "+e)}throw new Error("invalid protocol id type: "+e)}const r=-1;function n(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}t.lengthPrefixedVarSize=r,t.V=r,t.table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,r,"ip6zone"],[53,r,"dns","resolvable"],[54,r,"dns4","resolvable"],[55,r,"dns6","resolvable"],[56,r,"dnsaddr","resolvable"],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,r,"unix",!1,"path"],[421,r,"ipfs"],[421,r,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,r,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,r,"memory"]],t.names={},t.codes={},t.table.map((e=>{const r=n.apply(null,e);return t.codes[r.code]=r,t.names[r.name]=r,null})),t.object=n,e.exports=t},2165:(e,t,r)=>{e.exports=r(407)},407:function(e,t){!function(r,n){"use strict";var i={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function o(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}function c(e){return e=o(e^=e>>>16,2246822507),e=o(e^=e>>>13,3266489909),e^=e>>>16}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function h(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function d(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function p(e,t){return[e[0]^t[0],e[1]^t[1]]}function f(e){return e=p(e,[0,e[0]>>>1]),e=p(e=u(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=p(e=u(e,[3301882366,444984403]),[0,e[0]>>>1])}i.x86.hash32=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%4,l=e.length-r,u=t,h=0,d=3432918353,p=461845907,f=0;f<l;f+=4)h=o(h=e[f]|e[f+1]<<8|e[f+2]<<16|e[f+3]<<24,d),h=o(h=a(h,15),p),u=o(u=a(u^=h,13),5)+3864292196;switch(h=0,r){case 3:h^=e[f+2]<<16;case 2:h^=e[f+1]<<8;case 1:h=o(h^=e[f],d),u^=h=o(h=a(h,15),p)}return(u=c(u^=e.length))>>>0},i.x86.hash128=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%16,l=e.length-r,u=t,h=t,d=t,p=t,f=0,y=0,g=0,m=0,w=597399067,v=2869860233,b=951274213,E=2716044179,_=0;_<l;_+=16)f=e[_]|e[_+1]<<8|e[_+2]<<16|e[_+3]<<24,y=e[_+4]|e[_+5]<<8|e[_+6]<<16|e[_+7]<<24,g=e[_+8]|e[_+9]<<8|e[_+10]<<16|e[_+11]<<24,m=e[_+12]|e[_+13]<<8|e[_+14]<<16|e[_+15]<<24,f=a(f=o(f,w),15),u=a(u^=f=o(f,v),19),u=o(u+=h,5)+1444728091,y=a(y=o(y,v),16),h=a(h^=y=o(y,b),17),h=o(h+=d,5)+197830471,g=a(g=o(g,b),17),d=a(d^=g=o(g,E),15),d=o(d+=p,5)+2530024501,m=a(m=o(m,E),18),p=a(p^=m=o(m,w),13),p=o(p+=u,5)+850148119;switch(f=0,y=0,g=0,m=0,r){case 15:m^=e[_+14]<<16;case 14:m^=e[_+13]<<8;case 13:m=o(m^=e[_+12],E),p^=m=o(m=a(m,18),w);case 12:g^=e[_+11]<<24;case 11:g^=e[_+10]<<16;case 10:g^=e[_+9]<<8;case 9:g=o(g^=e[_+8],b),d^=g=o(g=a(g,17),E);case 8:y^=e[_+7]<<24;case 7:y^=e[_+6]<<16;case 6:y^=e[_+5]<<8;case 5:y=o(y^=e[_+4],v),h^=y=o(y=a(y,16),b);case 4:f^=e[_+3]<<24;case 3:f^=e[_+2]<<16;case 2:f^=e[_+1]<<8;case 1:f=o(f^=e[_],w),u^=f=o(f=a(f,15),v)}return u^=e.length,u+=h^=e.length,u+=d^=e.length,h+=u+=p^=e.length,d+=u,p+=u,u=c(u),u+=h=c(h),u+=d=c(d),h+=u+=p=c(p),d+=u,p+=u,("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)+("00000000"+(p>>>0).toString(16)).slice(-8)},i.x64.hash128=function(e,t){if(i.inputValidation&&!s(e))return n;t=t||0;for(var r=e.length%16,o=e.length-r,a=[0,t],c=[0,t],y=[0,0],g=[0,0],m=[2277735313,289559509],w=[1291169091,658871167],v=0;v<o;v+=16)y=[e[v+4]|e[v+5]<<8|e[v+6]<<16|e[v+7]<<24,e[v]|e[v+1]<<8|e[v+2]<<16|e[v+3]<<24],g=[e[v+12]|e[v+13]<<8|e[v+14]<<16|e[v+15]<<24,e[v+8]|e[v+9]<<8|e[v+10]<<16|e[v+11]<<24],y=h(y=u(y,m),31),a=l(a=h(a=p(a,y=u(y,w)),27),c),a=l(u(a,[0,5]),[0,1390208809]),g=h(g=u(g,w),33),c=l(c=h(c=p(c,g=u(g,m)),31),a),c=l(u(c,[0,5]),[0,944331445]);switch(y=[0,0],g=[0,0],r){case 15:g=p(g,d([0,e[v+14]],48));case 14:g=p(g,d([0,e[v+13]],40));case 13:g=p(g,d([0,e[v+12]],32));case 12:g=p(g,d([0,e[v+11]],24));case 11:g=p(g,d([0,e[v+10]],16));case 10:g=p(g,d([0,e[v+9]],8));case 9:g=u(g=p(g,[0,e[v+8]]),w),c=p(c,g=u(g=h(g,33),m));case 8:y=p(y,d([0,e[v+7]],56));case 7:y=p(y,d([0,e[v+6]],48));case 6:y=p(y,d([0,e[v+5]],40));case 5:y=p(y,d([0,e[v+4]],32));case 4:y=p(y,d([0,e[v+3]],24));case 3:y=p(y,d([0,e[v+2]],16));case 2:y=p(y,d([0,e[v+1]],8));case 1:y=u(y=p(y,[0,e[v]]),m),a=p(a,y=u(y=h(y,31),w))}return a=l(a=p(a,[0,e.length]),c=p(c,[0,e.length])),c=l(c,a),a=l(a=f(a),c=f(c)),c=l(c,a),("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)+("00000000"+(c[0]>>>0).toString(16)).slice(-8)+("00000000"+(c[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=i),t.murmurHash3=i}()},486:e=>{"use strict";function t(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}e.exports=function(e){var r=void 0,n=void 0;function i(e){if(!(e instanceof Object))throw new Error('Target "'+e+'" is not an object');n=e}function s(e){Object.keys(e).forEach((function(t){var r=e[t];if("function"!==typeof r)throw new Error('Trap "'+t+": "+r+'" is not a function');if(!Reflect[t])throw new Error('Trap "'+t+": "+r+'" is not a valid trap')})),r=e}i((function(){})),e&&i(e),s(Reflect);var o=new Proxy({},{get:function(e,i){return function(){for(var e=arguments.length,s=Array(e),o=0;o<e;o++)s[o]=arguments[o];return r[i].apply(null,[n].concat(t(s.slice(1))))}}});return{setTarget:i,setHandler:s,getTarget:function(){return n},getHandler:function(){return r},proxy:new Proxy(n,o)}}},1900:(e,t,r)=>{"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:r(5359).default,Headers:r(5359).Headers,Request:r(5359).Request,Response:r(5359).Response}},7922:function(e,t){(function(){var e,r,n,i,s,o,a,c;c=function(e){return[(e&255<<24)>>>24,(e&255<<16)>>>16,(65280&e)>>>8,255&e].join(".")},a=function(e){var t,n,i,s,o,a;for(t=[],i=s=0;s<=3&&0!==e.length;i=++s){if(i>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}o=(a=r(e))[0],n=a[1],e=e.substring(n),t.push(o)}if(0!==e.length)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},i=(n=function(e){return e.charCodeAt(0)})("0"),o=n("a"),s=n("A"),r=function(e){var t,r,a,c,l;for(c=0,t=10,r="9",a=0,e.length>1&&"0"===e[a]&&("x"===e[a+1]||"X"===e[a+1]?(a+=2,t=16):"0"<=e[a+1]&&e[a+1]<="9"&&(a++,t=8,r="7")),l=a;a<e.length;){if("0"<=e[a]&&e[a]<=r)c=c*t+(n(e[a])-i)>>>0;else{if(16!==t)break;if("a"<=e[a]&&e[a]<="f")c=c*t+(10+n(e[a])-o)>>>0;else{if(!("A"<=e[a]&&e[a]<="F"))break;c=c*t+(10+n(e[a])-s)>>>0}}if(c>4294967295)throw new Error("too large");a++}if(a===l)throw new Error("empty octet");return[c,a]},e=function(){function e(e,t){var r,n,i;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(i=e.split("/",2),e=i[0],t=i[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=a(t)}catch(s){throw s,new Error("Invalid mask: "+t)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(e)&this.maskLong)>>>0}catch(s){throw s,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=c(this.netLong),this.mask=c(this.maskLong),this.hostmask=c(~this.maskLong),this.first=this.bitmask<=30?c(this.netLong+1):this.base,this.last=this.bitmask<=30?c(this.netLong+this.size-2):c(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?c(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(a(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(c(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,n;for(n=a(this.first),r=a(this.last),t=0;n<=r;)e(c(n),n,t),t++,n++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=a,t.long2ip=c,t.Netmask=e}).call(this)},5359:(e,t)=>{"use strict";var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,r.fetch&&(t.default=r.fetch.bind(r)),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},8605:(e,t,r)=>{var n=r(392);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var i=f({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},n.aes.createEncryptionCipher=function(e,t){return f({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var i=f({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},n.aes.createDecryptionCipher=function(e,t){return f({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){u||h();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return p(r._w,e,t,!1)},decrypt:function(e,t){return p(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var i=0;i<t.length;++i)r.putByte(t[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var s=t.length();if(16===s||24===s||32===s){s>>>=2;for(i=0;i<s;++i)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var o=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(o);this._w=d(r,e.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(e,t){return u||h(),d(e,t)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var s,o,a,c,l,u=!1;function h(){u=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;s=new Array(256),o=new Array(256),c=new Array(4),l=new Array(4);for(t=0;t<4;++t)c[t]=new Array(256),l[t]=new Array(256);var r,n,i,h,d,p,f,y=0,g=0;for(t=0;t<256;++t){h=(h=g^g<<1^g<<2^g<<3^g<<4)>>8^255&h^99,s[y]=h,o[h]=y,p=(d=e[h])<<24^h<<16^h<<8^h^d,f=((r=e[y])^(n=e[r])^(i=e[n]))<<24^(y^i)<<16^(y^n^i)<<8^y^r^i;for(var m=0;m<4;++m)c[m][y]=p,l[m][h]=f,p=p<<24|p>>>8,f=f<<24|f>>>8;0===y?y=g=1:(y=r^e[e[e[r^i]]],g^=e[e[g]])}}function d(e,t){for(var r,n=e.slice(0),i=1,o=n.length,c=4*(o+6+1),u=o;u<c;++u)r=n[u-1],u%o===0?(r=s[r>>>16&255]<<24^s[r>>>8&255]<<16^s[255&r]<<8^s[r>>>24]^a[i]<<24,i++):o>6&&u%o===4&&(r=s[r>>>24]<<24^s[r>>>16&255]<<16^s[r>>>8&255]<<8^s[255&r]),n[u]=n[u-o]^r;if(t){for(var h,d=l[0],p=l[1],f=l[2],y=l[3],g=n.slice(0),m=(u=0,(c=n.length)-4);u<c;u+=4,m-=4)if(0===u||u===c-4)g[u]=n[m],g[u+1]=n[m+3],g[u+2]=n[m+2],g[u+3]=n[m+1];else for(var w=0;w<4;++w)h=n[m+w],g[u+(3&-w)]=d[s[h>>>24]]^p[s[h>>>16&255]]^f[s[h>>>8&255]]^y[s[255&h]];n=g}return n}function p(e,t,r,n){var i,a,u,h,d,p,f,y,g,m,w,v,b=e.length/4-1;n?(i=l[0],a=l[1],u=l[2],h=l[3],d=o):(i=c[0],a=c[1],u=c[2],h=c[3],d=s),p=t[0]^e[0],f=t[n?3:1]^e[1],y=t[2]^e[2],g=t[n?1:3]^e[3];for(var E=3,_=1;_<b;++_)m=i[p>>>24]^a[f>>>16&255]^u[y>>>8&255]^h[255&g]^e[++E],w=i[f>>>24]^a[y>>>16&255]^u[g>>>8&255]^h[255&p]^e[++E],v=i[y>>>24]^a[g>>>16&255]^u[p>>>8&255]^h[255&f]^e[++E],g=i[g>>>24]^a[p>>>16&255]^u[f>>>8&255]^h[255&y]^e[++E],p=m,f=w,y=v;r[0]=d[p>>>24]<<24^d[f>>>16&255]<<16^d[y>>>8&255]<<8^d[255&g]^e[++E],r[n?3:1]=d[f>>>24]<<24^d[y>>>16&255]<<16^d[g>>>8&255]<<8^d[255&p]^e[++E],r[2]=d[y>>>24]<<24^d[g>>>16&255]<<16^d[p>>>8&255]<<8^d[255&f]^e[++E],r[n?1:3]=d[g>>>24]<<24^d[p>>>16&255]<<16^d[f>>>8&255]<<8^d[255&y]^e[++E]}function f(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=e,i.call(t,r)},t}},5049:(e,t,r)=>{var n=r(392);r(3877),r(2886);var i=e.exports=n.asn1=n.asn1||{};function s(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(e,t,r,s,o){if(n.util.isArray(s)){for(var a=[],c=0;c<s.length;++c)void 0!==s[c]&&a.push(s[c]);s=a}var l={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(s),value:s};return o&&"bitStringContents"in o&&(l.bitStringContents=o.bitStringContents,l.original=i.copy(l)),l},i.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var s=0;s<e.length;++s)r.push(i.copy(e[s],t));return r}return"string"===typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:i.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},i.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(!i.equals(e[s],t[s]))return!1;return!0}if(typeof e!==typeof t)return!1;if("string"===typeof e)return e===t;var o=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&i.equals(e.value,t.value);return r&&r.includeBitStringContents&&(o=o&&e.bitStringContents===t.bitStringContents),o},i.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};function o(e,t,r,n){var a;s(e,t,2);var c=e.getByte();t--;var l=192&c,u=31&c;a=e.length();var h,d,p=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var i=127&r;s(e,t,i),n=e.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,t);if(t-=a-e.length(),void 0!==p&&p>t){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=e.length(),f.remaining=t,f.requested=p,f}p=t}var y=32===(32&c);if(y)if(h=[],void 0===p)for(;;){if(s(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}a=e.length(),h.push(o(e,t,r+1,n)),t-=a-e.length()}else for(;p>0;)a=e.length(),h.push(o(e,p,r+1,n)),t-=a-e.length(),p-=a-e.length();if(void 0===h&&l===i.Class.UNIVERSAL&&u===i.Type.BITSTRING&&(d=e.bytes(p)),void 0===h&&n.decodeBitStrings&&l===i.Class.UNIVERSAL&&u===i.Type.BITSTRING&&p>1){var g=e.read,m=t,w=0;if(u===i.Type.BITSTRING&&(s(e,t,1),w=e.getByte(),t--),0===w)try{a=e.length();var v=o(e,t,r+1,{strict:!0,decodeBitStrings:!0}),b=a-e.length();t-=b,u==i.Type.BITSTRING&&b++;var E=v.tagClass;b!==p||E!==i.Class.UNIVERSAL&&E!==i.Class.CONTEXT_SPECIFIC||(h=[v])}catch(S){}void 0===h&&(e.read=g,t=m)}if(void 0===h){if(void 0===p){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=t}if(u===i.Type.BMPSTRING)for(h="";p>0;p-=2)s(e,t,2),h+=String.fromCharCode(e.getInt16()),t-=2;else h=e.getBytes(p),t-=p}var _=void 0===d?null:{bitStringContents:d};return i.create(l,u,y,h,_)}i.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.length(),i=o(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=e.length(),s}return i},i.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,s=n.util.createBuffer(),o=!1;if("bitStringContents"in e&&(o=!0,e.original&&(o=i.equals(e,e.original))),o)s.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:s.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&s.putBuffer(i.toDer(e.value[a]))}else if(e.type===i.Type.BMPSTRING)for(a=0;a<e.value.length;++a)s.putInt16(e.value.charCodeAt(a));else e.type===i.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?s.putBytes(e.value.substr(1)):s.putBytes(e.value);if(t.putByte(r),s.length()<=127)t.putByte(127&s.length());else{var c=s.length(),l="";do{l+=String.fromCharCode(255&c),c>>>=8}while(c>0);t.putByte(128|l.length);for(a=l.length-1;a>=0;--a)t.putByte(l.charCodeAt(a))}return t.putBuffer(s),t},i.oidToDer=function(e){var t,r,i,s,o=e.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(o[0],10)+parseInt(o[1],10));for(var c=2;c<o.length;++c){t=!0,r=[],i=parseInt(o[c],10);do{s=127&i,i>>>=7,t||(s|=128),r.push(s),t=!1}while(i>0);for(var l=r.length-1;l>=0;--l)a.putByte(r[l])}return a},i.derToOid=function(e){var t;"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var i=0;e.length()>0;)i<<=7,128&(r=e.getByte())?i+=127&r:(t+="."+(i+r),i=0);return t},i.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),l=10;"+"!==c&&"-"!==c&&(a=parseInt(e.substr(10,2),10),l+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),l&&("+"===(c=e.charAt(l))||"-"===c)){var u=60*parseInt(e.substr(l+1,2),10)+parseInt(e.substr(l+4,2),10);u*=6e4,"+"===c?t.setTime(+t-u):t.setTime(+t+u)}return t},i.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,l=0,u=!1;"Z"===e.charAt(e.length-1)&&(u=!0);var h=e.length-5,d=e.charAt(h);"+"!==d&&"-"!==d||(l=60*parseInt(e.substr(h+1,2),10)+parseInt(e.substr(h+4,2),10),l*=6e4,"+"===d&&(l*=-1),u=!0);return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,c),t.setTime(+t+l)):(t.setFullYear(r,n,i),t.setHours(s,o,a,c)),t},i.dateToUtcTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.dateToGeneralizedTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},i.derToInteger=function(e){"string"===typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},i.validate=function(e,t,r,s){var o=!1;if(e.tagClass!==t.tagClass&&"undefined"!==typeof t.tagClass||e.type!==t.type&&"undefined"!==typeof t.type)s&&(e.tagClass!==t.tagClass&&s.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&s.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||"undefined"===typeof t.constructed){if(o=!0,t.value&&n.util.isArray(t.value))for(var a=0,c=0;o&&c<t.value.length;++c)o=t.value[c].optional||!1,e.value[a]&&((o=i.validate(e.value[a],t.value[c],r,s))?++a:t.value[c].optional&&(o=!0)),!o&&s&&s.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(o&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else s&&s.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return o};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(e,t,r){var s="";r=r||2,(t=t||0)>0&&(s+="\n");for(var o="",c=0;c<t*r;++c)o+=" ";switch(s+=o+"Tag: ",e.tagClass){case i.Class.UNIVERSAL:s+="Universal:";break;case i.Class.APPLICATION:s+="Application:";break;case i.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case i.Class.PRIVATE:s+="Private:"}if(e.tagClass===i.Class.UNIVERSAL)switch(s+=e.type,e.type){case i.Type.NONE:s+=" (None)";break;case i.Type.BOOLEAN:s+=" (Boolean)";break;case i.Type.INTEGER:s+=" (Integer)";break;case i.Type.BITSTRING:s+=" (Bit string)";break;case i.Type.OCTETSTRING:s+=" (Octet string)";break;case i.Type.NULL:s+=" (Null)";break;case i.Type.OID:s+=" (Object Identifier)";break;case i.Type.ODESC:s+=" (Object Descriptor)";break;case i.Type.EXTERNAL:s+=" (External or Instance of)";break;case i.Type.REAL:s+=" (Real)";break;case i.Type.ENUMERATED:s+=" (Enumerated)";break;case i.Type.EMBEDDED:s+=" (Embedded PDV)";break;case i.Type.UTF8:s+=" (UTF8)";break;case i.Type.ROID:s+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:s+=" (Sequence)";break;case i.Type.SET:s+=" (Set)";break;case i.Type.PRINTABLESTRING:s+=" (Printable String)";break;case i.Type.IA5String:s+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:s+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case i.Type.BMPSTRING:s+=" (BMP String)"}else s+=e.type;if(s+="\n",s+=o+"Constructed: "+e.constructed+"\n",e.composed){var l=0,u="";for(c=0;c<e.value.length;++c)void 0!==e.value[c]&&(l+=1,u+=i.prettyPrint(e.value[c],t+1,r),c+1<e.value.length&&(u+=","));s+=o+"Sub values: "+l+u}else{if(s+=o+"Value: ",e.type===i.Type.OID){var h=i.derToOid(e.value);s+=h,n.pki&&n.pki.oids&&h in n.pki.oids&&(s+=" ("+n.pki.oids[h]+") ")}if(e.type===i.Type.INTEGER)try{s+=i.derToInteger(e.value)}catch(p){s+="0x"+n.util.bytesToHex(e.value)}else if(e.type===i.Type.BITSTRING){if(e.value.length>1?s+="0x"+n.util.bytesToHex(e.value.slice(1)):s+="(none)",e.value.length>0){var d=e.value.charCodeAt(0);1==d?s+=" (1 unused bit shown)":d>1&&(s+=" ("+d+" unused bits shown)")}}else if(e.type===i.Type.OCTETSTRING)a.test(e.value)||(s+="("+e.value+") "),s+="0x"+n.util.bytesToHex(e.value);else if(e.type===i.Type.UTF8)try{s+=n.util.decodeUtf8(e.value)}catch(f){if("URI malformed"!==f.message)throw f;s+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===i.Type.PRINTABLESTRING||e.type===i.Type.IA5String?s+=e.value:a.test(e.value)?s+="0x"+n.util.bytesToHex(e.value):0===e.value.length?s+="[null]":s+=e.value}return s}},5754:e=>{var t={};e.exports=t;var r={};t.encode=function(e,t,r){if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var c=0,l=e[i];c<a.length;++c)l+=a[c]<<8,a[c]=l%s,l=l/s|0;for(;l>0;)a.push(l%s),l=l/s|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=i;for(r=s.length-1;r>=0;--r)c+=t[s[r]];return c}(e,t);if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join("\r\n")}return n},t.decode=function(e,t){if("string"!==typeof e)throw new TypeError('"input" must be a string.');if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');var n=r[t];if(!n){n=r[t]=[];for(var i=0;i<t.length;++i)n[t.charCodeAt(i)]=i}e=e.replace(/\s/g,"");var s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;i++){var c=n[e.charCodeAt(i)];if(void 0===c)return;for(var l=0,u=c;l<a.length;++l)u+=a[l]*s,a[l]=255&u,u>>=8;for(;u>0;)a.push(255&u),u>>=8}for(var h=0;e[h]===o&&h<e.length-1;++h)a.push(0);return"undefined"!==typeof Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())}},3397:(e,t,r)=>{var n=r(392);r(3877),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var i=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};i.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},i.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},4533:(e,t,r)=>{var n=r(392);r(3877),n.cipher=n.cipher||{};var i=e.exports=n.cipher.modes=n.cipher.modes||{};function s(e,t){if("string"===typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var s=[],o=t/4;for(i=0;i<o;++i)s.push(e.getInt32());e=s}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=a(8*t.length());var s=t.length()%this.blockSize;for(s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},i.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^s[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},i.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],c=(n-1-o%n)*t;a[o/n|0]=1<<t-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s},i.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],c=i[o];i[s+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var l=i[s^n];i[s]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]]}return i}},1400:(e,t,r)=>{var n=r(392);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var i=f({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createEncryptionCipher=function(e,t){return f({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var i=f({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createDecryptionCipher=function(e,t){return f({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return p(r._keys,e,t,!1)},decrypt:function(e,t){return p(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],f=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],y=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,m=[],w=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,b=0;b<g;b++){var E=e.getInt32(),_=e.getInt32();E^=(t=252645135&(E>>>4^_))<<4,E^=t=65535&((_^=t)>>>-16^E),E^=(t=858993459&(E>>>2^(_^=t<<-16)))<<2,E^=t=65535&((_^=t)>>>-16^E),E^=(t=1431655765&(E>>>1^(_^=t<<-16)))<<1,E^=t=16711935&((_^=t)>>>8^E),t=(E^=(t=1431655765&(E>>>1^(_^=t<<8)))<<1)<<8|(_^=t)>>>20&240,E=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=t;for(var S=0;S<w.length;++S){w[S]?(E=E<<2|E>>>26,_=_<<2|_>>>26):(E=E<<1|E>>>27,_=_<<1|_>>>27),_&=-15;var A=r[(E&=-15)>>>28]|n[E>>>24&15]|i[E>>>20&15]|s[E>>>16&15]|o[E>>>12&15]|a[E>>>8&15]|c[E>>>4&15],k=l[_>>>28]|u[_>>>24&15]|h[_>>>20&15]|d[_>>>16&15]|p[_>>>12&15]|f[_>>>8&15]|y[_>>>4&15];t=65535&(k>>>16^A),m[v++]=A^t,m[v++]=k^t<<16}}return m}(t),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],o=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],u=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],d=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function p(e,t,r,n){var i,p,f=32===e.length?3:9;i=3===f?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var y=t[0],g=t[1];y^=(p=252645135&(y>>>4^g))<<4,y^=(p=65535&(y>>>16^(g^=p)))<<16,y^=p=858993459&((g^=p)>>>2^y),y^=p=16711935&((g^=p<<2)>>>8^y),y=(y^=(p=1431655765&(y>>>1^(g^=p<<8)))<<1)<<1|y>>>31,g=(g^=p)<<1|g>>>31;for(var m=0;m<f;m+=3){for(var w=i[m+1],v=i[m+2],b=i[m];b!=w;b+=v){var E=g^e[b],_=(g>>>4|g<<28)^e[b+1];p=y,y=g,g=p^(o[E>>>24&63]|c[E>>>16&63]|u[E>>>8&63]|d[63&E]|s[_>>>24&63]|a[_>>>16&63]|l[_>>>8&63]|h[63&_])}p=y,y=g,g=p}g=g>>>1|g<<31,g^=p=1431655765&((y=y>>>1|y<<31)>>>1^g),g^=(p=16711935&(g>>>8^(y^=p<<1)))<<8,g^=(p=858993459&(g>>>2^(y^=p)))<<2,g^=p=65535&((y^=p)>>>16^g),g^=p=252645135&((y^=p<<16)>>>4^g),y^=p<<4,r[0]=y,r[1]=g}function f(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var s=null;r instanceof n.util.ByteBuffer&&(s=r,r={}),(r=r||{}).output=s,r.iv=e,i.call(t,r)},t}},392:e=>{e.exports={options:{usePureJavaScript:!1}}},878:(e,t,r)=>{var n=r(392);r(29),r(3877),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,i=null,s={start:function(s,o){if(null!==s)if("string"===typeof s){if(!((s=s.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=n.md.algorithms[s].create()}else t=s;if(null===o)o=e;else{if("string"===typeof o)o=n.util.createBuffer(o);else if(n.util.isArray(o)){var a=o;o=n.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var l=o.length();l>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),l=o.length();for(c=0;c<l;++c){a=o.at(c);r.putByte(54^a),i.putByte(92^a)}if(l<t.blockLength)for(a=t.blockLength-l,c=0;c<a;++c)r.putByte(54),i.putByte(92);e=o,r=r.bytes(),i=i.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(i),t.update(e),t.digest()}};return s.digest=s.getMac,s}},3055:(e,t,r)=>{var n,i=r(392);e.exports=i.jsbn=i.jsbn||{};function s(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function o(){return new s(null)}function a(e,t,r,n,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var c=16383&this.data[e],l=this.data[e++]>>14,u=a*c+l*o;i=((c=o*c+((16383&u)<<14)+r.data[n]+i)>>28)+(u>>14)+a*l,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=s,"undefined"===typeof navigator?(s.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var c=32767&this.data[e],l=this.data[e++]>>15,u=a*c+l*o;i=((c=o*c+((32767&u)<<15)+r.data[n]+(1073741823&i))>>>30)+(u>>>15)+a*l+(i>>>30),r.data[n++]=1073741823&c}return i},n=30):"Netscape"!=navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},n=26):(s.prototype.am=a,n=28),s.prototype.DB=n,s.prototype.DM=(1<<n)-1,s.prototype.DV=1<<n;s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-n,s.prototype.F2=2*n-52;var c,l,u=new Array;for(c="0".charCodeAt(0),l=0;l<=9;++l)u[c++]=l;for(c="a".charCodeAt(0),l=10;l<36;++l)u[c++]=l;for(c="A".charCodeAt(0),l=10;l<36;++l)u[c++]=l;function h(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function d(e,t){var r=u[e.charCodeAt(t)];return null==r?-1:r}function p(e){var t=o();return t.fromInt(e),t}function f(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function y(e){this.m=e}function g(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function m(e,t){return e&t}function w(e,t){return e|t}function v(e,t){return e^t}function b(e,t){return e&~t}function E(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function _(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function S(){}function A(e){return e}function k(e){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}y.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},y.prototype.revert=function(e){return e},y.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},g.prototype.convert=function(e){var t=o();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t},g.prototype.revert=function(e){var t=o();return e.copyTo(t),this.reduce(t),t},g.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},g.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},g.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},s.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},s.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},s.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var a=8==r?255&e[n]:d(e,n);a<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==o?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,(o+=r)>=this.DB&&(o-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},s.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},s.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},s.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},s.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},s.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},s.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)},s.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},s.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var a=o(),c=this.s,l=e.s,u=this.DB-f(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var h=a.t,d=a.data[h-1];if(0!=d){var p=d*(1<<this.F1)+(h>1?a.data[h-2]>>this.F2:0),y=this.FV/p,g=(1<<this.F1)/p,m=1<<this.F2,w=r.t,v=w-h,b=null==t?o():t;for(a.dlShiftTo(v,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),s.ONE.dlShiftTo(h,b),b.subTo(a,a);a.t<h;)a.data[a.t++]=0;for(;--v>=0;){var E=r.data[--w]==d?this.DM:Math.floor(r.data[w]*y+(r.data[w-1]+m)*g);if((r.data[w]+=a.am(0,E,r,v,0,h))<E)for(a.dlShiftTo(v,b),r.subTo(b,r);r.data[w]<--E;)r.subTo(b,r)}null!=t&&(r.drShiftTo(h,t),c!=l&&s.ZERO.subTo(t,t)),r.t=h,r.clamp(),u>0&&r.rShiftTo(u,r),c<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(e,t){if(e>4294967295||e<1)return s.ONE;var r=o(),n=o(),i=t.convert(this),a=f(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var c=r;r=n,n=c}return t.revert(r)},s.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=h(r));o>=0;)a<t?(r=(this.data[o]&(1<<a)-1)<<t-a,r|=this.data[--o]>>(a+=this.DB-t)):(r=this.data[o]>>(a-=t)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=h(r));return i?s:"0"},s.prototype.negate=function(){var e=o();return s.ZERO.subTo(this,e),e},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+f(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(e){var t=o();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t},s.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new y(t):new g(t),this.exp(e,r)},s.ZERO=p(0),s.ONE=p(1),S.prototype.convert=A,S.prototype.revert=A,S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},S.prototype.sqrTo=function(e,t){e.squareTo(t)},k.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=o();return e.copyTo(t),this.reduce(t),t},k.prototype.revert=function(e){return e},k.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},k.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],C=(1<<26)/I[I.length-1];s.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},s.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=p(r),i=o(),s=o(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a},s.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,a=0,c=0;c<e.length;++c){var l=d(e,c);l<0?"-"==e.charAt(c)&&0==this.signum()&&(i=!0):(a=t*a+l,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(a,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(s.ONE.shiftLeft(e-1),w,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(s.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},s.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},s.prototype.changeBit=function(e,t){var r=s.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},s.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},s.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},s.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},s.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},s.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},s.prototype.millerRabin=function(e){var t=this.subtract(s.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),o={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},a=0;a<e;++a){do{n=new s(this.bitLength(),o)}while(n.compareTo(s.ONE)<=0||n.compareTo(t)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(s.ONE)&&0!=c.compareTo(t)){for(var l=1;l++<r&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},s.prototype.clone=function(){var e=o();return this.copyTo(e),e},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},s.prototype.equals=function(e){return 0==this.compareTo(e)},s.prototype.min=function(e){return this.compareTo(e)<0?this:e},s.prototype.max=function(e){return this.compareTo(e)>0?this:e},s.prototype.and=function(e){var t=o();return this.bitwiseTo(e,m,t),t},s.prototype.or=function(e){var t=o();return this.bitwiseTo(e,w,t),t},s.prototype.xor=function(e){var t=o();return this.bitwiseTo(e,v,t),t},s.prototype.andNot=function(e){var t=o();return this.bitwiseTo(e,b,t),t},s.prototype.not=function(){for(var e=o(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},s.prototype.shiftLeft=function(e){var t=o();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},s.prototype.shiftRight=function(e){var t=o();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},s.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+E(this.data[e]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=_(this.data[r]^t);return e},s.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},s.prototype.setBit=function(e){return this.changeBit(e,w)},s.prototype.clearBit=function(e){return this.changeBit(e,b)},s.prototype.flipBit=function(e){return this.changeBit(e,v)},s.prototype.add=function(e){var t=o();return this.addTo(e,t),t},s.prototype.subtract=function(e){var t=o();return this.subTo(e,t),t},s.prototype.multiply=function(e){var t=o();return this.multiplyTo(e,t),t},s.prototype.divide=function(e){var t=o();return this.divRemTo(e,t,null),t},s.prototype.remainder=function(e){var t=o();return this.divRemTo(e,null,t),t},s.prototype.divideAndRemainder=function(e){var t=o(),r=o();return this.divRemTo(e,t,r),new Array(t,r)},s.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),s=p(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new y(t):t.isEven()?new k(t):new g(t);var a=new Array,c=3,l=r-1,u=(1<<r)-1;if(a[1]=n.convert(this),r>1){var h=o();for(n.sqrTo(a[1],h);c<=u;)a[c]=o(),n.mulTo(h,a[c-2],a[c]),c+=2}var d,m,w=e.t-1,v=!0,b=o();for(i=f(e.data[w])-1;w>=0;){for(i>=l?d=e.data[w]>>i-l&u:(d=(e.data[w]&(1<<i+1)-1)<<l-i,w>0&&(d|=e.data[w-1]>>this.DB+i-l)),c=r;0==(1&d);)d>>=1,--c;if((i-=c)<0&&(i+=this.DB,--w),v)a[d].copyTo(s),v=!1;else{for(;c>1;)n.sqrTo(s,b),n.sqrTo(b,s),c-=2;c>0?n.sqrTo(s,b):(m=s,s=b,b=m),n.mulTo(b,a[d],s)}for(;w>=0&&0==(e.data[w]&1<<i);)n.sqrTo(s,b),m=s,s=b,b=m,--i<0&&(i=this.DB-1,--w)}return n.revert(s)},s.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return s.ZERO;for(var r=e.clone(),n=this.clone(),i=p(1),o=p(0),a=p(0),c=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),o.subTo(c,o)):(n.subTo(r,n),t&&a.subTo(i,a),c.subTo(o,c))}return 0!=n.compareTo(s.ONE)?s.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},s.prototype.pow=function(e){return this.exp(e,new S)},s.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},s.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(r.data[0]==I[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<I.length;){for(var n=I[t],i=t+1;i<I.length&&n<C;)n*=I[i++];for(n=r.modInt(n);t<i;)if(n%I[t++]==0)return!1}return r.millerRabin(e)}},29:(e,t,r)=>{var n=r(392);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},1746:(e,t,r)=>{var n=r(392);r(7263),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},7263:(e,t,r)=>{var n=r(392);r(3877),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var i=new n.util.ByteBuffer,s=Math.ceil(r/e.digestLength),o=0;o<s;o++){var a=new n.util.ByteBuffer;a.putInt32(o),e.start(),e.update(t+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}}}},2886:(e,t,r)=>{var n=r(392);n.pki=n.pki||{};var i=e.exports=n.pki.oids=n.oids=n.oids||{};function s(e,t){i[e]=t,i[t]=e}function o(e,t){i[e]=t}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),o("2.5.29.1","authorityKeyIdentifier"),o("2.5.29.2","keyAttributes"),o("2.5.29.3","certificatePolicies"),o("2.5.29.4","keyUsageRestriction"),o("2.5.29.5","policyMapping"),o("2.5.29.6","subtreesConstraint"),o("2.5.29.7","subjectAltName"),o("2.5.29.8","issuerAltName"),o("2.5.29.9","subjectDirectoryAttributes"),o("2.5.29.10","basicConstraints"),o("2.5.29.11","nameConstraints"),o("2.5.29.12","policyConstraints"),o("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),o("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),o("2.5.29.20","cRLNumber"),o("2.5.29.21","cRLReason"),o("2.5.29.22","expirationDate"),o("2.5.29.23","instructionCode"),o("2.5.29.24","invalidityDate"),o("2.5.29.25","cRLDistributionPoints"),o("2.5.29.26","issuingDistributionPoint"),o("2.5.29.27","deltaCRLIndicator"),o("2.5.29.28","issuingDistributionPoint"),o("2.5.29.29","certificateIssuer"),o("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),o("2.5.29.33","policyMappings"),o("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),o("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),o("2.5.29.46","freshestCRL"),o("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")},9835:(e,t,r)=>{var n=r(392);if(r(8605),r(5049),r(1400),r(29),r(2886),r(6019),r(6193),r(3860),r(654),r(5493),r(3877),"undefined"===typeof i)var i=n.jsbn.BigInteger;var s=n.asn1,o=n.pki=n.pki||{};e.exports=o.pbe=n.pbe=n.pbe||{};var a=o.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},u={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(e,t){return e.start().update(t).digest().getBytes()}function d(e){var t;if(e){if(!(t=o.oids[s.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return p(t)}function p(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}o.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,l,u=n.random.getBytesSync(r.saltSize),h=r.count,d=s.integerToDer(h);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var f,y,g;switch(r.algorithm){case"aes128":i=16,f=16,y=a["aes128-CBC"],g=n.aes.createEncryptionCipher;break;case"aes192":i=24,f=16,y=a["aes192-CBC"],g=n.aes.createEncryptionCipher;break;case"aes256":i=32,f=16,y=a["aes256-CBC"],g=n.aes.createEncryptionCipher;break;case"des":i=8,f=8,y=a.desCBC,g=n.des.createEncryptionCipher;break;default:throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),w=p(m),v=n.pkcs5.pbkdf2(t,u,h,i,w),b=n.random.getBytesSync(f);(S=g(v)).start(b),S.update(s.toDer(e)),S.finish(),l=S.output.getBytes();var E=function(e,t,r,i){var a=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==i&&a.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]));return a}(u,d,i,m);c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.pkcs5PBKDF2).getBytes()),E]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(y).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,b)])])])}else{var _;if("3des"!==r.algorithm)throw(_=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,_;i=24;var S,A=new n.util.ByteBuffer(u);v=o.pbe.generatePkcs12Key(t,A,1,h,i),b=o.pbe.generatePkcs12Key(t,A,2,h,i);(S=n.des.createEncryptionCipher(v)).start(b),S.update(s.toDer(e)),S.finish(),l=S.output.getBytes(),c=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,u),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,d.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[c,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l)])},o.decryptPrivateKeyInfo=function(e,t){var r=null,i={},a=[];if(!s.validate(e,c,i,a)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=a,l}var u=s.derToOid(i.encryptionOid),h=o.pbe.getCipher(u,i.encryptionParams,t),d=n.util.createBuffer(i.encryptedData);return h.update(d),h.finish()&&(r=s.fromDer(h.output)),r},o.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},o.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},o.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var i=o.wrapRsaPrivateKey(o.privateKeyToAsn1(e));return i=o.encryptPrivateKeyInfo(i,t,r),o.encryptedPrivateKeyToPem(i)}var a,c,l,u;switch(r.algorithm){case"aes128":a="AES-128-CBC",l=16,c=n.random.getBytesSync(16),u=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",l=24,c=n.random.getBytesSync(16),u=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",l=32,c=n.random.getBytesSync(16),u=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",l=24,c=n.random.getBytesSync(8),u=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",l=8,c=n.random.getBytesSync(8),u=n.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw h.algorithm=r.algorithm,h}var d=u(n.pbe.opensslDeriveBytes(t,c.substr(0,8),l));d.start(c),d.update(s.toDer(o.privateKeyToAsn1(e))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:d.output.getBytes()};return n.pem.encode(p)},o.decryptRsaPrivateKey=function(e,t){var r=null,i=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(l=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=l,l;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,c;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,c=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":a=8,c=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":a=16,c=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var l;throw(l=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,l}var u=n.util.hexToBytes(i.dekInfo.parameters),h=c(n.pbe.opensslDeriveBytes(t,u.substr(0,8),a));if(h.start(u),h.update(n.util.createBuffer(i.body)),!h.finish())return r;r=h.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?o.decryptPrivateKeyInfo(s.fromDer(r),t):s.fromDer(r))&&(r=o.privateKeyFromAsn1(r)),r},o.pbe.generatePkcs12Key=function(e,t,r,i,s,o){var a,c;if("undefined"===typeof o||null===o){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');o=n.md.sha1.create()}var l=o.digestLength,u=o.blockLength,h=new n.util.ByteBuffer,d=new n.util.ByteBuffer;if(null!==e&&void 0!==e){for(c=0;c<e.length;c++)d.putInt16(e.charCodeAt(c));d.putInt16(0)}var p=d.length(),f=t.length(),y=new n.util.ByteBuffer;y.fillWithByte(r,u);var g=u*Math.ceil(f/u),m=new n.util.ByteBuffer;for(c=0;c<g;c++)m.putByte(t.at(c%f));var w=u*Math.ceil(p/u),v=new n.util.ByteBuffer;for(c=0;c<w;c++)v.putByte(d.at(c%p));var b=m;b.putBuffer(v);for(var E=Math.ceil(s/l),_=1;_<=E;_++){var S=new n.util.ByteBuffer;S.putBytes(y.bytes()),S.putBytes(b.bytes());for(var A=0;A<i;A++)o.start(),o.update(S.getBytes()),S=o.digest();var k=new n.util.ByteBuffer;for(c=0;c<u;c++)k.putByte(S.at(c%l));var I=Math.ceil(f/u)+Math.ceil(p/u),C=new n.util.ByteBuffer;for(a=0;a<I;a++){var R=new n.util.ByteBuffer(b.getBytes(u)),T=511;for(c=k.length()-1;c>=0;c--)T>>=8,T+=k.at(c)+R.at(c),R.setAt(c,255&T);C.putBuffer(R)}b=C,h.putBuffer(S)}return h.truncate(h.length()-s),h},o.pbe.getCipher=function(e,t,r){switch(e){case o.oids.pkcs5PBES2:return o.pbe.getCipherForPBES2(e,t,r);case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case o.oids["pbewithSHAAnd40BitRC2-CBC"]:return o.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},o.pbe.getCipherForPBES2=function(e,t,r){var i,a={},c=[];if(!s.validate(t,l,a,c))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,i;if((e=s.derToOid(a.kdfOid))!==o.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,i.supportedOids=["pkcs5PBKDF2"],i;if((e=s.derToOid(a.encOid))!==o.oids["aes128-CBC"]&&e!==o.oids["aes192-CBC"]&&e!==o.oids["aes256-CBC"]&&e!==o.oids["des-EDE3-CBC"]&&e!==o.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var u,h,p=a.kdfSalt,f=n.util.createBuffer(a.kdfIterationCount);switch(f=f.getInt(f.length()<<3),o.oids[e]){case"aes128-CBC":u=16,h=n.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,h=n.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,h=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,h=n.des.createDecryptionCipher;break;case"desCBC":u=8,h=n.des.createDecryptionCipher}var y=d(a.prfOid),g=n.pkcs5.pbkdf2(r,p,f,u,y),m=a.encIv,w=h(g);return w.start(m),w},o.pbe.getCipherForPKCS12PBE=function(e,t,r){var i={},a=[];if(!s.validate(t,u,i,a))throw(y=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,y;var c,l,h,p=n.util.createBuffer(i.salt),f=n.util.createBuffer(i.iterations);switch(f=f.getInt(f.length()<<3),e){case o.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,l=8,h=n.des.startDecrypting;break;case o.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,l=8,h=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var y;throw(y=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,y}var g=d(i.prfOid),m=o.pbe.generatePkcs12Key(r,p,1,f,c,g);return g.start(),h(m,o.pbe.generatePkcs12Key(r,p,2,f,l,g))},o.pbe.opensslDeriveBytes=function(e,t,r,i){if("undefined"===typeof i||null===i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===t&&(t="");for(var s=[h(i,e+t)],o=16,a=1;o<r;++a,o+=16)s.push(h(i,s[a-1]+e+t));return s.join("").substr(0,r)}},6019:(e,t,r)=>{var n=r(392);r(878),r(29),r(3877);var i,s=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(5819)),e.exports=n.pbkdf2=s.pbkdf2=function(e,t,r,s,o,a){if("function"===typeof o&&(a=o,o=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===o||"object"!==typeof o)&&(i.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!==typeof o&&(o="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?4===i.pbkdf2Sync.length?i.pbkdf2(e,t,r,s,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):i.pbkdf2(e,t,r,s,o,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(e,t,r,s).toString("binary"):i.pbkdf2Sync(e,t,r,s,o).toString("binary");if("undefined"!==typeof o&&null!==o||(o="sha1"),"string"===typeof o){if(!(o in n.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=n.md[o].create()}var c=o.digestLength;if(s>4294967295*c){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var u=Math.ceil(s/c),h=s-(u-1)*c,d=n.hmac.create();d.start(o,e);var p,f,y,g="";if(!a){for(var m=1;m<=u;++m){d.start(null,null),d.update(t),d.update(n.util.int32ToBytes(m)),p=y=d.digest().getBytes();for(var w=2;w<=r;++w)d.start(null,null),d.update(y),f=d.digest().getBytes(),p=n.util.xorBytes(p,f,c),y=f;g+=m<u?p:p.substr(0,h)}return g}m=1;function v(){if(m>u)return a(null,g);d.start(null,null),d.update(t),d.update(n.util.int32ToBytes(m)),p=y=d.digest().getBytes(),w=2,b()}function b(){if(w<=r)return d.start(null,null),d.update(y),f=d.digest().getBytes(),p=n.util.xorBytes(p,f,c),y=f,++w,n.util.setImmediate(b);g+=m<u?p:p.substr(0,h),++m,v()}v()}},6193:(e,t,r)=>{var n=r(392);r(3877);var i=e.exports=n.pem=n.pem||{};function s(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var s=0,o=-1;for(i=0;i<t.length;++i,++s)if(s>65&&-1!==o){var a=t[o];","===a?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+a+t.substr(o+1),s=i-o-1,o=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(o=i);return t}function o(e){return e.replace(/^\s+/,"")}i.encode=function(e,t){t=t||{};var r,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=s(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=s(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),i+=s(r)),e.headers)for(var o=0;o<e.headers.length;++o)i+=s(e.headers[o]);return e.procType&&(i+="\r\n"),i+=n.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},i.decode=function(e){for(var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;t=i.exec(e);){var c=t[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var l={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(l),t[2]){for(var u=t[2].split(a),h=0;t&&h<u.length;){for(var d=u[h].replace(/\s+$/,""),p=h+1;p<u.length;++p){var f=u[p];if(!/\s/.test(f[0]))break;d+=f,h=p}if(t=d.match(s)){for(var y={name:t[1],values:[]},g=t[2].split(","),m=0;m<g.length;++m)y.values.push(o(g[m]));if(l.procType)if(l.contentDomain||"Content-Domain"!==y.name)if(l.dekInfo||"DEK-Info"!==y.name)l.headers.push(y);else{if(0===y.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.contentDomain=g[0]||"";else{if("Proc-Type"!==y.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==y.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++h}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},2627:(e,t,r)=>{var n=r(392);r(3877),r(3860),r(928);var i=e.exports=n.pkcs1=n.pkcs1||{};function s(e,t,r){r||(r=n.md.sha1.create());for(var i="",s=Math.ceil(t/r.digestLength),o=0;o<s;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o);r.start(),r.update(e+a),i+=r.digest().getBytes()}return i.substring(0,t)}i.encode_rsa_oaep=function(e,t,r){var i,o,a,c;"string"===typeof r?(i=r,o=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,o=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var l=Math.ceil(e.n.bitLength()/8),u=l-2*a.digestLength-2;if(t.length>u)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=t.length,g.maxLength=u,g;i||(i=""),a.update(i,"raw");for(var h=a.digest(),d="",p=u-t.length,f=0;f<p;f++)d+="\0";var y=h.getBytes()+d+"\x01"+t;if(o){if(o.length!==a.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=o.length,g.digestLength=a.digestLength,g}}else o=n.random.getBytes(a.digestLength);var m=s(o,l-a.digestLength-1,c),w=n.util.xorBytes(y,m,y.length),v=s(w,a.digestLength,c),b=n.util.xorBytes(o,v,o.length);return"\0"+b+w},i.decode_rsa_oaep=function(e,t,r){var i,o,a;"string"===typeof r?(i=r,o=arguments[3]||void 0):r&&(i=r.label||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(e.n.bitLength()/8);if(t.length!==c)throw(w=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,w.expectedLength=c,w;if(void 0===o?o=n.md.sha1.create():o.start(),a||(a=o),c<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),o.update(i,"raw");for(var l=o.digest().getBytes(),u=t.charAt(0),h=t.substring(1,o.digestLength+1),d=t.substring(1+o.digestLength),p=s(d,o.digestLength,a),f=n.util.xorBytes(h,p,h.length),y=s(f,c-o.digestLength-1,a),g=n.util.xorBytes(d,y,d.length),m=g.substring(0,o.digestLength),w="\0"!==u,v=0;v<o.digestLength;++v)w|=l.charAt(v)!==m.charAt(v);for(var b=1,E=o.digestLength,_=o.digestLength;_<g.length;_++){var S=g.charCodeAt(_),A=1&S^1,k=b?65534:0;w|=S&k,E+=b&=A}if(w||1!==g.charCodeAt(E))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(E+1)}},4660:(e,t,r)=>{var n=r(392);r(8605),r(5049),r(1400),r(2886),r(6193),r(4922),r(3860),r(3877),r(3391);var i=n.asn1,s=e.exports=n.pkcs7=n.pkcs7||{};function o(e){var t={},r=[];if(!i.validate(e,s.asn1.recipientInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw o.errors=r,o}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:i.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function a(e){for(var t,r=[],s=0;s<e.length;++s)r.push((t=e[s],i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.encryptedContent.algorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function c(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.digestAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureAlgorithm).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<e.unauthenticatedAttributes.length;++s){var o=e.unauthenticatedAttributes[s];r.values.push(l(o))}t.value.push(r)}return t}function l(e){var t;if(e.type===n.pki.oids.contentType)t=i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),o=e.value;if("string"===typeof o){var a=Date.parse(o);o=isNaN(a)?13===o.length?i.utcTimeToDate(o):i.generalizedTimeToDate(o):new Date(a)}t=o>=r&&o<s?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(o)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(o))}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[t])])}function u(e,t,r){var s={};if(!i.validate(t,r,s,[])){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}if(i.derToOid(s.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var a="";if(n.util.isArray(s.encryptedContent))for(var c=0;c<s.encryptedContent.length;++c){if(s.encryptedContent[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");a+=s.encryptedContent[c].value}else a=s.encryptedContent;e.encryptedContent={algorithm:i.derToOid(s.encAlgorithm),parameter:n.util.createBuffer(s.encParameter.value),content:n.util.createBuffer(a)}}if(s.content){a="";if(n.util.isArray(s.content))for(c=0;c<s.content.length;++c){if(s.content[c].type!==i.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");a+=s.content[c].value}else a=s.content;e.content=n.util.createBuffer(a)}return e.version=s.version.charCodeAt(0),e.rawCapture=s,s}function h(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}s.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.messageFromAsn1(o)},s.messageToPem=function(e,t){var r={type:"PKCS7",body:i.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},s.messageFromAsn1=function(e){var t={},r=[];if(!i.validate(e,s.asn1.contentInfoValidator,t,r)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw o.errors=r,o}var a,c=i.derToOid(t.contentType);switch(c){case n.pki.oids.envelopedData:a=s.createEnvelopedData();break;case n.pki.oids.encryptedData:a=s.createEncryptedData();break;case n.pki.oids.signedData:a=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+c+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a},s.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(u(e,t,s.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,i=0;i<r.length;++i)e.certificates.push(n.pki.certificateFromAsn1(r[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var s=[],o=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,t)),s.length>0&&o.value[0].value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,s)),o.value[0].value.push(i.create(i.Class.UNIVERSAL,i.Type.SET,!0,e.signerInfos)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),o])},addSigner:function(t){var r=t.issuer,i=t.serialNumber;if(t.certificate){var s=t.certificate;"string"===typeof s&&(s=n.pki.certificateFromPem(s)),r=s.issuer.attributes,i=s.serialNumber}var o=t.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"===typeof o&&(o=n.pki.privateKeyFromPem(o));var a=t.digestAlgorithm||n.pki.oids.sha1;switch(a){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+a)}var c=t.authenticatedAttributes||[];if(c.length>0){for(var l=!1,u=!1,h=0;h<c.length;++h){var d=c[h];if(l||d.type!==n.pki.oids.contentType){if(u||d.type!==n.pki.oids.messageDigest);else if(u=!0,l)break}else if(l=!0,u)break}if(!l||!u)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:r,serialNumber:i,digestAlgorithm:a,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(t){var r;(t=t||{},"object"!==typeof e.content||null===e.contentInfo)&&(e.contentInfo=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?r=e.content.bytes():"string"===typeof e.content&&(r=n.util.encodeUtf8(e.content)),t.detached?e.detachedContent=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)]))));0!==e.signers.length&&function(t){var r;r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=i.derToOid(e.contentInfo.value[0].value),o=i.toDer(r);for(var a in o.getByte(),i.getBerValueLength(o),o=o.getBytes(),t)t[a].start().update(o);for(var u=new Date,h=0;h<e.signers.length;++h){var d=e.signers[h];if(0===d.authenticatedAttributes.length){if(s!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[]),f=0;f<d.authenticatedAttributes.length;++f){var y=d.authenticatedAttributes[f];y.type===n.pki.oids.messageDigest?y.value=t[d.digestAlgorithm].digest():y.type===n.pki.oids.signingTime&&(y.value||(y.value=u)),p.value.push(l(y)),d.authenticatedAttributesAsn1.value.push(l(y))}o=i.toDer(p).getBytes(),d.md.start().update(o)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(c(e[r]));return t}(e.signers)}(function(){for(var t={},r=0;r<e.signers.length;++r){var s=e.signers[r];(o=s.digestAlgorithm)in t||(t[o]=n.md[n.pki.oids[o]].create()),0===s.authenticatedAttributes.length?s.md=t[o]:s.md=n.md[n.pki.oids[o]].create()}for(var o in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"===typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){u(e,t,s.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),h(e)}}},s.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=u(e,t,s.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(o(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.type).getBytes()),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,a(e.recipients)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,(t=e.encryptedContent,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(n.pki.oids.data).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.algorithm).getBytes()),t.parameter?i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var i=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}h(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var i,s,o;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:i=16,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:i=24,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:i=32,s=16,o=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:i=24,s=8,o=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=n.util.createBuffer(n.random.getBytes(i));else if(t.length()!=i)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+i+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(s));var a=o(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var c=0;c<e.recipients.length;++c){var l=e.recipients[c];if(void 0===l.encryptedContent.content){if(l.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm);l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}}}},4922:(e,t,r)=>{var n=r(392);r(5049),r(3877);var i=n.asn1,s=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=s;var o={name:"ContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=o;var a={name:"EncryptedContentInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(a)},s.encryptedDataValidator={name:"EncryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"}].concat(a)};var c={name:"SignerInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},o,{name:"SignedData.Certificates",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,capture:"signerInfos",optional:!0,value:[c]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:i.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},5132:(e,t,r)=>{var n=r(392);r(3877),r(3055),r(3860),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new r(null);s.fromInt(30);var o=function(e,t){return e|t};t.generateProbablePrime=function(e,t,i){"function"===typeof t&&(i=t,t={});var s=(t=t||{}).algorithm||"PRIMEINC";"string"===typeof s&&(s={name:s}),s.options=s.options||{};var o=t.prng||n.random,c={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===s.name)return function(e,t,i,s){if("workers"in i)return function(e,t,i,s){if("undefined"===typeof Worker)return a(e,t,i,s);var o=l(e,t),c=i.workers,u=i.workLoad||100,h=30*u/8,d=i.workerScript||"forge/prime.worker.js";if(-1===c)return n.util.estimateCores((function(e,t){e&&(t=2),c=t-1,p()}));function p(){c=Math.max(1,c);for(var n=[],i=0;i<c;++i)n[i]=new Worker(d);for(i=0;i<c;++i)n[i].addEventListener("message",p);var a=!1;function p(i){if(!a){0;var c=i.data;if(c.found){for(var d=0;d<n.length;++d)n[d].terminate();return a=!0,s(null,new r(c.prime,16))}o.bitLength()>e&&(o=l(e,t));var p=o.toString(16);i.target.postMessage({hex:p,workLoad:u}),o.dAddOffset(h,0)}}}p()}(e,t,i,s);return a(e,t,i,s)}(e,c,s.options,i);throw new Error("Invalid prime generation algorithm: "+s.name)}}function a(e,t,r,n){var i=l(e,t),s=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(i.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var o=10;"maxBlockTime"in r&&(o=r.maxBlockTime),c(i,e,t,0,s,o,n)}function c(e,t,r,s,o,a,u){var h=+new Date;do{if(e.bitLength()>t&&(e=l(t,r)),e.isProbablePrime(o))return u(null,e);e.dAddOffset(i[s++%8],0)}while(a<0||+new Date-h<a);n.util.setImmediate((function(){c(e,t,r,s,o,a,u)}))}function l(e,t){var n=new r(e,t),i=e-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),o,n),n.dAddOffset(31-n.mod(s).byteValue(),0),n}}()},6140:(e,t,r)=>{var n=r(392);r(3877);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(i=r(5819)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,s=new Array(32),o=0;o<32;++o)s[o]=r.create();function a(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r===0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var i=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(i),t.generated=0}function l(e){var t=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(t=function(e){return i.getRandomValues(e)});var s=n.util.createBuffer();if(t)for(;s.length()<e;){var o=Math.max(1,Math.min(e-s.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{t(a);for(var c=0;c<a.length;++c)s.putInt32(a[c])}catch(p){if(!("undefined"!==typeof QuotaExceededError&&p instanceof QuotaExceededError))throw p}}if(s.length()<e)for(var l,u,h,d=Math.floor(65536*Math.random());s.length()<e;){u=16807*(65535&d),u+=(32767&(l=16807*(d>>16)))<<16,d=4294967295&(u=(2147483647&(u+=l>>15))+(u>>31));for(c=0;c<3;++c)h=d>>>(c<<3),h^=Math.floor(256*Math.random()),s.putByte(255&h)}return s.getBytes(e)}return t.pools=s,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var i=t.plugin.cipher,s=t.plugin.increment,o=t.plugin.formatKey,a=t.plugin.formatSeed,l=n.util.createBuffer();t.key=null,function u(h){if(h)return r(h);if(l.length()>=e)return r(null,l.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return c(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),c(),e()}))}(u)}));var d=i(t.key,t.seed);t.generated+=d.length,l.putBytes(d),t.key=o(i(t.key,s(t.seed))),t.seed=a(i(t.key,t.seed)),n.util.setImmediate(u)}()},t.generateSync=function(e){var r=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var c=n.util.createBuffer();c.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&a();var l=r(t.key,t.seed);t.generated+=l.length,c.putBytes(l),t.key=s(r(t.key,i(t.seed))),t.seed=o(r(t.key,t.seed))}return c.getBytes(e)},i?(t.seedFile=function(e,t){i.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return i.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,l(e))}catch(r){t(r)}},t.seedFileSync=l),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}},325:(e,t,r)=>{var n=r(392);r(3860),r(3877),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,i=e.mgf,s=r.digestLength,o=e.salt||null;if("string"===typeof o&&(o=n.util.createBuffer(o)),"saltLength"in e)t=e.saltLength;else{if(null===o)throw new Error("Salt length not specified or specific salt not given.");t=o.length()}if(null!==o&&o.length()!==t)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||n.random,c={encode:function(e,c){var l,u,h=c-1,d=Math.ceil(h/8),p=e.digest().getBytes();if(d<s+t+2)throw new Error("Message is too long to encrypt.");u=null===o?a.getBytesSync(t):o.bytes();var f=new n.util.ByteBuffer;f.fillWithByte(0,8),f.putBytes(p),f.putBytes(u),r.start(),r.update(f.getBytes());var y=r.digest().getBytes(),g=new n.util.ByteBuffer;g.fillWithByte(0,d-t-s-2),g.putByte(1),g.putBytes(u);var m=g.getBytes(),w=d-s-1,v=i.generate(y,w),b="";for(l=0;l<w;l++)b+=String.fromCharCode(m.charCodeAt(l)^v.charCodeAt(l));var E=65280>>8*d-h&255;return(b=String.fromCharCode(b.charCodeAt(0)&~E)+b.substr(1))+y+String.fromCharCode(188)},verify:function(e,o,a){var c,l=a-1,u=Math.ceil(l/8);if(o=o.substr(-u),u<s+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==o.charCodeAt(u-1))throw new Error("Encoded message does not end in 0xBC.");var h=u-s-1,d=o.substr(0,h),p=o.substr(h,s),f=65280>>8*u-l&255;if(0!==(d.charCodeAt(0)&f))throw new Error("Bits beyond keysize not zero as expected.");var y=i.generate(p,h),g="";for(c=0;c<h;c++)g+=String.fromCharCode(d.charCodeAt(c)^y.charCodeAt(c));g=String.fromCharCode(g.charCodeAt(0)&~f)+g.substr(1);var m=u-s-t-2;for(c=0;c<m;c++)if(0!==g.charCodeAt(c))throw new Error("Leftmost octets not zero as expected");if(1!==g.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var w=g.substr(-t),v=new n.util.ByteBuffer;return v.fillWithByte(0,8),v.putBytes(e),v.putBytes(w),r.start(),r.update(v.getBytes()),p===r.digest().getBytes()}};return c}},3860:(e,t,r)=>{var n=r(392);r(8605),r(7404),r(6140),r(3877),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},i=new Array(4),s=n.util.createBuffer();function o(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var a=o(),c=null,l=n.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(c=function(e){return u.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var h="";for(var d in navigator)try{"string"==typeof navigator[d]&&(h+=navigator[d])}catch(p){}a.collect(h),h=null}t&&(t().mousemove((function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)})),t().keypress((function(e){a.collectInt(e.charCode,8)})))}if(n.random)for(var d in a)n.random[d]=a[d];else n.random=a;n.random.createInstance=o,e.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)},654:(e,t,r)=>{var n=r(392);r(3877);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],o=function(e,t){return e<<t&65535|(65535&e)>>16-t},a=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"===typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,s=e,o=e.length(),a=t,c=Math.ceil(a/8),l=255>>(7&a);for(r=o;r<128;r++)s.putByte(i[s.at(r-1)+s.at(r-o)&255]);for(s.setAt(128-c,i[s.at(128-c)&l]),r=127-c;r>=0;r--)s.setAt(r,i[s.at(r+1)^s.at(r+c)]);return s};var c=function(e,t,r){var i,c,l,u,h=!1,d=null,p=null,f=null,y=[];for(e=n.rc2.expandKey(e,t),l=0;l<64;l++)y.push(e.getInt16Le());r?(i=function(e){for(l=0;l<4;l++)e[l]+=y[u]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),e[l]=o(e[l],s[l]),u++},c=function(e){for(l=0;l<4;l++)e[l]+=y[63&e[(l+3)%4]]}):(i=function(e){for(l=3;l>=0;l--)e[l]=a(e[l],s[l]),e[l]-=y[u]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),u--},c=function(e){for(l=3;l>=0;l--)e[l]-=y[63&e[(l+3)%4]]});var g=function(e){var t=[];for(l=0;l<4;l++){var n=d.getInt16Le();null!==f&&(r?n^=f.getInt16Le():f.putInt16Le(n)),t.push(65535&n)}u=r?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(l=0;l<4;l++)null!==f&&(r?f.putInt16Le(t[l]):t[l]^=f.getInt16Le()),p.putInt16Le(t[l])},m=null;return m={start:function(e,t){e&&"string"===typeof e&&(e=n.util.createBuffer(e)),h=!1,d=n.util.createBuffer(),p=t||new n.util.createBuffer,f=e,m.output=p},update:function(e){for(h||d.putBuffer(e);d.length()>=8;)g([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,d,!r);else{var n=8===d.length()?8:8-d.length();d.fillWithByte(n,n)}if(t&&(h=!0,m.update()),!r&&(t=0===d.length()))if(e)t=e(8,p,!r);else{var i=p.length(),s=p.at(i-1);s>i?t=!1:p.truncate(s)}return t}}};n.rc2.startEncrypting=function(e,t,r){var i=n.rc2.createEncryptionCipher(e,128);return i.start(t,r),i},n.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var i=n.rc2.createDecryptionCipher(e,128);return i.start(t,r),i},n.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},5493:(e,t,r)=>{var n=r(392);if(r(5049),r(3055),r(2886),r(2627),r(5132),r(3860),r(3877),"undefined"===typeof i)var i=n.jsbn.BigInteger;var s=n.util.isNodejs?r(5819):null,o=n.asn1,a=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,l=[6,4,2,4,2,4,6,2],u={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},d={name:"RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},p=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},f={name:"DigestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},y=function(e){var t;if(!(e.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=c.oids[e.algorithm];var n=o.oidToDer(t).getBytes(),i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),s=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);s.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,n)),s.value.push(o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,""));var a=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),o.toDer(i).getBytes()},g=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var s;t.dP||(t.dP=t.d.mod(t.p.subtract(i.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(i.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{s=new i(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(s.compareTo(t.n)>=0||!s.gcd(t.n).equals(i.ONE));for(var o=(e=e.multiply(s.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);o.compareTo(a)<0;)o=o.add(t.p);var c=o.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return c=c.multiply(s.modInverse(t.n)).mod(t.n)};function m(e,t,r){var i=n.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=s-11,o}i.putByte(0),i.putByte(r);var a,c=s-3-e.length;if(0===r||1===r){a=0===r?0:255;for(var l=0;l<c;++l)i.putByte(a)}else for(;c>0;){var u=0,h=n.random.getBytes(c);for(l=0;l<c;++l)0===(a=h.charCodeAt(l))?++u:i.putByte(a);c=u}return i.putByte(0),i.putBytes(e),i}function w(e,t,r,i){var s=Math.ceil(t.n.bitLength()/8),o=n.util.createBuffer(e),a=o.getByte(),c=o.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&"undefined"===typeof i)throw new Error("Encryption block is invalid.");var l=0;if(0===c){l=s-3-i;for(var u=0;u<l;++u)if(0!==o.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(l=0;o.length()>1;){if(255!==o.getByte()){--o.read;break}++l}else if(2===c)for(l=0;o.length()>1;){if(0===o.getByte()){--o.read;break}++l}if(0!==o.getByte()||l!==s-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function v(e,t,r){"function"===typeof t&&(r=t,t={});var s={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function o(){a(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?l(t,e.q):void a(e.qBits,l))}))}function a(e,t){n.prime.generateProbablePrime(e,s,t)}function l(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.p=null,void o();if(0!==e.q.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.q=null,void a(e.qBits,l);if(e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(i.ONE))return e.p=e.q=null,void o();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,l);var u=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(s.prng=t.prng),o()}function b(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function E(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function _(e){return n.util.isNodejs&&"function"===typeof s[e]}function S(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[e]}function A(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[e]}function k(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}c.rsa.encrypt=function(e,t,r){var s,o=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(o=2===r,s=m(e,t,r)):(s=n.util.createBuffer()).putBytes(e);for(var c=new i(s.toHex(),16),l=g(c,t,o).toString(16),u=n.util.createBuffer(),h=a-Math.ceil(l.length/2);h>0;)u.putByte(0),--h;return u.putBytes(n.util.hexToBytes(l)),u.getBytes()},c.rsa.decrypt=function(e,t,r,s){var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=o,a}var c=new i(n.util.createBuffer(e).toHex(),16);if(c.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=g(c,t,r).toString(16),u=n.util.createBuffer(),h=o-Math.ceil(l.length/2);h>0;)u.putByte(0),--h;return u.putBytes(n.util.hexToBytes(l)),!1!==s?w(u.getBytes(),t,r):u.getBytes()},c.rsa.createKeyPairGenerationState=function(e,t,r){"string"===typeof e&&(e=parseInt(e,10)),e=e||2048;var s,o=(r=r||{}).prng||n.random,a={nextBytes:function(e){for(var t=o.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(s={algorithm:c,state:0,bits:e,rng:a,eInt:t||65537,e:new i(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(s.eInt),s},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,s=0,o=function(e,t){return e|t},a=+new Date,u=0;null===e.keys&&(t<=0||u<t);){if(0===e.state){var h=null===e.p?e.pBits:e.qBits,d=h-1;0===e.pqState?(e.num=new i(h,e.rng),e.num.testBit(d)||e.num.bitwiseTo(i.ONE.shiftLeft(d),o,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),s=0,++e.pqState):1===e.pqState?e.num.bitLength()>h?e.pqState=0:e.num.isProbablePrime(E(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(l[s++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(i.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var p=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,p,e.p,e.q,p.mod(e.p1),p.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}u+=(n=+new Date)-a,a=n}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,r,i){if(1===arguments.length?"object"===typeof e?(r=e,e=void 0):"function"===typeof e&&(i=e,e=void 0):2===arguments.length?"number"===typeof e?"function"===typeof t?(i=t,t=void 0):"number"!==typeof t&&(r=t,t=void 0):(r=e,i=t,e=void 0,t=void 0):3===arguments.length&&("number"===typeof t?"function"===typeof r&&(i=r,r=void 0):(i=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(i){if(_("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return i(e);i(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(t)})}));if(S("generateKey")&&S("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:k(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return a.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){i(e)})).then((function(e){if(e){var t=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(e)));i(null,{privateKey:t,publicKey:c.setRsaPublicKey(t.n,t.e)})}}));if(A("generateKey")&&A("exportKey")){var l=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:k(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return l.oncomplete=function(e){var t=e.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=c.privateKeyFromAsn1(o.fromDer(n.util.createBuffer(t)));i(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){i(e)}},void(l.onerror=function(e){i(e)})}}else if(_("generateKeyPairSync")){var u=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(u.privateKey),publicKey:c.publicKeyFromPem(u.publicKey)}}var h=c.rsa.createKeyPairGenerationState(e,t,r);if(!i)return c.rsa.stepKeyPairGenerationState(h,0),h.keys;v(h,r,i)},c.setRsaPublicKey=c.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,i){if("string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return m(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"===typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var s=t.encode(e,r,!0);return c.rsa.encrypt(s,r,!0)},verify:function(e,t,i,s){"string"===typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(e,t){t=w(t,r,!0);var i=o.fromDer(t,{parseAllBytes:s._parseAllDigestBytes}),a={},c=[];if(!o.validate(i,f,a,c))throw(l=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=c,l;var l,u=o.derToOid(a.algorithmIdentifier);if(u!==n.oids.md2&&u!==n.oids.md5&&u!==n.oids.sha1&&u!==n.oids.sha224&&u!==n.oids.sha256&&u!==n.oids.sha384&&u!==n.oids.sha512&&u!==n.oids["sha512-224"]&&u!==n.oids["sha512-256"])throw(l=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=u,l;if((u===n.oids.md2||u===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(e,t){return e===(t=w(t,r,!0))}});var a=c.rsa.decrypt(t,r,!0,!1);return i.verify(e,a,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(e,t,r,i,s,o,a,l){var u={n:e,e:t,d:r,p:i,q:s,dP:o,dQ:a,qInv:l,decrypt:function(e,t,r){"string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(e,u,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:w};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(i,u,!1)},sign:function(e,t){var r=!1;"string"===typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:y},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,u.n.bitLength());return c.rsa.encrypt(n,u,r)}};return u},c.wrapRsaPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(e){var t,r,s,a,l,d,p,f,y={},g=[];if(o.validate(e,u,y,g)&&(e=o.fromDer(n.util.createBuffer(y.privateKey))),y={},g=[],!o.validate(e,h,y,g)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=g,m}return t=n.util.createBuffer(y.privateKeyModulus).toHex(),r=n.util.createBuffer(y.privateKeyPublicExponent).toHex(),s=n.util.createBuffer(y.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(y.privateKeyPrime1).toHex(),l=n.util.createBuffer(y.privateKeyPrime2).toHex(),d=n.util.createBuffer(y.privateKeyExponent1).toHex(),p=n.util.createBuffer(y.privateKeyExponent2).toHex(),f=n.util.createBuffer(y.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(t,16),new i(r,16),new i(s,16),new i(a,16),new i(l,16),new i(d,16),new i(p,16),new i(f,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(0).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.e)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.d)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.p)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.q)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.dP)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.dQ)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.qInv))])},c.publicKeyFromAsn1=function(e){var t={},r=[];if(o.validate(e,p,t,r)){var s,a=o.derToOid(t.publicKeyOid);if(a!==c.oids.rsaEncryption)throw(s=new Error("Cannot read public key. Unknown OID.")).oid=a,s;e=t.rsaPublicKey}if(r=[],!o.validate(e,d,t,r))throw(s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,s;var l=n.util.createBuffer(t.publicKeyModulus).toHex(),u=n.util.createBuffer(t.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(l,16),new i(u,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.oids.rsaEncryption).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.n)),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,b(e.e))])}},928:(e,t,r)=>{var n=r(392);r(29),r(3877);var i=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),o=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var c=s.length;i.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var l=i.fullMessageLength.length-1;l>=0;--l)i.fullMessageLength[l]+=c[1],c[1]=c[0]+(i.fullMessageLength[l]/4294967296>>>0),i.fullMessageLength[l]=i.fullMessageLength[l]>>>0,c[0]=c[1]/4294967296>>>0;return t.putBytes(s),a(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var c,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-l));for(var u=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)u+=(c=8*i.fullMessageLength[h+1])/4294967296>>>0,o.putInt32(u>>>0),u=c>>>0;o.putInt32(u);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(d,r,o);var p=n.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p},i};var s=null,o=!1;function a(e,t,r){for(var n,i,s,o,a,c,l,u=r.length();u>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,c=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<20;++l)n=(n=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|n>>>31,t[l]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+c+1518500249+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<32;++l)n=(n=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|n>>>31,t[l]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<40;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(i<<5|i>>>27)+(s^o^a)+c+1859775393+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<60;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(i<<5|i>>>27)+(s&o|a&(s^o))+c+2400959708+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<80;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(i<<5|i>>>27)+(s^o^a)+c+3395469782+n,c=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,u-=64}}},7404:(e,t,r)=>{var n=r(392);r(29),r(3877);var i=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){o||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,s=0;s<r;++s)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,o){"utf8"===o&&(s=n.util.encodeUtf8(s));var a=s.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=i.fullMessageLength.length-1;l>=0;--l)i.fullMessageLength[l]+=a[1],a[1]=a[0]+(i.fullMessageLength[l]/4294967296>>>0),i.fullMessageLength[l]=i.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(s),c(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var o=n.util.createBuffer();o.putBytes(t.bytes());var a,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;o.putBytes(s.substr(0,i.blockLength-l));for(var u=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)u+=(a=8*i.fullMessageLength[h+1])/4294967296>>>0,o.putInt32(u>>>0),u=a>>>0;o.putInt32(u);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(d,r,o);var p=n.util.createBuffer();return p.putInt32(d.h0),p.putInt32(d.h1),p.putInt32(d.h2),p.putInt32(d.h3),p.putInt32(d.h4),p.putInt32(d.h5),p.putInt32(d.h6),p.putInt32(d.h7),p},i};var s=null,o=!1,a=null;function c(e,t,r){for(var n,i,s,o,c,l,u,h,d,p,f,y,g,m=r.length();m>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=((n=t[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[c-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(l=e.h0,u=e.h1,h=e.h2,d=e.h3,p=e.h4,f=e.h5,y=e.h6,g=e.h7,c=0;c<64;++c)s=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),o=l&u|h&(l^u),n=g+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(y^p&(f^y))+a[c]+t[c],g=y,y=f,f=p,p=d+n>>>0,d=h,h=u,u=l,l=n+(i=s+o)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+u|0,e.h2=e.h2+h|0,e.h3=e.h3+d|0,e.h4=e.h4+p|0,e.h5=e.h5+f|0,e.h6=e.h6+y|0,e.h7=e.h7+g|0,m-=64}}},4770:(e,t,r)=>{var n=r(392);r(29),r(3877);var i=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var s=n.sha384=n.sha512.sha384=n.sha512.sha384||{};s.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=s,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(e){if(a||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(l={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),"undefined"===typeof e&&(e="SHA-512"),!(e in l))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=l[e],r=null,i=n.util.createBuffer(),s=new Array(80),h=0;h<80;++h)s[h]=new Array(2);var d=64;switch(e){case"SHA-384":d=48;break;case"SHA-512/256":d=32;break;case"SHA-512/224":d=28}var p={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:d,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,s=0;s<e;++s)p.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(t.length);for(s=0;s<t.length;++s)r[s]=t[s].slice(0);return p}};return p.start(),p.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var o=e.length;p.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=p.fullMessageLength.length-1;a>=0;--a)p.fullMessageLength[a]+=o[1],o[1]=o[0]+(p.fullMessageLength[a]/4294967296>>>0),p.fullMessageLength[a]=p.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return i.putBytes(e),u(r,s,i),(i.read>2048||0===i.length())&&i.compact(),p},p.digest=function(){var t=n.util.createBuffer();t.putBytes(i.bytes());var a,c=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;t.putBytes(o.substr(0,p.blockLength-c));for(var l=8*p.fullMessageLength[0],h=0;h<p.fullMessageLength.length-1;++h)l+=(a=8*p.fullMessageLength[h+1])/4294967296>>>0,t.putInt32(l>>>0),l=a>>>0;t.putInt32(l);var d=new Array(r.length);for(h=0;h<r.length;++h)d[h]=r[h].slice(0);u(d,s,t);var f,y=n.util.createBuffer();f="SHA-512"===e?d.length:"SHA-384"===e?d.length-2:d.length-4;for(h=0;h<f;++h)y.putInt32(d[h][0]),h===f-1&&"SHA-512/224"===e||y.putInt32(d[h][1]);return y},p};var o=null,a=!1,c=null,l=null;function u(e,t,r){for(var n,i,s,o,a,l,u,h,d,p,f,y,g,m,w,v,b,E,_,S,A,k,I,C,R,T,D,P,N,x,O,B,L,M=r.length();M>=128;){for(D=0;D<16;++D)t[D][0]=r.getInt32()>>>0,t[D][1]=r.getInt32()>>>0;for(;D<80;++D)n=(((P=(x=t[D-2])[0])>>>19|(N=x[1])<<13)^(N>>>29|P<<3)^P>>>6)>>>0,i=((P<<13|N>>>19)^(N<<3|P>>>29)^(P<<26|N>>>6))>>>0,s=(((P=(B=t[D-15])[0])>>>1|(N=B[1])<<31)^(P>>>8|N<<24)^P>>>7)>>>0,o=((P<<31|N>>>1)^(P<<24|N>>>8)^(P<<25|N>>>7))>>>0,O=t[D-7],L=t[D-16],N=i+O[1]+o+L[1],t[D][0]=n+O[0]+s+L[0]+(N/4294967296>>>0)>>>0,t[D][1]=N>>>0;for(f=e[0][0],y=e[0][1],g=e[1][0],m=e[1][1],w=e[2][0],v=e[2][1],b=e[3][0],E=e[3][1],_=e[4][0],S=e[4][1],A=e[5][0],k=e[5][1],I=e[6][0],C=e[6][1],R=e[7][0],T=e[7][1],D=0;D<80;++D)u=((_>>>14|S<<18)^(_>>>18|S<<14)^(S>>>9|_<<23))>>>0,h=(I^_&(A^I))>>>0,a=((f>>>28|y<<4)^(y>>>2|f<<30)^(y>>>7|f<<25))>>>0,l=((f<<4|y>>>28)^(y<<30|f>>>2)^(y<<25|f>>>7))>>>0,d=(f&g|w&(f^g))>>>0,p=(y&m|v&(y^m))>>>0,N=T+(((_<<18|S>>>14)^(_<<14|S>>>18)^(S<<23|_>>>9))>>>0)+((C^S&(k^C))>>>0)+c[D][1]+t[D][1],n=R+u+h+c[D][0]+t[D][0]+(N/4294967296>>>0)>>>0,i=N>>>0,s=a+d+((N=l+p)/4294967296>>>0)>>>0,o=N>>>0,R=I,T=C,I=A,C=k,A=_,k=S,_=b+n+((N=E+i)/4294967296>>>0)>>>0,S=N>>>0,b=w,E=v,w=g,v=m,g=f,m=y,f=n+s+((N=i+o)/4294967296>>>0)>>>0,y=N>>>0;N=e[0][1]+y,e[0][0]=e[0][0]+f+(N/4294967296>>>0)>>>0,e[0][1]=N>>>0,N=e[1][1]+m,e[1][0]=e[1][0]+g+(N/4294967296>>>0)>>>0,e[1][1]=N>>>0,N=e[2][1]+v,e[2][0]=e[2][0]+w+(N/4294967296>>>0)>>>0,e[2][1]=N>>>0,N=e[3][1]+E,e[3][0]=e[3][0]+b+(N/4294967296>>>0)>>>0,e[3][1]=N>>>0,N=e[4][1]+S,e[4][0]=e[4][0]+_+(N/4294967296>>>0)>>>0,e[4][1]=N>>>0,N=e[5][1]+k,e[5][0]=e[5][0]+A+(N/4294967296>>>0)>>>0,e[5][1]=N>>>0,N=e[6][1]+C,e[6][0]=e[6][0]+I+(N/4294967296>>>0)>>>0,e[6][1]=N>>>0,N=e[7][1]+T,e[7][0]=e[7][0]+R+(N/4294967296>>>0)>>>0,e[7][1]=N>>>0,M-=128}}},3877:(e,t,r)=>{var n=r(392),i=r(5754),s=e.exports=n.util=n.util||{};function o(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function a(e){if(this.data="",this.read=0,"string"===typeof e)this.data=e;else if(s.isArrayBuffer(e)||s.isArrayBufferView(e))if("undefined"!==typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof a||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return s.nextTick=process.nextTick,void("function"===typeof setImmediate?s.setImmediate=setImmediate:s.setImmediate=s.nextTick);if("function"===typeof setImmediate)return s.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(s.nextTick=function(e){return setImmediate(e)});if(s.setImmediate=function(e){setTimeout(e,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var e="forge.setImmediate",t=[];s.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!==typeof MutationObserver){var r=Date.now(),n=!0,i=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(i,{attributes:!0});var o=s.setImmediate;s.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),o(e)):(t.push(e),1===t.length&&i.setAttribute("a",n=!n))}}s.nextTick=s.setImmediate}(),s.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,s.globalScope=s.isNodejs?r.g:"undefined"===typeof self?window:self,s.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer},s.isArrayBufferView=function(e){return e&&s.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},s.ByteBuffer=a,s.ByteStringBuffer=a;s.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},s.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},s.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},s.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},s.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},s.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},s.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(s.encodeUtf8(e))},s.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},s.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},s.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},s.ByteStringBuffer.prototype.putInt=function(e,t){o(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},s.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},s.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},s.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},s.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},s.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},s.ByteStringBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},s.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},s.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},s.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},s.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},s.ByteStringBuffer.prototype.copy=function(){var e=s.createBuffer(this.data);return e.read=this.read,e},s.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},s.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},s.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},s.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},s.ByteStringBuffer.prototype.toString=function(){return s.decodeUtf8(this.bytes())},s.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=s.isArrayBuffer(e),n=s.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},s.DataBuffer.prototype.length=function(){return this.write-this.read},s.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},s.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},s.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},s.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},s.DataBuffer.prototype.putBytes=function(e,t){if(s.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(s.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof s.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&s.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof s.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"===typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=s.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=s.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},s.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},s.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},s.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},s.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},s.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},s.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},s.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},s.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},s.DataBuffer.prototype.putInt=function(e,t){o(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},s.DataBuffer.prototype.putSignedInt=function(e,t){return o(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},s.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},s.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},s.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},s.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},s.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},s.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},s.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},s.DataBuffer.prototype.getInt=function(e){o(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},s.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},s.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},s.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},s.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},s.DataBuffer.prototype.copy=function(){return new s.DataBuffer(this)},s.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},s.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},s.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},s.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},s.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return s.binary.raw.encode(t);if("hex"===e)return s.binary.hex.encode(t);if("base64"===e)return s.binary.base64.encode(t);if("utf8"===e)return s.text.utf8.decode(t);if("utf16"===e)return s.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},s.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=s.encodeUtf8(e)),new s.ByteBuffer(e)},s.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},s.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s},s.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},s.bytesToHex=function(e){return s.createBuffer(e).toHex()},s.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],u="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";s.encode64=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.length;)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),s+=c.charAt(r>>2),s+=c.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=c.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":c.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},s.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",o=0;o<e.length;)t=l[e.charCodeAt(o++)-43],r=l[e.charCodeAt(o++)-43],n=l[e.charCodeAt(o++)-43],i=l[e.charCodeAt(o++)-43],s+=String.fromCharCode(t<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},s.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},s.decodeUtf8=function(e){return decodeURIComponent(escape(e))},s.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},s.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},s.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},s.binary.hex.encode=s.bytesToHex,s.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,s=r=r||0;for(1&e.length&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n},s.binary.base64.encode=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.byteLength;)r=e[a++],n=e[a++],i=e[a++],s+=c.charAt(r>>2),s+=c.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=c.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":c.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+"\r\n",s=s.substr(t));return o+=s},s.binary.base64.decode=function(e,t,r){var n,i,s,o,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,u=r=r||0;c<e.length;)n=l[e.charCodeAt(c++)-43],i=l[e.charCodeAt(c++)-43],s=l[e.charCodeAt(c++)-43],o=l[e.charCodeAt(c++)-43],a[u++]=n<<2|i>>4,64!==s&&(a[u++]=(15&i)<<4|s>>2,64!==o&&(a[u++]=(3&s)<<6|o));return t?u-r:a.subarray(0,u)},s.binary.base58.encode=function(e,t){return s.binary.baseN.encode(e,u,t)},s.binary.base58.decode=function(e,t){return s.binary.baseN.decode(e,u,t)},s.text={utf8:{},utf16:{}},s.text.utf8.encode=function(e,t,r){e=s.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n},s.text.utf8.decode=function(e){return s.decodeUtf8(String.fromCharCode.apply(null,e))},s.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),s=r=r||0,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n},s.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},s.deflate=function(e,t,r){if(t=s.decode64(e.deflate(s.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},s.inflate=function(e,t,r){var n=e.inflate(s.encode64(t)).rval;return null===n?null:s.decode64(n)};var h=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=s.encode64(JSON.stringify(r)),n=e.setItem(t,r)),"undefined"!==typeof n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},d=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(s.decode64(r))),r},p=function(e,t,r,n){var i=d(e,t);null===i&&(i={}),i[r]=n,h(e,t,i)},f=function(e,t,r){var n=d(e,t);return null!==n&&(n=r in n?n[r]:null),n},y=function(e,t,r){var n=d(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),h(e,t,n)}},g=function(e,t){h(e,t,null)},m=function(e,t,r){var n,i=null;"undefined"===typeof r&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),s="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),s=!0)}catch(c){o=c}if(s)break}if(!s)throw o;return i};s.setItem=function(e,t,r,n,i){m(p,arguments,i)},s.getItem=function(e,t,r,n){return m(f,arguments,n)},s.removeItem=function(e,t,r,n){m(y,arguments,n)},s.clearItems=function(e,t,r){m(g,arguments,r)},s.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},s.format=function(e){for(var t,r,n=/%./g,i=0,s=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&s.push(r),o=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")},s.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=l.length>3?l.length%3:0;return c+(u?l.substr(0,u)+a:"")+l.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-l).toFixed(s).slice(2):"")},s.formatSize=function(e){return e=e>=1073741824?s.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?s.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?s.formatNumber(e/1024,0)+" KiB":s.formatNumber(e,0)+" bytes"},s.bytesFromIP=function(e){return-1!==e.indexOf(".")?s.bytesFromIPv4(e):-1!==e.indexOf(":")?s.bytesFromIPv6(e):null},s.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=s.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},s.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=s.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var o=s.hexToBytes(e[i]);o.length<2&&n.putByte(0),n.putBytes(o)}else n.fillWithByte(0,r),r=0;return n.getBytes()},s.bytesToIP=function(e){return 4===e.length?s.bytesToIPv4(e):16===e.length?s.bytesToIPv6(e):null},s.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},s.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var o=s.bytesToHex(e[i]+e[i+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var a=r[r.length-1],c=t.length;a&&c===a.end+1?(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:c,end:c})}t.push(o)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),0===l.start&&t.unshift(""),7===l.end&&t.push(""))}return t.join(":")},s.estimateCores=function(e,t){if("function"===typeof e&&(t=e,e={}),e=e||{},"cores"in s&&!e.update)return t(null,s.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return s.cores=navigator.hardwareConcurrency,t(null,s.cores);if("undefined"===typeof Worker)return s.cores=1,t(null,s.cores);if("undefined"===typeof Blob)return s.cores=2,t(null,s.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,i,o){if(0===i){var a=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return s.cores=Math.max(1,a),URL.revokeObjectURL(r),t(null,s.cores)}!function(e,t){for(var n=[],i=[],s=0;s<e;++s){var o=new Worker(r);o.addEventListener("message",(function(r){if(i.push(r.data),i.length===e){for(var s=0;s<e;++s)n[s].terminate();t(null,i)}})),n.push(o)}for(s=0;s<e;++s)n[s].postMessage(s)}(o,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],s=r[n]=[],o=0;o<e;++o)if(n!==o){var a=t[o];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&s.push(o)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(o,r)),e(n,i-1,o)}))}([],5,16)}},3391:(e,t,r)=>{var n=r(392);r(8605),r(5049),r(1400),r(29),r(1746),r(2886),r(6193),r(325),r(5493),r(3877);var i=n.asn1,s=e.exports=n.pki=n.pki||{},o=s.oids,a={};a.CN=o.commonName,a.commonName="CN",a.C=o.countryName,a.countryName="C",a.L=o.localityName,a.localityName="L",a.ST=o.stateOrProvinceName,a.stateOrProvinceName="ST",a.O=o.organizationName,a.organizationName="O",a.OU=o.organizationalUnitName,a.organizationalUnitName="OU",a.E=o.emailAddress,a.emailAddress="E";var c=n.pki.rsa.publicKeyValidator,l={name:"Certificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:i.Class.UNIVERSAL,type:i.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:i.Class.UNIVERSAL,type:i.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},u={name:"rsapss",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:i.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:i.Class.UNIVERSAL,type:i.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:i.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:i.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:i.Class.UNIVERSAL,type:i.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:i.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:i.Class.UNIVERSAL,type:i.Type.SET,constructed:!0}]}]}]},d={name:"CertificationRequest",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:i.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:i.Class.UNIVERSAL,type:i.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function p(e,t){"string"===typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}s.RDNAttributesAsArray=function(e,t){for(var r,n,s,c=[],l=0;l<e.value.length;++l){r=e.value[l];for(var u=0;u<r.value.length;++u)s={},n=r.value[u],s.type=i.derToOid(n.value[0].value),s.value=n.value[1].value,s.valueTagClass=n.value[1].type,s.type in o&&(s.name=o[s.type],s.name in a&&(s.shortName=a[s.name])),t&&(t.update(s.type),t.update(s.value)),c.push(s)}return c},s.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],c=i.derToOid(n.value[0].value),l=n.value[1].value,u=0;u<l.length;++u){var h={};if(h.type=c,h.value=l[u].value,h.valueTagClass=l[u].type,h.type in o&&(h.name=o[h.type],h.name in a&&(h.shortName=a[h.name])),h.type===o.extensionRequest){h.extensions=[];for(var d=0;d<h.value.length;++d)h.extensions.push(s.certificateExtensionFromAsn1(h.value[d]))}t.push(h)}return t};var f=function(e,t,r){var n={};if(e!==o["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:o.sha1},mgf:{algorithmOid:o.mgf1,hash:{algorithmOid:o.sha1}},saltLength:20});var s={},a=[];if(!i.validate(t,u,s,a)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=a,c}return void 0!==s.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=i.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=i.derToOid(s.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=i.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(n.saltLength=s.saltLength.charCodeAt(0)),n},y=function(e){switch(o[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},g=function(e){var t,r=e.certificate;switch(r.signatureOid){case o.sha1WithRSAEncryption:case o.sha1WithRSASignature:break;case o["RSASSA-PSS"]:var i,s,a;if(void 0===(i=o[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,a.name=i,a;if(void 0===(s=o[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[s])throw(a=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,a.name=s,a;if(s=n.mgf[s].create(n.md[i].create()),void 0===(i=o[r.signatureParameters.hash.algorithmOid])||void 0===n.md[i])throw(a=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,a.name=i,a;t=n.pss.create(n.md[i].create(),s,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function m(e){for(var t,r,s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),o=e.attributes,a=0;a<o.length;++a){var c=(t=o[a]).value,l=i.Type.PRINTABLESTRING;"valueTagClass"in t&&(l=t.valueTagClass)===i.Type.UTF8&&(c=n.util.encodeUtf8(c)),r=i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.type).getBytes()),i.create(i.Class.UNIVERSAL,l,!1,c)])]),s.value.push(r)}return s}function w(e){for(var t,r=0;r<e.length;++r){if("undefined"===typeof(t=e[r]).name&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in a&&(t.name=s.oids[a[t.shortName]])),"undefined"===typeof t.type){if(!t.name||!(t.name in s.oids))throw(c=new Error("Attribute type not specified.")).attribute=t,c;t.type=s.oids[t.name]}if("undefined"===typeof t.shortName&&t.name&&t.name in a&&(t.shortName=a[t.name]),t.type===o.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=i.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(s.certificateExtensionToAsn1(v(t.extensions[n])))}var c;if("undefined"===typeof t.value)throw(c=new Error("Attribute value not specified.")).attribute=t,c}}function v(e,t){if(t=t||{},"undefined"===typeof e.name&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]),"undefined"===typeof e.id){if(!e.name||!(e.name in s.oids))throw(E=new Error("Extension ID not specified.")).extension=e,E;e.id=s.oids[e.name]}if("undefined"!==typeof e.value)return e;if("keyUsage"===e.name){var r=0,a=0,c=0;e.digitalSignature&&(a|=128,r=7),e.nonRepudiation&&(a|=64,r=6),e.keyEncipherment&&(a|=32,r=5),e.dataEncipherment&&(a|=16,r=4),e.keyAgreement&&(a|=8,r=3),e.keyCertSign&&(a|=4,r=2),e.cRLSign&&(a|=2,r=1),e.encipherOnly&&(a|=1,r=0),e.decipherOnly&&(c|=128,r=7);var l=String.fromCharCode(r);0!==c?l+=String.fromCharCode(a)+String.fromCharCode(c):0!==a&&(l+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if("basicConstraints"===e.name)e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);var u=e.value.value;for(var h in e)!0===e[h]&&(h in o?u.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o[h]).getBytes())):-1!==h.indexOf(".")&&u.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(h).getBytes())))}else if("nsCertType"===e.name){r=0,a=0;e.client&&(a|=128,r=7),e.server&&(a|=64,r=6),e.email&&(a|=32,r=5),e.objsign&&(a|=16,r=4),e.reserved&&(a|=8,r=3),e.sslCA&&(a|=4,r=2),e.emailCA&&(a|=2,r=1),e.objCA&&(a|=1,r=0);l=String.fromCharCode(r);0!==a&&(l+=String.fromCharCode(a)),e.value=i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,l)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);for(var d=0;d<e.altNames.length;++d){l=(w=e.altNames[d]).value;if(7===w.type&&w.ip){if(null===(l=n.util.bytesFromIP(w.ip)))throw(E=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,E}else 8===w.type&&(l=w.oid?i.oidToDer(i.oidToDer(w.oid)):i.oidToDer(l));e.value.value.push(i.create(i.Class.CONTEXT_SPECIFIC,w.type,!1,l))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=i.create(i.Class.UNIVERSAL,i.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var p=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=p.toHex(),e.value=i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);u=e.value.value;if(e.keyIdentifier){var f=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;u.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!1,f))}if(e.authorityCertIssuer){var y=[i.create(i.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];u.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,y))}if(e.serialNumber){var g=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);u.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if("cRLDistributionPoints"===e.name){e.value=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);u=e.value.value;var w,v=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]),b=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);for(d=0;d<e.altNames.length;++d){l=(w=e.altNames[d]).value;if(7===w.type&&w.ip){if(null===(l=n.util.bytesFromIP(w.ip)))throw(E=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,E}else 8===w.type&&(l=w.oid?i.oidToDer(i.oidToDer(w.oid)):i.oidToDer(l));b.value.push(i.create(i.Class.CONTEXT_SPECIFIC,w.type,!1,l))}v.value.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[b])),u.push(v)}var E;if("undefined"===typeof e.value)throw(E=new Error("Extension value not specified.")).extension=e,E;return e}function b(e,t){if(e===o["RSASSA-PSS"]){var r=[];return void 0!==t.hash.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(t.mgf.hash.algorithmOid).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(t.saltLength).getBytes())])),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,r)}return i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")}function E(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,s=0;s<r.length;++s){var o=r[s],a=o.value,c=i.Type.UTF8;"valueTagClass"in o&&(c=o.valueTagClass),c===i.Type.UTF8&&(a=n.util.encodeUtf8(a));var l=!1;"valueConstructed"in o&&(l=o.valueConstructed);var u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(o.type).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SET,!0,[i.create(i.Class.UNIVERSAL,c,l,a)])]);t.value.push(u)}return t}s.certificateFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE"!==o.type&&"X509 CERTIFICATE"!==o.type&&"TRUSTED CERTIFICATE"!==o.type){var a=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificateFromAsn1(c,t)},s.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:i.toDer(s.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var o=i.fromDer(t.body);return s.publicKeyFromAsn1(o)},s.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:i.toDer(s.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){var r,o=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=i.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=i.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}o.start(),o.update(r);var a=o.digest();if("hex"===t.encoding){var c=a.toHex();return t.delimiter?c.match(/.{2}/g).join(t.delimiter):c}if("binary"===t.encoding)return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return a},s.certificationRequestFromPem=function(e,t,r){var o=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==o.type){var a=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw a.headerType=o.type,a}if(o.procType&&"ENCRYPTED"===o.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=i.fromDer(o.body,r);return s.certificationRequestFromAsn1(c,t)},s.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:i.toDer(s.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},s.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return p(e.issuer,t)},e.issuer.addField=function(t){w([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){w([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){w(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){w(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)v(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"===typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.tbsCertificate=s.getTBSCertificate(e);var l=i.toDer(e.tbsCertificate);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,o=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=o.attributes,a.actualIssuer=n.attributes,a}var c=t.md;if(null===c){c=y({signatureOid:t.signatureOid,type:"certificate"});var l=t.tbsCertificate||s.getTBSCertificate(t),u=i.toDer(l);c.update(u.getBytes())}return null!==c&&(r=g({certificate:e,md:c,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=o.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var r={},o=[];if(!i.validate(e,l,r,o)){var a=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw a.errors=o,a}if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificate();c.version=r.certVersion?r.certVersion.charCodeAt(0):0;var u=n.util.createBuffer(r.certSerialNumber);c.serialNumber=u.toHex(),c.signatureOid=n.asn1.derToOid(r.certSignatureOid),c.signatureParameters=f(c.signatureOid,r.certSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),c.siginfo.parameters=f(c.siginfo.algorithmOid,r.certinfoSignatureParams,!1),c.signature=r.certSignature;var h=[];if(void 0!==r.certValidity1UTCTime&&h.push(i.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&h.push(i.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&h.push(i.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&h.push(i.generalizedTimeToDate(r.certValidity4GeneralizedTime)),h.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(h.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=h[0],c.validity.notAfter=h[1],c.tbsCertificate=r.tbsCertificate,t){c.md=y({signatureOid:c.signatureOid,type:"certificate"});var d=i.toDer(c.tbsCertificate);c.md.update(d.getBytes())}var g=n.md.sha1.create(),m=i.toDer(r.certIssuer);g.update(m.getBytes()),c.issuer.getField=function(e){return p(c.issuer,e)},c.issuer.addField=function(e){w([e]),c.issuer.attributes.push(e)},c.issuer.attributes=s.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(c.issuer.uniqueId=r.certIssuerUniqueId),c.issuer.hash=g.digest().toHex();var v=n.md.sha1.create(),b=i.toDer(r.certSubject);return v.update(b.getBytes()),c.subject.getField=function(e){return p(c.subject,e)},c.subject.addField=function(e){w([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(c.subject.uniqueId=r.certSubjectUniqueId),c.subject.hash=v.digest().toHex(),r.certExtensions?c.extensions=s.certificateExtensionsFromAsn1(r.certExtensions):c.extensions=[],c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c},s.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(s.certificateExtensionFromAsn1(n.value[i]));return t},s.certificateExtensionFromAsn1=function(e){var t={};if(t.id=i.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===i.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in o)if(t.name=o[t.id],"keyUsage"===t.name){var r=0,s=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1),s=c.value.length>2?c.value.charCodeAt(2):0),t.digitalSignature=128===(128&r),t.nonRepudiation=64===(64&r),t.keyEncipherment=32===(32&r),t.dataEncipherment=16===(16&r),t.keyAgreement=8===(8&r),t.keyCertSign=4===(4&r),t.cRLSign=2===(2&r),t.encipherOnly=1===(1&r),t.decipherOnly=128===(128&s)}else if("basicConstraints"===t.name){(c=i.fromDer(t.value)).value.length>0&&c.value[0].type===i.Type.BOOLEAN?t.cA=0!==c.value[0].value.charCodeAt(0):t.cA=!1;var a=null;c.value.length>0&&c.value[0].type===i.Type.INTEGER?a=c.value[0].value:c.value.length>1&&(a=c.value[1].value),null!==a&&(t.pathLenConstraint=i.derToInteger(a))}else if("extKeyUsage"===t.name)for(var c=i.fromDer(t.value),l=0;l<c.value.length;++l){var u=i.derToOid(c.value[l].value);u in o?t[o[u]]=!0:t[u]=!0}else if("nsCertType"===t.name){r=0;(c=i.fromDer(t.value)).value.length>1&&(r=c.value.charCodeAt(1)),t.client=128===(128&r),t.server=64===(64&r),t.email=32===(32&r),t.objsign=16===(16&r),t.reserved=8===(8&r),t.sslCA=4===(4&r),t.emailCA=2===(2&r),t.objCA=1===(1&r)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var h;t.altNames=[];c=i.fromDer(t.value);for(var d=0;d<c.value.length;++d){var p={type:(h=c.value[d]).type,value:h.value};switch(t.altNames.push(p),h.type){case 1:case 2:case 6:break;case 7:p.ip=n.util.bytesToIP(h.value);break;case 8:p.oid=i.derToOid(h.value)}}}else if("subjectKeyIdentifier"===t.name){c=i.fromDer(t.value);t.subjectKeyIdentifier=n.util.bytesToHex(c.value)}return t},s.certificationRequestFromAsn1=function(e,t){var r={},o=[];if(!i.validate(e,d,r,o)){var a=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw a.errors=o,a}if(i.derToOid(r.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=s.createCertificationRequest();if(c.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,c.signatureOid=n.asn1.derToOid(r.csrSignatureOid),c.signatureParameters=f(c.signatureOid,r.csrSignatureParams,!0),c.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),c.siginfo.parameters=f(c.siginfo.algorithmOid,r.csrSignatureParams,!1),c.signature=r.csrSignature,c.certificationRequestInfo=r.certificationRequestInfo,t){c.md=y({signatureOid:c.signatureOid,type:"certification request"});var l=i.toDer(c.certificationRequestInfo);c.md.update(l.getBytes())}var u=n.md.sha1.create();return c.subject.getField=function(e){return p(c.subject,e)},c.subject.addField=function(e){w([e]),c.subject.attributes.push(e)},c.subject.attributes=s.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),c.subject.hash=u.digest().toHex(),c.publicKey=s.publicKeyFromAsn1(r.subjectPublicKeyInfo),c.getAttribute=function(e){return p(c,e)},c.addAttribute=function(e){w([e]),c.attributes.push(e)},c.attributes=s.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),c},s.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return p(e.subject,t)},e.subject.addField=function(t){w([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return p(e,t)},e.addAttribute=function(t){w([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){w(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){w(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var a=o[e.md.algorithm+"WithRSAEncryption"];if(!a){var c=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw c.algorithm=e.md.algorithm,c}e.signatureOid=e.siginfo.algorithmOid=a,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var l=i.toDer(e.certificationRequestInfo);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=y({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||s.getCertificationRequestInfo(e),o=i.toDer(n);r.update(o.getBytes())}return null!==r&&(t=g({certificate:e,md:r,signature:e.signature})),t},e};var _=new Date("1950-01-01T00:00:00Z"),S=new Date("2050-01-01T00:00:00Z");function A(e){return e>=_&&e<S?i.create(i.Class.UNIVERSAL,i.Type.UTCTIME,!1,i.dateToUtcTime(e)):i.create(i.Class.UNIVERSAL,i.Type.GENERALIZEDTIME,!1,i.dateToGeneralizedTime(e))}s.getTBSCertificate=function(e){var t=A(e.validity.notBefore),r=A(e.validity.notAfter),o=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.CONTEXT_SPECIFIC,0,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes())]),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.siginfo.algorithmOid).getBytes()),b(e.siginfo.algorithmOid,e.siginfo.parameters)]),m(e.issuer),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,r]),m(e.subject),s.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,1,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&o.value.push(i.create(i.Class.CONTEXT_SPECIFIC,2,!0,[i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&o.value.push(s.certificateExtensionsToAsn1(e.extensions)),o},s.getCertificationRequestInfo=function(e){return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,i.integerToDer(e.version).getBytes()),m(e.subject),s.publicKeyToAsn1(e.publicKey),E(e)])},s.distinguishedNameToAsn1=function(e){return m(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=i.create(i.Class.CONTEXT_SPECIFIC,3,!0,[]),r=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(s.certificateExtensionToAsn1(e[n]));return t},s.certificateExtensionToAsn1=function(e){var t=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[]);t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.id).getBytes())),e.critical&&t.value.push(i.create(i.Class.UNIVERSAL,i.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!==typeof e.value&&(r=i.toDer(r).getBytes()),t.value.push(i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,r)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[t,i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(e.signatureOid).getBytes()),b(e.signatureOid,e.signatureParameters)]),i.create(i.Class.UNIVERSAL,i.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){var t={certs:{}};function r(e){return o(e),t.certs[e.hash]||null}function o(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=s.RDNAttributesAsArray(m(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"===typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var o=i.toDer(s.certificateToAsn1(e)).getBytes(),a=0;a<t.length;++a){if(o===i.toDer(s.certificateToAsn1(t[a])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var i=t.certs[r];if(n.util.isArray(i))for(var s=0;s<i.length;++s)e.push(i[s]);else e.push(i)}return e},t.removeCertificate=function(e){var a;if("string"===typeof e&&(e=n.pki.certificateFromPem(e)),o(e.subject),!t.hasCertificate(e))return null;var c=r(e.subject);if(!n.util.isArray(c))return a=t.certs[e.subject.hash],delete t.certs[e.subject.hash],a;for(var l=i.toDer(s.certificateToAsn1(e)).getBytes(),u=0;u<c.length;++u){l===i.toDer(s.certificateToAsn1(c[u])).getBytes()&&(a=c[u],c.splice(u,1))}return 0===c.length&&delete t.certs[e.subject.hash],a},e)for(var a=0;a<e.length;++a){var c=e[a];t.addCertificate(c)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,r){"function"===typeof r&&(r={verify:r}),r=r||{};var i=(t=t.slice(0)).slice(0),o=r.validityCheckDate;"undefined"===typeof o&&(o=new Date);var a=!0,c=null,l=0;do{var u=t.shift(),h=null,d=!1;if(o&&(o<u.validity.notBefore||o>u.validity.notAfter)&&(c={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:o}),null===c){if(null===(h=t[0]||e.getIssuer(u))&&u.isIssuer(u)&&(d=!0,h=u),h){var p=h;n.util.isArray(p)||(p=[p]);for(var f=!1;!f&&p.length>0;){h=p.shift();try{f=h.verify(u)}catch(_){}}f||(c={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==c||h&&!d||e.hasCertificate(u)||(c={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===c&&h&&!u.isIssuer(h)&&(c={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===c)for(var y={keyUsage:!0,basicConstraints:!0},g=0;null===c&&g<u.extensions.length;++g){var m=u.extensions[g];m.critical&&!(m.name in y)&&(c={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===c&&(!a||0===t.length&&(!h||d))){var w=u.getExtension("basicConstraints"),v=u.getExtension("keyUsage");if(null!==v&&(v.keyCertSign&&null!==w||(c={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==c||null===w||w.cA||(c={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===c&&null!==v&&"pathLenConstraint"in w)l-1>w.pathLenConstraint&&(c={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var b=null===c||c.error,E=r.verify?r.verify(b,l,i):b;if(!0!==E)throw!0===b&&(c={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(E||0===E)&&("object"!==typeof E||n.util.isArray(E)?"string"===typeof E&&(c.error=E):(E.message&&(c.message=E.message),E.error&&(c.error=E.error))),c;c=null,a=!1,++l}while(t.length>0);return!0}},9879:(e,t,r)=>{const n=r(5125),i=r(2673);e.exports=class{constructor(){this._buffer=new n,this._waitingConsumers=new n}push(e){const{promise:t,resolve:r}=i();return this._buffer.push({chunk:e,resolve:r}),this._consume(),t}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){const e=this._waitingConsumers.shift(),t=this._buffer.shift();e.resolve(t.chunk),t.resolve()}}shift(){const{promise:e,resolve:t}=i();return this._waitingConsumers.push({resolve:t}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}}},2673:e=>{"use strict";e.exports=()=>{const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}},9674:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},3931:(e,t,r)=>{"use strict";e.exports=r(3794).default},3794:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(7922),s=n(r(8974)),o=n(r(2795)),a=r(7201),c=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((e=>new i.Netmask(e)));function l(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}t.default=e=>{if((0,a.isValid)(e)){const t=(0,a.parse)(e);if("ipv4"===t.kind())return function(e){for(let t of c)if(t.contains(e))return!0;return!1}(t.toNormalizedString());if("ipv6"===t.kind())return l(e)}else if((0,o.default)(e)&&s.default.v6().test(e))return l(e)}},8541:e=>{"use strict";var t;e.exports.timeout=function(e,r){var n,i=new t;return Promise.race([e,new Promise((function(e,t){n=setTimeout((function(){t(i)}),r)}))]).then((function(e){return clearTimeout(n),e}),(function(e){throw clearTimeout(n),e}))};(t=e.exports.TimeoutError=function(){Error.call(this),this.stack=Error().stack,this.message="Timeout"}).prototype=Object.create(Error.prototype),t.prototype.name="TimeoutError"},886:(e,t,r)=>{"use strict";e.exports=r(4722)},4722:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(7063),n.BufferWriter=r(2815),n.Reader=r(6216),n.BufferReader=r(3557),n.util=r(3097),n.rpc=r(9994),n.roots=r(7907),n.configure=i,i()},6216:(e,t,r)=>{"use strict";e.exports=c;var n,i=r(3097),s=i.LongBits,o=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var l="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},u=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function h(){var e=new s(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new s(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=u(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=u(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},3557:(e,t,r)=>{"use strict";e.exports=s;var n=r(6216);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(3097);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},7907:e=>{"use strict";e.exports={}},9994:(e,t,r)=>{"use strict";t.Service=r(4281)},4281:(e,t,r)=>{"use strict";e.exports=i;var n=r(3097);function i(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return n.asPromise(e,a,t,r,i,s);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(e,r){if(e)return a.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",r,t),o(null,r)}a.end(!0)}))}catch(c){return a.emit("error",c,t),void setTimeout((function(){o(c)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},9351:(e,t,r)=>{"use strict";e.exports=i;var n=r(3097);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"===typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===o?s:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},3097:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(7206),n.base64=r(1),n.EventEmitter=r(7111),n.float=r(802),n.inquire=r(7172),n.utf8=r(3861),n.pool=r(8236),n.LongBits=r(9351),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},7063:(e,t,r)=>{"use strict";e.exports=h;var n,i=r(3097),s=i.LongBits,o=i.base64,a=i.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function l(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new c(l,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function p(e,t,r){t[r]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function g(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},f.prototype=Object.create(c.prototype),f.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(y,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=s.from(e);return this._push(y,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(y,t.length(),t)},h.prototype.bool=function(e){return this._push(p,1,e?1:0)},h.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=s.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var m=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var r=h.alloc(t=o.length(e));o.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new c(l,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(l,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}},2815:(e,t,r)=>{"use strict";e.exports=s;var n=r(7063);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(3097);function s(){n.call(this)}function o(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},s._configure()},4183:(e,t,r)=>{let n;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},760:(e,t,r)=>{const{instantiate:n}=r(9361);function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([t],{type:"application/wasm"})),e)}i.supported="undefined"!==typeof WebAssembly,e.exports=i},8729:(e,t,r)=>{const n=r(2983),i=r(760);e.exports={Rabin:n,create:async(e,t,r,s,o)=>{const a=await i();return new n(a,e,t,r,s,o)}}},2983:e=>{e.exports=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8192,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32768,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:64,s=arguments.length>5?arguments[5]:void 0;this.bits=t,this.min=r,this.max=n,this.asModule=e,this.rabin=new e.Rabin(t,r,n,i,s),this.polynomial=s}fingerprint(e){const{__retain:t,__release:r,__allocArray:n,__getInt32Array:i,Int32Array_ID:s,Uint8Array_ID:o}=this.asModule,a=t(n(s,new Int32Array(Math.ceil(e.length/this.min)))),c=t(n(o,e)),l=i(this.rabin.fingerprint(c,a));r(c),r(a);const u=l.indexOf(0);return u>=0?l.subarray(0,u):l}}},2525:(e,t,r)=>{"use strict";var n=65536,i=4294967295;var s=r(2543).Buffer,o=r.g.crypto||r.g.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>i)throw new RangeError("requested too many random bytes");var r=s.allocUnsafe(e);if(e>0)if(e>n)for(var a=0;a<e;a+=n)o.getRandomValues(r.slice(a,a+n));else o.getRandomValues(r);if("function"===typeof t)return process.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},4463:(e,t,r)=>{"use strict";var n=r(2791),i=r(5296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function y(e,t,r,n,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function v(e,t,r,n){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,w);g[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,w);g[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,w);g[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),C=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function F(e,t){if(!e||j)return"";j=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=n.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case k:return"Profiler";case A:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=q(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=$(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){J(e,t);var r=$(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&G(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+$(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(te(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:$(r)}}function se(e,t){var r=$(t.value),n=$(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ye(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ye(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Ae=null;function ke(e){if(e=vi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=Ei(t),_e(e.stateNode,e.type,t))}}function Ie(e){Se?Ae?Ae.push(e):Ae=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Ae;if(Ae=Se=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Re(e,t){return e(t)}function Te(){}var De=!1;function Pe(e,t,r){if(De)return e(t,r);De=!0;try{return Re(e,t,r)}finally{De=!1,(null!==Se||null!==Ae)&&(Te(),Ce())}}function Ne(e,t){var r=e.stateNode;if(null===r)return null;var n=Ei(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var xe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){xe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){xe=!1}function Be(e,t,r,n,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,je=null,Fe={onError:function(e){Le=!0,Me=e}};function ze(e,t,r,n,i,s,o,a,c){Le=!1,Me=null,Be.apply(Fe,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ke(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ve(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(n=i.return)){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return $e(i),e;if(o===n)return $e(i),t;o=o.sibling}throw Error(s(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&r;if(0!==o){var a=o&~i;0!==a?n=ht(a):0!==(s&=o)&&(n=ht(s))}else 0!==(o=r&~i)?n=ht(o):0!==s&&(n=ht(s));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-ot(t)),n|=e[r],t&=~i;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=r}function wt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,_t,St,At,kt,It=!1,Ct=[],Rt=null,Tt=null,Dt=null,Pt=new Map,Nt=new Map,xt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bt(e,t){switch(e){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,r,n,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&_t(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=wi(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ke(r)))return e.blockedOn=t,void kt(e.priority,(function(){St(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=vi(r))&&_t(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);be=n,r.target.dispatchEvent(n),be=null,t.shift()}return!0}function jt(e,t,r){Ut(e)&&r.delete(t)}function Ft(){It=!1,null!==Rt&&Ut(Rt)&&(Rt=null),null!==Tt&&Ut(Tt)&&(Tt=null),null!==Dt&&Ut(Dt)&&(Dt=null),Pt.forEach(jt),Nt.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Vt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var r=1;r<Ct.length;r++){var n=Ct[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Rt&&zt(Rt,e),null!==Tt&&zt(Tt,e),null!==Dt&&zt(Dt,e),Pt.forEach(t),Nt.forEach(t),r=0;r<xt.length;r++)(n=xt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<xt.length&&null===(r=xt[0]).blockedOn;)Mt(r),null===r.blockedOn&&xt.shift()}var Kt=b.ReactCurrentBatchConfig,$t=!0;function qt(e,t,r,n){var i=vt,s=Kt.transition;Kt.transition=null;try{vt=1,Wt(e,t,r,n)}finally{vt=i,Kt.transition=s}}function Ht(e,t,r,n){var i=vt,s=Kt.transition;Kt.transition=null;try{vt=4,Wt(e,t,r,n)}finally{vt=i,Kt.transition=s}}function Wt(e,t,r,n){if($t){var i=Yt(e,t,r,n);if(null===i)$n(e,t,n,Gt,r),Bt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Rt=Lt(Rt,e,t,r,n,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,r,n,i),!0;case"mouseover":return Dt=Lt(Dt,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Lt(Pt.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Nt.set(s,Lt(Nt.get(s)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Bt(e,n),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=vi(i);if(null!==s&&Et(s),null===(s=Yt(e,t,r,n))&&$n(e,t,n,Gt,r),s===i)break;i=s}null!==i&&n.stopPropagation()}else $n(e,t,n,null,r)}}var Gt=null;function Yt(e,t,r,n){if(Gt=null,null!==(e=wi(e=Ee(n))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ke(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,n=r.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<n&&r[e]===i[e];e++);var o=n-e;for(t=1;t<=o&&r[n-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,s){for(var o in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var sr,or,ar,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=ir(cr),ur=M({},cr,{view:0,detail:0}),hr=ir(ur),dr=M({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(sr=e.screenX-ar.screenX,or=e.screenY-ar.screenY):or=sr=0,ar=e),sr)},movementY:function(e){return"movementY"in e?e.movementY:or}}),pr=ir(dr),fr=ir(M({},dr,{dataTransfer:0})),yr=ir(M({},ur,{relatedTarget:0})),gr=ir(M({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),mr=M({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wr=ir(mr),vr=ir(M({},cr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Er={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function Ar(){return Sr}var kr=M({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Er[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ir=ir(kr),Cr=ir(M({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rr=ir(M({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar})),Tr=ir(M({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dr=M({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pr=ir(Dr),Nr=[9,13,27,32],xr=u&&"CompositionEvent"in window,Or=null;u&&"documentMode"in document&&(Or=document.documentMode);var Br=u&&"TextEvent"in window&&!Or,Lr=u&&(!xr||Or&&8<Or&&11>=Or),Mr=String.fromCharCode(32),Ur=!1;function jr(e,t){switch(e){case"keyup":return-1!==Nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function $r(e,t,r,n){Ie(n),0<(t=Hn(t,"onChange")).length&&(r=new lr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var qr=null,Hr=null;function Wr(e){Un(e,0)}function Gr(e){if(W(bi(e)))return e}function Yr(e,t){if("change"===e)return t}var Qr=!1;if(u){var Jr;if(u){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Jr=Xr}else Jr=!1;Qr=Jr&&(!document.documentMode||9<document.documentMode)}function en(){qr&&(qr.detachEvent("onpropertychange",tn),Hr=qr=null)}function tn(e){if("value"===e.propertyName&&Gr(Hr)){var t=[];$r(t,Hr,e,Ee(e)),Pe(Wr,t)}}function rn(e,t,r){"focusin"===e?(en(),Hr=r,(qr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Hr)}function sn(e,t){if("click"===e)return Gr(t)}function on(e,t){if("input"===e||"change"===e)return Gr(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cn(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!h.call(t,i)||!an(e[i],t[i]))return!1}return!0}function ln(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=ln(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ln(n)}}function hn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dn(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=G((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=dn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=void 0===n.end?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=un(r,s);var o=un(r,n);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,mn=null,wn=null,vn=!1;function bn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vn||null==gn||gn!==G(n)||("selectionStart"in(n=gn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},wn&&cn(wn,n)||(wn=n,0<(n=Hn(mn,"onSelect")).length&&(t=new lr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function En(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _n={animationend:En("Animation","AnimationEnd"),animationiteration:En("Animation","AnimationIteration"),animationstart:En("Animation","AnimationStart"),transitionend:En("Transition","TransitionEnd")},Sn={},An={};function kn(e){if(Sn[e])return Sn[e];if(!_n[e])return e;var t,r=_n[e];for(t in r)if(r.hasOwnProperty(t)&&t in An)return Sn[e]=r[t];return e}u&&(An=document.createElement("div").style,"AnimationEvent"in window||(delete _n.animationend.animation,delete _n.animationiteration.animation,delete _n.animationstart.animation),"TransitionEvent"in window||delete _n.transitionend.transition);var In=kn("animationend"),Cn=kn("animationiteration"),Rn=kn("animationstart"),Tn=kn("transitionend"),Dn=new Map,Pn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){Dn.set(e,t),c(t,[e])}for(var xn=0;xn<Pn.length;xn++){var On=Pn[xn];Nn(On.toLowerCase(),"on"+(On[0].toUpperCase()+On.slice(1)))}Nn(In,"onAnimationEnd"),Nn(Cn,"onAnimationIteration"),Nn(Rn,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(Tn,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ln=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bn));function Mn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,o,a,c,l){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,je=u)}}(n,t,void 0,e),e.currentTarget=null}function Un(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Mn(i,a,l),s=c}else for(o=0;o<n.length;o++){if(c=(a=n[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Mn(i,a,l),s=c}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jn(e,t){var r=t[yi];void 0===r&&(r=t[yi]=new Set);var n=e+"__bubble";r.has(n)||(Kn(t,e,2,!1),r.add(n))}function Fn(e,t,r){var n=0;t&&(n|=4),Kn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Vn(e){if(!e[zn]){e[zn]=!0,o.forEach((function(t){"selectionchange"!==t&&(Ln.has(t)||Fn(t,!1,e),Fn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Fn("selectionchange",!1,t))}}function Kn(e,t,r,n){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Ht;break;default:i=Wt}r=i.bind(null,t,r,e),i=void 0,!xe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function $n(e,t,r,n,i){var s=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=wi(a)))return;if(5===(c=o.tag)||6===c){n=s=o;continue e}a=a.parentNode}}n=n.return}Pe((function(){var n=s,i=Ee(r),o=[];e:{var a=Dn.get(e);if(void 0!==a){var c=lr,l=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":c=Ir;break;case"focusin":l="focus",c=yr;break;case"focusout":l="blur",c=yr;break;case"beforeblur":case"afterblur":c=yr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rr;break;case In:case Cn:case Rn:c=gr;break;case Tn:c=Tr;break;case"scroll":c=hr;break;case"wheel":c=Pr;break;case"copy":case"cut":case"paste":c=wr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Cr}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=n;null!==f;){var y=(p=f).stateNode;if(5===p.tag&&null!==y&&(p=y,null!==d&&(null!=(y=Ne(f,d))&&u.push(qn(f,y,p)))),h)break;f=f.return}0<u.length&&(a=new c(a,l,null,r,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===be||!(l=r.relatedTarget||r.fromElement)||!wi(l)&&!l[fi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=n,null!==(l=(l=r.relatedTarget||r.toElement)?wi(l):null)&&(l!==(h=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=n),c!==l)){if(u=pr,y="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cr,y="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==c?a:bi(c),p=null==l?a:bi(l),(a=new u(y,f+"leave",c,r,i)).target=h,a.relatedTarget=p,y=null,wi(i)===n&&((u=new u(d,f+"enter",l,r,i)).target=p,u.relatedTarget=h,y=u),h=y,c&&l)e:{for(d=l,f=0,p=u=c;p;p=Wn(p))f++;for(p=0,y=d;y;y=Wn(y))p++;for(;0<f-p;)u=Wn(u),f--;for(;0<p-f;)d=Wn(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wn(u),d=Wn(d)}u=null}else u=null;null!==c&&Gn(o,a,c,u,!1),null!==l&&null!==h&&Gn(o,h,l,u,!0)}if("select"===(c=(a=n?bi(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Yr;else if(Kr(a))if(Qr)g=on;else{g=nn;var m=rn}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sn);switch(g&&(g=g(e,n))?$r(o,g,r,i):(m&&m(e,a,n),"focusout"===e&&(m=a._wrapperState)&&m.controlled&&"number"===a.type&&ee(a,"number",a.value)),m=n?bi(n):window,e){case"focusin":(Kr(m)||"true"===m.contentEditable)&&(gn=m,mn=n,wn=null);break;case"focusout":wn=mn=gn=null;break;case"mousedown":vn=!0;break;case"contextmenu":case"mouseup":case"dragend":vn=!1,bn(o,r,i);break;case"selectionchange":if(yn)break;case"keydown":case"keyup":bn(o,r,i)}var w;if(xr)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zr?jr(e,r)&&(v="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(v="onCompositionStart");v&&(Lr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==v?"onCompositionEnd"===v&&zr&&(w=er()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zr=!0)),0<(m=Hn(n,v)).length&&(v=new vr(v,e,null,r,i),o.push({event:v,listeners:m}),w?v.data=w:null!==(w=Fr(r))&&(v.data=w))),(w=Br?function(e,t){switch(e){case"compositionend":return Fr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Mr);case"textInput":return(e=t.data)===Mr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!xr&&jr(e,t)?(e=er(),Zt=Xt=Jt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Hn(n,"onBeforeInput")).length&&(i=new vr("onBeforeInput","beforeinput",null,r,i),o.push({event:i,listeners:n}),i.data=w))}Un(o,t)}))}function qn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ne(e,r))&&n.unshift(qn(e,s,i)),null!=(s=Ne(e,t))&&n.push(qn(e,s,i))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gn(e,t,r,n,i){for(var s=t._reactName,o=[];null!==r&&r!==n;){var a=r,c=a.alternate,l=a.stateNode;if(null!==c&&c===n)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Ne(r,s))&&o.unshift(qn(r,c,a)):i||null!=(c=Ne(r,s))&&o.push(qn(r,c,a))),r=r.return}0!==o.length&&e.push({event:t,listeners:o})}var Yn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Jn(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Qn,"")}function Xn(e,t,r){if(t=Jn(t),Jn(e)!==t&&r)throw Error(s(425))}function Zn(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ni;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Vt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Vt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,yi="__reactEvents$"+hi,gi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function wi(e){var t=e[di];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[di]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[di])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function vi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Ei(e){return e[pi]||null}var _i=[],Si=-1;function Ai(e){return{current:e}}function ki(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ii(e,t){Si++,_i[Si]=e.current,e.current=t}var Ci={},Ri=Ai(Ci),Ti=Ai(!1),Di=Ci;function Pi(e,t){var r=e.type.contextTypes;if(!r)return Ci;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in r)s[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xi(){ki(Ti),ki(Ri)}function Oi(e,t,r){if(Ri.current!==Ci)throw Error(s(168));Ii(Ri,t),Ii(Ti,r)}function Bi(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(s(108,K(e)||"Unknown",i));return M({},r,n)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Di=Ri.current,Ii(Ri,e),Ii(Ti,Ti.current),!0}function Mi(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=Bi(e,t,Di),n.__reactInternalMemoizedMergedChildContext=e,ki(Ti),ki(Ri),Ii(Ri,e)):ki(Ti),Ii(Ti,r)}var Ui=null,ji=!1,Fi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Vi(){if(!Fi&&null!==Ui){Fi=!0;var e=0,t=vt;try{var r=Ui;for(vt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,Vi),i}finally{vt=t,Fi=!1}}return null}var Ki=[],$i=0,qi=null,Hi=0,Wi=[],Gi=0,Yi=null,Qi=1,Ji="";function Xi(e,t){Ki[$i++]=Hi,Ki[$i++]=qi,qi=e,Hi=t}function Zi(e,t,r){Wi[Gi++]=Qi,Wi[Gi++]=Ji,Wi[Gi++]=Yi,Yi=e;var n=Qi;e=Ji;var i=32-ot(n)-1;n&=~(1<<i),r+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Qi=1<<32-ot(t)+i|r<<i|n,Ji=s+e}else Qi=1<<s|r<<i|n,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=Ki[--$i],Ki[$i]=null,Hi=Ki[--$i],Ki[$i]=null;for(;e===Yi;)Yi=Wi[--Gi],Wi[Gi]=null,Ji=Wi[--Gi],Wi[Gi]=null,Qi=Wi[--Gi],Wi[Gi]=null}var rs=null,ns=null,is=!1,ss=null;function os(e,t){var r=Pl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function as(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,ns=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,ns=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Yi?{id:Qi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Pl(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rs=e,ns=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=ns;if(t){var r=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(r.nextSibling);var n=rs;t&&as(e,t)?os(n,r):(e.flags=-4097&e.flags|2,is=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,rs=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=ns)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){ns=li(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}ns=null}}else ns=rs?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=ns;e;)e=li(e.nextSibling)}function ps(){ns=rs=null,is=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ys=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var r in t=M({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var ms=Ai(null),ws=null,vs=null,bs=null;function Es(){bs=vs=ws=null}function _s(e){var t=ms.current;ki(ms),e._currentValue=t}function Ss(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function As(e,t){ws=e,bs=vs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function ks(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===vs){if(null===ws)throw Error(s(308));vs=e,ws.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return t}var Is=null;function Cs(e){null===Is?Is=[e]:Is.push(e)}function Rs(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Cs(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ts(e,n)}function Ts(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Ds=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ns(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Rc)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ts(e,r)}return null===(i=n.interleaved)?(t.next=t,Cs(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ts(e,r)}function Bs(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,wt(e,r)}}function Ls(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,s=null;if(null!==(r=r.firstBaseUpdate)){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===s?i=s=o:s=s.next=o,r=r.next}while(null!==r);null===s?i=s=t:s=s.next=t}else i=s=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ms(e,t,r,n){var i=e.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,p=a.eventTime;if((n&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,y=a;switch(d=t,p=r,y.tag){case 1:if("function"===typeof(f=y.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=y.payload)?f.call(p,h,d):f)||void 0===d)break e;h=M({},h,d);break e;case 2:Ds=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=p,c=h):u=u.next=p,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Lc|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(s(191,i));i.call(n)}}}var js=(new n.Component).refs;function Fs(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:M({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=el(),i=tl(e),s=xs(n,i);s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Os(e,s,i))&&(rl(t,e,i,n),Bs(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=el(),i=tl(e),s=xs(n,i);s.tag=1,s.payload=t,void 0!==r&&null!==r&&(s.callback=r),null!==(t=Os(e,s,i))&&(rl(t,e,i,n),Bs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=el(),n=tl(e),i=xs(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,n))&&(rl(t,e,n,r),Bs(t,e,n))}};function Vs(e,t,r,n,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(i,s))}function Ks(e,t,r){var n=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=ks(s):(i=Ni(t)?Di:Ri.current,s=(n=null!==(n=t.contextTypes)&&void 0!==n)?Pi(e,i):Ci),t=new t(r,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function $s(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function qs(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=js,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=ks(s):(s=Ni(t)?Di:Ri.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Fs(e,t,s,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Ms(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var i=n,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===js&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function Ws(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=xl(e,t)).index=0,e.sibling=null,e}function o(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=Ml(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function l(e,t,r,n){var s=r.type;return s===S?h(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&Gs(s)===t.type)?((n=i(t,r.props)).ref=Hs(e,t,r),n.return=e,n):((n=Ol(r.type,r.key,r.props,null,e.mode,n)).ref=Hs(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Ul(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function h(e,t,r,n,s){return null===t||7!==t.tag?((t=Bl(r,e.mode,n,s)).return=e,t):((t=i(t,r)).return=e,t)}function d(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ml(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(r=Ol(t.type,t.key,t.props,null,e.mode,r)).ref=Hs(e,null,t),r.return=e,r;case _:return(t=Ul(t,e.mode,r)).return=e,t;case N:return d(e,(0,t._init)(t._payload),r)}if(te(t)||B(t))return(t=Bl(t,e.mode,r,null)).return=e,t;Ws(e,t)}return null}function p(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:c(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return r.key===i?l(e,t,r,n):null;case _:return r.key===i?u(e,t,r,n):null;case N:return p(e,t,(i=r._init)(r._payload),n)}if(te(r)||B(r))return null!==i?null:h(e,t,r,n,null);Ws(e,r)}return null}function f(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return c(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case _:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case N:return f(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||B(n))return h(t,e=e.get(r)||null,n,i,null);Ws(t,n)}return null}function y(i,s,a,c){for(var l=null,u=null,h=s,y=s=0,g=null;null!==h&&y<a.length;y++){h.index>y?(g=h,h=null):g=h.sibling;var m=p(i,h,a[y],c);if(null===m){null===h&&(h=g);break}e&&h&&null===m.alternate&&t(i,h),s=o(m,s,y),null===u?l=m:u.sibling=m,u=m,h=g}if(y===a.length)return r(i,h),is&&Xi(i,y),l;if(null===h){for(;y<a.length;y++)null!==(h=d(i,a[y],c))&&(s=o(h,s,y),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,y),l}for(h=n(i,h);y<a.length;y++)null!==(g=f(h,i,y,a[y],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?y:g.key),s=o(g,s,y),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,y),l}function g(i,a,c,l){var u=B(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,y=a,g=a=0,m=null,w=c.next();null!==y&&!w.done;g++,w=c.next()){y.index>g?(m=y,y=null):m=y.sibling;var v=p(i,y,w.value,l);if(null===v){null===y&&(y=m);break}e&&y&&null===v.alternate&&t(i,y),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v,y=m}if(w.done)return r(i,y),is&&Xi(i,g),u;if(null===y){for(;!w.done;g++,w=c.next())null!==(w=d(i,w.value,l))&&(a=o(w,a,g),null===h?u=w:h.sibling=w,h=w);return is&&Xi(i,g),u}for(y=n(i,y);!w.done;g++,w=c.next())null!==(w=f(y,i,g,w.value,l))&&(e&&null!==w.alternate&&y.delete(null===w.key?g:w.key),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w);return e&&y.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(n,s,o,c){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case E:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===S){if(7===u.tag){r(n,u.sibling),(s=i(u,o.props.children)).return=n,n=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===N&&Gs(l)===u.type){r(n,u.sibling),(s=i(u,o.props)).ref=Hs(n,u,o),s.return=n,n=s;break e}r(n,u);break}t(n,u),u=u.sibling}o.type===S?((s=Bl(o.props.children,n.mode,c,o.key)).return=n,n=s):((c=Ol(o.type,o.key,o.props,null,n.mode,c)).ref=Hs(n,s,o),c.return=n,n=c)}return a(n);case _:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){r(n,s.sibling),(s=i(s,o.children||[])).return=n,n=s;break e}r(n,s);break}t(n,s),s=s.sibling}(s=Ul(o,n.mode,c)).return=n,n=s}return a(n);case N:return e(n,s,(u=o._init)(o._payload),c)}if(te(o))return y(n,s,o,c);if(B(o))return g(n,s,o,c);Ws(n,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(r(n,s.sibling),(s=i(s,o)).return=n,n=s):(r(n,s),(s=Ml(o,n.mode,c)).return=n,n=s),a(n)):r(n,s)}}var Qs=Ys(!0),Js=Ys(!1),Xs={},Zs=Ai(Xs),eo=Ai(Xs),to=Ai(Xs);function ro(e){if(e===Xs)throw Error(s(174));return e}function no(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Zs),Ii(Zs,t)}function io(){ki(Zs),ki(eo),ki(to)}function so(e){ro(to.current);var t=ro(Zs.current),r=ce(t,e.type);t!==r&&(Ii(eo,e),Ii(Zs,r))}function oo(e){eo.current===e&&(ki(Zs),ki(eo))}var ao=Ai(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,po=b.ReactCurrentBatchConfig,fo=0,yo=null,go=null,mo=null,wo=!1,vo=!1,bo=0,Eo=0;function _o(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!an(e[r],t[r]))return!1;return!0}function Ao(e,t,r,n,i,o){if(fo=o,yo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=r(n,i),vo){o=0;do{if(vo=!1,bo=0,25<=o)throw Error(s(301));o+=1,mo=go=null,t.updateQueue=null,ho.current=la,e=r(n,i)}while(vo)}if(ho.current=oa,t=null!==go&&null!==go.next,fo=0,mo=go=yo=null,wo=!1,t)throw Error(s(300));return e}function ko(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?yo.memoizedState=mo=e:mo=mo.next=e,mo}function Co(){if(null===go){var e=yo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===mo?yo.memoizedState:mo.next;if(null!==t)mo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===mo?yo.memoizedState=mo=e:mo=mo.next=e}return mo}function Ro(e,t){return"function"===typeof t?t(e):t}function To(e){var t=Co(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=go,i=n.baseQueue,o=r.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(null!==i){o=i.next,n=n.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((fo&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=n):l=l.next=d,yo.lanes|=h,Lc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=n:l.next=c,an(n,t.memoizedState)||(ba=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{o=i.lane,yo.lanes|=o,Lc|=o,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Do(e){var t=Co(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,o=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);an(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function Po(){}function No(e,t){var r=yo,n=Co(),i=t(),o=!an(n.memoizedState,i);if(o&&(n.memoizedState=i,ba=!0),n=n.queue,$o(Bo.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(r.flags|=2048,jo(9,Oo.bind(null,r,n,i,t),void 0,null),null===Tc)throw Error(s(349));0!==(30&fo)||xo(r,t,i)}return i}function xo(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=yo.updateQueue)?(t={lastEffect:null,stores:null},yo.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Oo(e,t,r,n){t.value=r,t.getSnapshot=n,Lo(t)&&Mo(e)}function Bo(e,t,r){return r((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!an(e,r)}catch(n){return!0}}function Mo(e){var t=Ts(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ro,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,yo,e),[t.memoizedState,e]}function jo(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=yo.updateQueue)?(t={lastEffect:null,stores:null},yo.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Fo(){return Co().memoizedState}function zo(e,t,r,n){var i=Io();yo.flags|=e,i.memoizedState=jo(1|t,r,void 0,void 0===n?null:n)}function Vo(e,t,r,n){var i=Co();n=void 0===n?null:n;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==n&&So(n,o.deps))return void(i.memoizedState=jo(t,r,s,n))}yo.flags|=e,i.memoizedState=jo(1|t,r,s,n)}function Ko(e,t){return zo(8390656,8,e,t)}function $o(e,t){return Vo(2048,8,e,t)}function qo(e,t){return Vo(4,2,e,t)}function Ho(e,t){return Vo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Vo(4,4,Wo.bind(null,t,e),r)}function Yo(){}function Qo(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&So(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Jo(e,t){var r=Co();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&So(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xo(e,t,r){return 0===(21&fo)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=r):(an(r,t)||(r=yt(),yo.lanes|=r,Lc|=r,e.baseState=!0),t)}function Zo(e,t){var r=vt;vt=0!==r&&4>r?r:4,e(!0);var n=po.transition;po.transition={};try{e(!1),t()}finally{vt=r,po.transition=n}}function ea(){return Co().memoizedState}function ta(e,t,r){var n=tl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},na(e))ia(t,r);else if(null!==(r=Rs(e,t,r,n))){rl(r,e,n,el()),sa(r,t,n)}}function ra(e,t,r){var n=tl(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(na(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,an(a,o)){var c=t.interleaved;return null===c?(i.next=i,Cs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(r=Rs(e,t,i,n))&&(rl(r,e,n,i=el()),sa(r,t,n))}}function na(e){var t=e.alternate;return e===yo||null!==t&&t===yo}function ia(e,t){vo=wo=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function sa(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,wt(e,r)}}var oa={readContext:ks,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},aa={readContext:ks,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:ks,useEffect:Ko,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),r)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var r=Io();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Io();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ta.bind(null,yo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=yo,i=Io();if(is){if(void 0===r)throw Error(s(407));r=r()}else{if(r=t(),null===Tc)throw Error(s(349));0!==(30&fo)||xo(n,t,r)}i.memoizedState=r;var o={value:r,getSnapshot:t};return i.queue=o,Ko(Bo.bind(null,n,o,e),[e]),n.flags|=2048,jo(9,Oo.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Io(),t=Tc.identifierPrefix;if(is){var r=Ji;t=":"+t+"R"+(r=(Qi&~(1<<32-ot(Qi)-1)).toString(32)+r),0<(r=bo++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=Eo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:ks,useCallback:Qo,useContext:ks,useEffect:$o,useImperativeHandle:Go,useInsertionEffect:qo,useLayoutEffect:Ho,useMemo:Jo,useReducer:To,useRef:Fo,useState:function(){return To(Ro)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[To(Ro)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:No,useId:ea,unstable_isNewReconciler:!1},la={readContext:ks,useCallback:Qo,useContext:ks,useEffect:$o,useImperativeHandle:Go,useInsertionEffect:qo,useLayoutEffect:Ho,useMemo:Jo,useReducer:Do,useRef:Fo,useState:function(){return Do(Ro)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Do(Ro)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:No,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var i=r}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,r){(r=xs(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$c||($c=!0,qc=n),da(0,t)},r}function ya(e,t,r){(r=xs(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(r.callback=function(){da(0,t),"function"!==typeof n&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ga(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new pa;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=kl.bind(null,e,t,r),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function wa(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=xs(-1,1)).tag=2,Os(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=b.ReactCurrentOwner,ba=!1;function Ea(e,t,r,n){t.child=null===e?Js(t,null,r,n):Qs(t,e.child,r,n)}function _a(e,t,r,n,i){r=r.render;var s=t.ref;return As(t,i),n=Ao(e,t,r,n,s,i),r=ko(),null===e||ba?(is&&r&&es(t),t.flags|=1,Ea(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Sa(e,t,r,n,i){if(null===e){var s=r.type;return"function"!==typeof s||Nl(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ol(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Aa(e,t,s,n,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((r=null!==(r=r.compare)?r:cn)(o,n)&&e.ref===t.ref)return $a(e,t,i)}return t.flags|=1,(e=xl(s,n)).ref=t.ref,e.return=t,t.child=e}function Aa(e,t,r,n,i){if(null!==e){var s=e.memoizedProps;if(cn(s,n)&&e.ref===t.ref){if(ba=!1,t.pendingProps=n=s,0===(e.lanes&i))return t.lanes=e.lanes,$a(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,r,n,i)}function ka(e,t,r){var n=t.pendingProps,i=n.children,s=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(xc,Nc),Nc|=r;else{if(0===(1073741824&r))return e=null!==s?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(xc,Nc),Nc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==s?s.baseLanes:r,Ii(xc,Nc),Nc|=n}else null!==s?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ii(xc,Nc),Nc|=n;return Ea(e,t,i,r),t.child}function Ia(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,r,n,i){var s=Ni(r)?Di:Ri.current;return s=Pi(t,s),As(t,i),r=Ao(e,t,r,n,s,i),n=ko(),null===e||ba?(is&&n&&es(t),t.flags|=1,Ea(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$a(e,t,i))}function Ra(e,t,r,n,i){if(Ni(r)){var s=!0;Li(t)}else s=!1;if(As(t,i),null===t.stateNode)Ka(e,t),Ks(t,r,n),qs(t,r,n,i),n=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=r.contextType;"object"===typeof l&&null!==l?l=ks(l):l=Pi(t,l=Ni(r)?Di:Ri.current);var u=r.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==n||c!==l)&&$s(t,o,n,l),Ds=!1;var d=t.memoizedState;o.state=d,Ms(t,n,o,i),c=t.memoizedState,a!==n||d!==c||Ti.current||Ds?("function"===typeof u&&(Fs(t,r,u,n),c=t.memoizedState),(a=Ds||Vs(t,r,a,n,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=l,n=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Ns(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=r.contextType)&&null!==c?c=ks(c):c=Pi(t,c=Ni(r)?Di:Ri.current);var p=r.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&$s(t,o,n,c),Ds=!1,d=t.memoizedState,o.state=d,Ms(t,n,o,i);var f=t.memoizedState;a!==h||d!==f||Ti.current||Ds?("function"===typeof p&&(Fs(t,r,p,n),f=t.memoizedState),(l=Ds||Vs(t,r,l,n,d,f,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(n,f,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,f,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),o.props=n,o.state=f,o.context=c,n=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Ta(e,t,r,n,s,i)}function Ta(e,t,r,n,i,s){Ia(e,t);var o=0!==(128&t.flags);if(!n&&!o)return i&&Mi(t,r,!1),$a(e,t,s);n=t.stateNode,va.current=t;var a=o&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&o?(t.child=Qs(t,e.child,null,s),t.child=Qs(t,null,a,s)):Ea(e,t,a,s),t.memoizedState=n.state,i&&Mi(t,r,!0),t.child}function Da(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),no(e,t.containerInfo)}function Pa(e,t,r,n,i){return ps(),fs(i),t.flags|=256,Ea(e,t,r,n),t.child}var Na,xa,Oa,Ba={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ma(e,t,r){var n,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((n=c)||(n=(null===e||null!==e.memoizedState)&&0!==(2&o)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ll(c,i,0,null),e=Bl(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(r),t.memoizedState=Ba,e):Ua(t,c));if(null!==(o=e.memoizedState)&&null!==(n=o.dehydrated))return function(e,t,r,n,i,o,a){if(r)return 256&t.flags?(t.flags&=-257,ja(e,t,a,n=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=n.fallback,i=t.mode,n=Ll({mode:"visible",children:n.children},i,0,null),(o=Bl(o,i,a,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,0!==(1&t.mode)&&Qs(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Ba,o);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var c=n.dgst;return n=c,ja(e,t,a,n=ha(o=Error(s(419)),n,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(n=Tc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ts(e,i),rl(n,e,i,-1))}return yl(),ja(e,t,a,n=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ns=li(i.nextSibling),rs=t,is=!0,ss=null,null!==e&&(Wi[Gi++]=Qi,Wi[Gi++]=Ji,Wi[Gi++]=Yi,Qi=e.id,Ji=e.overflow,Yi=t),(t=Ua(t,n.children)).flags|=4096,t)}(e,t,c,i,n,o,r);if(a){a=i.fallback,c=t.mode,n=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=xl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==n?a=xl(n,a):(a=Bl(a,c,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?La(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~r,t.memoizedState=Ba,i}return e=(a=e.child).sibling,i=xl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Ll({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,r,n){return null!==n&&fs(n),Qs(t,e.child,null,r),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fa(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ss(e.return,t,r)}function za(e,t,r,n,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Va(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Ea(e,t,n.children,r),0!==(2&(n=ao.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fa(e,r,t);else if(19===e.tag)Fa(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ii(ao,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===co(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),za(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}za(t,!0,r,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $a(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Lc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=xl(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=xl(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function qa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Wa(e,t,r){var n=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ni(t.type)&&xi(),Ha(t),null;case 3:return n=t.stateNode,io(),ki(Ti),ki(Ri),uo(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ol(ss),ss=null))),Ha(t),null;case 5:oo(t);var i=ro(to.current);if(r=t.type,null!==e&&null!=t.stateNode)xa(e,t,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=ro(Zs.current),hs(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[di]=t,n[pi]=o,e=0!==(1&t.mode),r){case"dialog":jn("cancel",n),jn("close",n);break;case"iframe":case"object":case"embed":jn("load",n);break;case"video":case"audio":for(i=0;i<Bn.length;i++)jn(Bn[i],n);break;case"source":jn("error",n);break;case"img":case"image":case"link":jn("error",n),jn("load",n);break;case"details":jn("toggle",n);break;case"input":Q(n,o),jn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},jn("invalid",n);break;case"textarea":ie(n,o),jn("invalid",n)}for(var c in we(r,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?n.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,l,e),i=["children",l]):"number"===typeof l&&n.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xn(n.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&jn("scroll",n)}switch(r){case"input":H(n),Z(n,o,!0);break;case"textarea":H(n),oe(n);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(n.onclick=Zn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[di]=t,e[pi]=n,Na(e,t),t.stateNode=e;e:{switch(c=ve(r,n),r){case"dialog":jn("cancel",e),jn("close",e),i=n;break;case"iframe":case"object":case"embed":jn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Bn.length;i++)jn(Bn[i],e);i=n;break;case"source":jn("error",e),i=n;break;case"img":case"image":case"link":jn("error",e),jn("load",e),i=n;break;case"details":jn("toggle",e),i=n;break;case"input":Q(e,n),i=Y(e,n),jn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=M({},n,{value:void 0}),jn("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),jn("invalid",e)}for(o in we(r,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==r||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jn("scroll",e):null!=u&&v(e,o,u,c))}switch(r){case"input":H(e),Z(e,n,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+$(n.value));break;case"select":e.multiple=!!n.multiple,null!=(o=n.value)?re(e,!!n.multiple,o,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(0,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(s(166));if(r=ro(to.current),ro(Zs.current),hs(t)){if(n=t.stateNode,r=t.memoizedProps,n[di]=t,(o=n.nodeValue!==r)&&null!==(e=rs))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}o&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[di]=t,t.stateNode=n}return Ha(t),null;case 13:if(ki(ao),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==ns&&0!==(1&t.mode)&&0===(128&t.flags))ds(),ps(),t.flags|=98560,o=!1;else if(o=hs(t),null!==n&&null!==n.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(ol(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Oc&&(Oc=3):yl())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),null===e&&Vn(t.stateNode.containerInfo),Ha(t),null;case 10:return _s(t.type._context),Ha(t),null;case 19:if(ki(ao),null===(o=t.memoizedState))return Ha(t),null;if(n=0!==(128&t.flags),null===(c=o.rendering))if(n)qa(o,!1);else{if(0!==Oc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,qa(o,!1),null!==(n=c.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(o=r).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ii(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Vc&&(t.flags|=128,n=!0,qa(o,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=co(c))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>Vc&&1073741824!==r&&(t.flags|=128,n=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=o.last)?r.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,r=ao.current,Ii(ao,n?1&r|2:1&r),t):(Ha(t),null);case 22:case 23:return hl(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Nc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ga(e,t){switch(ts(t),t.tag){case 1:return Ni(t.type)&&xi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),ki(Ti),ki(Ri),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(ki(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(ao),null;case 4:return io(),null;case 10:return _s(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Na=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},xa=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ro(Zs.current);var s,o=null;switch(r){case"input":i=Y(e,i),n=Y(e,n),o=[];break;case"select":i=M({},i,{value:void 0}),n=M({},n,{value:void 0}),o=[];break;case"textarea":i=ne(e,i),n=ne(e,n),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(u in we(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var l=n[u];if(c=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(o||(o=[]),o.push(u,r)),r=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jn("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ya=!1,Qa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Al(e,t,n)}else r.current=null}function ec(e,t,r){try{r()}catch(n){Al(e,t,n)}}var tc=!1;function rc(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&ec(t,r,s)}i=i.next}while(i!==n)}}function nc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ic(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[yi],delete t[gi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(cc(e,t,r),e=e.sibling;null!==e;)cc(e,t,r),e=e.sibling}function lc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(lc(e,t,r),e=e.sibling;null!==e;)lc(e,t,r),e=e.sibling}var uc=null,hc=!1;function dc(e,t,r){for(r=r.child;null!==r;)pc(e,t,r),r=r.sibling}function pc(e,t,r){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,r)}catch(a){}switch(r.tag){case 5:Qa||Za(r,t);case 6:var n=uc,i=hc;uc=null,dc(e,t,r),hc=i,null!==(uc=n)&&(hc?(e=uc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):uc.removeChild(r.stateNode));break;case 18:null!==uc&&(hc?(e=uc,r=r.stateNode,8===e.nodeType?ci(e.parentNode,r):1===e.nodeType&&ci(e,r),Vt(e)):ci(uc,r.stateNode));break;case 4:n=uc,i=hc,uc=r.stateNode.containerInfo,hc=!0,dc(e,t,r),uc=n,hc=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&ec(r,t,o),i=i.next}while(i!==n)}dc(e,t,r);break;case 1:if(!Qa&&(Za(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Al(r,t,a)}dc(e,t,r);break;case 21:dc(e,t,r);break;case 22:1&r.mode?(Qa=(n=Qa)||null!==r.memoizedState,dc(e,t,r),Qa=n):dc(e,t,r);break;default:dc(e,t,r)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ja),t.forEach((function(t){var n=Rl.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function yc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===uc)throw Error(s(160));pc(o,a,i),uc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Al(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yc(t,e),mc(e),4&n){try{rc(3,e,e.return),nc(3,e)}catch(g){Al(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Al(e,e.return,g)}}break;case 1:yc(t,e),mc(e),512&n&&null!==r&&Za(r,r.return);break;case 5:if(yc(t,e),mc(e),512&n&&null!==r&&Za(r,r.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Al(e,e.return,g)}}if(4&n&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==r?r.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&J(i,o),ve(c,a);var u=ve(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):v(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?re(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?re(i,!!o.multiple,o.defaultValue,!0):re(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Al(e,e.return,g)}}break;case 6:if(yc(t,e),mc(e),4&n){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Al(e,e.return,g)}}break;case 3:if(yc(t,e),mc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Al(e,e.return,g)}break;case 4:default:yc(t,e),mc(e);break;case 13:yc(t,e),mc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Je())),4&n&&fc(e);break;case 22:if(h=null!==r&&null!==r.memoizedState,1&e.mode?(Qa=(u=Qa)||h,yc(t,e),Qa=u):yc(t,e),mc(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(f=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:rc(4,p,p.return);break;case 1:Za(p,p.return);var y=p.stateNode;if("function"===typeof y.componentWillUnmount){n=p,r=p.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Al(n,r,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){Ec(d);continue}}null!==f?(f.return=p,Xa=f):Ec(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=ye("display",a))}catch(g){Al(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Al(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yc(t,e),mc(e),4&n&&fc(e);case 21:}}function mc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(oc(r)){var n=r;break e}r=r.return}throw Error(s(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(de(i,""),n.flags&=-33),lc(e,ac(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;cc(e,ac(e),o);break;default:throw Error(s(161))}}catch(a){Al(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,r){Xa=e,vc(e,t,r)}function vc(e,t,r){for(var n=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&n){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Qa;a=Ya;var l=Qa;if(Ya=o,(Qa=c)&&!l)for(Xa=i;null!==Xa;)c=(o=Xa).child,22===o.tag&&null!==o.memoizedState?_c(i):null!==c?(c.return=o,Xa=c):_c(i);for(;null!==s;)Xa=s,vc(s,t,r),s=s.sibling;Xa=i,Ya=a,Qa=l}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bc(e)}}function bc(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||nc(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qa)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:gs(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Us(t,a,r)}break;case 5:var c=t.stateNode;if(null===r&&4&t.flags){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(s(163))}Qa||512&t.flags&&ic(t)}catch(p){Al(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xa=r;break}Xa=t.return}}function Ec(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xa=r;break}Xa=t.return}}function _c(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nc(4,t)}catch(c){Al(t,r,c)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(c){Al(t,i,c)}}var s=t.return;try{ic(t)}catch(c){Al(t,s,c)}break;case 5:var o=t.return;try{ic(t)}catch(c){Al(t,o,c)}}}catch(c){Al(t,t.return,c)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sc,Ac=Math.ceil,kc=b.ReactCurrentDispatcher,Ic=b.ReactCurrentOwner,Cc=b.ReactCurrentBatchConfig,Rc=0,Tc=null,Dc=null,Pc=0,Nc=0,xc=Ai(0),Oc=0,Bc=null,Lc=0,Mc=0,Uc=0,jc=null,Fc=null,zc=0,Vc=1/0,Kc=null,$c=!1,qc=null,Hc=null,Wc=!1,Gc=null,Yc=0,Qc=0,Jc=null,Xc=-1,Zc=0;function el(){return 0!==(6&Rc)?Je():-1!==Xc?Xc:Xc=Je()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Rc)&&0!==Pc?Pc&-Pc:null!==ys.transition?(0===Zc&&(Zc=yt()),Zc):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rl(e,t,r,n){if(50<Qc)throw Qc=0,Jc=null,Error(s(185));mt(e,r,n),0!==(2&Rc)&&e===Tc||(e===Tc&&(0===(2&Rc)&&(Mc|=r),4===Oc&&al(e,Pc)),nl(e,n),1===r&&0===Rc&&0===(1&t.mode)&&(Vc=Je()+500,ji&&Vi()))}function nl(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&r)&&0===(a&n)||(i[o]=pt(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var n=dt(e,e===Tc?Pc:0);if(0===n)null!==r&&Ge(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ge(r),1===t)0===e.tag?function(e){ji=!0,zi(e)}(cl.bind(null,e)):zi(cl.bind(null,e)),oi((function(){0===(6&Rc)&&Vi()})),r=null;else{switch(bt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Tl(r,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function il(e,t){if(Xc=-1,Zc=0,0!==(6&Rc))throw Error(s(327));var r=e.callbackNode;if(_l()&&e.callbackNode!==r)return null;var n=dt(e,e===Tc?Pc:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gl(e,n);else{t=n;var i=Rc;Rc|=2;var o=fl();for(Tc===e&&Pc===t||(Kc=null,Vc=Je()+500,dl(e,t));;)try{wl();break}catch(c){pl(e,c)}Es(),kc.current=o,Rc=i,null!==Dc?t=0:(Tc=null,Pc=0,t=Oc)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(n=i,t=sl(e,i))),1===t)throw r=Bc,dl(e,0),al(e,n),nl(e,Je()),r;if(6===t)al(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!an(s(),i))return!1}catch(a){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,n))&&(0!==(o=ft(e))&&(n=o,t=sl(e,o))),1===t))throw r=Bc,dl(e,0),al(e,n),nl(e,Je()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(s(345));case 2:case 5:El(e,Fc,Kc);break;case 3:if(al(e,n),(130023424&n)===n&&10<(t=zc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(El.bind(null,e,Fc,Kc),t);break}El(e,Fc,Kc);break;case 4:if(al(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-ot(n);o=1<<a,(a=t[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Je()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ac(n/1960))-n)){e.timeoutHandle=ni(El.bind(null,e,Fc,Kc),n);break}El(e,Fc,Kc);break;default:throw Error(s(329))}}}return nl(e,Je()),e.callbackNode===r?il.bind(null,e):null}function sl(e,t){var r=jc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Fc,Fc=r,null!==t&&ol(t)),e}function ol(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function al(e,t){for(t&=~Uc,t&=~Mc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function cl(e){if(0!==(6&Rc))throw Error(s(327));_l();var t=dt(e,0);if(0===(1&t))return nl(e,Je()),null;var r=gl(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=sl(e,n))}if(1===r)throw r=Bc,dl(e,0),al(e,t),nl(e,Je()),r;if(6===r)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,Fc,Kc),nl(e,Je()),null}function ll(e,t){var r=Rc;Rc|=1;try{return e(t)}finally{0===(Rc=r)&&(Vc=Je()+500,ji&&Vi())}}function ul(e){null!==Gc&&0===Gc.tag&&0===(6&Rc)&&_l();var t=Rc;Rc|=1;var r=Cc.transition,n=vt;try{if(Cc.transition=null,vt=1,e)return e()}finally{vt=n,Cc.transition=r,0===(6&(Rc=t))&&Vi()}}function hl(){Nc=xc.current,ki(xc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Dc)for(r=Dc.return;null!==r;){var n=r;switch(ts(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&xi();break;case 3:io(),ki(Ti),ki(Ri),uo();break;case 5:oo(n);break;case 4:io();break;case 13:case 19:ki(ao);break;case 10:_s(n.type._context);break;case 22:case 23:hl()}r=r.return}if(Tc=e,Dc=e=xl(e.current,null),Pc=Nc=t,Oc=0,Bc=null,Uc=Mc=Lc=0,Fc=jc=null,null!==Is){for(t=0;t<Is.length;t++)if(null!==(n=(r=Is[t]).interleaved)){r.interleaved=null;var i=n.next,s=r.pending;if(null!==s){var o=s.next;s.next=i,n.next=o}r.pending=n}Is=null}return e}function pl(e,t){for(;;){var r=Dc;try{if(Es(),ho.current=oa,wo){for(var n=yo.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}wo=!1}if(fo=0,mo=go=yo=null,vo=!1,bo=0,Ic.current=null,null===r||null===r.return){Oc=1,Bc=t,Dc=null;break}e:{var o=e,a=r.return,c=r,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=ma(a);if(null!==f){f.flags&=-257,wa(f,a,c,0,t),1&f.mode&&ga(o,u,t),l=u;var y=(t=f).updateQueue;if(null===y){var g=new Set;g.add(l),t.updateQueue=g}else y.add(l);break e}if(0===(1&t)){ga(o,u,t),yl();break e}l=Error(s(426))}else if(is&&1&c.mode){var m=ma(a);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),wa(m,a,c,0,t),fs(ua(l,c));break e}}o=l=ua(l,c),4!==Oc&&(Oc=2),null===jc?jc=[o]:jc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,fa(0,l,t));break e;case 1:c=l;var w=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof w.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Hc||!Hc.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ya(o,c,t));break e}}o=o.return}while(null!==o)}bl(r)}catch(b){t=b,Dc===r&&null!==r&&(Dc=r=r.return);continue}break}}function fl(){var e=kc.current;return kc.current=oa,null===e?oa:e}function yl(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===Tc||0===(268435455&Lc)&&0===(268435455&Mc)||al(Tc,Pc)}function gl(e,t){var r=Rc;Rc|=2;var n=fl();for(Tc===e&&Pc===t||(Kc=null,dl(e,t));;)try{ml();break}catch(i){pl(e,i)}if(Es(),Rc=r,kc.current=n,null!==Dc)throw Error(s(261));return Tc=null,Pc=0,Oc}function ml(){for(;null!==Dc;)vl(Dc)}function wl(){for(;null!==Dc&&!Ye();)vl(Dc)}function vl(e){var t=Sc(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?bl(e):Dc=t,Ic.current=null}function bl(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Wa(r,t,Nc)))return void(Dc=r)}else{if(null!==(r=Ga(r,t)))return r.flags&=32767,void(Dc=r);if(null===e)return Oc=6,void(Dc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dc=t);Dc=t=e}while(null!==t);0===Oc&&(Oc=5)}function El(e,t,r){var n=vt,i=Cc.transition;try{Cc.transition=null,vt=1,function(e,t,r,n){do{_l()}while(null!==Gc);if(0!==(6&Rc))throw Error(s(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ot(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}(e,o),e===Tc&&(Dc=Tc=null,Pc=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Wc||(Wc=!0,Tl(tt,(function(){return _l(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=Cc.transition,Cc.transition=null;var a=vt;vt=1;var c=Rc;Rc|=4,Ic.current=null,function(e,t){if(ei=$t,pn(e=dn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch(E){r=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==r||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==n&&3!==d.nodeType||(l=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===r&&++u===i&&(c=a),p===o&&++h===n&&(l=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}r=-1===c||-1===l?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},$t=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var y=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var g=y.memoizedProps,m=y.memoizedState,w=t.stateNode,v=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),m);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(E){Al(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}y=tc,tc=!1}(e,r),gc(r,e),fn(ti),$t=!!ei,ti=ei=null,e.current=r,wc(r,e,i),Qe(),Rc=c,vt=a,Cc.transition=o}else e.current=r;if(Wc&&(Wc=!1,Gc=e,Yc=i),0===(o=e.pendingLanes)&&(Hc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nl(e,Je()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if($c)throw $c=!1,e=qc,qc=null,e;0!==(1&Yc)&&0!==e.tag&&_l(),0!==(1&(o=e.pendingLanes))?e===Jc?Qc++:(Qc=0,Jc=e):Qc=0,Vi()}(e,t,r,n)}finally{Cc.transition=i,vt=n}return null}function _l(){if(null!==Gc){var e=bt(Yc),t=Cc.transition,r=vt;try{if(Cc.transition=null,vt=16>e?16:e,null===Gc)var n=!1;else{if(e=Gc,Gc=null,Yc=0,0!==(6&Rc))throw Error(s(331));var i=Rc;for(Rc|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var p=(h=Xa).sibling,f=h.return;if(sc(h),h===u){Xa=null;break}if(null!==p){p.return=f,Xa=p;break}Xa=f}}}var y=o.alternate;if(null!==y){var g=y.child;if(null!==g){y.child=null;do{var m=g.sibling;g.sibling=null,g=m}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var w=o.sibling;if(null!==w){w.return=o.return,Xa=w;break e}Xa=o.return}}var v=e.current;for(Xa=v;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=v;null!==Xa;){if(0!==(2048&(c=Xa).flags))try{switch(c.tag){case 0:case 11:case 15:nc(9,c)}}catch(_){Al(c,c.return,_)}if(c===a){Xa=null;break e}var E=c.sibling;if(null!==E){E.return=c.return,Xa=E;break e}Xa=c.return}}if(Rc=i,Vi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}n=!0}return n}finally{vt=r,Cc.transition=t}}return!1}function Sl(e,t,r){e=Os(e,t=fa(0,t=ua(r,t),1),1),t=el(),null!==e&&(mt(e,1,t),nl(e,t))}function Al(e,t,r){if(3===e.tag)Sl(e,e,r);else for(;null!==t;){if(3===t.tag){Sl(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Hc||!Hc.has(n))){t=Os(t,e=ya(t,e=ua(r,e),1),1),e=el(),null!==t&&(mt(t,1,e),nl(t,e));break}}t=t.return}}function kl(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&r,Tc===e&&(Pc&r)===r&&(4===Oc||3===Oc&&(130023424&Pc)===Pc&&500>Je()-zc?dl(e,0):Uc|=r),nl(e,t)}function Il(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=el();null!==(e=Ts(e,t))&&(mt(e,t,r),nl(e,r))}function Cl(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Il(e,r)}function Rl(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(s(314))}null!==n&&n.delete(t),Il(e,r)}function Tl(e,t){return We(e,t)}function Dl(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,r,n){return new Dl(e,t,r,n)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xl(e,t){var r=e.alternate;return null===r?((r=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ol(e,t,r,n,i,o){var a=2;if(n=e,"function"===typeof e)Nl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Bl(r.children,i,o,t);case A:a=8,i|=8;break;case k:return(e=Pl(12,r,t,2|i)).elementType=k,e.lanes=o,e;case T:return(e=Pl(13,r,t,i)).elementType=T,e.lanes=o,e;case D:return(e=Pl(19,r,t,i)).elementType=D,e.lanes=o,e;case x:return Ll(r,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case C:a=9;break e;case R:a=11;break e;case P:a=14;break e;case N:a=16,n=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pl(a,r,t,i)).elementType=e,t.type=n,t.lanes=o,t}function Bl(e,t,r,n){return(e=Pl(7,e,n,t)).lanes=r,e}function Ll(e,t,r,n){return(e=Pl(22,e,n,t)).elementType=x,e.lanes=r,e.stateNode={isHidden:!1},e}function Ml(e,t,r){return(e=Pl(6,e,null,t)).lanes=r,e}function Ul(e,t,r){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fl(e,t,r,n,i,s,o,a,c){return e=new jl(e,t,r,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function zl(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Vl(e){if(!e)return Ci;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var r=e.type;if(Ni(r))return Bi(e,r,t)}return t}function Kl(e,t,r,n,i,s,o,a,c){return(e=Fl(r,n,!0,e,0,s,0,a,c)).context=Vl(null),r=e.current,(s=xs(n=el(),i=tl(r))).callback=void 0!==t&&null!==t?t:null,Os(r,s,i),e.current.lanes=i,mt(e,i,n),nl(e,n),e}function $l(e,t,r,n){var i=t.current,s=el(),o=tl(i);return r=Vl(r),null===t.context?t.context=r:t.pendingContext=r,(t=xs(s,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Os(i,t,o))&&(rl(e,i,o,s),Bs(e,i,o)),o}function ql(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wl(e,t){Hl(e,t),(e=e.alternate)&&Hl(e,t)}Sc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)ba=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ba=!1,function(e,t,r){switch(t.tag){case 3:Da(t),ps();break;case 5:so(t);break;case 1:Ni(t.type)&&Li(t);break;case 4:no(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ii(ms,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ii(ao,1&ao.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ma(e,t,r):(Ii(ao,1&ao.current),null!==(e=$a(e,t,r))?e.sibling:null);Ii(ao,1&ao.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Va(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ao,ao.current),n)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,r)}return $a(e,t,r)}(e,t,r);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ka(e,t),e=t.pendingProps;var i=Pi(t,Ri.current);As(t,r),i=Ao(null,t,n,e,i,r);var o=ko();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(n)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,qs(t,n,e,r),t=Ta(null,t,n,!0,o,r)):(t.tag=0,is&&o&&es(t),Ea(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Nl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===P)return 14}return 2}(n),e=gs(n,e),i){case 0:t=Ca(null,t,n,e,r);break e;case 1:t=Ra(null,t,n,e,r);break e;case 11:t=_a(null,t,n,e,r);break e;case 14:t=Sa(null,t,n,gs(n.type,e),r);break e}throw Error(s(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Ca(e,t,n,i=t.elementType===n?i:gs(n,i),r);case 1:return n=t.type,i=t.pendingProps,Ra(e,t,n,i=t.elementType===n?i:gs(n,i),r);case 3:e:{if(Da(t),null===e)throw Error(s(387));n=t.pendingProps,i=(o=t.memoizedState).element,Ns(e,t),Ms(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,n,r,i=ua(Error(s(423)),t));break e}if(n!==i){t=Pa(e,t,n,r,i=ua(Error(s(424)),t));break e}for(ns=li(t.stateNode.containerInfo.firstChild),rs=t,is=!0,ss=null,r=Js(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ps(),n===i){t=$a(e,t,r);break e}Ea(e,t,n,r)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),n=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(n,i)?a=null:null!==o&&ri(n,o)&&(t.flags|=32),Ia(e,t),Ea(e,t,a,r),t.child;case 6:return null===e&&ls(t),null;case 13:return Ma(e,t,r);case 4:return no(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Qs(t,null,n,r):Ea(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,_a(e,t,n,i=t.elementType===n?i:gs(n,i),r);case 7:return Ea(e,t,t.pendingProps,r),t.child;case 8:case 12:return Ea(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ii(ms,n._currentValue),n._currentValue=a,null!==o)if(an(o.value,a)){if(o.children===i.children&&!Ti.current){t=$a(e,t,r);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===n){if(1===o.tag){(l=xs(-1,r&-r)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=r,null!==(l=o.alternate)&&(l.lanes|=r),Ss(o.return,r,t),c.lanes|=r;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),Ss(a,r,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ea(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,As(t,r),n=n(i=ks(i)),t.flags|=1,Ea(e,t,n,r),t.child;case 14:return i=gs(n=t.type,t.pendingProps),Sa(e,t,n,i=gs(n.type,i),r);case 15:return Aa(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:gs(n,i),Ka(e,t),t.tag=1,Ni(n)?(e=!0,Li(t)):e=!1,As(t,r),Ks(t,n,i),qs(t,n,i,r),Ta(null,t,n,!0,e,r);case 19:return Va(e,t,r);case 22:return ka(e,t,r)}throw Error(s(156,t.tag))};var Gl="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function Ql(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=ql(o);a.call(e)}}$l(t,o,e,i)}else o=function(e,t,r,n,i){if(i){if("function"===typeof n){var s=n;n=function(){var e=ql(o);s.call(e)}}var o=Kl(t,n,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[fi]=o.current,Vn(8===e.nodeType?e.parentNode:e),ul(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var a=n;n=function(){var e=ql(c);a.call(e)}}var c=Fl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[fi]=c.current,Vn(8===e.nodeType?e.parentNode:e),ul((function(){$l(t,c,r,n)})),c}(r,t,e,i,n);return ql(o)}Ql.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$l(e,t,null,null)},Ql.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){$l(null,e,null,null)})),t[fi]=null}},Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xt.length&&0!==t&&t<xt[r].priority;r++);xt.splice(r,0,e),0===r&&Mt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ht(t.pendingLanes);0!==r&&(wt(t,1|r),nl(t,Je()),0===(6&Rc)&&(Vc=Je()+500,Vi()))}break;case 13:ul((function(){var t=Ts(e,1);if(null!==t){var r=el();rl(t,e,1,r)}})),Wl(e,1)}},_t=function(e){if(13===e.tag){var t=Ts(e,134217728);if(null!==t)rl(t,e,134217728,el());Wl(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),r=Ts(e,t);if(null!==r)rl(r,e,t,el());Wl(e,t)}},At=function(){return vt},kt=function(e,t){var r=vt;try{return vt=e,t()}finally{vt=r}},_e=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Ei(n);if(!i)throw Error(s(90));W(n),X(n,i)}}}break;case"textarea":se(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Re=ll,Te=ul;var tu={usingClientEntryPoint:!1,Events:[vi,bi,Ei,Ie,Ce,ll]},ru={findFiberByHostInstance:wi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nu={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(nu),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return zl(e,t,null,r)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var r=!1,n="",i=Gl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fl(e,1,!1,null,0,r,0,n,i),e[fi]=t.current,Vn(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,r){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jl(e))throw Error(s(405));var n=null!=r&&r.hydratedSources||null,i=!1,o="",a=Gl;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(o=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=Kl(t,null,e,1,null!=r?r:null,i,0,o,a),e[fi]=t.current,Vn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Ql(t)},t.render=function(e,t,r){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(ul((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xl(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},4164:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4463)},6374:(e,t,r)=>{"use strict";var n=r(2791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,s={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,n)&&!c.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===s[n]&&(s[n]=t[n]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},9117:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function m(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function w(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=m.prototype;var b=v.prototype=new w;b.constructor=v,y(b,m.prototype),b.isPureReactComponent=!0;var E=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!A.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:r,type:e,key:o,ref:a,props:s,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var C=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return o=o(c=e),e=""===s?"."+R(c,0):s,E(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",E(e))for(var l=0;l<e.length;l++){var u=s+R(a=e[l],l);c+=T(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=T(a=a.value,t,i,u=s+R(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function D(e,t,r){if(null==e)return e;var n=[],i=0;return T(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},x={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:x,ReactCurrentOwner:S};t.Children={map:D,forEach:function(e,t,r){D(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!A.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:r,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.transition;x.transition={};try{e()}finally{x.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,r){return N.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,r){return N.current.useReducer(e,t,r)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return N.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},2791:(e,t,r)=>{"use strict";e.exports=r(9117)},184:(e,t,r)=>{"use strict";e.exports=r(6374)},4003:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"===typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,s,o,a;if("string"===typeof t&&(s="not ",t.substr(!o||o<0?0:+o,s.length)===s)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var c=function(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(n(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},8749:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var i=r(6978),s=r(1704);r(2534)(l,i);for(var o=n(s.prototype),a=0;a<o.length;a++){var c=o[a];l.prototype[c]||(l.prototype[c]=s.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5627:(e,t,r)=>{"use strict";e.exports=i;var n=r(4784);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(2534)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},6978:(e,t,r)=>{"use strict";var n;e.exports=A,A.ReadableState=S;r(7465).EventEmitter;var i=function(e,t){return e.listeners(t).length},s=r(6184),o=r(9778).Buffer,a=r.g.Uint8Array||function(){};var c,l=r(4616);c=l&&l.debuglog?l.debuglog("stream"):function(){};var u,h,d,p=r(5566),f=r(2644),y=r(5730).getHighWaterMark,g=r(4003).q,m=g.ERR_INVALID_ARG_TYPE,w=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(2534)(A,s);var E=f.errorOrDestroy,_=["error","close","destroy","pause","resume"];function S(e,t,i){n=n||r(8749),e=e||{},"boolean"!==typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=r(5948).s),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function A(e){if(n=n||r(8749),!(this instanceof A))return new A(e);var t=this instanceof n;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function k(e,t,r,n,i){c("readableAddChunk",t);var s,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,D(e)))}(e,l);else if(i||(s=function(e,t){var r;n=t,o.isBuffer(n)||n instanceof a||"string"===typeof t||void 0===t||e.objectMode||(r=new m("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(l,t)),s)E(e,s);else if(l.objectMode||t&&t.length>0)if("string"===typeof t||l.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),n)l.endEmitted?E(e,new b):I(e,l,t,!0);else if(l.ended)E(e,new w);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!r?(t=l.decoder.write(t),l.objectMode||0!==t.length?I(e,l,t,!1):P(e,l)):I(e,l,t,!1)}else n||(l.reading=!1,P(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function I(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&T(e)),P(e,t)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),A.prototype.destroy=f.destroy,A.prototype._undestroy=f.undestroy,A.prototype._destroy=function(e,t){t(e)},A.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=o.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},A.prototype.unshift=function(e){return k(this,e,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(e){u||(u=r(5948).s);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var C=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(D,e))}function D(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function P(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function x(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){c("readable nexttick read 0"),e.read(0)}function B(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(j,t,e))}function j(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function F(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}A.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):T(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},A.prototype._read=function(e){E(this,new v("_read()"))},A.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,c("pipe count=%d opts=%j",n.pipesCount,t);var s=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:y;function o(t,i){c("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",h),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function a(){c("onend"),e.end()}n.endEmitted?process.nextTick(s):r.once("end",s),e.on("unpipe",o);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,L(e))}}(r);e.on("drain",l);var u=!1;function h(t){c("ondata");var i=e.write(t);c("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==F(n.pipes,e))&&!u&&(c("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(t){c("onerror",t),y(),e.removeListener("error",d),0===i(e,"error")&&E(e,t)}function p(){e.removeListener("finish",f),y()}function f(){c("onfinish"),e.removeListener("close",p),y()}function y(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",f),e.emit("pipe",r),n.flowing||(c("pipe resume"),r.resume()),e},A.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},A.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,c("on readable",n.length,n.reading),n.length?T(this):n.reading||process.nextTick(O,this))),r},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(x,this),r},A.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(x,this),t},A.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(B,e,t))}(this,e)),e.paused=!1,this},A.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var s=0;s<_.length;s++)e.on(_[s],this.emit.bind(this,_[s]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=r(9150)),h(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),A._fromList=M,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(A.from=function(e,t){return void 0===d&&(d=r(4886)),d(A,e,t)})},4784:(e,t,r)=>{"use strict";e.exports=u;var n=r(4003).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,o=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(8749);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new s);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,r){d(e,t,r)}))}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}r(2534)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},1704:(e,t,r)=>{"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=A,A.WritableState=S;var s={deprecate:r(9515)},o=r(6184),a=r(9778).Buffer,c=r.g.Uint8Array||function(){};var l,u=r(2644),h=r(5730).getHighWaterMark,d=r(4003).q,p=d.ERR_INVALID_ARG_TYPE,f=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,m=d.ERR_STREAM_DESTROYED,w=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,b=d.ERR_UNKNOWN_ENCODING,E=u.errorOrDestroy;function _(){}function S(e,t,s){i=i||r(8749),e=e||{},"boolean"!==typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!==typeof i)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(D,e,t),e._writableState.errorEmitted=!0,E(e,n)):(i(n),e._writableState.errorEmitted=!0,E(e,n),D(e,t))}(e,r,n,t,i);else{var s=R(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||C(e,r),n?process.nextTick(I,e,r,s,i):I(e,r,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function A(e){var t=this instanceof(i=i||r(8749));if(!t&&!l.call(A,this))return new A(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),o.call(this)}function k(e,t,r,n,i,s,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new m("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function I(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),D(e,t)}function C(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),o=t.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)s[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;s.allBuffers=c,k(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,h=r.callback;if(k(e,t,!1,t.objectMode?1:l.length,l,u,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(r){t.pendingcb--,r&&E(e,r),t.prefinished=!0,e.emit("prefinish"),D(e,t)}))}function D(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(2534)(A,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===A&&(e&&e._writableState instanceof S)}})):l=function(e){return e instanceof this},A.prototype.pipe=function(){E(this,new g)},A.prototype.write=function(e,t,r){var n,i=this._writableState,s=!1,o=!i.objectMode&&(n=e,a.isBuffer(n)||n instanceof c);return o&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!==typeof r&&(r=_),i.ending?function(e,t){var r=new v;E(e,r),process.nextTick(t,r)}(this,r):(o||function(e,t,r,n){var i;return null===r?i=new w:"string"===typeof r||t.objectMode||(i=new p("chunk",["string","Buffer"],r)),!i||(E(e,i),process.nextTick(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,i,s){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=a.from(t,r));return t}(t,n,i);n!==o&&(r=!0,i="buffer",n=o)}var c=t.objectMode?1:n.length;t.length+=c;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,n,i,s);return l}(this,i,o,e,t,r)),s},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},A.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(e,t,r){r(new f("_write()"))},A.prototype._writev=null,A.prototype.end=function(e,t,r){var n=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,D(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),A.prototype.destroy=u.destroy,A.prototype._undestroy=u.undestroy,A.prototype._destroy=function(e,t){t(e)}},9150:(e,t,r)=>{"use strict";var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r(5762),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[o];if(null!==t){var r=e[d].read();null!==r&&(e[u]=null,e[o]=null,e[a]=null,t(p(r,!1)))}}function y(e){process.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((i(n={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[c]?r(e[c]):t(p(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(p(void 0,!0)):t[h](r,n)}),n)}}(n,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(p(i,!1));r=new Promise(this[h])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,r=Object.create(m,(i(t={},d,{value:e,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var n=r[d].read();n?(r[u]=null,r[o]=null,r[a]=null,e(p(n,!1))):(r[o]=e,r[a]=t)},writable:!0}),t));return r[u]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[u]=null,r[o]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[o];null!==n&&(r[u]=null,r[o]=null,r[a]=null,n(p(void 0,!0))),r[l]=!0})),e.on("readable",y.bind(null,r)),r}},5566:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(9778).Buffer,a=r(2361).inspect,c=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,l;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,r,n,i=o.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,r=i,n=a,o.prototype.copy.call(t,r,n),a+=s.data.length,s=s.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(s));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,s),0===(e-=s)){s===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(s));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&s(t.prototype,r),l&&s(t,l),e}()},2644:e=>{"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var s=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?s._writableState?s._writableState.errorEmitted?process.nextTick(r,s):(s._writableState.errorEmitted=!0,process.nextTick(t,s,e)):process.nextTick(t,s,e):i?(process.nextTick(r,s),i(e)):process.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},5762:(e,t,r)=>{"use strict";var n=r(4003).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,s){if("function"===typeof r)return e(t,null,r);r||(r={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(s||i);var o=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){a=!1,l=!0,o||s.call(t)},h=t._readableState&&t._readableState.endEmitted,d=function(){o=!1,h=!0,a||s.call(t)},p=function(e){s.call(t,e)},f=function(){var e;return o&&!h?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},y=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",u),t.on("abort",f),t.req?y():t.on("request",y)),t.on("end",d),t.on("finish",u),!1!==r.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",y),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",f)}}},4886:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},4541:(e,t,r)=>{"use strict";var n;var i=r(4003).q,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,i,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(5762)),n(e,{readable:t,writable:i},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void s(t||new o("pipe"))}}function l(e){e()}function u(e,t){return e.pipe(t)}function h(e){return e.length?"function"!==typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,r){var s=r<t.length-1;return c(e,s,r>0,(function(e){n||(n=e),e&&o.forEach(l),s||(o.forEach(l),i(n))}))}));return t.reduce(u)}},5730:(e,t,r)=>{"use strict";var n=r(4003).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var s=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new n(i?r:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},6184:(e,t,r)=>{e.exports=r(7465).EventEmitter},723:(e,t,r)=>{(t=e.exports=r(6978)).Stream=t,t.Readable=t,t.Writable=r(1704),t.Duplex=r(8749),t.Transform=r(4784),t.PassThrough=r(5627),t.finished=r(5762),t.pipeline=r(4541)},449:(e,t,r)=>{"use strict";e.exports=o;var n=r(8193),i=o.prototype,s=new Date%1e9;function o(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+s++,this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}i.has=function(e){return e in this._lookup},i.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},i.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},i.set=function(e,t,r){var n=this._lookup[e],i=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},i.expire=function(e,t){var r=t||0,i=this._lookup[e];if(!i)return this;if("string"===typeof r&&(r=n(t)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},i.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}},1779:(e,t,r)=>{"use strict";const n=r(6222);class i{constructor(e,t,r){const i=this;this._started=n(),this._rescheduled=0,this._scheduled=t,this._args=r,this._triggered=!1,this._timerWrapper=()=>{i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._schedule(i._scheduled)):(i._triggered=!0,e.apply(null,i._args))},this._timer=setTimeout(this._timerWrapper,t)}reschedule(e){e||(e=this._scheduled);const t=n();t+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=t,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}}e.exports=function(){if("function"!==typeof arguments[0])throw new Error("callback needed");if("number"!==typeof arguments[1])throw new Error("timeout needed");let e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new i(arguments[0],arguments[1],e)}},6222:e=>{"use strict";e.exports=function(){return Date.now()}},8636:(e,t,r)=>{e.exports=function(e,t,r){if("number"!==typeof t)throw new Error("second argument must be a Number");let i,s,o,a,c,l,u=!0;Array.isArray(e)?(i=[],o=s=e.length):(a=Object.keys(e),i={},o=s=a.length);function h(e){function t(){r&&r(e,i),r=null}u?n(t):t()}function d(t,r,n){if(i[t]=n,r&&(c=!0),0===--o||r)h(r);else if(!c&&l<s){let t;a?(t=a[l],l+=1,e[t]((function(e,r){d(t,e,r)}))):(t=l,l+=1,e[t]((function(e,r){d(t,e,r)})))}}l=t,o?a?a.some((function(r,n){return e[r]((function(e,t){d(r,e,t)})),n===t-1})):e.some((function(e,r){return e((function(e,t){d(r,e,t)})),r===t-1})):h(null);u=!1};const n=r(4183)},2543:(e,t,r)=>{var n=r(9778),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},6327:(e,t,r)=>{"use strict";var n=r(206),i=/[\/\?<>\\:\*\|"]/g,s=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function l(e,t){if("string"!==typeof e)throw new Error("Input must be string");var r=e.replace(i,t).replace(s,t).replace(o,t).replace(a,t).replace(c,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=l(e,r);return""===r?n:l(n,"")}},6813:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<s(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,o=i>>>1;n<o;){var a=2*(n+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,r))l<i&&0>s(u,c)?(e[n]=u,e[l]=r,n=l):(e[n]=c,e[a]=r,n=a);else{if(!(l<i&&0>s(u,r)))break e;e[n]=u,e[l]=r,n=l}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,p=3,f=!1,y=!1,g=!1,m="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(l,t)}t=n(u)}}function E(e){if(g=!1,b(e),!y)if(null!==n(l))y=!0,x(_);else{var t=n(u);null!==t&&O(E,t.startTime-e)}}function _(e,r){y=!1,g&&(g=!1,w(I),I=-1),f=!0;var s=p;try{for(b(r),d=n(l);null!==d&&(!(d.expirationTime>r)||e&&!T());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var a=o(d.expirationTime<=r);r=t.unstable_now(),"function"===typeof a?d.callback=a:d===n(l)&&i(l),b(r)}else i(l);d=n(l)}if(null!==d)var c=!0;else{var h=n(u);null!==h&&O(E,h.startTime-r),c=!1}return c}finally{d=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,k=null,I=-1,C=5,R=-1;function T(){return!(t.unstable_now()-R<C)}function D(){if(null!==k){var e=t.unstable_now();R=e;var r=!0;try{r=k(!0,e)}finally{r?S():(A=!1,k=null)}}else A=!1}if("function"===typeof v)S=function(){v(D)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=D,S=function(){N.postMessage(null)}}else S=function(){m(D,0)};function x(e){k=e,A||(A=!0,S())}function O(e,r){I=m((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){y||f||(y=!0,x(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,r(u,e),null===n(l)&&e===n(u)&&(g?(w(I),I=-1):g=!0,O(E,s-o))):(e.sortIndex=a,r(l,e),y||f||(y=!0,x(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},5296:(e,t,r)=>{"use strict";e.exports=r(6813)},8928:e=>{"use strict";const t=new Map;e.exports={setDelayedInterval:function(e,r,n){n=n||r;const i=`${Date.now()}:${Math.floor(1e6*Math.random())}`,s=setTimeout((()=>{!async function(e,r,n){for(;t.get(n);){try{await e()}catch(i){setTimeout((()=>{throw i}),1);break}if(!t.get(n))break;await new Promise((e=>{const i=setTimeout(e,r);t.set(n,i)}))}}(e,r,i)}),n);return t.set(i,s),i},clearDelayedInterval:function(e){const r=t.get(e);r&&(clearTimeout(r),t.delete(e))}}},4542:(e,t,r)=>{"use strict";const n=r(887);e.exports=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n(e)&&!Array.isArray(e))throw new TypeError("Expected a plain object or array");const{deep:r}=t,i=[],s=[],o=e=>{const t=i.indexOf(e);if(-1!==t)return s[t];const r=[];return i.push(e),s.push(r),r.push(...e.map((e=>Array.isArray(e)?o(e):n(e)?a(e):e))),r},a=e=>{const c=i.indexOf(e);if(-1!==c)return s[c];const l={},u=Object.keys(e).sort(t.compare);i.push(e),s.push(l);for(const t of u){const i=e[t];let s;s=r&&Array.isArray(i)?o(i):r&&n(i)?a(i):i,Object.defineProperty(l,t,{...Object.getOwnPropertyDescriptor(e,t),value:s})}return l};return Array.isArray(e)?r?o(e):e.slice():a(e)}},1620:e=>{"use strict";function t(e,t){return e+r(t)}function r(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function n(e,t){return e[0]-t[0]}function i(e){return e[1]}e.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let r=this._internalPositionFor(e,!1);if(void 0===t)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);if(-1!==t)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,r=new Array(this.length);for(;t<this.length;)r[t]=e(this.get(t),t,this),t++;return r}reduce(e,t){let r=0,n=t;for(;r<this.length;){n=e(n,this.get(r),r),r++}return n}find(e){let t,r,n=0;for(;n<this.length&&!t;)r=this.get(n),t=e(r),n++;return t?r:void 0}_internalPositionFor(e,n){const i=this._bytePosFor(e,n);if(i>=this._bitArrays.length)return-1;const s=this._bitArrays[i],o=e-7*i;if(!((s&1<<o)>0))return-1;return this._bitArrays.slice(0,i).reduce(t,0)+r(s&~(4294967295<<o+1))-1}_bytePosFor(e,t){const r=Math.floor(e/7),n=r+1;for(;!t&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,r,n){const i=this._data,s=[t,r];if(n)this._sortData(),i[e]=s;else{if(i.length)if(i[i.length-1][0]>=t)i.push(s);else if(i[0][0]<=t)i.unshift(s);else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(s).concat(i.slice(e))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(n),this._changedData=!1}bitField(){const e=[];let t,r=8,n=0,i=0;const s=this._bitArrays.slice();for(;s.length||n;){0===n&&(t=s.shift(),n=7);const o=Math.min(n,r);i|=(t&~(255<<o))<<8-r,t>>>=o,n-=o,r-=o,r&&(n||s.length)||(e.push(i),i=0,r=8)}for(var o=e.length-1;o>0;o--){if(0!==e[o])break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(i)}}},9210:e=>{e.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)return;yield r}}finally{t.releaseLock()}}();throw new Error("unknown stream")}},5948:(e,t,r)=>{"use strict";var n=r(2543).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function o(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=o(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=o(t[n]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=o(t[n]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},7683:(e,t,r)=>{"use strict";const{AbortController:n}=globalThis,i=r(1779);class s extends n{constructor(e){super(),this._ms=e,this._timer=i((()=>this.abort()),e),Object.setPrototypeOf(this,s.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=i((()=>this.abort()),this._ms)}}e.exports={TimeoutController:s}},9900:e=>{!function(){e.exports=g;var t=86400,r=3200,n=1168776,i=100982246400,s=1e3*i,o=864e13,a=4294967296,c=1e6,l=1e9,u="000000000",h=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!==1/0)?-0:t},d=g.prototype;g.fromDate=function(e){return new g(+e)},g.fromInt64BE=E(0,1,2,3,0,4),g.fromInt64LE=E(3,2,1,0,4,0),g.fromString=function(e){var t,r=new g,n=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,n=1970+(t-1970)%400;return r.year=t-n,n})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(e){return r.nano=+(e+u).substr(1,9),""})).split(/\D+/);n.length>1?n[1]--:n[1]=0;if(r.time=t=Date.UTC.apply(Date,n)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return m(r)},g.fromTimeT=function(e){return v(e,0)},d.year=0,d.time=0,d.nano=0,d.addNano=function(e){return this.nano+=+e||0,this},d.getNano=function(){var e=m(this);return(e.time%1e3*c+ +e.nano+l)%l},d.getTimeT=function(){var e=m(this),i=Math.floor(e.time/1e3),s=e.year;s&&(i+=s*n*t/r);return i},d.getYear=function(){return this.toDate().getUTCFullYear()+this.year},d.toDate=function(){return w(m(this).time)},d.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},d.toString=function(e){var t=this,r=t.toDate(),n={H:function(){return S(r.getUTCHours())},L:function(){return A(r.getUTCMilliseconds(),3)},M:function(){return S(r.getUTCMinutes())},N:function(){return A(t.getNano(),9)},S:function(){return S(r.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+A(e,6):e>=0?A(e,4):e>=-999999?"-"+A(-e,6):e},a:function(){return f[r.getUTCDay()]},b:function(){return p[r.getUTCMonth()]},d:function(){return S(r.getUTCDate())},e:function(){return e=r.getUTCDate(),(e>9?"":" ")+(0|e);var e},m:function(){return S(r.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var r=t[1],i=y[r],s=n[r];return i?e(i):s?s():t}))}(e||"%Y-%m-%dT%H:%M:%S.%NZ")},d.writeInt64BE=b(0,1,2,3,0,4),d.writeInt64LE=b(3,2,1,0,4,0);var p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return g;function g(e,t,r){var n=this;if(!(n instanceof g))return new g(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,m(n)}function m(e){var t,n,i=e.year,a=e.time,l=e.nano;if(l<0||c<=l){var u=Math.floor(l/c);l-=u*c,a+=u,t=1}var d=i%r;if(a<-o||o<a||d){(n=h(a/s))&&(i+=n*r,a-=n*s);var p=w(a);p.setUTCFullYear(d+p.getUTCFullYear());var f=(a=+p)+(n=h((i-=d)/r))*s;n&&-o<=f&&f<=o&&(i-=n*r,a=f),t=1}return t&&(e.year=i,e.time=a,e.nano=l),e}function w(e){var t=new Date(0);return t.setTime(e),t}function v(e,t){t|=0,e=+e||0;var n=h((t*=a)/i)+h(e/i),s=t%i+e%i,o=h(s/i);return o&&(n+=o,s-=o*i),new g(1e3*s,0,n*r)}function b(e,t,r,n,i,s){return function(e,t){var r=m(this);e||(e=new Array(8));_(e,t|=0);var n=Math.floor(r.time/1e3),c=31556952*r.year,l=h(c/a)+h(n/a),u=c%a+n%a,d=Math.floor(u/a);d&&(l+=d,u-=d*a);return o(e,t+i,l),o(e,t+s,u),e};function o(i,s,o){i[s+e]=o>>24&255,i[s+t]=o>>16&255,i[s+r]=o>>8&255,i[s+n]=255&o}}function E(e,t,r,n,i,s){return function(e,t){_(e,t|=0);var r=o(e,t+i);return v(o(e,t+s),r)};function o(i,s){return 16777216*i[s+e]+(i[s+t]<<16|i[s+r]<<8|i[s+n])}}function _(e,t){var r=e&&e.length;if(null==r)throw new TypeError("Invalid Buffer");if(r<t+8)throw new RangeError("Out of range")}function S(e){return(e>9?"":"0")+(0|e)}function A(e,t){return(u+(0|e)).substr(-t)}}()},206:(e,t,r)=>{"use strict";var n=r(9022),i=r(4847);e.exports=n.bind(null,i)},9022:e=>{"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e,n,i){if("string"!==typeof n)throw new Error("Input must be string");for(var s,o,a=n.length,c=0,l=0;l<a;l+=1){if(s=n.charCodeAt(l),o=n[l],t(s)&&r(n.charCodeAt(l+1))&&(o+=n[l+=1]),(c+=e(o))===i)return n.slice(0,l+1);if(c>i)return n.slice(0,l-o.length+1)}return n}},4847:e=>{"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!==typeof e)throw new Error("Input must be string");for(var n=e.length,i=0,s=null,o=null,a=0;a<n;a++)r(s=e.charCodeAt(a))?null!=o&&t(o)?i+=1:i+=3:s<=127?i+=1:s>=128&&s<=2047?i+=2:s>=2048&&s<=65535&&(i+=3),o=s;return i}},9515:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(n){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},6794:e=>{e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},7374:(e,t,r)=>{"use strict";var n=r(5450),i=r(5718),s=r(8264),o=r(6218);function a(e){return e.call.bind(e)}var c="undefined"!==typeof BigInt,l="undefined"!==typeof Symbol,u=a(Object.prototype.toString),h=a(Number.prototype.valueOf),d=a(String.prototype.valueOf),p=a(Boolean.prototype.valueOf);if(c)var f=a(BigInt.prototype.valueOf);if(l)var y=a(Symbol.prototype.valueOf);function g(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function m(e){return"[object Map]"===u(e)}function w(e){return"[object Set]"===u(e)}function v(e){return"[object WeakMap]"===u(e)}function b(e){return"[object WeakSet]"===u(e)}function E(e){return"[object ArrayBuffer]"===u(e)}function _(e){return"undefined"!==typeof ArrayBuffer&&(E.working?E(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===u(e)}function A(e){return"undefined"!==typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=o,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||A(e)},t.isUint8Array=function(e){return"Uint8Array"===s(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===s(e)},t.isUint16Array=function(e){return"Uint16Array"===s(e)},t.isUint32Array=function(e){return"Uint32Array"===s(e)},t.isInt8Array=function(e){return"Int8Array"===s(e)},t.isInt16Array=function(e){return"Int16Array"===s(e)},t.isInt32Array=function(e){return"Int32Array"===s(e)},t.isFloat32Array=function(e){return"Float32Array"===s(e)},t.isFloat64Array=function(e){return"Float64Array"===s(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===s(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===s(e)},m.working="undefined"!==typeof Map&&m(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(m.working?m(e):e instanceof Map)},w.working="undefined"!==typeof Set&&w(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(w.working?w(e):e instanceof Set)},v.working="undefined"!==typeof WeakMap&&v(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},b.working="undefined"!==typeof WeakSet&&b(new WeakSet),t.isWeakSet=function(e){return b(e)},E.working="undefined"!==typeof ArrayBuffer&&E(new ArrayBuffer),t.isArrayBuffer=_,S.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=A;var k="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function I(e){return"[object SharedArrayBuffer]"===u(e)}function C(e){return"undefined"!==typeof k&&("undefined"===typeof I.working&&(I.working=I(new k)),I.working?I(e):e instanceof k)}function R(e){return g(e,h)}function T(e){return g(e,d)}function D(e){return g(e,p)}function P(e){return c&&g(e,f)}function N(e){return l&&g(e,y)}t.isSharedArrayBuffer=C,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=R,t.isStringObject=T,t.isBooleanObject=D,t.isBigIntObject=P,t.isSymbolObject=N,t.isBoxedPrimitive=function(e){return R(e)||T(e)||D(e)||P(e)||N(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(_(e)||C(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9639:(e,t,r)=>{var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!w(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,s=n.length,o=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),a=n[r];r<s;a=n[++r])g(a)||!E(a)?o+=" "+a:o+=" "+c(a);return o},t.deprecate=function(e,r){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var s={},o=/^$/;if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG){var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+a+"$","i")}function c(e,r){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),h(n,e,n.depth)}function l(e,t){var r=c.styles[t];return r?"\x1b["+c.colors[r][0]+"m"+e+"\x1b["+c.colors[r][1]+"m":e}function u(e,t){return e}function h(e,r,n){if(e.customInspect&&r&&A(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return w(i)||(i=h(e,i,n)),i}var s=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(w(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,r);if(s)return s;var o=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),S(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(r);if(0===o.length){if(A(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(_(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return d(r)}var l,u="",E=!1,k=["{","}"];(f(r)&&(E=!0,k=["[","]"]),A(r))&&(u=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(u=" "+RegExp.prototype.toString.call(r)),_(r)&&(u=" "+Date.prototype.toUTCString.call(r)),S(r)&&(u=" "+d(r)),0!==o.length||E&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),l=E?function(e,t,r,n,i){for(var s=[],o=0,a=t.length;o<a;++o)T(t,String(o))?s.push(p(e,t,r,n,String(o),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(p(e,t,r,n,i,!0))})),s}(e,r,n,a,o):o.map((function(t){return p(e,r,n,a,t,E)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,u,k)):k[0]+u+k[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),T(n,i)||(o="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=g(r)?h(e,c.value,null):h(e,c.value,r-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(o)){if(s&&i.match(/^\d+$/))return a;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function f(e){return Array.isArray(e)}function y(e){return"boolean"===typeof e}function g(e){return null===e}function m(e){return"number"===typeof e}function w(e){return"string"===typeof e}function v(e){return void 0===e}function b(e){return E(e)&&"[object RegExp]"===k(e)}function E(e){return"object"===typeof e&&null!==e}function _(e){return E(e)&&"[object Date]"===k(e)}function S(e){return E(e)&&("[object Error]"===k(e)||e instanceof Error)}function A(e){return"function"===typeof e}function k(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(o.test(e)){var r=process.pid;s[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else s[e]=function(){};return s[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(7374),t.isArray=f,t.isBoolean=y,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=w,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=v,t.isRegExp=b,t.types.isRegExp=b,t.isObject=E,t.isDate=_,t.types.isDate=_,t.isError=S,t.types.isNativeError=S,t.isFunction=A,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(6794);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=r(2534),t._extend=function(e,t){if(!t||!E(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var D="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(D&&e[D]){var t;if("function"!==typeof(t=e[D]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(o){r(o)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),D&&Object.defineProperty(t,D,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=D,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return n.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(s.bind(null,null,e))}),(function(e){process.nextTick(P.bind(null,e,s))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}},9662:e=>{e.exports=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(127&n)<<s:(127&n)*Math.pow(2,s),s+=7}while(n>=128);return e.bytes=o-r,i}},1625:e=>{e.exports=function e(r,n,i){n=n||[];var s=i=i||0;for(;r>=t;)n[i++]=255&r|128,r/=128;for(;-128&r;)n[i++]=255&r|128,r>>>=7;return n[i]=0|r,e.bytes=i-s+1,n};var t=Math.pow(2,31)},6074:(e,t,r)=>{e.exports={encode:r(1625),decode:r(9662),encodingLength:r(3120)}},3120:e=>{var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),l=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<i?4:e<s?5:e<o?6:e<a?7:e<c?8:e<l?9:10}},9806:(e,t,r)=>{"use strict";const n=r(6074);e.exports=e=>{if(!(e instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const t=[];for(;e.length>0;){const r=n.decode(e);t.push(r),e=e.slice(n.decode.bytes)}return t}},3522:e=>{e.exports=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a||s>49)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(127&n)<<s:(127&n)*Math.pow(2,s),s+=7}while(n>=128);return e.bytes=o-r,i}},6993:e=>{e.exports=function e(r,n,i){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];var s=i=i||0;for(;r>=t;)n[i++]=255&r|128,r/=128;for(;-128&r;)n[i++]=255&r|128,r>>>=7;return n[i]=0|r,e.bytes=i-s+1,n};var t=Math.pow(2,31)},4561:(e,t,r)=>{e.exports={encode:r(6993),decode:r(3522),encodingLength:r(2570)}},2570:e=>{var t=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),i=Math.pow(2,28),s=Math.pow(2,35),o=Math.pow(2,42),a=Math.pow(2,49),c=Math.pow(2,56),l=Math.pow(2,63);e.exports=function(e){return e<t?1:e<r?2:e<n?3:e<i?4:e<s?5:e<o?6:e<a?7:e<c?8:e<l?9:10}},3227:(e,t,r)=>{"use strict";const n=r(2193),i="object"===typeof window&&"object"===typeof document&&9===document.nodeType,s=n(),o=i&&!s,a=s&&!i,c=s&&i,l="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!s,u="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,h="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&"test"===globalThis.process.env.NODE_ENV,d="undefined"!==typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:h,isElectron:s,isElectronMain:a,isElectronRenderer:c,isNode:l,isBrowser:o,isWebWorker:u,isEnvWithDom:i,isReactNative:d}},8264:(e,t,r)=>{"use strict";var n=r(5369),i=r(306),s=r(4037),o=s("Object.prototype.toString"),a=r(4707)(),c="undefined"===typeof globalThis?r.g:globalThis,l=i(),u=s("String.prototype.slice"),h={},d=r(636),p=Object.getPrototypeOf;a&&d&&p&&n(l,(function(e){if("function"===typeof c[e]){var t=new c[e];if(Symbol.toStringTag in t){var r=p(t),n=d(r,Symbol.toStringTag);if(!n){var i=p(r);n=d(i,Symbol.toStringTag)}h[e]=n.get}}}));var f=r(6218);e.exports=function(e){return!!f(e)&&(a&&Symbol.toStringTag in e?function(e){var t=!1;return n(h,(function(r,n){if(!t)try{var i=r.call(e);i===n&&(t=i)}catch(s){}})),t}(e):u(o(e),8,-1))}},7420:()=>{},5856:()=>{},5883:()=>{},2480:()=>{},2596:()=>{},3897:()=>{},9156:()=>{},5819:()=>{},2361:()=>{},4616:()=>{},306:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"===typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"===typeof i[n[t]]&&(e[e.length]=n[t]);return e}},636:(e,t,r)=>{"use strict";var n=r(2506)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(i){n=null}e.exports=n},1149:(e,t,r)=>{"use strict";r.d(t,{Dy:()=>s.D,Jx:()=>i.Jx,WU:()=>s.W,cv:()=>n.cv});var n=r(310),i=r(2548),s=r(2651)},8039:(e,t,r)=>{"use strict";r.d(t,{Fh:()=>f,Jl:()=>c,Km:()=>u,Tp:()=>y,X0:()=>a,YX:()=>l,Zh:()=>h,cs:()=>d,kj:()=>o,or:()=>s,uN:()=>p});var n=r(2651),i=r(8912);const s=[24,256,65536,4294967296,BigInt("18446744073709551616")];function o(e,t,r){(0,i.DO)(e,t,1);const n=e[t];if(!0===r.strict&&n<s[0])throw new Error(`${i.IR} integer encoded in more bytes than necessary (strict decode)`);return n}function a(e,t,r){(0,i.DO)(e,t,2);const n=e[t]<<8|e[t+1];if(!0===r.strict&&n<s[1])throw new Error(`${i.IR} integer encoded in more bytes than necessary (strict decode)`);return n}function c(e,t,r){(0,i.DO)(e,t,4);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<s[2])throw new Error(`${i.IR} integer encoded in more bytes than necessary (strict decode)`);return n}function l(e,t,r){(0,i.DO)(e,t,8);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],a=(BigInt(n)<<BigInt(32))+BigInt(o);if(!0===r.strict&&a<s[3])throw new Error(`${i.IR} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(!0===r.allowBigInt)return a;throw new Error(`${i.IR} integers outside of the safe integer range are not supported`)}function u(e,t,r,i){return new n.W(n.D.uint,o(e,t+1,i),2)}function h(e,t,r,i){return new n.W(n.D.uint,a(e,t+1,i),3)}function d(e,t,r,i){return new n.W(n.D.uint,c(e,t+1,i),5)}function p(e,t,r,i){return new n.W(n.D.uint,l(e,t+1,i),9)}function f(e,t){return y(e,0,t.value)}function y(e,t,r){if(r<s[0]){const n=Number(r);e.push([t|n])}else if(r<s[1]){const n=Number(r);e.push([24|t,n])}else if(r<s[2]){const n=Number(r);e.push([25|t,n>>>8,255&n])}else if(r<s[3]){const n=Number(r);e.push([26|t,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<s[4]))throw new Error(`${i.IR} encountered BigInt larger than allowable range`);{const r=[27|t,0,0,0,0,0,0,0];let i=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&i,i>>=8,r[7]=255&i,i>>=8,r[6]=255&i,i>>=8,r[5]=255&i,r[4]=255&s,s>>=8,r[3]=255&s,s>>=8,r[2]=255&s,s>>=8,r[1]=255&s,e.push(r)}}}f.encodedSize=function(e){return y.encodedSize(e.value)},y.encodedSize=function(e){return e<s[0]?1:e<s[1]?2:e<s[2]?3:e<s[3]?5:9},f.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}},5779:(e,t,r)=>{"use strict";r.d(t,{UT:()=>d,ec:()=>h,r0:()=>a,wy:()=>c,yr:()=>o});var n=r(2651),i=r(8039),s=r(8912);function o(e,t,r,s){return new n.W(n.D.negint,-1-i.kj(e,t+1,s),2)}function a(e,t,r,s){return new n.W(n.D.negint,-1-i.X0(e,t+1,s),3)}function c(e,t,r,s){return new n.W(n.D.negint,-1-i.Jl(e,t+1,s),5)}const l=BigInt(-1),u=BigInt(1);function h(e,t,r,o){const a=i.YX(e,t+1,o);if("bigint"!==typeof a){const e=-1-a;if(e>=Number.MIN_SAFE_INTEGER)return new n.W(n.D.negint,e,9)}if(!0!==o.allowBigInt)throw new Error(`${s.IR} integers outside of the safe integer range are not supported`);return new n.W(n.D.negint,l-BigInt(a),9)}function d(e,t){const r=t.value,n="bigint"===typeof r?r*l-u:-1*r-1;i.Tp(e,t.type.majorEncoded,n)}d.encodedSize=function(e){const t=e.value,r="bigint"===typeof t?t*l-u:-1*t-1;return r<i.or[0]?1:r<i.or[1]?2:r<i.or[2]?3:r<i.or[3]?5:9},d.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0}},8125:(e,t,r)=>{"use strict";r.d(t,{BS:()=>u,Ii:()=>c,ME:()=>d,UQ:()=>l,hg:()=>f,zU:()=>h});var n=r(2651),i=r(8912),s=r(8039),o=r(2741);function a(e,t,r,s){(0,i.DO)(e,t,r+s);const a=(0,o.tP)(e,t+r,t+r+s);return new n.W(n.D.bytes,a,r+s)}function c(e,t,r,n){return a(e,t,1,r)}function l(e,t,r,n){return a(e,t,2,s.kj(e,t+1,n))}function u(e,t,r,n){return a(e,t,3,s.X0(e,t+1,n))}function h(e,t,r,n){return a(e,t,5,s.Jl(e,t+1,n))}function d(e,t,r,n){const o=s.YX(e,t+1,n);if("bigint"===typeof o)throw new Error(`${i.IR} 64-bit integer bytes lengths not supported`);return a(e,t,9,o)}function p(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===n.D.string?(0,o.mL)(e.value):e.value),e.encodedBytes}function f(e,t){const r=p(t);s.Tp(e,t.type.majorEncoded,r.length),e.push(r)}f.encodedSize=function(e){const t=p(e);return s.Tp.encodedSize(t.length)+t.length},f.compareTokens=function(e,t){return r=p(e),n=p(t),r.length<n.length?-1:r.length>n.length?1:(0,o.qu)(r,n);var r,n}},4989:(e,t,r)=>{"use strict";r.d(t,{Bq:()=>u,YW:()=>f,bc:()=>p,h:()=>h,nt:()=>l,q0:()=>d});var n=r(2651),i=r(8912),s=r(8039),o=r(8125),a=r(2741);function c(e,t,r,s,o){const c=r+s;(0,i.DO)(e,t,c);const l=new n.W(n.D.string,(0,a.BB)(e,t+r,t+c),c);return!0===o.retainStringBytes&&(l.byteValue=(0,a.tP)(e,t+r,t+c)),l}function l(e,t,r,n){return c(e,t,1,r,n)}function u(e,t,r,n){return c(e,t,2,s.kj(e,t+1,n),n)}function h(e,t,r,n){return c(e,t,3,s.X0(e,t+1,n),n)}function d(e,t,r,n){return c(e,t,5,s.Jl(e,t+1,n),n)}function p(e,t,r,n){const o=s.YX(e,t+1,n);if("bigint"===typeof o)throw new Error(`${i.IR} 64-bit integer string lengths not supported`);return c(e,t,9,o,n)}const f=o.hg},2386:(e,t,r)=>{"use strict";r.d(t,{HF:()=>p,Ju:()=>a,OC:()=>l,a8:()=>h,h7:()=>c,lY:()=>u,s5:()=>d});var n=r(2651),i=r(8039),s=r(8912);function o(e,t,r,i){return new n.W(n.D.array,i,r)}function a(e,t,r,n){return o(0,0,1,r)}function c(e,t,r,n){return o(0,0,2,i.kj(e,t+1,n))}function l(e,t,r,n){return o(0,0,3,i.X0(e,t+1,n))}function u(e,t,r,n){return o(0,0,5,i.Jl(e,t+1,n))}function h(e,t,r,n){const a=i.YX(e,t+1,n);if("bigint"===typeof a)throw new Error(`${s.IR} 64-bit integer array lengths not supported`);return o(0,0,9,a)}function d(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${s.IR} indefinite length items not allowed`);return o(0,0,1,1/0)}function p(e,t){i.Tp(e,n.D.array.majorEncoded,t.value)}p.compareTokens=i.Fh.compareTokens,p.encodedSize=function(e){return i.Tp.encodedSize(e.value)}},9634:(e,t,r)=>{"use strict";r.d(t,{F2:()=>h,G:()=>c,IY:()=>u,KI:()=>p,_K:()=>a,ng:()=>d,qe:()=>l});var n=r(2651),i=r(8039),s=r(8912);function o(e,t,r,i){return new n.W(n.D.map,i,r)}function a(e,t,r,n){return o(0,0,1,r)}function c(e,t,r,n){return o(0,0,2,i.kj(e,t+1,n))}function l(e,t,r,n){return o(0,0,3,i.X0(e,t+1,n))}function u(e,t,r,n){return o(0,0,5,i.Jl(e,t+1,n))}function h(e,t,r,n){const a=i.YX(e,t+1,n);if("bigint"===typeof a)throw new Error(`${s.IR} 64-bit integer map lengths not supported`);return o(0,0,9,a)}function d(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${s.IR} indefinite length items not allowed`);return o(0,0,1,1/0)}function p(e,t){i.Tp(e,n.D.map.majorEncoded,t.value)}p.compareTokens=i.Fh.compareTokens,p.encodedSize=function(e){return i.Tp.encodedSize(e.value)}},5454:(e,t,r)=>{"use strict";r.d(t,{CF:()=>a,MV:()=>l,ZR:()=>o,qJ:()=>s,vP:()=>c,xy:()=>u});var n=r(2651),i=r(8039);function s(e,t,r,i){return new n.W(n.D.tag,r,1)}function o(e,t,r,s){return new n.W(n.D.tag,i.kj(e,t+1,s),2)}function a(e,t,r,s){return new n.W(n.D.tag,i.X0(e,t+1,s),3)}function c(e,t,r,s){return new n.W(n.D.tag,i.Jl(e,t+1,s),5)}function l(e,t,r,s){return new n.W(n.D.tag,i.YX(e,t+1,s),9)}function u(e,t){i.Tp(e,n.D.tag.majorEncoded,t.value)}u.compareTokens=i.Fh.compareTokens,u.encodedSize=function(e){return i.Tp.encodedSize(e.value)}},6453:(e,t,r)=>{"use strict";r.d(t,{GI:()=>u,h1:()=>o,mW:()=>l,tA:()=>d,vV:()=>h,y7:()=>a});var n=r(2651),i=r(8912),s=r(8039);function o(e,t,r,s){if(!1===s.allowUndefined)throw new Error(`${i.IR} undefined values are not supported`);return!0===s.coerceUndefinedToNull?new n.W(n.D.null,null,1):new n.W(n.D.undefined,void 0,1)}function a(e,t,r,s){if(!1===s.allowIndefinite)throw new Error(`${i.IR} indefinite length items not allowed`);return new n.W(n.D.break,void 0,1)}function c(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error(`${i.IR} NaN values are not supported`);if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${i.IR} Infinity values are not supported`)}return new n.W(n.D.float,e,t)}function l(e,t,r,n){return c(m(e,t+1),3,n)}function u(e,t,r,n){return c(v(e,t+1),5,n)}function h(e,t,r,n){return c(b(e,t+1),9,n)}function d(e,t,r){const i=t.value;if(!1===i)e.push([20|n.D.float.majorEncoded]);else if(!0===i)e.push([21|n.D.float.majorEncoded]);else if(null===i)e.push([22|n.D.float.majorEncoded]);else if(void 0===i)e.push([23|n.D.float.majorEncoded]);else{let t,n=!1;r&&!0===r.float64||(g(i),t=m(y,1),i===t||Number.isNaN(i)?(y[0]=249,e.push(y.slice(0,3)),n=!0):(w(i),t=v(y,1),i===t&&(y[0]=250,e.push(y.slice(0,5)),n=!0))),n||(s=i,f.setFloat64(0,s,!1),t=b(y,1),y[0]=251,e.push(y.slice(0,9)))}var s}d.encodedSize=function(e,t){const r=e.value;if(!1===r||!0===r||null===r||void 0===r)return 1;if(!t||!0!==t.float64){g(r);let e=m(y,1);if(r===e||Number.isNaN(r))return 3;if(w(r),e=v(y,1),r===e)return 5}return 9};const p=new ArrayBuffer(9),f=new DataView(p,1),y=new Uint8Array(p,0);function g(e){if(e===1/0)f.setUint16(0,31744,!1);else if(e===-1/0)f.setUint16(0,64512,!1);else if(Number.isNaN(e))f.setUint16(0,32256,!1);else{f.setFloat32(0,e);const t=f.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)f.setUint16(0,31744,!1);else if(0===r)f.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{const e=r-127;e<-24?f.setUint16(0,0):e<-14?f.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):f.setUint16(0,(2147483648&t)>>16|e+15<<10|n>>13,!1)}}}function m(e,t){if(e.length-t<2)throw new Error(`${i.IR} not enough data for float16`);const r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,s=1023&r;let o;return o=0===n?s*2**-24:31!==n?(s+1024)*2**(n-25):0===s?1/0:NaN,32768&r?-o:o}function w(e){f.setFloat32(0,e,!1)}function v(e,t){if(e.length-t<4)throw new Error(`${i.IR} not enough data for float32`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function b(e,t){if(e.length-t<8)throw new Error(`${i.IR} not enough data for float64`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}d.compareTokens=s.Fh.compareTokens},2741:(e,t,r)=>{"use strict";r.d(t,{BB:()=>c,Dz:()=>a,Pu:()=>m,mL:()=>l,nI:()=>u,qu:()=>f,tP:()=>h,un:()=>p,zo:()=>d});const n=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"===typeof globalThis.Buffer.isBuffer,i=new TextDecoder,s=new TextEncoder;function o(e){return n&&globalThis.Buffer.isBuffer(e)}function a(e){return e instanceof Uint8Array?o(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const c=n?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):g(e,t,r):(e,t,r)=>r-t>64?i.decode(e.subarray(t,r)):g(e,t,r),l=n?e=>e.length>64?globalThis.Buffer.from(e):y(e):e=>e.length>64?s.encode(e):y(e),u=e=>Uint8Array.from(e),h=n?(e,t,r)=>o(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),d=n?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),a(globalThis.Buffer.concat(e,t))):(e,t)=>{const r=new Uint8Array(t);let n=0;for(let i of e)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},p=n?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function f(e,t){if(o(e)&&o(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function y(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(t=e.charCodeAt(o),t>55295&&t<57344){if(!i){if(t>56319){(r-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(r-=3)>-1&&s.push(239,191,189);continue}i=t;continue}if(t<56320){(r-=3)>-1&&s.push(239,191,189),i=t;continue}t=65536+(i-55296<<10|t-56320)}else i&&(r-=3)>-1&&s.push(239,191,189);if(i=null,t<128){if((r-=1)<0)break;s.push(t)}else if(t<2048){if((r-=2)<0)break;s.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;s.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return s}function g(e,t,r){const n=[];for(;t<r;){const i=e[t];let s=null,o=i>239?4:i>223?3:i>191?2:1;if(t+o<=r){let r,n,a,c;switch(o){case 1:i<128&&(s=i);break;case 2:r=e[t+1],128===(192&r)&&(c=(31&i)<<6|63&r,c>127&&(s=c));break;case 3:r=e[t+1],n=e[t+2],128===(192&r)&&128===(192&n)&&(c=(15&i)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[t+1],n=e[t+2],a=e[t+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&i)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),t+=o}return m(n)}function m(e){const t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}},8912:(e,t,r)=>{"use strict";r.d(t,{DO:()=>o,IR:()=>n,OO:()=>i});const n="CBOR decode error:",i="CBOR encode error:",s=[];function o(e,t,r){if(e.length-t<r)throw new Error(`${n} not enough data for type`)}s[23]=1,s[24]=2,s[25]=3,s[26]=5,s[27]=9},2548:(e,t,r)=>{"use strict";r.d(t,{Jx:()=>h});var n=r(8912),i=r(2651),s=r(2456);const o={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=s.PS[e];if(void 0===t){const r=s.cW[e];if(!r)throw new Error(`${n.IR} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const i=31&e;t=r(this.data,this.pos,i,this.options)}return this.pos+=t.encodedLength,t}}const c=Symbol.for("DONE"),l=Symbol.for("BREAK");function u(e,t){if(e.done())return c;const r=e.next();if(r.type===i.D.break)return l;if(r.type.terminal)return r.value;if(r.type===i.D.array)return function(e,t,r){const i=[];for(let s=0;s<e.value;s++){const o=u(t,r);if(o===l){if(e.value===1/0)break;throw new Error(`${n.IR} got unexpected break to lengthed array`)}if(o===c)throw new Error(`${n.IR} found array but not enough entries (got ${s}, expected ${e.value})`);i[s]=o}return i}(r,e,t);if(r.type===i.D.map)return function(e,t,r){const i=!0===r.useMaps,s=i?void 0:{},o=i?new Map:void 0;for(let a=0;a<e.value;a++){const h=u(t,r);if(h===l){if(e.value===1/0)break;throw new Error(`${n.IR} got unexpected break to lengthed map`)}if(h===c)throw new Error(`${n.IR} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(!0!==i&&"string"!==typeof h)throw new Error(`${n.IR} non-string keys not supported (got ${typeof h})`);const d=u(t,r);if(d===c)throw new Error(`${n.IR} found map but not enough entries (got ${a} [no value], expected ${e.value})`);i?o.set(h,d):s[h]=d}return i?o:s}(r,e,t);if(r.type===i.D.tag){if(t.tags&&"function"===typeof t.tags[r.value]){const n=u(e,t);return t.tags[r.value](n)}throw new Error(`${n.IR} tag not supported (${r.value})`)}throw new Error("unsupported")}function h(e,t){if(!(e instanceof Uint8Array))throw new Error(`${n.IR} data to decode must be a Uint8Array`);const r=(t=Object.assign({},o,t)).tokenizer||new a(e,t),i=u(r,t);if(i===c)throw new Error(`${n.IR} did not find any content to decode`);if(i===l)throw new Error(`${n.IR} got unexpected break`);if(!r.done())throw new Error(`${n.IR} too many terminals, data makes no sense`);return i}},310:(e,t,r)=>{"use strict";r.d(t,{cv:()=>R,w$:()=>C});const n=["string","number","bigint","symbol"],i=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function s(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(n.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e))return"Buffer";const r=function(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(i.includes(t))return t;return}(e);return r||"Object"}var o=r(2651),a=r(2741);class c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=(0,a.un)(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(){let e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){const r=this.chunks[0];t&&this.cursor>r.length/2?(e=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=(0,a.tP)(r,0,this.cursor)}else e=(0,a.zo)(this.chunks,this.cursor);return t&&this.reset(),e}}var l=r(8912),u=r(2456),h=r(8039),d=r(5779),p=r(8125),f=r(4989),y=r(2386),g=r(9634),m=r(5454),w=r(6453);const v={float64:!1,mapSorter:function(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);const i=r.type.major,s=b[i].compareTokens(r,n);0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone");return s},quickEncodeToken:u.JN};const b=function(){const e=[];return e[o.D.uint.major]=h.Fh,e[o.D.negint.major]=d.UT,e[o.D.bytes.major]=p.hg,e[o.D.string.major]=f.YW,e[o.D.array.major]=y.HF,e[o.D.map.major]=g.KI,e[o.D.tag.major]=m.xy,e[o.D.float.major]=w.tA,e}(),E=new c;class _{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${l.OO} object contains circular references`);return new _(t,e)}}const S={null:new o.W(o.D.null,null),undefined:new o.W(o.D.undefined,void 0),true:new o.W(o.D.true,!0),false:new o.W(o.D.false,!1),emptyArray:new o.W(o.D.array,0),emptyMap:new o.W(o.D.map,0)},A={number:(e,t,r,n)=>Number.isInteger(e)&&Number.isSafeInteger(e)?e>=0?new o.W(o.D.uint,e):new o.W(o.D.negint,e):new o.W(o.D.float,e),bigint:(e,t,r,n)=>e>=BigInt(0)?new o.W(o.D.uint,e):new o.W(o.D.negint,e),Uint8Array:(e,t,r,n)=>new o.W(o.D.bytes,e),string:(e,t,r,n)=>new o.W(o.D.string,e),boolean:(e,t,r,n)=>e?S.true:S.false,null:(e,t,r,n)=>S.null,undefined:(e,t,r,n)=>S.undefined,ArrayBuffer:(e,t,r,n)=>new o.W(o.D.bytes,new Uint8Array(e)),DataView:(e,t,r,n)=>new o.W(o.D.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[S.emptyArray,new o.W(o.D.break)]:S.emptyArray;n=_.createCheck(n,e);const i=[];let s=0;for(const o of e)i[s++]=k(o,r,n);return r.addBreakTokens?[new o.W(o.D.array,e.length),i,new o.W(o.D.break)]:[new o.W(o.D.array,e.length),i]},Object(e,t,r,n){const i="Object"!==t,s=i?e.keys():Object.keys(e),a=i?e.size:s.length;if(!a)return!0===r.addBreakTokens?[S.emptyMap,new o.W(o.D.break)]:S.emptyMap;n=_.createCheck(n,e);const c=[];let l=0;for(const o of s)c[l++]=[k(o,r,n),k(i?e.get(o):e[o],r,n)];return function(e,t){t.mapSorter&&e.sort(t.mapSorter)}(c,r),r.addBreakTokens?[new o.W(o.D.map,a),c,new o.W(o.D.break)]:[new o.W(o.D.map,a),c]}};A.Map=A.Object,A.Buffer=A.Uint8Array;for(const T of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))A[`${T}Array`]=A.DataView;function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const n=s(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||A[n];if("function"===typeof i){const s=i(e,n,t,r);if(null!=s)return s}const o=A[n];if(!o)throw new Error(`${l.OO} unsupported type: ${n}`);return o(e,n,t,r)}function I(e,t,r,n){if(Array.isArray(t))for(const i of t)I(e,i,r,n);else r[t.type.major](e,t,n)}function C(e,t,r){const n=k(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const e=r.quickEncodeToken(n);if(e)return e;const i=t[n.type.major];if(i.encodedSize){const e=i.encodedSize(n,r),t=new c(e);if(i(t,n,r),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return(0,a.Dz)(t.chunks[0])}}return E.reset(),I(E,n,t,r),E.toBytes(!0)}function R(e,t){return t=Object.assign({},v,t),C(e,b,t)}},2456:(e,t,r)=>{"use strict";r.d(t,{JN:()=>w,PS:()=>m,cW:()=>g});var n=r(2651),i=r(8039),s=r(5779),o=r(8125),a=r(4989),c=r(2386),l=r(9634),u=r(5454),h=r(6453),d=r(8912),p=r(2741);function f(e,t,r){throw new Error(`${d.IR} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function y(e){return()=>{throw new Error(`${d.IR} ${e}`)}}const g=[];for(let v=0;v<=23;v++)g[v]=f;g[24]=i.Km,g[25]=i.Zh,g[26]=i.cs,g[27]=i.uN,g[28]=f,g[29]=f,g[30]=f,g[31]=f;for(let v=32;v<=55;v++)g[v]=f;g[56]=s.yr,g[57]=s.r0,g[58]=s.wy,g[59]=s.ec,g[60]=f,g[61]=f,g[62]=f,g[63]=f;for(let v=64;v<=87;v++)g[v]=o.Ii;g[88]=o.UQ,g[89]=o.BS,g[90]=o.zU,g[91]=o.ME,g[92]=f,g[93]=f,g[94]=f,g[95]=y("indefinite length bytes/strings are not supported");for(let v=96;v<=119;v++)g[v]=a.nt;g[120]=a.Bq,g[121]=a.h,g[122]=a.q0,g[123]=a.bc,g[124]=f,g[125]=f,g[126]=f,g[127]=y("indefinite length bytes/strings are not supported");for(let v=128;v<=151;v++)g[v]=c.Ju;g[152]=c.h7,g[153]=c.OC,g[154]=c.lY,g[155]=c.a8,g[156]=f,g[157]=f,g[158]=f,g[159]=c.s5;for(let v=160;v<=183;v++)g[v]=l._K;g[184]=l.G,g[185]=l.qe,g[186]=l.IY,g[187]=l.F2,g[188]=f,g[189]=f,g[190]=f,g[191]=l.ng;for(let v=192;v<=215;v++)g[v]=u.qJ;g[216]=u.ZR,g[217]=u.CF,g[218]=u.vP,g[219]=u.MV,g[220]=f,g[221]=f,g[222]=f,g[223]=f;for(let v=224;v<=243;v++)g[v]=y("simple values are not supported");g[244]=f,g[245]=f,g[246]=f,g[247]=h.h1,g[248]=y("simple values are not supported"),g[249]=h.mW,g[250]=h.GI,g[251]=h.vV,g[252]=f,g[253]=f,g[254]=f,g[255]=h.y7;const m=[];for(let v=0;v<24;v++)m[v]=new n.W(n.D.uint,v,1);for(let v=-1;v>=-24;v--)m[31-v]=new n.W(n.D.negint,v,1);function w(e){switch(e.type){case n.D.false:return(0,p.nI)([244]);case n.D.true:return(0,p.nI)([245]);case n.D.null:return(0,p.nI)([246]);case n.D.bytes:return e.value.length?void 0:(0,p.nI)([64]);case n.D.string:return""===e.value?(0,p.nI)([96]):void 0;case n.D.array:return 0===e.value?(0,p.nI)([128]):void 0;case n.D.map:return 0===e.value?(0,p.nI)([160]):void 0;case n.D.uint:return e.value<24?(0,p.nI)([Number(e.value)]):void 0;case n.D.negint:if(e.value>=-24)return(0,p.nI)([31-Number(e.value)])}}m[64]=new n.W(n.D.bytes,new Uint8Array(0),1),m[96]=new n.W(n.D.string,"",1),m[128]=new n.W(n.D.array,0,1),m[160]=new n.W(n.D.map,0,1),m[244]=new n.W(n.D.false,!1,1),m[245]=new n.W(n.D.true,!0,1),m[246]=new n.W(n.D.null,null,1)},2651:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,W:()=>i});class n{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}n.uint=new n(0,"uint",!0),n.negint=new n(1,"negint",!0),n.bytes=new n(2,"bytes",!0),n.string=new n(3,"string",!0),n.array=new n(4,"array",!1),n.map=new n(5,"map",!1),n.tag=new n(6,"tag",!1),n.float=new n(7,"float",!0),n.false=new n(7,"false",!0),n.true=new n(7,"true",!0),n.null=new n(7,"null",!0),n.undefined=new n(7,"undefined",!0),n.break=new n(7,"break",!0);class i{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}},8204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{code:()=>c,decode:()=>u,encode:()=>l,name:()=>a});var n=r(1149),i=r(6629);const s={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;const t=i.CID.asCID(e);if(!t)return null;const r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new n.WU(n.Dy.tag,42),new n.WU(n.Dy.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};const o={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};o.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return i.CID.decode(e.subarray(1))};const a="dag-cbor",c=113,l=e=>n.cv(e,s),u=e=>n.Jx(e,o)},2087:(e,t,r)=>{"use strict";r.d(t,{kU:()=>h,Dp:()=>u,ET:()=>d});const n=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),y=n;p!==s;)f[y++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===l[f];)f++;for(var y=c.repeat(r);f<o;++f)y+=e.charAt(l[f]);return y},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};var i=r(1250);class s{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class o{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return c(this,e)}}class a{constructor(e){this.decoders=e}or(e){return c(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const c=(e,t)=>new a({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class l{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new s(e,t,r),this.decoder=new o(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const u=e=>{let{name:t,prefix:r,encode:n,decode:i}=e;return new l(t,r,n,i)},h=e=>{let{prefix:t,name:r,alphabet:s}=e;const{encode:o,decode:a}=n(s,r);return u({prefix:t,name:r,encode:o,decode:e=>(0,i.coerce)(a(e))})},d=e=>{let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return u({prefix:r,name:t,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,i,n),decode:e=>((e,t,r,n)=>{const i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let u=0;u<s;++u){const t=i[e[u]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);c=c<<r|t,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(e,i,n,t)})}},1128:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base32:()=>i,base32hex:()=>c,base32hexpad:()=>u,base32hexpadupper:()=>h,base32hexupper:()=>l,base32pad:()=>o,base32padupper:()=>a,base32upper:()=>s,base32z:()=>d});var n=r(2087);const i=(0,n.ET)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,n.ET)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),o=(0,n.ET)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),a=(0,n.ET)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c=(0,n.ET)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),l=(0,n.ET)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),u=(0,n.ET)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h=(0,n.ET)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=(0,n.ET)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},5645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base36:()=>i,base36upper:()=>s});var n=r(2087);const i=(0,n.kU)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),s=(0,n.kU)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},6898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base58btc:()=>i,base58flickr:()=>s});var n=r(2087);const i=(0,n.kU)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,n.kU)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},4426:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base64:()=>i,base64pad:()=>s,base64url:()=>o,base64urlpad:()=>a});var n=r(2087);const i=(0,n.ET)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s=(0,n.ET)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),o=(0,n.ET)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),a=(0,n.ET)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},6759:(e,t,r)=>{"use strict";r.d(t,{gh:()=>T,QB:()=>P,kq:()=>D});var n={};r.r(n),r.d(n,{identity:()=>h});var i={};r.r(i),r.d(i,{base2:()=>d});var s={};r.r(s),r.d(s,{base8:()=>p});var o={};r.r(o),r.d(o,{base10:()=>f});var a={};r.r(a),r.d(a,{base16:()=>y,base16upper:()=>g});var c={};r.r(c),r.d(c,{base256emoji:()=>A});var l=r(2087),u=r(1250);const h=(0,l.Dp)({prefix:"\0",name:"identity",encode:e=>(0,u.toString)(e),decode:e=>(0,u.fromString)(e)}),d=(0,l.ET)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),p=(0,l.ET)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),f=(0,l.kU)({prefix:"9",name:"base10",alphabet:"0123456789"}),y=(0,l.ET)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),g=(0,l.ET)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var m=r(1128),w=r(5645),v=r(6898),b=r(4426);const E=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),_=E.reduce(((e,t,r)=>(e[r]=t,e)),[]),S=E.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const A=(0,l.Dp)({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=_[t]),"")},decode:function(e){const t=[];for(const r of e){const e=S[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var k=r(9400),I=r(173),C=r(2710),R=r(7512);r(3545);const T={...n,...i,...s,...o,...a,...m,...w,...v,...b,...c},D={...k,...I},P={raw:C,json:R}},1250:(e,t,r)=>{"use strict";r.r(t),r.d(t,{coerce:()=>a,empty:()=>n,equals:()=>o,fromHex:()=>s,fromString:()=>l,isBinary:()=>c,toHex:()=>i,toString:()=>u});const n=new Uint8Array(0),i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),s=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):n},o=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},a=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},c=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),l=e=>(new TextEncoder).encode(e),u=e=>(new TextDecoder).decode(e)},6629:(e,t,r)=>{"use strict";r.r(t),r.d(t,{CID:()=>c});var n=r(5136),i=r(8315),s=r(6898),o=r(1128),a=r(1250);class c{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:m,byteLength:m,code:g,version:g,multihash:g,bytes:g,_baseCache:m,asCID:m})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==d)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==p)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return c.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=i.create(e,t);return c.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&i.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;return 0===r?u(t,n,e||s.base58btc.encoder):h(t,n,e||o.base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return w(/^0\.0/,v),!(!e||!e[y]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof c)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:i}=e;return new c(t,r,n,i||f(t,r,n.bytes))}if(null!=e&&!0===e[y]){const{version:t,multihash:r,code:n}=e,s=i.decode(r);return c.create(t,n,s)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==d)throw new Error(`Version 0 CID must use dag-pb (code: ${d}) block encoding`);return new c(e,t,r,r.bytes);case 1:{const n=f(e,t,r.bytes);return new c(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return c.create(0,d,e)}static createV1(e,t){return c.create(1,e,t)}static decode(e){const[t,r]=c.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=c.inspectBytes(e),r=t.size-t.multihashSize,n=(0,a.coerce)(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const s=n.subarray(t.multihashSize-t.digestSize),o=new i.Digest(t.multihashCode,t.digestSize,s,n);return[0===t.version?c.createV0(o):c.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=n.Jx(e.subarray(t));return t+=i,r};let i=r(),s=d;if(18===i?(i=0,t=0):1===i&&(s=r()),0!==i&&1!==i)throw new RangeError(`Invalid CID version ${i}`);const o=t,a=r(),c=r(),l=t+c;return{version:i,codec:s,multihashCode:a,digestSize:c,multihashSize:l-o,size:l}}static parse(e,t){const[r,n]=l(e,t),i=c.decode(n);return i._baseCache.set(r,e),i}}const l=(e,t)=>{switch(e[0]){case"Q":{const r=t||s.base58btc;return[s.base58btc.prefix,r.decode(`${s.base58btc.prefix}${e}`)]}case s.base58btc.prefix:{const r=t||s.base58btc;return[s.base58btc.prefix,r.decode(e)]}case o.base32.prefix:{const r=t||o.base32;return[o.base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},u=(e,t,r)=>{const{prefix:n}=r;if(n!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},h=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},d=112,p=18,f=(e,t,r)=>{const i=n.P$(e),s=i+n.P$(t),o=new Uint8Array(s+r.byteLength);return n.mL(e,o,0),n.mL(t,o,i),o.set(r,s),o},y=Symbol.for("@ipld/js-cid/CID"),g={writable:!1,configurable:!1,enumerable:!0},m={writable:!1,enumerable:!1,configurable:!1},w=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},v="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n"},7512:(e,t,r)=>{"use strict";r.r(t),r.d(t,{code:()=>o,decode:()=>c,encode:()=>a,name:()=>s});const n=new TextEncoder,i=new TextDecoder,s="json",o=512,a=e=>n.encode(JSON.stringify(e)),c=e=>JSON.parse(i.decode(e))},2710:(e,t,r)=>{"use strict";r.r(t),r.d(t,{code:()=>s,decode:()=>a,encode:()=>o,name:()=>i});var n=r(1250);const i="raw",s=85,o=e=>(0,n.coerce)(e),a=e=>(0,n.coerce)(e)},8315:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Digest:()=>c,create:()=>s,decode:()=>o,equals:()=>a});var n=r(1250),i=r(5136);const s=(e,t)=>{const r=t.byteLength,n=i.P$(e),s=n+i.P$(r),o=new Uint8Array(s+r);return i.mL(e,o,0),i.mL(r,o,n),o.set(t,s),new c(e,r,t,o)},o=e=>{const t=(0,n.coerce)(e),[r,s]=i.Jx(t),[o,a]=i.Jx(t.subarray(s)),l=t.subarray(s+a);if(l.byteLength!==o)throw new Error("Incorrect length");return new c(r,o,l,t)},a=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&(0,n.equals)(e.bytes,t.bytes);class c{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}},2231:(e,t,r)=>{"use strict";r.d(t,{D:()=>i});var n=r(8315);const i=e=>{let{name:t,code:r,encode:n}=e;return new s(t,r,n)};class s{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?n.create(this.code,t):t.then((e=>n.create(this.code,e)))}throw Error("Unknown type, must be binary type")}}},173:(e,t,r)=>{"use strict";r.r(t),r.d(t,{identity:()=>o});var n=r(1250),i=r(8315);const s=n.coerce,o={code:0,name:"identity",encode:s,digest:e=>i.create(0,s(e))}},9400:(e,t,r)=>{"use strict";r.r(t),r.d(t,{sha256:()=>s,sha512:()=>o});var n=r(2231);const i=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),s=(0,n.D)({name:"sha2-256",code:18,encode:i("SHA-256")}),o=(0,n.D)({name:"sha2-512",code:19,encode:i("SHA-512")})},3545:(e,t,r)=>{"use strict";r.d(t,{aI:()=>i,k0:()=>n.CID});var n=r(6629),i=(r(5136),r(1250));r(2231),r(8315)},5136:(e,t,r)=>{"use strict";r.d(t,{Jx:()=>g,mL:()=>m,P$:()=>w});var n=function e(t,r,n){r=r||[];var s=n=n||0;for(;t>=i;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-s+1,r},i=Math.pow(2,31);var s=function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(127&n)<<s:(127&n)*Math.pow(2,s),s+=7}while(n>=128);return e.bytes=o-r,i};var o=Math.pow(2,7),a=Math.pow(2,14),c=Math.pow(2,21),l=Math.pow(2,28),u=Math.pow(2,35),h=Math.pow(2,42),d=Math.pow(2,49),p=Math.pow(2,56),f=Math.pow(2,63);const y={encode:n,decode:s,encodingLength:function(e){return e<o?1:e<a?2:e<c?3:e<l?4:e<u?5:e<h?6:e<d?7:e<p?8:e<f?9:10}},g=e=>[y.decode(e),y.decode.bytes],m=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return y.encode(e,t,r),t},w=e=>y.encodingLength(e)},422:(e,t,r)=>{"use strict";r.r(t),r.d(t,{customAlphabet:()=>o,customRandom:()=>s,nanoid:()=>a,random:()=>i,urlAlphabet:()=>n});let n="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=e=>crypto.getRandomValues(new Uint8Array(e)),s=(e,t,r)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,i=-~(1.6*n*t/e.length);return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o="";for(;;){let t=r(i),a=i;for(;a--;)if(o+=e[t[a]&n]||"",o.length===s)return o}}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return s(e,t,i)},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")}},3089:(e,t,r)=>{"use strict";function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}r.d(t,{E:()=>n})},2110:(e,t,r)=>{"use strict";r.r(t),r.d(t,{concat:()=>i});var n=r(3089);function i(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=(0,n.E)(t);let i=0;for(const n of e)r.set(n,i),i+=n.length;return r}},8779:(e,t,r)=>{"use strict";function n(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}r.r(t),r.d(t,{equals:()=>n})},6765:(e,t,r)=>{"use strict";r.r(t),r.d(t,{fromString:()=>i});var n=r(2787);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=n.Z[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}},2051:(e,t,r)=>{"use strict";r.r(t),r.d(t,{toString:()=>i});var n=r(2787);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=n.Z[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}},2787:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(6759),i=r(3089);function s(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const o=s("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),a=s("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=(0,i.E)(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),c={utf8:o,"utf-8":o,hex:n.gh.base16,latin1:a,ascii:a,binary:a,...n.gh}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var i=Object.create(null);__webpack_require__.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,__webpack_require__.d(i,s),i}})(),__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{code:()=>nt,createLink:()=>tt,createNode:()=>et,decode:()=>st,encode:()=>it,name:()=>rt,prepare:()=>Xe,validate:()=>Ze});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{code:()=>ut,decode:()=>dt,encode:()=>ht,name:()=>lt});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{code:()=>Ct,decode:()=>Tt,encode:()=>Rt,name:()=>It});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{RsaPrivateKey:()=>Qi,RsaPublicKey:()=>Yi,fromJwk:()=>Zi,generateKeyPair:()=>es,unmarshalRsaPrivateKey:()=>Ji,unmarshalRsaPublicKey:()=>Xi});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{Ed25519PrivateKey:()=>Qs,Ed25519PublicKey:()=>Ys,generateKeyPair:()=>Zs,generateKeyPairFromSeed:()=>eo,unmarshalEd25519PrivateKey:()=>Js,unmarshalEd25519PublicKey:()=>Xs});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{Secp256k1PrivateKey:()=>oa,Secp256k1PublicKey:()=>sa,generateKeyPair:()=>la,unmarshalSecp256k1PrivateKey:()=>aa,unmarshalSecp256k1PublicKey:()=>ca});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{InvalidValueError:()=>vb,MissingRepoOptionsError:()=>bb,NonReversibleMigrationError:()=>gb,NotInitializedRepoError:()=>mb,RequiredParameterError:()=>wb});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{Decoder:()=>HC,Encoder:()=>qC,PacketType:()=>$C,protocol:()=>KC});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{RsaPrivateKey:()=>_N,RsaPublicKey:()=>EN,fromJwk:()=>kN,generateKeyPair:()=>IN,unmarshalRsaPrivateKey:()=>SN,unmarshalRsaPublicKey:()=>AN});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{Ed25519PrivateKey:()=>DN,Ed25519PublicKey:()=>TN,generateKeyPair:()=>xN,generateKeyPairFromSeed:()=>ON,unmarshalEd25519PrivateKey:()=>PN,unmarshalEd25519PublicKey:()=>NN});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{Secp256k1PrivateKey:()=>UN,Secp256k1PublicKey:()=>MN,generateKeyPair:()=>zN,unmarshalSecp256k1PrivateKey:()=>jN,unmarshalSecp256k1PublicKey:()=>FN});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{abortedError:()=>JL,notFoundError:()=>QL});var d,p=__webpack_require__(2791),f=__webpack_require__(4164);function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(d||(d={}));var g=function(e){return e};var m="beforeunload",w="popstate";function v(e){void 0===e&&(e={});var t=e.window,r=void 0===t?document.defaultView:t,n=r.history;function i(){var e=A(r.location.hash.substr(1)),t=e.pathname,i=void 0===t?"/":t,s=e.search,o=void 0===s?"":s,a=e.hash,c=void 0===a?"":a,l=n.state||{};return[l.idx,g({pathname:i,search:o,hash:c,state:l.usr||null,key:l.key||"default"})]}var s=null;function o(){if(s)p.call(s),s=null;else{var e=d.Pop,t=i(),r=t[0],n=t[1];if(p.length){if(null!=r){var o=l-r;o&&(s={action:e,location:n,retry:function(){R(-1*o)}},R(o))}}else C(e)}}r.addEventListener(w,o),r.addEventListener("hashchange",(function(){S(i()[1])!==S(u)&&o()}));var a=d.Pop,c=i(),l=c[0],u=c[1],h=E(),p=E();function f(e){return function(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var n=r.location.href,i=n.indexOf("#");t=-1===i?n:n.slice(0,i)}return t}()+"#"+("string"===typeof e?e:S(e))}function v(e,t){return void 0===t&&(t=null),g(y({pathname:u.pathname,hash:"",search:""},"string"===typeof e?A(e):e,{state:t,key:_()}))}function k(e,t){return[{usr:e.state,key:e.key,idx:t},f(e)]}function I(e,t,r){return!p.length||(p.call({action:e,location:t,retry:r}),!1)}function C(e){a=e;var t=i();l=t[0],u=t[1],h.call({action:a,location:u})}function R(e){n.go(e)}null==l&&(l=0,n.replaceState(y({},n.state,{idx:l}),""));var T={get action(){return a},get location(){return u},createHref:f,push:function e(t,i){var s=d.Push,o=v(t,i);if(I(s,o,(function(){e(t,i)}))){var a=k(o,l+1),c=a[0],u=a[1];try{n.pushState(c,"",u)}catch(h){r.location.assign(u)}C(s)}},replace:function e(t,r){var i=d.Replace,s=v(t,r);if(I(i,s,(function(){e(t,r)}))){var o=k(s,l),a=o[0],c=o[1];n.replaceState(a,"",c),C(i)}},go:R,back:function(){R(-1)},forward:function(){R(1)},listen:function(e){return h.push(e)},block:function(e){var t=p.push(e);return 1===p.length&&r.addEventListener(m,b),function(){t(),p.length||r.removeEventListener(m,b)}}};return T}function b(e){e.preventDefault(),e.returnValue=""}function E(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function _(){return Math.random().toString(36).substr(2,8)}function S(e){var t=e.pathname,r=void 0===t?"/":t,n=e.search,i=void 0===n?"":n,s=e.hash,o=void 0===s?"":s;return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(r+="#"===o.charAt(0)?o:"#"+o),r}function A(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}const k=(0,p.createContext)(null);const I=(0,p.createContext)(null);const C=(0,p.createContext)({outlet:null,matches:[]});function R(e,t){if(!e)throw new Error(t)}function T(e,t,r){void 0===r&&(r="/");let n=M(("string"===typeof t?A(t):t).pathname||"/",r);if(null==n)return null;let i=D(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=O(i[o],n);return s}function D(e,t,r,n){return void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n=""),e.forEach(((e,i)=>{let s={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(n)||R(!1),s.relativePath=s.relativePath.slice(n.length));let o=U([n,s.relativePath]),a=r.concat(s);e.children&&e.children.length>0&&(!0===e.index&&R(!1),D(e.children,t,a,o)),(null!=e.path||e.index)&&t.push({path:o,score:x(o,e.index),routesMeta:a})})),t}const P=/^:\w+$/,N=e=>"*"===e;function x(e,t){let r=e.split("/"),n=r.length;return r.some(N)&&(n+=-2),t&&(n+=2),r.filter((e=>!N(e))).reduce(((e,t)=>e+(P.test(t)?3:""===t?1:10)),n)}function O(e,t){let{routesMeta:r}=e,n={},i="/",s=[];for(let o=0;o<r.length;++o){let e=r[o],a=o===r.length-1,c="/"===i?t:t.slice(i.length)||"/",l=B({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},c);if(!l)return null;Object.assign(n,l.params);let u=e.route;s.push({params:n,pathname:U([i,l.pathname]),pathnameBase:j(U([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=U([i,l.pathnameBase]))}return s}function B(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,((e,t)=>(n.push(t),"([^\\/]+)")));e.endsWith("*")?(n.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=r?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1),c=n.reduce(((e,t,r)=>{if("*"===t){let e=a[r]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return e}}(a[r]||""),e}),{});return{params:c,pathname:s,pathnameBase:o,pattern:e}}function L(e,t,r){let n,i="string"===typeof e?A(e):e,s=""===e||""===i.pathname?"/":i.pathname;if(null==s)n=r;else{let e=t.length-1;if(s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}n=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:i=""}="string"===typeof e?A(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:F(n),hash:z(i)}}(i,n);return s&&"/"!==s&&s.endsWith("/")&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=e.charAt(t.length);return r&&"/"!==r?null:e.slice(t.length)||"/"}const U=e=>e.join("/").replace(/\/\/+/g,"/"),j=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function V(e){K()||R(!1);let{basename:t,navigator:r}=(0,p.useContext)(k),{hash:n,pathname:i,search:s}=G(e),o=i;if("/"!==t){let r=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?A(e).pathname:e.pathname}(e),n=null!=r&&r.endsWith("/");o="/"===i?t+(n?"/":""):U([t,i])}return r.createHref({pathname:o,search:s,hash:n})}function K(){return null!=(0,p.useContext)(I)}function $(){return K()||R(!1),(0,p.useContext)(I).location}function q(){K()||R(!1);let{basename:e,navigator:t}=(0,p.useContext)(k),{matches:r}=(0,p.useContext)(C),{pathname:n}=$(),i=JSON.stringify(r.map((e=>e.pathnameBase))),s=(0,p.useRef)(!1);(0,p.useEffect)((()=>{s.current=!0}));let o=(0,p.useCallback)((function(r,o){if(void 0===o&&(o={}),!s.current)return;if("number"===typeof r)return void t.go(r);let a=L(r,JSON.parse(i),n);"/"!==e&&(a.pathname=U([e,a.pathname])),(o.replace?t.replace:t.push)(a,o.state)}),[e,t,i,n]);return o}const H=(0,p.createContext)(null);function W(){let{matches:e}=(0,p.useContext)(C),t=e[e.length-1];return t?t.params:{}}function G(e){let{matches:t}=(0,p.useContext)(C),{pathname:r}=$(),n=JSON.stringify(t.map((e=>e.pathnameBase)));return(0,p.useMemo)((()=>L(e,JSON.parse(n),r)),[e,n,r])}function Y(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight(((r,n,i)=>(0,p.createElement)(C.Provider,{children:void 0!==n.route.element?n.route.element:r,value:{outlet:r,matches:t.concat(e.slice(0,i+1))}})),null)}function Q(e){return function(e){let t=(0,p.useContext)(C).outlet;return t?(0,p.createElement)(H.Provider,{value:e},t):t}(e.context)}function J(e){R(!1)}function X(e){let{basename:t="/",children:r=null,location:n,navigationType:i=d.Pop,navigator:s,static:o=!1}=e;K()&&R(!1);let a=j(t),c=(0,p.useMemo)((()=>({basename:a,navigator:s,static:o})),[a,s,o]);"string"===typeof n&&(n=A(n));let{pathname:l="/",search:u="",hash:h="",state:f=null,key:y="default"}=n,g=(0,p.useMemo)((()=>{let e=M(l,a);return null==e?null:{pathname:e,search:u,hash:h,state:f,key:y}}),[a,l,u,h,f,y]);return null==g?null:(0,p.createElement)(k.Provider,{value:c},(0,p.createElement)(I.Provider,{children:r,value:{location:g,navigationType:i}}))}function Z(e){let{children:t,location:r}=e;return function(e,t){K()||R(!1);let{matches:r}=(0,p.useContext)(C),n=r[r.length-1],i=n?n.params:{},s=(n&&n.pathname,n?n.pathnameBase:"/");n&&n.route;let o,a=$();if(t){var c;let e="string"===typeof t?A(t):t;"/"===s||(null==(c=e.pathname)?void 0:c.startsWith(s))||R(!1),o=e}else o=a;let l=o.pathname||"/",u=T(e,{pathname:"/"===s?l:l.slice(s.length)||"/"});return Y(u&&u.map((e=>Object.assign({},e,{params:Object.assign({},i,e.params),pathname:U([s,e.pathname]),pathnameBase:"/"===e.pathnameBase?s:U([s,e.pathnameBase])}))),r)}(ee(t),r)}function ee(e){let t=[];return p.Children.forEach(e,(e=>{if(!(0,p.isValidElement)(e))return;if(e.type===p.Fragment)return void t.push.apply(t,ee(e.props.children));e.type!==J&&R(!1);let r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=ee(e.props.children)),t.push(r)})),t}function te(){return te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}function re(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}const ne=["onClick","reloadDocument","replace","state","target","to"],ie=["aria-current","caseSensitive","className","end","style","to","children"];function se(e){let{basename:t,children:r,window:n}=e,i=(0,p.useRef)();null==i.current&&(i.current=v({window:n}));let s=i.current,[o,a]=(0,p.useState)({action:s.action,location:s.location});return(0,p.useLayoutEffect)((()=>s.listen(a)),[s]),(0,p.createElement)(X,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:s})}const oe=(0,p.forwardRef)((function(e,t){let{onClick:r,reloadDocument:n,replace:i=!1,state:s,target:o,to:a}=e,c=re(e,ne),l=V(a),u=function(e,t){let{target:r,replace:n,state:i}=void 0===t?{}:t,s=q(),o=$(),a=G(e);return(0,p.useCallback)((t=>{if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();let r=!!n||S(o)===S(a);s(e,{replace:r,state:i})}}),[o,s,a,n,i,r,e])}(a,{replace:i,state:s,target:o});return(0,p.createElement)("a",te({},c,{href:l,onClick:function(e){r&&r(e),e.defaultPrevented||n||u(e)},ref:t,target:o}))}));const ae=(0,p.forwardRef)((function(e,t){let{"aria-current":r="page",caseSensitive:n=!1,className:i="",end:s=!1,style:o,to:a,children:c}=e,l=re(e,ie),u=$(),h=G(a),d=u.pathname,f=h.pathname;n||(d=d.toLowerCase(),f=f.toLowerCase());let y,g=d===f||!s&&d.startsWith(f)&&"/"===d.charAt(f.length),m=g?r:void 0;y="function"===typeof i?i({isActive:g}):[i,g?"active":null].filter(Boolean).join(" ");let w="function"===typeof o?o({isActive:g}):o;return(0,p.createElement)(oe,te({},l,{"aria-current":m,className:y,ref:t,style:w,to:a}),"function"===typeof c?c({isActive:g}):c)}));function ce(e){let t=(0,p.useRef)(le(e)),r=$(),n=(0,p.useMemo)((()=>{let e=le(r.search);for(let r of t.current.keys())e.has(r)||t.current.getAll(r).forEach((t=>{e.append(r,t)}));return e}),[r.search]),i=q();return[n,(0,p.useCallback)(((e,t)=>{i("?"+le(e),t)}),[i])]}function le(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map((e=>[r,e])):[[r,n]])}),[]))}const ue=__webpack_require__(9842);var he=__webpack_require__(6927),de=__webpack_require__(8392),pe=__webpack_require__(6898),fe=__webpack_require__(1128),ye=__webpack_require__(4426);function ge(e){return Object.assign(de(e),{error:de(`${e}:error`),trace:de(`${e}:trace`)})}de.formatters.b=e=>null==e?"undefined":pe.base58btc.baseEncode(e),de.formatters.t=e=>null==e?"undefined":fe.base32.baseEncode(e),de.formatters.m=e=>null==e?"undefined":ye.base64.baseEncode(e),de.formatters.p=e=>null==e?"undefined":e.toString(),de.formatters.c=e=>null==e?"undefined":e.toString(),de.formatters.k=e=>null==e?"undefined":e.toString();var me=__webpack_require__(7963),we=__webpack_require__(886);const ve=we.Reader,be=we.Writer,Ee=we.util,_e=we.roots["ipfs-unixfs"]||(we.roots["ipfs-unixfs"]={}),Se=_e.Data=(()=>{function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Type=0,e.prototype.Data=Ee.newBuffer([]),e.prototype.filesize=Ee.Long?Ee.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=Ee.emptyArray,e.prototype.hashType=Ee.Long?Ee.Long.fromBits(0,0,!0):0,e.prototype.fanout=Ee.Long?Ee.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=be.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&_e.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof ve||(e=ve.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new _e.Data;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),2===(7&i))for(var s=e.uint32()+e.pos;e.pos<s;)n.blocksizes.push(e.uint64());else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=_e.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("Type"))throw Ee.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof _e.Data)return e;var t=new _e.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"===typeof e.Data?Ee.base64.decode(e.Data,t.Data=Ee.newBuffer(Ee.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(Ee.Long?(t.filesize=Ee.Long.fromValue(e.filesize)).unsigned=!0:"string"===typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"===typeof e.filesize?t.filesize=e.filesize:"object"===typeof e.filesize&&(t.filesize=new Ee.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)Ee.Long?(t.blocksizes[r]=Ee.Long.fromValue(e.blocksizes[r])).unsigned=!0:"string"===typeof e.blocksizes[r]?t.blocksizes[r]=parseInt(e.blocksizes[r],10):"number"===typeof e.blocksizes[r]?t.blocksizes[r]=e.blocksizes[r]:"object"===typeof e.blocksizes[r]&&(t.blocksizes[r]=new Ee.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0))}if(null!=e.hashType&&(Ee.Long?(t.hashType=Ee.Long.fromValue(e.hashType)).unsigned=!0:"string"===typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"===typeof e.hashType?t.hashType=e.hashType:"object"===typeof e.hashType&&(t.hashType=new Ee.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(Ee.Long?(t.fanout=Ee.Long.fromValue(e.fanout)).unsigned=!0:"string"===typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"===typeof e.fanout?t.fanout=e.fanout:"object"===typeof e.fanout&&(t.fanout=new Ee.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!==typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=_e.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocksizes=[]),t.defaults){if(r.Type=t.enums===String?"Raw":0,t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=Ee.newBuffer(r.Data))),Ee.Long){var n=new Ee.Long(0,0,!0);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if(Ee.Long){n=new Ee.Long(0,0,!0);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if(Ee.Long){n=new Ee.Long(0,0,!0);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(r.Type=t.enums===String?_e.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?Ee.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"===typeof e.filesize?r.filesize=t.longs===String?String(e.filesize):e.filesize:r.filesize=t.longs===String?Ee.Long.prototype.toString.call(e.filesize):t.longs===Number?new Ee.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var i=0;i<e.blocksizes.length;++i)"number"===typeof e.blocksizes[i]?r.blocksizes[i]=t.longs===String?String(e.blocksizes[i]):e.blocksizes[i]:r.blocksizes[i]=t.longs===String?Ee.Long.prototype.toString.call(e.blocksizes[i]):t.longs===Number?new Ee.LongBits(e.blocksizes[i].low>>>0,e.blocksizes[i].high>>>0).toNumber(!0):e.blocksizes[i]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"===typeof e.hashType?r.hashType=t.longs===String?String(e.hashType):e.hashType:r.hashType=t.longs===String?Ee.Long.prototype.toString.call(e.hashType):t.longs===Number?new Ee.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"===typeof e.fanout?r.fanout=t.longs===String?String(e.fanout):e.fanout:r.fanout=t.longs===String?Ee.Long.prototype.toString.call(e.fanout):t.longs===Number?new Ee.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(r.mtime=_e.UnixTime.toObject(e.mtime,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e.DataType=function(){const e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e})(),Ae=(_e.UnixTime=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Seconds=Ee.Long?Ee.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=be.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof ve||(e=ve.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new _e.UnixTime;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("Seconds"))throw Ee.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof _e.UnixTime)return e;var t=new _e.UnixTime;return null!=e.Seconds&&(Ee.Long?(t.Seconds=Ee.Long.fromValue(e.Seconds)).unsigned=!1:"string"===typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"===typeof e.Seconds?t.Seconds=e.Seconds:"object"===typeof e.Seconds&&(t.Seconds=new Ee.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(Ee.Long){var n=new Ee.Long(0,0,!1);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"===typeof e.Seconds?r.Seconds=t.longs===String?String(e.Seconds):e.Seconds:r.Seconds=t.longs===String?Ee.Long.prototype.toString.call(e.Seconds):t.longs===Number?new Ee.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=e.FractionalNanoseconds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e})(),_e.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=be.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof ve||(e=ve.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new _e.Metadata;e.pos<r;){var i=e.uint32();if(i>>>3===1)n.MimeType=e.string();else e.skipType(7&i)}return n},e.fromObject=function(e){if(e instanceof _e.Metadata)return e;var t=new _e.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(r.MimeType=e.MimeType),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e})(),Se),ke=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],Ie=["directory","hamt-sharded-directory"],Ce=parseInt("0644",8),Re=parseInt("0755",8);function Te(e){if(null!=e)return"number"===typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function De(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw me(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}class Pe{static unmarshal(e){const t=Ae.decode(e),r=Ae.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),n=new Pe({type:ke[r.Type],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime?{secs:r.mtime.Seconds,nsecs:r.mtime.FractionalNanoseconds}:void 0});return n._originalMode=r.mode||0,n}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"file"};const{type:t,data:r,blockSizes:n,hashType:i,fanout:s,mtime:o,mode:a}=e;if(t&&!ke.includes(t))throw me(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t||"file",this.data=r,this.hashType=i,this.fanout=s,this.blockSizes=n||[],this._originalMode=0,this.mode=Te(a),o&&(this.mtime=De(o),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(e){this._mode=this.isDirectory()?Re:Ce;const t=Te(e);void 0!==t&&(this._mode=t)}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&Ie.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0;let e=0;return this.blockSizes.forEach((t=>{e+=t})),this.data&&(e+=this.data.length),e}marshal(){let e;switch(this.type){case"raw":e=Ae.DataType.Raw;break;case"directory":e=Ae.DataType.Directory;break;case"file":e=Ae.DataType.File;break;case"metadata":e=Ae.DataType.Metadata;break;case"symlink":e=Ae.DataType.Symlink;break;case"hamt-sharded-directory":e=Ae.DataType.HAMTShard;break;default:throw me(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t,r,n=this.data;if(this.data&&this.data.length||(n=void 0),null!=this.mode&&(t=4294963200&this._originalMode|(Te(this.mode)||0),t!==Ce||this.isDirectory()||(t=void 0),t===Re&&this.isDirectory()&&(t=void 0)),null!=this.mtime){const e=De(this.mtime);e&&(r={Seconds:e.secs,FractionalNanoseconds:e.nsecs},0===r.FractionalNanoseconds&&delete r.FractionalNanoseconds)}const i={Type:e,Data:n,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:t,mtime:r};return Ae.encode(i).finish()}}var Ne=__webpack_require__(6629);const xe=new TextDecoder;function Oe(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const i=e[t++];if(r+=n<28?(127&i)<<n:(127&i)*2**n,i<128)break}return[r,t]}function Be(e,t){let r;[r,t]=Oe(e,t);const n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Le(e,t){let r;return[r,t]=Oe(e,t),[7&r,r>>3,t]}function Me(e){const t={},r=e.length;let n=0;for(;n<r;){let r,i;if([r,i,n]=Le(e,n),1===i){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=Be(e,n)}else if(2===i){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=Be(e,n),t.Name=xe.decode(i)}else{if(3!==i)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${i}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Tsize`);[t.Tsize,n]=Oe(e,n)}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}const Ue=new TextEncoder,je=2**32;function Fe(e,t){let r=t.length;if("number"===typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=Ke(t,r,e.Tsize)-1,t[r]=24}if("string"===typeof e.Name){const n=Ue.encode(e.Name);r-=n.length,t.set(n,r),r=Ke(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=Ke(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function ze(e){const t=function(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+$e(r)}if(e.Links)for(const r of e.Links){const e=Ve(r);t+=1+e+$e(e)}return t}(e),r=new Uint8Array(t);let n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=Ke(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let i=e.Links.length-1;i>=0;i--){const t=Fe(e.Links[i],r.subarray(0,n));n-=t,n=Ke(r,n,t)-1,r[n]=18}return r}function Ve(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+$e(r)}if("string"===typeof e.Name){const r=Ue.encode(e.Name).length;t+=1+r+$e(r)}return"number"===typeof e.Tsize&&(t+=1+$e(e.Tsize)),t}function Ke(e,t,r){const n=t-=$e(r);for(;r>=2147483648;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function $e(e){return e%2===0&&e++,Math.floor((function(e){let t=0;e>=je&&(e=Math.floor(e/je),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+qe[e]}(e)+6)/7)}const qe=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],He=["Data","Links"],We=["Hash","Name","Tsize"],Ge=new TextEncoder;function Ye(e,t){if(e===t)return 0;const r=e.Name?Ge.encode(e.Name):[],n=t.Name?Ge.encode(t.Name):[];let i=r.length,s=n.length;for(let o=0,a=Math.min(i,s);o<a;++o)if(r[o]!==n[o]){i=r[o],s=n[o];break}return i<s?-1:s<i?1:0}function Qe(e,t){return!Object.keys(e).some((e=>!t.includes(e)))}function Je(e){if("object"===typeof e.asCID){const t=Ne.CID.asCID(e);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(e.Hash){let n=Ne.CID.asCID(e.Hash);try{n||("string"===typeof e.Hash?n=Ne.CID.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=Ne.CID.decode(e.Hash)))}catch(r){throw new TypeError(`Invalid DAG-PB form: ${r.message}`)}n&&(t.Hash=n)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"===typeof e.Name&&(t.Name=e.Name),"number"===typeof e.Tsize&&(t.Tsize=e.Tsize),t}function Xe(e){if((e instanceof Uint8Array||"string"===typeof e)&&(e={Data:e}),"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"===typeof e.Data)t.Data=Ge.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(Je),t.Links.sort(Ye)}else t.Links=[];return t}function Ze(e){if(!e||"object"!==typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!Qe(e,He))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||"object"!==typeof r||Array.isArray(r))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!Qe(r,We))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!==typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize&&("number"!==typeof r.Tsize||r.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===Ye(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Xe({Data:e,Links:t})}function tt(e,t,r){return Je({Hash:r,Name:e,Tsize:t})}const rt="dag-pb",nt=112;function it(e){Ze(e);const t={};return e.Links&&(t.Links=e.Links.map((e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),e.Data&&(t.Data=e.Data),ze(t)}function st(e){const t=function(e){const t=e.length;let r,n,i=0,s=!1;for(;i<t;){let t,o;if([t,o,i]=Le(e,i),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===o){if(n)throw new Error("protobuf: (PBNode) duplicate Data section");[n,i]=Be(e,i),r&&(s=!0)}else{if(2!==o)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${o}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let t;r||(r=[]),[t,i]=Be(e,i),r.push(Me(t))}}}if(i>t)throw new Error("protobuf: (PBNode) unexpected end of data");const o={};return n&&(o.Data=n),o.Links=r||[],o}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map((e=>{const t={};try{t.Hash=Ne.CID.decode(e.Hash)}catch(r){}if(!t.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t}))),r}var ot=__webpack_require__(1149);const at={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;const t=Ne.CID.asCID(e);if(!t)return null;const r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new ot.WU(ot.Dy.tag,42),new ot.WU(ot.Dy.bytes,r)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};const ct={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};ct.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return Ne.CID.decode(e.subarray(1))};const lt="dag-cbor",ut=113,ht=e=>ot.cv(e,at),dt=e=>ot.Jx(e,ct);var pt=__webpack_require__(3545),ft=__webpack_require__(2651),yt=__webpack_require__(310),gt=__webpack_require__(8912),mt=__webpack_require__(2741);class wt extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===ft.D.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===ft.D.map&&(t.elements++,1!==t.elements&&(t.elements%2===1?e.push([44]):e.push([58]))))}[ft.D.uint.major](e,t){this.prefix(e);const r=String(t.value),n=[];for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);e.push(n)}[ft.D.negint.major](e,t){this[ft.D.uint.major](e,t)}[ft.D.bytes.major](e,t){throw new Error(`${gt.OO} unsupported type: Uint8Array`)}[ft.D.string.major](e,t){this.prefix(e);const r=(0,mt.mL)(JSON.stringify(t.value));e.push(r.length>32?(0,mt.Dz)(r):r)}[ft.D.array.major](e,t){this.prefix(e),this.inRecursive.push({type:ft.D.array,elements:0}),e.push([91])}[ft.D.map.major](e,t){this.prefix(e),this.inRecursive.push({type:ft.D.map,elements:0}),e.push([123])}[ft.D.tag.major](e,t){}[ft.D.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===ft.D.array)e.push([93]);else{if(t.type!==ft.D.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${gt.OO} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const r=String(t.value),n=[];let i=!1;for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s),i||46!==n[s]&&101!==n[s]&&69!==n[s]||(i=!0);i||(n.push(46),n.push(48)),e.push(n)}}const vt={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${gt.OO} complex map keys are not supported`);const r=e[0],n=t[0];if(r.type!==ft.D.string||n.type!==ft.D.string)throw new Error(`${gt.OO} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${gt.OO} unexpected duplicate map keys, this is not supported`)}};var bt=__webpack_require__(2548);class Et{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${gt.IR} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw new Error(`${gt.IR} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let t=!1,r=!1;const n=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this.pos++}};if(45===this.ch()&&(t=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new ft.W(ft.D.uint,0,this.pos-e);this.pos++,r=!0}if(n([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw new Error(`${gt.IR} unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(r)throw new Error(`${gt.IR} unexpected token at position ${this.pos}`);r=!0,this.pos++,n([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(r=!0,this.pos++,this.done()||43!==this.ch()&&45!==this.ch()||this.pos++,n([48,49,50,51,52,53,54,55,56,57]));const i=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),s=parseFloat(i);return r?new ft.W(ft.D.float,s,this.pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new ft.W(s>=0?ft.D.uint:ft.D.negint,s,this.pos-e):new ft.W(s>=0?ft.D.uint:ft.D.negint,BigInt(i),this.pos-e)}parseString(){if(34!==this.ch())throw new Error(`${gt.IR} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let i=this.pos,s=0;i<this.data.length&&s<65536;i++,s++){const e=this.data[i];if(92===e||e<32||e>=128)break;if(34===e){const e=String.fromCharCode.apply(null,this.data.subarray(this.pos,i));return this.pos=i+1,new ft.W(ft.D.string,e,s)}}const e=this.pos,t=[],r=()=>{if(this.pos+4>=this.data.length)throw new Error(`${gt.IR} unexpected end of unicode escape sequence at position ${this.pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${gt.IR} unexpected unicode escape character at position ${this.pos}`);t=t-65+10}e=16*e+t,this.pos++}return e},n=()=>{const e=this.ch();let r,n,i,s,o=null,a=e>239?4:e>223?3:e>191?2:1;if(this.pos+a>this.data.length)throw new Error(`${gt.IR} unexpected unicode sequence at position ${this.pos}`);switch(a){case 1:e<128&&(o=e);break;case 2:r=this.data[this.pos+1],128===(192&r)&&(s=(31&e)<<6|63&r,s>127&&(o=s));break;case 3:r=this.data[this.pos+1],n=this.data[this.pos+2],128===(192&r)&&128===(192&n)&&(s=(15&e)<<12|(63&r)<<6|63&n,s>2047&&(s<55296||s>57343)&&(o=s));break;case 4:r=this.data[this.pos+1],n=this.data[this.pos+2],i=this.data[this.pos+3],128===(192&r)&&128===(192&n)&&128===(192&i)&&(s=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&i,s>65535&&s<1114112&&(o=s))}null===o?(o=65533,a=1):o>65535&&(o-=65536,t.push(o>>>10&1023|55296),o=56320|1023&o),t.push(o),this.pos+=a};for(;!this.done();){const i=this.ch();let s;switch(i){case 92:if(this.pos++,this.done())throw new Error(`${gt.IR} unexpected string termination at position ${this.pos}`);switch(s=this.ch(),this.pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(r());break;default:throw new Error(`${gt.IR} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new ft.W(ft.D.string,(0,mt.Pu)(t),this.pos-e);default:if(i<32)throw new Error(`${gt.IR} invalid control character at position ${this.pos}`);i<128?(t.push(i),this.pos++):n()}}throw new Error(`${gt.IR} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new ft.W(ft.D.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new ft.W(ft.D.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new ft.W(ft.D.null,null,4);case 102:return this.expect([102,97,108,115,101]),new ft.W(ft.D.false,!1,5);case 116:return this.expect([116,114,117,101]),new ft.W(ft.D.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${gt.IR} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new ft.W(ft.D.break,void 0,1);if(44!==this.ch())throw new Error(`${gt.IR} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this.pos++,this.skipWhitespace(),new ft.W(ft.D.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new ft.W(ft.D.break,void 0,1);if(44!==this.ch())throw new Error(`${gt.IR} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new ft.W(ft.D.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${gt.IR} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${gt.IR} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function _t(e){const t=ye.base64.encode(e).slice(1);return[new ot.WU(ot.Dy.map,1/0,1),new ot.WU(ot.Dy.string,"/",1),new ot.WU(ot.Dy.map,1/0,1),new ot.WU(ot.Dy.string,"bytes",5),new ot.WU(ot.Dy.string,t,t.length),new ot.WU(ot.Dy.break,void 0,1),new ot.WU(ot.Dy.break,void 0,1)]}const St={typeEncoders:{Object:function(e){if(e.asCID!==e)return null;const t=pt.k0.asCID(e);if(!t)return null;const r=t.toString();return[new ot.WU(ot.Dy.map,1/0,1),new ot.WU(ot.Dy.string,"/",1),new ot.WU(ot.Dy.string,r,r.length),new ot.WU(ot.Dy.break,void 0,1)]},Uint8Array:_t,Buffer:_t,undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class At extends Et{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===ot.Dy.map){const e=this._next();if(e.type===ot.Dy.string&&"/"===e.value){const e=this._next();if(e.type===ot.Dy.string){if(this._next().type!==ot.Dy.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new ot.WU(ot.Dy.tag,42,0)}if(e.type===ot.Dy.map){const e=this._next();if(e.type===ot.Dy.string&&"bytes"===e.value){const e=this._next();if(e.type===ot.Dy.string){for(let e=0;e<2;e++){if(this._next().type!==ot.Dy.break)throw new Error("Invalid encoded Bytes form")}const t=ye.base64.decode(`m${e.value}`);return new ot.WU(ot.Dy.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const kt={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};kt.tags[42]=pt.k0.parse;const It="dag-json",Ct=297,Rt=e=>{return t=e,r=St,r=Object.assign({},vt,r),(0,yt.w$)(t,new wt,r);var t,r},Tt=e=>function(e,t){return t=Object.assign({tokenizer:new Et(e,t)},t),(0,bt.Jx)(e,t)}(e,Object.assign(kt,{tokenizer:new At(e,kt)}));var Dt=__webpack_require__(8990),Pt=__webpack_require__.t(Dt,2),Nt=__webpack_require__(173),xt=__webpack_require__(6759);class Ot extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not initialized"),this.name="NotInitializedError",this.code=Ot.code}}Ot.code="ERR_NOT_INITIALIZED";class Bt extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot initialize an initializing node"),this.name="AlreadyInitializingError",this.code=Lt.code}}Bt.code="ERR_ALREADY_INITIALIZING";class Lt extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot re-initialize an initialized node"),this.name="AlreadyInitializedError",this.code=Lt.code}}Lt.code="ERR_ALREADY_INITIALIZED";class Mt extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not started"),this.name="NotStartedError",this.code=Mt.code}}Mt.code="ERR_NOT_STARTED";class Ut extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already startin"),this.name="AlreadyStartingError",this.code=Ut.code}}Ut.code="ERR_ALREADY_STARTING";class jt extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cannot start, already started"),this.name="AlreadyStartedError",this.code=jt.code}}jt.code="ERR_ALREADY_STARTED";class Ft extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not enabled"),this.name="NotEnabledError",this.code=Ft.code}}Ft.code="ERR_NOT_ENABLED";var zt=__webpack_require__(6765),Vt=__webpack_require__(2262),Kt=__webpack_require__(422),$t=__webpack_require__(2051);const qt="/",Ht=(new TextEncoder).encode(qt),Wt=Ht[0];class Gt{constructor(e,t){if("string"===typeof e)this._buf=(0,zt.fromString)(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==Wt)throw new Error("Invalid key")}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";return(0,$t.toString)(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Gt(e.join(qt))}static random(){return new Gt((0,Kt.nanoid)().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||"string"===typeof e?new Gt(e):e.uint8Array?new Gt(e.uint8Array()):null}clean(){if(this._buf&&0!==this._buf.byteLength||(this._buf=Ht),this._buf[0]!==Wt){const e=new Uint8Array(this._buf.byteLength+1);e.fill(Wt,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Wt;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;const e=t[n],i=r[n];if(e<i)return!0;if(e>i)return!1}return t.length<r.length}reverse(){return Gt.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(qt).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new Gt(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(qt)||(e+=qt),e+=this.type(),new Gt(e)}parent(){const e=this.list();return 1===e.length?new Gt(qt):new Gt(e.slice(0,-1).join(qt))}child(e){return this.toString()===qt?e:e.toString()===qt?this:new Gt(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Gt.withNamespaces([...this.namespaces(),...(n=t.map((e=>e.namespaces())),[].concat(...n))]);var n}}var Yt=__webpack_require__(7683),Qt=__webpack_require__(6622);let Jt=/(\x2D?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{1031F}\u{1032D}-\u{10340}\u{10342}-\u{10349}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{10400}-\u{1049D}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10570}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10860}-\u{10876}\u{10880}-\u{1089E}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{10900}-\u{10915}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BE}\u{109BF}\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A60}-\u{10A7C}\u{10A80}-\u{10A9C}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B60}-\u{10B72}\u{10B80}-\u{10B91}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10D00}-\u{10D23}\u{10E80}-\u{10EA9}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F1C}\u{10F27}\u{10F30}-\u{10F45}\u{10F70}-\u{10F81}\u{10FB0}-\u{10FC4}\u{10FE0}-\u{10FF6}\u{11003}-\u{11037}\u{11071}\u{11072}\u{11075}\u{11083}-\u{110AF}\u{110D0}-\u{110E8}\u{11103}-\u{11126}\u{11144}\u{11147}\u{11150}-\u{11172}\u{11176}\u{11183}-\u{111B2}\u{111C1}-\u{111C4}\u{111DA}\u{111DC}\u{11200}-\u{11211}\u{11213}-\u{1122B}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112DE}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}\u{11350}\u{1135D}-\u{11361}\u{11400}-\u{11434}\u{11447}-\u{1144A}\u{1145F}-\u{11461}\u{11480}-\u{114AF}\u{114C4}\u{114C5}\u{114C7}\u{11580}-\u{115AE}\u{115D8}-\u{115DB}\u{11600}-\u{1162F}\u{11644}\u{11680}-\u{116AA}\u{116B8}\u{11700}-\u{1171A}\u{11740}-\u{11746}\u{11800}-\u{1182B}\u{118A0}-\u{118DF}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{1192F}\u{1193F}\u{11941}\u{119A0}-\u{119A7}\u{119AA}-\u{119D0}\u{119E1}\u{119E3}\u{11A00}\u{11A0B}-\u{11A32}\u{11A3A}\u{11A50}\u{11A5C}-\u{11A89}\u{11A9D}\u{11AB0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2E}\u{11C40}\u{11C72}-\u{11C8F}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D89}\u{11D98}\u{11EE0}-\u{11EF2}\u{11FB0}\u{12000}-\u{12399}\u{12480}-\u{12543}\u{12F90}-\u{12FF0}\u{13000}-\u{1342E}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A70}-\u{16ABE}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E7F}\u{16F00}-\u{16F4A}\u{16F50}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1DF00}-\u{1DF1E}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E14E}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E800}-\u{1E8C4}\u{1E900}-\u{1E943}\u{1E94B}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B738}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}]*)/giu;function Xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms";var r=null;return e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"),e.replace(Jt,(function(e,t,n){(n=Zt(n))&&(r=(r||0)+parseFloat(t,10)*n)})),r&&r/(Zt(t)||1)}function Zt(e){return Xt[e]||Xt[e.toLowerCase().replace(/s$/,"")]}Xt.nanosecond=Xt.ns=1e-6,Xt["\xb5s"]=Xt["\u03bcs"]=Xt.us=Xt.microsecond=.001,Xt.millisecond=Xt.ms=Xt[""]=1,Xt.second=Xt.sec=Xt.s=1e3*Xt.ms,Xt.minute=Xt.min=Xt.m=60*Xt.s,Xt.hour=Xt.hr=Xt.h=60*Xt.m,Xt.day=Xt.d=24*Xt.h,Xt.week=Xt.wk=Xt.w=7*Xt.d,Xt.month=Xt.b=30.4375*Xt.d,Xt.year=Xt.yr=Xt.y=365.25*Xt.d;const er=Xt;class tr extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request timed out"),this.name="TimeoutError",this.code=tr.code}}function rr(e,t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];const s=n[null==t?n.length-1:t];if(!s||!s.timeout)return e(...n);const o="string"===typeof s.timeout?er(s.timeout):s.timeout,a=new Yt.TimeoutController(o);s.signal=(0,Qt.anySignal)([s.signal,a.signal]);const c=e(...n),l=new Promise(((e,t)=>{a.signal.addEventListener("abort",(()=>{t(new tr)}))})),u=Date.now(),h=()=>{if(a.signal.aborted)throw new tr;if(Date.now()-u>o)throw a.abort(),new tr};return c[Symbol.asyncIterator]?async function*(){const e=c[Symbol.asyncIterator]();try{for(;;){const{value:t,done:r}=await Promise.race([e.next(),l]);if(r)break;h(),yield t}}catch(Up){throw h(),Up}finally{a.clear(),e.return&&e.return()}}():(async()=>{try{const e=await Promise.race([c,l]);return h(),e}catch(Up){throw h(),Up}finally{a.clear()}})()}}tr.code="ERR_TIMEOUT";const nr="/ipfs/";function ir(e){if(e instanceof Uint8Array)try{e=Ne.CID.decode(e)}catch(Up){throw me(Up,"ERR_INVALID_CID")}let t=Ne.CID.asCID(e);if(t)return{cid:t,path:void 0};(e=e.toString()).startsWith(nr)&&(e=e.substring(nr.length));const r=e.split("/");let n;try{t=Ne.CID.parse(r.shift()||"")}catch(Up){throw me(Up,"ERR_INVALID_CID")}return r.length&&(n=`/${r.join("/")}`),{cid:t,path:n}}const sr="This command must be run in online mode. Try running 'ipfs daemon' first.",or=new Gt("/local/filesroot"),ar=262144,cr=e=>{if(Ne.CID.asCID(e))return`/ipfs/${e}`;const t=e.toString();try{return`/ipfs/${Ne.CID.parse(t)}`}catch{}if(Vt.path(t))return t;throw me(new Error(`invalid path: ${e}`),"ERR_BAD_PATH")},lr=e=>e instanceof Uint8Array?Ne.CID.decode(e).toString():(0===(e=e.toString()).indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),ur=async function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{cid:i,path:s}=ir(r);s&&(n.path=s);let o=i,a=n.path||"";if(a.startsWith("/")&&(a=a.substring(1)),n.path)try{for await(const{value:r,remainderPath:s}of pr(i,n.path,t,e,{signal:n.signal})){if(!Ne.CID.asCID(r))break;a=s,o=r}}catch(Up){throw Up.message.startsWith("Object has no property")&&(Up.message=`no link named "${a.split("/")[0]}" under ${o}`,Up.code="ERR_NO_LINK"),Up}return{cid:o,remainderPath:a||""}},hr=e=>{if("file"!==e.type&&"directory"!==e.type&&"raw"!==e.type)throw new Error(`Unknown node type '${e.type}'`);const t={cid:e.cid,path:e.path,name:e.name,size:e.size,type:"file"};return"directory"===e.type&&(t.type="dir"),"file"===e.type&&(t.size=e.unixfs.fileSize()),"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,void 0!==e.unixfs.mtime&&(t.mtime=e.unixfs.mtime)),t},dr=rr((async(e,t)=>await e)),pr=async function*(e,t,r,n,i){const s=async e=>{const t=await r.getCodec(e.code),s=await n.blocks.get(e,i);return t.decode(s)},o=t.split("/").filter(Boolean);let a=await s(e),c=e;for(;o.length;){const r=o.shift();if(!r)throw me(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(e.code===nt&&Array.isArray(a.Links)){const e=a.Links.find((e=>e.Name===r));if(e){yield{value:e.Hash,remainderPath:o.join("/")},a=await s(e.Hash),c=e.Hash;continue}}if(!Object.prototype.hasOwnProperty.call(a,r))throw me(new Error(`no link named "${r}" under ${c}`),"ERR_NO_LINK");a=a[r],yield{value:a,remainderPath:o.join("/")},Ne.CID.asCID(a)&&(c=a,a=await s(a))}yield{value:a,remainderPath:""}};class fr{static create(e){let{start:t,stop:r}=e;return new fr(t,r)}static async start(e,t){const{state:r,activate:n}=e;switch(r.status){case"stopped":try{const r=n(t);e.state={status:"starting",ready:r};const i=await r;return e.state={status:"started",value:i},i}catch(i){throw e.state={status:"stopped"},i}case"starting":throw new Ut;case"started":throw new jt;case"stopping":return await r.ready,await fr.start(e,t);default:return fr.panic(e)}}static async stop(e){const{state:t,deactivate:r}=e;switch(t.status){case"stopped":break;case"starting":try{await t.ready}catch(n){}return await fr.stop(e);case"stopping":return await t.ready;case"started":r&&await r(t.value),e.state={status:"stopped"};break;default:fr.panic(t)}}static try(e){let{state:t}=e;return"started"===t.status?t.value:null}static async use(e,t){let{state:r}=e;switch(r.status){case"started":return r.value;case"starting":return await dr(r.ready,t);default:throw new Mt}}static panic(e){let{state:t}=e;const r=JSON.stringify({status:t.status});throw RangeError(`Service in invalid state ${r}, should never happen if you see this please report a bug`)}constructor(e,t){this.activate=e,this.deactivate=t,this.state={status:"stopped"}}async use(e){return await fr.use(this,e)}try(){return fr.try(this)}}var yr=__webpack_require__(4737);var gr=__webpack_require__(7143);class mr extends Error{constructor(e){super(e),this.name="TimeoutError"}}class wr extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const vr=e=>void 0===globalThis.DOMException?new wr(e):new DOMException(e),br=e=>{const t=void 0===e.reason?vr("This operation was aborted."):e.reason;return t instanceof Error?t:vr(t)};function Er(e,t,r,n){let i;const s=new Promise(((s,o)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t!==Number.POSITIVE_INFINITY){if((n={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...n}).signal){const{signal:e}=n;e.aborted&&o(br(e)),e.addEventListener("abort",(()=>{o(br(e))}))}i=n.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof r){try{s(r())}catch(i){o(i)}return}const n=r instanceof Error?r:new mr("string"===typeof r?r:`Promise timed out after ${t} milliseconds`);"function"===typeof e.cancel&&e.cancel(),o(n)}),t),(async()=>{try{s(await e)}catch(t){o(t)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()}else s(e)}));return s.clear=()=>{clearTimeout(i),i=void 0},s}var _r,Sr=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class Ar{constructor(){_r.set(this,[])}enqueue(e,t){const r={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&Sr(this,_r,"f")[this.size-1].priority>=t.priority)return void Sr(this,_r,"f").push(r);const n=function(e,t,r){let n=0,i=e.length;for(;i>0;){const s=Math.trunc(i/2);let o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}(Sr(this,_r,"f"),r,((e,t)=>t.priority-e.priority));Sr(this,_r,"f").splice(n,0,r)}dequeue(){const e=Sr(this,_r,"f").shift();return null===e||void 0===e?void 0:e.run}filter(e){return Sr(this,_r,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return Sr(this,_r,"f").length}}_r=new WeakMap;var kr,Ir,Cr,Rr,Tr,Dr,Pr,Nr,xr,Or,Br,Lr,Mr,Ur,jr,Fr,zr,Vr,Kr,$r,qr,Hr,Wr,Gr,Yr,Qr,Jr=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},Xr=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const Zr=new mr;class en extends Error{}class tn extends gr{constructor(e){var t,r,n,i;if(super(),kr.add(this),Ir.set(this,void 0),Cr.set(this,void 0),Rr.set(this,0),Tr.set(this,void 0),Dr.set(this,void 0),Pr.set(this,0),Nr.set(this,void 0),xr.set(this,void 0),Or.set(this,void 0),Br.set(this,void 0),Lr.set(this,0),Mr.set(this,void 0),Ur.set(this,void 0),jr.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Ar,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);Jr(this,Ir,e.carryoverConcurrencyCount,"f"),Jr(this,Cr,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),Jr(this,Tr,e.intervalCap,"f"),Jr(this,Dr,e.interval,"f"),Jr(this,Or,new e.queueClass,"f"),Jr(this,Br,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,Jr(this,jr,!0===e.throwOnTimeout,"f"),Jr(this,Ur,!1===e.autoStart,"f")}get concurrency(){return Xr(this,Mr,"f")}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);Jr(this,Mr,e,"f"),Xr(this,kr,"m",Yr).call(this)}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((r,n)=>{Xr(this,Or,"f").enqueue((async()=>{var i,s,o;Jr(this,Lr,(s=Xr(this,Lr,"f"),++s),"f"),Jr(this,Rr,(o=Xr(this,Rr,"f"),++o),"f");try{if(null===(i=t.signal)||void 0===i?void 0:i.aborted)return void n(new en("The task was aborted."));const s=void 0===this.timeout&&void 0===t.timeout?e({signal:t.signal}):Er(Promise.resolve(e({signal:t.signal})),void 0===t.timeout?this.timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?Xr(this,jr,"f"):t.throwOnTimeout)&&n(Zr)})),o=await s;r(o),this.emit("completed",o)}catch(a){n(a),this.emit("error",a)}Xr(this,kr,"m",Vr).call(this)}),t),Xr(this,kr,"m",Hr).call(this),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return Xr(this,Ur,"f")?(Jr(this,Ur,!1,"f"),Xr(this,kr,"m",Yr).call(this),this):this}pause(){Jr(this,Ur,!0,"f")}clear(){Jr(this,Or,new(Xr(this,Br,"f")),"f")}async onEmpty(){0!==Xr(this,Or,"f").size&&await Xr(this,kr,"m",Qr).call(this,"empty")}async onSizeLessThan(e){Xr(this,Or,"f").size<e||await Xr(this,kr,"m",Qr).call(this,"next",(()=>Xr(this,Or,"f").size<e))}async onIdle(){0===Xr(this,Lr,"f")&&0===Xr(this,Or,"f").size||await Xr(this,kr,"m",Qr).call(this,"idle")}get size(){return Xr(this,Or,"f").size}sizeBy(e){return Xr(this,Or,"f").filter(e).length}get pending(){return Xr(this,Lr,"f")}get isPaused(){return Xr(this,Ur,"f")}}Ir=new WeakMap,Cr=new WeakMap,Rr=new WeakMap,Tr=new WeakMap,Dr=new WeakMap,Pr=new WeakMap,Nr=new WeakMap,xr=new WeakMap,Or=new WeakMap,Br=new WeakMap,Lr=new WeakMap,Mr=new WeakMap,Ur=new WeakMap,jr=new WeakMap,kr=new WeakSet,Fr=function(){return Xr(this,Cr,"f")||Xr(this,Rr,"f")<Xr(this,Tr,"f")},zr=function(){return Xr(this,Lr,"f")<Xr(this,Mr,"f")},Vr=function(){var e;Jr(this,Lr,(e=Xr(this,Lr,"f"),--e),"f"),Xr(this,kr,"m",Hr).call(this),this.emit("next")},Kr=function(){this.emit("empty"),0===Xr(this,Lr,"f")&&this.emit("idle")},$r=function(){Xr(this,kr,"m",Gr).call(this),Xr(this,kr,"m",Wr).call(this),Jr(this,xr,void 0,"f")},qr=function(){const e=Date.now();if(void 0===Xr(this,Nr,"f")){const t=Xr(this,Pr,"f")-e;if(!(t<0))return void 0===Xr(this,xr,"f")&&Jr(this,xr,setTimeout((()=>{Xr(this,kr,"m",$r).call(this)}),t),"f"),!0;Jr(this,Rr,Xr(this,Ir,"f")?Xr(this,Lr,"f"):0,"f")}return!1},Hr=function(){if(0===Xr(this,Or,"f").size)return Xr(this,Nr,"f")&&clearInterval(Xr(this,Nr,"f")),Jr(this,Nr,void 0,"f"),Xr(this,kr,"m",Kr).call(this),!1;if(!Xr(this,Ur,"f")){const e=!Xr(this,kr,"a",qr);if(Xr(this,kr,"a",Fr)&&Xr(this,kr,"a",zr)){const t=Xr(this,Or,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&Xr(this,kr,"m",Wr).call(this),!0)}}return!1},Wr=function(){Xr(this,Cr,"f")||void 0!==Xr(this,Nr,"f")||(Jr(this,Nr,setInterval((()=>{Xr(this,kr,"m",Gr).call(this)}),Xr(this,Dr,"f")),"f"),Jr(this,Pr,Date.now()+Xr(this,Dr,"f"),"f"))},Gr=function(){0===Xr(this,Rr,"f")&&0===Xr(this,Lr,"f")&&Xr(this,Nr,"f")&&(clearInterval(Xr(this,Nr,"f")),Jr(this,Nr,void 0,"f")),Jr(this,Rr,Xr(this,Ir,"f")?Xr(this,Lr,"f"):0,"f"),Xr(this,kr,"m",Yr).call(this)},Yr=function(){for(;Xr(this,kr,"m",Hr).call(this););},Qr=async function(e,t){return new Promise((r=>{const n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)}))};var rn=__webpack_require__(8257);const nn=new class{constructor(e){this.lru=yr(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}(1e3),sn=new(tn.default?tn.default:tn)({concurrency:4}),on=e=>{if(e.Path)return e.Path;throw new Error(e.Message)};async function an(e,t){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new URLSearchParams(t);r.set("arg",e);const n=r.toString();if(!t.nocache&&nn.has(n)){const e=nn.get(n);return on(e)}const i=await sn.add((async()=>{const e=await rn.get("https://ipfs.io/api/v0/dns",{searchParams:r}),t=new URL(e.url).search.slice(1),n=await e.json();return nn.set(t,n,6e4),n}));return on(i)}(e,t)}function cn(e){return e.endsWith(".eth")&&(e=e.replace(/.eth$/,".eth.link")),e}var ln=__webpack_require__(8315),un=__webpack_require__(8779),hn=__webpack_require__(9400);const dn=Symbol.for("@libp2p/peer-id");const pn=Object.values(xt.gh).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),xt.gh.identity.decoder);class fn{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[dn](){return!0}toString(){return null==this.string&&(this.string=pe.base58btc.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return Ne.CID.createV1(114,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){var t;if(e instanceof Uint8Array)return(0,un.equals)(this.multihash.bytes,e);if("string"===typeof e)return vn(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return(0,un.equals)(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}}class yn extends fn{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}}class gn extends fn{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}}class mn extends fn{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}}function wn(e){if("RSA"===e.type)return new yn(e);if("Ed25519"===e.type)return new gn(e);if("secp256k1"===e.type)return new mn(e);throw me(new Error("Not a PeerId"),"ERR_INVALID_PARAMETERS")}function vn(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:pn,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=ln.decode(pe.base58btc.decode(`z${e}`));return e.startsWith("12D")?new gn({multihash:t}):e.startsWith("16U")?new mn({multihash:t}):new yn({multihash:t})}return bn(pn.decode(e))}function bn(e){try{const t=ln.decode(e);if(t.code===Nt.identity.code){if(36===t.digest.length)return new gn({multihash:t});if(37===t.digest.length)return new mn({multihash:t})}if(t.code===hn.sha256.code)return new yn({multihash:t})}catch{return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===hn.sha256.code)return new yn({multihash:e.multihash});if(t.code===Nt.identity.code){if(36===t.digest.length)return new gn({multihash:e.multihash});if(37===t.digest.length)return new mn({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(Ne.CID.decode(e))}throw new Error("Supplied PeerID CID is invalid")}async function En(e,t){return 36===e.length?new gn({multihash:ln.create(Nt.identity.code,e),privateKey:t}):37===e.length?new mn({multihash:ln.create(Nt.identity.code,e),privateKey:t}):new yn({multihash:await hn.sha256.digest(e),publicKey:e,privateKey:t})}function _n(e){try{return vn(e).toBytes()}catch{return Ne.CID.parse(e).bytes}}var Sn=__webpack_require__(6723);async function*An(e){if(null===e||void 0===e)throw me(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");const t=Ne.CID.asCID(e);if(t)yield kn({cid:t});else{if(!(e instanceof String||"string"===typeof e)){if(null!=e.cid||null!=e.path)return yield kn(e);if(Symbol.iterator in e){const t=e[Symbol.iterator](),r=t.next();if(r.done)return t;if(Ne.CID.asCID(r.value)||r.value instanceof String||"string"===typeof r.value){yield kn({cid:r.value});for(const e of t)yield kn({cid:e});return}if(null!=r.value.cid||null!=r.value.path){yield kn(r.value);for(const e of t)yield kn(e);return}throw me(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in e){const t=e[Symbol.asyncIterator](),r=await t.next();if(r.done)return t;if(Ne.CID.asCID(r.value)||r.value instanceof String||"string"===typeof r.value){yield kn({cid:r.value});for await(const e of t)yield kn({cid:e});return}if(null!=r.value.cid||null!=r.value.path){yield kn(r.value);for await(const e of t)yield kn(e);return}throw me(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw me(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}yield kn({path:e})}}function kn(e){const t=e.cid||`${e.path}`;if(!t)throw me(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const r={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(r.metadata=e.metadata),r}const In={direct:"direct",recursive:"recursive",indirect:"indirect",all:"all"};function Cn(e,t,r){const n={type:e,cid:t};return r&&(n.metadata=r),n}class Rn{constructor(e){let{codecs:t,repo:r}=e;const n=function(e){let{repo:t,codecs:r}=e;return rr((async function*(e){const n=async function*(){for await(const{path:n,recursive:i,metadata:s}of An(e)){const{cid:e}=await ur(t,r,n),{reason:o}=await t.pins.isPinnedWithType(e,[In.recursive,In.direct]);if("recursive"===o&&!i)throw new Error(`${e} already pinned recursively`);i?await t.pins.pinRecursively(e,{metadata:s}):await t.pins.pinDirectly(e,{metadata:s}),yield e}};if(!Boolean((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).lock))return void(yield*n());const i=await t.gcLock.readLock();try{yield*n()}finally{i()}}))}({codecs:t,repo:r});this.addAll=n,this.add=function(e){let{addAll:t}=e;return function(e){let r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Ne.CID.asCID(e);return r=t(i?[{cid:i,...n}]:[{path:e.toString(),...n}],n),Sn(r)}}({addAll:n});const i=function(e){let{repo:t,codecs:r}=e;return rr((async function*(e){const n=await t.gcLock.readLock();try{for await(const{path:n,recursive:i}of An(e)){const{cid:e}=await ur(t,r,n),{pinned:s,reason:o}=await t.pins.isPinnedWithType(e,In.all);if(!s)throw new Error(`${e} is not pinned`);switch(o){case In.recursive:if(!i)throw new Error(`${e} is pinned recursively`);await t.pins.unpin(e),yield e;break;case In.direct:await t.pins.unpin(e),yield e;break;default:throw new Error(`${e} is pinned indirectly under ${o}`)}}}finally{n()}}))}({codecs:t,repo:r});this.rmAll=i,this.rm=function(e){let{rmAll:t}=e;return async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await Sn(t([{path:e,...r}],r));if(!n)throw new Error("CID expected");return n}}({rmAll:i}),this.ls=function(e){let{repo:t,codecs:r}=e;return rr((async function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=In.all;if(e.type&&(n=e.type,!Object.keys(In).includes(n)))throw me(new Error("Invalid pin type"),"ERR_INVALID_PIN_TYPE");if(e.paths){let i=!1;for await(const{path:s}of An(e.paths)){const{cid:e}=await ur(t,r,s),{reason:o,pinned:a,parent:c,metadata:l}=await t.pins.isPinnedWithType(e,n);if(!a)throw me(new Error(`path '${s}' is not pinned`),"ERR_NOT_PINNED");switch(o){case In.direct:case In.recursive:i=!0,yield Cn(o,e,l);break;default:i=!0,yield Cn(`${In.indirect} through ${c}`,e,l)}}if(!i)throw new Error("No match found")}else{if(n===In.recursive||n===In.all)for await(const{cid:e,metadata:r}of t.pins.recursiveKeys())yield Cn(In.recursive,e,r);if(n===In.indirect||n===In.all)for await(const r of t.pins.indirectKeys(e))yield Cn(In.indirect,r);if(n===In.direct||n===In.all)for await(const{cid:e,metadata:r}of t.pins.directKeys())yield Cn(In.direct,e,r)}}))}({codecs:t,repo:r}),this.remote={add:function(e){return Promise.reject(new Error("Not implemented"))},ls:async function*(e){return Promise.reject(new Error("Not implemented"))},rm:function(e){return Promise.reject(new Error("Not implemented"))},rmAll:function(e){return Promise.reject(new Error("Not implemented"))},service:{add:(e,t)=>Promise.reject(new Error("Not implemented")),rm:function(e){return Promise.reject(new Error("Not implemented"))},ls:function(){return Promise.reject(new Error("Not implemented"))}}}}}const Tn=Symbol.for("@libp2p/peer-id");function Dn(e){return null!=e&&Boolean(e[Tn])}function Pn(e){return e=e||new Error("Cannot open database"),me(e,"ERR_DB_OPEN_FAILED")}function Nn(e){return e=e||new Error("Delete failed"),me(e,"ERR_DB_DELETE_FAILED")}function xn(e){return e=e||new Error("Write failed"),me(e,"ERR_DB_WRITE_FAILED")}function On(e){return e=e||new Error("Not Found"),me(e,"ERR_NOT_FOUND")}var Bn=__webpack_require__(9900),Ln=__webpack_require__(2110);const Mn=Symbol.for("@achingbrain/uint8arraylist");function Un(e,t,r){if(null==t||t<0||t>=r)throw new RangeError("index is out of bounds");let n=0;for(const i of e){const e=n+i.byteLength;if(t<e)return{buf:i,index:t-n};n=e}throw new RangeError("index is out of bounds")}function jn(e){return Boolean(null===e||void 0===e?void 0:e[Mn])}class Fn{constructor(){Object.defineProperty(this,Mn,{value:!0}),this.bufs=[],this.length=0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.appendAll(t)}appendAll(e){let t=0;for(const r of e)if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.push(r);else{if(!jn(r))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");t+=r.length,this.bufs=this.bufs.concat(r.bufs)}this.length+=t}get(e){const t=Un(this.bufs,e,this.length);return t.buf[t.index]}set(e,t){const r=Un(this.bufs,e,this.length);r.buf[r.index]=t}write(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Uint8Array)for(let r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(!jn(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let r=0;r<e.length;r++)this.set(t+r,e.get(r))}}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0))for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}slice(e,t){const{bufs:r,length:n}=this._subList(e,t);return(0,Ln.concat)(r,n)}subarray(e,t){const{bufs:r}=this._subList(e,t),n=new Fn;return n.appendAll(r),n}_subList(e,t){var r,n;if(null==e&&null==t)return{bufs:this.bufs,length:this.length};if(e=null!==(r=e)&&void 0!==r?r:0,t=null!==(n=t)&&void 0!==n?n:this.length>0?this.length:0,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index out of bounds");if(e===t)return{bufs:[],length:0};const i=[];let s=0;for(const o of this.bufs){const r=s,n=r+o.byteLength,a=t>r&&t<=n,c=e<r&&t>=n;let l,u;if(s=n,e>=r&&e<n&&(l=e-r,u=o.byteLength),a&&(u=t-r,null==l&&(l=0)),c&&(l=0,u=o.byteLength),null!=l&&null!=u&&i.push(o.subarray(l,u)),a)break}return{bufs:i,length:t-e}}getInt8(e){const t=this.slice(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){const r=new Uint8Array(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}getInt16(e,t){const r=this.slice(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}setInt16(e,t,r){const n=new Uint8Array(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,t,r),this.write(n,e)}getInt32(e,t){const r=this.slice(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}setInt32(e,t,r){const n=new Uint8Array(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,t,r),this.write(n,e)}getBigInt64(e,t){const r=this.slice(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}setBigInt64(e,t,r){const n=new Uint8Array(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,t,r),this.write(n,e)}getUint8(e){const t=this.slice(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){const r=new Uint8Array(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}getUint16(e,t){const r=this.slice(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}setUint16(e,t,r){const n=new Uint8Array(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,t,r),this.write(n,e)}getUint32(e,t){const r=this.slice(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}setUint32(e,t,r){const n=new Uint8Array(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,t,r),this.write(n,e)}getBigUint64(e,t){const r=this.slice(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}setBigUint64(e,t,r){const n=new Uint8Array(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,t,r),this.write(n,e)}getFloat32(e,t){const r=this.slice(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}setFloat32(e,t,r){const n=new Uint8Array(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,t,r),this.write(n,e)}getFloat64(e,t){const r=this.slice(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}setFloat64(e,t,r){const n=new Uint8Array(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,t,r),this.write(n,e)}}function zn(e){return e instanceof Uint8Array?{get:t=>e[t],set(t,r){e[t]=r}}:{get:t=>e.get(t),set(t,r){e.set(t,r)}}}const Vn=4294967296;class Kn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.hi=e,this.lo=t}toBigInt(e){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}zzDecode(){const e=-(1&this.lo),t=((this.lo>>>1|this.hi<<31)^e)>>>0,r=(this.hi>>>1^e)>>>0;return new Kn(r,t)}zzEncode(){const e=this.hi>>31,t=((this.hi<<1|this.lo>>>31)^e)>>>0,r=(this.lo<<1^e)>>>0;return new Kn(t,r)}toBytes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=zn(e);for(;this.hi>0;)r.set(t++,127&this.lo|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)r.set(t++,127&this.lo|128),this.lo=this.lo>>>7;r.set(t++,this.lo)}static fromBigInt(e){if(0n===e)return new Kn;const t=e<0;t&&(e=-e);let r=0|Number(e>>32n),n=0|Number(e-(BigInt(r)<<32n));return t&&(r=~r>>>0,n=~n>>>0,++n>Vn&&(n=0,++r>Vn&&(r=0))),new Kn(r,n)}static fromNumber(e){if(0===e)return new Kn;const t=e<0;t&&(e=-e);let r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new Kn(n,r)}static fromBytes(e,t){const r=zn(e),n=new Kn;let i=0;if(!(e.length-t>4)){for(;i<3;++i){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(n.lo=(n.lo|(127&r.get(t))<<7*i)>>>0,r.get(t++)<128)return n}return n.lo=(n.lo|(127&r.get(t++))<<7*i)>>>0,n}for(;i<4;++i)if(n.lo=(n.lo|(127&r.get(t))<<7*i)>>>0,r.get(t++)<128)return n;if(n.lo=(n.lo|(127&r.get(t))<<28)>>>0,n.hi=(n.hi|(127&r.get(t))>>4)>>>0,r.get(t++)<128)return n;if(i=0,e.length-t>4){for(;i<5;++i)if(n.hi=(n.hi|(127&r.get(t))<<7*i+3)>>>0,r.get(t++)<128)return n}else for(;i<5;++i){if(t>=e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);if(n.hi=(n.hi|(127&r.get(t))<<7*i+3)>>>0,r.get(t++)<128)return n}throw Error("invalid varint encoding")}}const $n=Math.pow(2,31),qn=Math.pow(2,7),Hn=Math.pow(2,14),Wn=Math.pow(2,21),Gn=Math.pow(2,28),Yn=Math.pow(2,35),Qn=Math.pow(2,42),Jn=Math.pow(2,49),Xn=Math.pow(2,56),Zn=Math.pow(2,63),ei={encodingLength:e=>e<qn?1:e<Hn?2:e<Wn?3:e<Gn?4:e<Yn?5:e<Qn?6:e<Jn?7:e<Xn?8:e<Zn?9:10,encode(e,t){let r=0;const n=zn(t);for(;e>=$n;)n.set(r++,255&e|128),e/=128;for(;(-128&e)>0;)n.set(r++,255&e|128),e>>>=7;n.set(r,0|e)},decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=zn(e);let n=4294967295;if(n=(127&r.get(t))>>>0,r.get(t++)<128)return n;if(n=(n|(127&r.get(t))<<7)>>>0,r.get(t++)<128)return n;if(n=(n|(127&r.get(t))<<14)>>>0,r.get(t++)<128)return n;if(n=(n|(127&r.get(t))<<21)>>>0,r.get(t++)<128)return n;if(n=(n|(15&r.get(t))<<28)>>>0,r.get(t++)<128)return n;if((t+=5)>e.length)throw RangeError(`index out of range: ${t} > ${e.length}`);return n}},ti={encodingLength:e=>e<0?10:ei.encodingLength(e),encode(e,t){if(e<0){let r=0;const n=zn(t),i=Kn.fromNumber(e);for(;i.hi>0;)n.set(r++,127&i.lo|128),i.lo=(i.lo>>>7|i.hi<<25)>>>0,i.hi>>>=7;for(;i.lo>127;)n.set(r++,127&i.lo|128),i.lo=i.lo>>>7;n.set(r++,i.lo)}else ei.encode(e,t)},decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0|ei.decode(e,t)}},ri={encodingLength:e=>(e=(e<<1^e>>31)>>>0,ei.encodingLength(e)),encode(e,t){return e=(e<<1^e>>31)>>>0,ei.encode(e,t)},decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=ei.decode(e,t);return r>>>1^-(1&r)|0}};function ni(e,t){const r=new Uint8Array(ei.encodingLength(e.length));return ei.encode(e.length,r),t.decode(new Fn(r,e),0)}function ii(e,t){const r=t.encode(e),n=ei.encodingLength(ei.decode(r));return r.slice(n)}var si;function oi(e,t,r,n,i){return{name:e,type:t,encode:r,decode:n,encodingLength:i}}!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(si||(si={}));const ai=oi("bool",si.VARINT,(function(e){return Uint8Array.from([e?1:0])}),(function(e,t){return e.get(t)>0}),(function(){return 1})),ci=oi("bytes",si.LENGTH_DELIMITED,(function(e){const t=new Uint8Array(ei.encodingLength(e.byteLength));return ei.encode(e.byteLength,t),new Fn(t,e)}),(function(e,t){const r=ei.decode(e,t);return t+=ei.encodingLength(r),e.slice(t,t+r)}),(function(e){const t=e.byteLength;return ei.encodingLength(t)+t})),li=function(){return 8};oi("double",si.BIT64,(function(e){const t=new Fn(new Uint8Array(8));return t.setFloat64(0,e,!0),t}),(function(e,t){return e.getFloat64(t,!0)}),li);function ui(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return"number"===typeof t?t:e[t]}return oi("enum",si.VARINT,(function(e){const r=t(e),n=new Uint8Array(ei.encodingLength(r));return ei.encode(r,n),n}),(function(t,r){const n=ei.decode(t,r).toString();if(null==e[n])throw new Error("Invalid enum value");return e[n]}),(function(e){return ei.encodingLength(t(e))}))}const hi=function(){return 4},di=(oi("fixed32",si.BIT32,(function(e){const t=new Fn(new Uint8Array(4));return t.setInt32(0,e,!0),t}),(function(e,t){return e.getInt32(t,!0)}),hi),function(e){return 8}),pi=(oi("fixed64",si.BIT64,(function(e){const t=new Fn(new Uint8Array(8));return t.setBigInt64(0,e,!0),t}),(function(e,t){return e.getBigInt64(t,!0)}),di),function(){return 4}),fi=(oi("float",si.BIT32,(function(e){const t=new Fn(new Uint8Array(4));return t.setFloat32(0,e,!0),t}),(function(e,t){return e.getFloat32(t,!0)}),pi),function(e){return ti.encodingLength(e)}),yi=oi("int32",si.VARINT,(function(e){const t=new Uint8Array(fi(e));return ti.encode(e,t),t}),(function(e,t){return ti.decode(e,t)}),fi),gi=0x7fn,mi={encodingLength(e){let t=0;for(;e>=0x80n;t++)e>>=7n;return t+1},encode(e,t){const r=zn(t);let n=0;for(;gi<e;)r.set(n++,128|Number(e&gi)),e>>=7n;r.set(n,Number(e))},decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Kn.fromBytes(e,t).toBigInt(!0)}},wi={encodingLength:e=>e<0n?10:mi.encodingLength(e),encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(e<0n))return mi.encode(e,t);Kn.fromBigInt(e).toBytes(t,r)},decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Kn.fromBytes(e,t).toBigInt(!1)}},vi={encodingLength:e=>mi.encodingLength(e>=0?2n*e:-2n*e-1n),encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Kn.fromBigInt(e).zzEncode().toBytes(t,r)},decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Kn.fromBytes(e,t).zzDecode().toBigInt(!1)}},bi=function(e){return wi.encodingLength(e)};oi("int64",si.VARINT,(function(e){const t=new Uint8Array(bi(e));return wi.encode(e,t),t}),(function(e,t){return 0n|wi.decode(e,t)}),bi);function Ei(e){return oi("message",si.LENGTH_DELIMITED,(function(t){const r=new Fn;function n(e,t,n){if(null==e){if(!0===n.optional)return;throw new Error(`Non optional field "${n.name}" was ${null===e?"null":"undefined"}`)}const i=t<<3|n.codec.type,s=new Uint8Array(ei.encodingLength(i));ei.encode(i,s);const o=n.codec.encode(e);r.append(s),r.append(o)}for(const[s,o]of Object.entries(e)){const e=parseInt(s);if(!0===o.repeats){if(!Array.isArray(t[o.name]))throw new Error(`Repeating field "${o.name}" was not an array`);for(const r of t[o.name])n(r,e,o)}else n(t[o.name],e,o)}const i=new Uint8Array(ei.encodingLength(r.length));return ei.encode(r.length,i),new Fn(i,r)}),(function(t,r){const n=ei.decode(t,r),i=(r+=ei.encodingLength(n))+n,s={};for(;r<i;){const n=ei.decode(t,r);r+=ei.encodingLength(n);const i=7&n,o=e[n>>3];let a=0;if(i===si.VARINT)if(null!=o){const e=o.codec.decode(t,r);a=o.codec.encodingLength(e)}else{const e=ei.decode(t,r);a=ei.encodingLength(e)}else if(i===si.BIT64)a=8;else if(i===si.LENGTH_DELIMITED){const e=ei.decode(t,r);a=e+ei.encodingLength(e)}else if(i===si.BIT32)a=4;else{if(i===si.START_GROUP)throw new Error("Unsupported wire type START_GROUP");if(i===si.END_GROUP)throw new Error("Unsupported wire type END_GROUP")}if(null!=o){const e=o.codec.decode(t,r);!0===o.repeats?(null==s[o.name]&&(s[o.name]=[]),s[o.name].push(e)):s[o.name]=e}r+=a}for(const o of Object.values(e))!0===o.repeats&&null==s[o.name]&&(s[o.name]=[]);return s}),(function(t){let r=0;for(const n of Object.values(e))r+=n.codec.encodingLength(t[n.name]);return ei.encodingLength(r)+r}))}const _i=function(){return 4},Si=(oi("sfixed32",si.BIT32,(function(e){const t=new Fn(new Uint8Array(4));return t.setInt32(0,e,!0),t}),(function(e,t){return e.getInt32(t,!0)}),_i),function(){return 8}),Ai=(oi("sfixed64",si.BIT64,(function(e){const t=new Fn(new Uint8Array(8));return t.setBigInt64(0,e,!0),t}),(function(e,t){return e.getBigInt64(t,!0)}),Si),function(e){return ri.encodingLength(e)}),ki=(oi("sint32",si.VARINT,(function(e){const t=new Uint8Array(Ai(e));return ri.encode(e,t),t}),(function(e,t){return ri.decode(e,t)}),Ai),function(e){return vi.encodingLength(e)}),Ii=(oi("sint64",si.VARINT,(function(e){const t=new Uint8Array(ki(e));return vi.encode(e,t),t}),(function(e,t){return vi.decode(e,t)}),ki),oi("string",si.LENGTH_DELIMITED,(function(e){const t=(0,zt.fromString)(e),r=new Uint8Array(ei.encodingLength(t.byteLength));return ei.encode(t.length,r),new Fn(r,t)}),(function(e,t){const r=ei.decode(e,t);return t+=ei.encodingLength(r),(0,$t.toString)(e.slice(t,t+r))}),(function(e){const t=(0,zt.fromString)(e).byteLength;return ei.encodingLength(t)+t}))),Ci=function(e){return ei.encodingLength(e)},Ri=(oi("uint32",si.VARINT,(function(e){const t=new Uint8Array(Ci(e));return ei.encode(e,t),t}),(function(e,t){return ei.decode(e,t)}),Ci),oi("uint64",si.VARINT,(function(e){const t=new Uint8Array(mi.encodingLength(e));return mi.encode(e,t),t}),(function(e,t){return mi.decode(e,t)}),(function(e){return mi.encodingLength(e)})));var Ti,Di,Pi,Ni;!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(Ti||(Ti={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(Di||(Di={})),function(e){e.codec=()=>ui(Di)}(Ti||(Ti={})),function(e){e.codec=()=>Ei({1:{name:"Type",codec:Ti.codec()},2:{name:"Data",codec:ci}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(Pi||(Pi={})),function(e){e.codec=()=>Ei({1:{name:"Type",codec:Ti.codec()},2:{name:"Data",codec:ci}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(Ni||(Ni={}));__webpack_require__(5049),__webpack_require__(9835);var xi=__webpack_require__(392);const Oi={get(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis).crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var Bi=__webpack_require__(3877);__webpack_require__(3055);function Li(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,Ln.concat)([new Uint8Array(t-r.length),r])}return(0,$t.toString)(r,"base64url")}function Mi(e){const t=Ui(e);return new xi.jsbn.BigInteger((0,$t.toString)(t,"base16"),16)}function Ui(e,t){let r=(0,zt.fromString)(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,Ln.concat)([new Uint8Array(t-r.length),r])}return r}const ji={"P-256":256,"P-384":384,"P-521":521};Object.keys(ji).join(" / ");function Fi(e){var t,r,n,i,s,o;const a=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM";let c=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16;const l=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,u=null!==(i=null===e||void 0===e?void 0:e.digest)&&void 0!==i?i:"SHA-256",h=null!==(s=null===e||void 0===e?void 0:e.saltLength)&&void 0!==s?s:16,d=null!==(o=null===e||void 0===e?void 0:e.iterations)&&void 0!==o?o:32767,p=Oi.get();c*=8;return{encrypt:async function(e,t){const r=p.getRandomValues(new Uint8Array(h)),n=p.getRandomValues(new Uint8Array(l)),i={name:a,iv:n};"string"===typeof t&&(t=(0,zt.fromString)(t));const s={name:"PBKDF2",salt:r,iterations:d,hash:{name:u}},o=await p.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),f=await p.subtle.deriveKey(s,o,{name:a,length:c},!0,["encrypt"]),y=await p.subtle.encrypt(i,f,e);return(0,Ln.concat)([r,i.iv,new Uint8Array(y)])},decrypt:async function(e,t){const r=e.slice(0,h),n=e.slice(h,h+l),i=e.slice(h+l),s={name:a,iv:n};"string"===typeof t&&(t=(0,zt.fromString)(t));const o={name:"PBKDF2",salt:r,iterations:d,hash:{name:u}},f=await p.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await p.subtle.deriveKey(o,f,{name:a,length:c},!0,["decrypt"]),g=await p.subtle.decrypt(s,y,i);return new Uint8Array(g)}}}__webpack_require__(4770);var zi=__webpack_require__(5410);function Vi(e){if(isNaN(e)||e<=0)throw me(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return zi(e)}__webpack_require__(5493);function Ki(e,t){return t.map((t=>Mi(e[t])))}async function $i(e){const t=[await Oi.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Hi(e)],r=await qi({privateKey:t[0],publicKey:t[1]});return{privateKey:r[0],publicKey:r[1]}}async function qi(e){if(null==e.privateKey||null==e.publicKey)throw me(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([Oi.get().subtle.exportKey("jwk",e.privateKey),Oi.get().subtle.exportKey("jwk",e.publicKey)])}async function Hi(e){return await Oi.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Wi(e,t,r,n){const i=t?function(e){return xi.pki.setRsaPublicKey(...Ki(e,["n","e"]))}(e):function(e){return xi.pki.setRsaPrivateKey(...Ki(e,["n","e","d","p","q","dp","dq","qi"]))}(e),s=n((0,$t.toString)(Uint8Array.from(r),"ascii"),i);return(0,zt.fromString)(s,"ascii")}async function Gi(e,t){const r=Fi(),n=await r.encrypt(e,t);return ye.base64.encode(n)}class Yi{constructor(e){this._key=e}async verify(e,t){return await async function(e,t,r){const n=await Oi.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await Oi.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}(this._key,t,e)}marshal(){return function(e){if(null==e.n||null==e.e)throw me(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const t=xi.pki.publicKeyToAsn1({n:Mi(e.n),e:Mi(e.e)});return(0,zt.fromString)(xi.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return Pi.encode({Type:Ti.RSA,Data:this.marshal()})}encrypt(e){return Wi(this._key,!0,e,((e,t)=>t.encrypt(e)))}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}}class Qi{constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return Vi(16)}async sign(e){return await async function(e,t){const r=await Oi.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Oi.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}(this._key,e)}get public(){if(null==this._publicKey)throw me(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Yi(this._publicKey)}decrypt(e){return Wi(this._key,!1,e,((e,t)=>t.decrypt(e)))}marshal(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw me(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const t=xi.pki.privateKeyToAsn1({n:Mi(e.n),e:Mi(e.e),d:Mi(e.d),p:Mi(e.p),q:Mi(e.q),dP:Mi(e.dp),dQ:Mi(e.dq),qInv:Mi(e.qi)});return(0,zt.fromString)(xi.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return Ni.encode({Type:Ti.RSA,Data:this.marshal()})}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}async id(){const e=await this.public.hash();return(0,$t.toString)(e,"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pkcs-8";if("pkcs-8"===t){const t=new xi.util.ByteBuffer(this.marshal()),r=xi.asn1.fromDer(t),n=xi.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return xi.pki.encryptRsaPrivateKey(n,e,i)}if("libp2p-key"===t)return await Gi(this.bytes,e);throw me(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function Ji(e){const t=function(e){const t=xi.asn1.fromDer((0,$t.toString)(e,"ascii")),r=xi.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:Li(r.n),e:Li(r.e),d:Li(r.d),p:Li(r.p),q:Li(r.q),dp:Li(r.dP),dq:Li(r.dQ),qi:Li(r.qInv),alg:"RS256"}}(e),r=await $i(t);return new Qi(r.privateKey,r.publicKey)}function Xi(e){const t=function(e){const t=xi.asn1.fromDer((0,$t.toString)(e,"ascii")),r=xi.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:Li(r.n),e:Li(r.e)}}(e);return new Yi(t)}async function Zi(e){const t=await $i(e);return new Qi(t.privateKey,t.publicKey)}async function es(e){const t=await async function(e){const t=await Oi.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await qi(t);return{privateKey:r[0],publicKey:r[1]}}(e);return new Qi(t.privateKey,t.publicKey)}var ts=__webpack_require__(7420);const rs=BigInt(0),ns=BigInt(1),is=BigInt(2),ss=BigInt(255),os=is**BigInt(252)+BigInt("27742317777372353535851937790883648493"),as={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:is**ss-BigInt(19),l:os,n:os,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},cs=is**BigInt(256),ls=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),us=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),hs=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ds=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),ps=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class fs{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof bs))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(bs.ZERO)?fs.ZERO:new fs(e.x,e.y,ns,Ps(e.x*e.y))}static toAffineBatch(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:as.P;const r=new Array(e.length),n=e.reduce(((e,n,i)=>n===rs?e:(r[i]=e,Ps(e*n,t))),ns),i=Ns(n,t);return e.reduceRight(((e,n,i)=>n===rs?e:(r[i]=Ps(e*r[i],t),Ps(e*n,t))),i),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){ys(e);const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=Ps(t*o),c=Ps(i*n),l=Ps(r*o),u=Ps(s*n);return a===c&&l===u}negate(){return new fs(Ps(-this.x),this.y,this.z,Ps(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:n}=as,i=Ps(e**is),s=Ps(t**is),o=Ps(is*Ps(r**is)),a=Ps(n*i),c=Ps(Ps((e+t)**is)-i-s),l=a+s,u=l-o,h=a-s,d=Ps(c*u),p=Ps(l*h),f=Ps(c*h),y=Ps(u*l);return new fs(d,p,y,f)}add(e){ys(e);const{x:t,y:r,z:n,t:i}=this,{x:s,y:o,z:a,t:c}=e,l=Ps((r-t)*(o+s)),u=Ps((r+t)*(o-s)),h=Ps(u-l);if(h===rs)return this.double();const d=Ps(n*is*c),p=Ps(i*is*a),f=p+d,y=u+l,g=p-d,m=Ps(f*h),w=Ps(y*g),v=Ps(f*g),b=Ps(h*y);return new fs(m,w,b,v)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(fs.BASE)&&(t=bs.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&vs.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=fs.normalizeZ(n),vs.set(t,n)));let i=fs.ZERO,s=fs.ZERO;const o=1+256/r,a=2**(r-1),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let h=0;h<o;h++){const t=h*a;let r=Number(e&c);if(e>>=u,r>a&&(r-=l,e+=ns),0===r){let e=n[t];h%2&&(e=e.negate()),s=s.add(e)}else{let e=n[t+Math.abs(r)-1];r<0&&(e=e.negate()),i=i.add(e)}}return fs.normalizeZ([i,s])[0]}multiply(e,t){return this.wNAF(js(e,as.l),t)}multiplyUnsafe(e){let t=js(e,as.l,!1);const r=fs.BASE,n=fs.ZERO;if(t===rs)return n;if(this.equals(n)||t===ns)return this;if(this.equals(r))return this.wNAF(t);let i=n,s=this;for(;t>rs;)t&ns&&(i=i.add(s)),s=s.double(),t>>=ns;return i}isSmallOrder(){return this.multiplyUnsafe(as.h).equals(fs.ZERO)}isTorsionFree(){return this.multiplyUnsafe(as.l).equals(fs.ZERO)}toAffine(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ns(this.z);const{x:t,y:r,z:n}=this,i=Ps(t*e),s=Ps(r*e);if(Ps(n*e)!==ns)throw new Error("invZ was invalid");return new bs(i,s)}fromRistrettoBytes(){ms()}toRistrettoBytes(){ms()}fromRistrettoHash(){ms()}}function ys(e){if(!(e instanceof fs))throw new TypeError("ExtendedPoint expected")}function gs(e){if(!(e instanceof ws))throw new TypeError("RistrettoPoint expected")}function ms(){throw new Error("Legacy method: switch to RistrettoPoint")}fs.BASE=new fs(as.Gx,as.Gy,ns,Ps(as.Gx*as.Gy)),fs.ZERO=new fs(rs,ns,ns,rs);class ws{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=as,r=Ps(ls*e*e),n=Ps((r+ns)*ds);let i=BigInt(-1);const s=Ps((i-t*r)*Ps(r+t));let{isValid:o,value:a}=Bs(n,s),c=Ps(a*e);Rs(c)||(c=Ps(-c)),o||(a=c),o||(i=r);const l=Ps(i*(r-ns)*ps-s),u=a*a,h=Ps((a+a)*s),d=Ps(l*us),p=Ps(ns-u),f=Ps(ns+u);return new fs(Ps(h*f),Ps(p*d),Ps(d*f),Ps(h*p))}static hashToCurve(e){const t=Ds((e=Us(e,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(t),n=Ds(e.slice(32,64)),i=this.calcElligatorRistrettoMap(n);return new ws(r.add(i))}static fromHex(e){e=Us(e,32);const{a:t,d:r}=as,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=Ds(e);if(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(Cs(i),e)||Rs(i))throw new Error(n);const s=Ps(i*i),o=Ps(ns+t*s),a=Ps(ns-t*s),c=Ps(o*o),l=Ps(a*a),u=Ps(t*r*c-l),{isValid:h,value:d}=Ls(Ps(u*l)),p=Ps(d*a),f=Ps(d*p*u);let y=Ps((i+i)*p);Rs(y)&&(y=Ps(-y));const g=Ps(o*f),m=Ps(y*g);if(!h||Rs(m)||g===rs)throw new Error(n);return new ws(new fs(y,g,ns,m))}toRawBytes(){let{x:e,y:t,z:r,t:n}=this.ep;const i=Ps(Ps(r+t)*Ps(r-t)),s=Ps(e*t),{value:o}=Ls(Ps(i*s**is)),a=Ps(o*i),c=Ps(o*s),l=Ps(a*c*n);let u;if(Rs(n*l)){let r=Ps(t*ls),n=Ps(e*ls);e=r,t=n,u=Ps(a*hs)}else u=c;Rs(e*l)&&(t=Ps(-t));let h=Ps((r-t)*u);return Rs(h)&&(h=Ps(-h)),Cs(h)}toHex(){return As(this.toRawBytes())}toString(){return this.toHex()}equals(e){gs(e);const t=this.ep,r=e.ep,n=Ps(t.x*r.y)===Ps(t.y*r.x),i=Ps(t.y*r.y)===Ps(t.x*r.x);return n||i}add(e){return gs(e),new ws(this.ep.add(e.ep))}subtract(e){return gs(e),new ws(this.ep.subtract(e.ep))}multiply(e){return new ws(this.ep.multiply(e))}multiplyUnsafe(e){return new ws(this.ep.multiplyUnsafe(e))}}ws.BASE=new ws(fs.BASE),ws.ZERO=new ws(fs.ZERO);const vs=new WeakMap;class bs{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,vs.delete(this)}static fromHex(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{d:r,P:n}=as,i=(e=Us(e,32)).slice();i[31]=-129&e[31];const s=Ts(i);if(t&&s>=n)throw new Error("Expected 0 < hex < P");if(!t&&s>=cs)throw new Error("Expected 0 < hex < 2**256");const o=Ps(s*s),a=Ps(o-ns),c=Ps(r*o+ns);let{isValid:l,value:u}=Bs(a,c);if(!l)throw new Error("Point.fromHex: invalid y coordinate");const h=(u&ns)===ns;return 0!==(128&e[31])!==h&&(u=Ps(-u)),new bs(u,s)}static async fromPrivateKey(e){return(await zs(e)).point}toRawBytes(){const e=Cs(this.y);return e[31]|=this.x&ns?128:0,e}toHex(){return As(this.toRawBytes())}toX25519(){const{y:e}=this;return Cs(Ps((ns+e)*Ns(ns-e)))}isTorsionFree(){return fs.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new bs(Ps(-this.x),this.y)}add(e){return fs.fromAffine(this).add(fs.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return fs.fromAffine(this).multiply(e,this).toAffine()}}bs.BASE=new bs(as.Gx,as.Gy),bs.ZERO=new bs(rs,ns);class Es{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=Us(e,64),r=bs.fromHex(t.slice(0,32),!1),n=Ts(t.slice(32,64));return new Es(r,n)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof bs))throw new Error("Expected Point instance");return js(t,as.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(Cs(this.s),32),e}toHex(){return As(this.toRawBytes())}}function _s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];const n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);for(let s=0,o=0;s<t.length;s++){const e=t[s];i.set(e,o),o+=e.length}return i}const Ss=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function As(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Ss[e[r]];return t}function ks(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function Is(e){return ks(e.toString(16).padStart(64,"0"))}function Cs(e){return Is(e).reverse()}function Rs(e){return(Ps(e)&ns)===ns}function Ts(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+As(Uint8Array.from(e).reverse()))}function Ds(e){return Ps(Ts(e)&is**ss-ns)}function Ps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:as.P;const r=e%t;return r>=rs?r:t+r}function Ns(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:as.P;if(e===rs||t<=rs)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ps(e,t),n=t,i=rs,s=ns,o=ns,a=rs;for(;r!==rs;){const e=n/r,t=n%r,c=i-o*e,l=s-a*e;n=r,r=t,i=o,s=a,o=c,a=l}const c=n;if(c!==ns)throw new Error("invert: does not exist");return Ps(i,t)}function xs(e,t){const{P:r}=as;let n=e;for(;t-- >rs;)n*=n,n%=r;return n}function Os(e){const{P:t}=as,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),o=BigInt(80),a=e*e%t*e%t,c=xs(a,is)*a%t,l=xs(c,ns)*e%t,u=xs(l,r)*l%t,h=xs(u,n)*u%t,d=xs(h,i)*h%t,p=xs(d,s)*d%t,f=xs(p,o)*p%t,y=xs(f,o)*p%t,g=xs(y,n)*u%t;return{pow_p_5_8:xs(g,is)*e%t,b2:a}}function Bs(e,t){const r=Ps(t*t*t),n=Ps(r*r*t);let i=Ps(e*r*Os(e*n).pow_p_5_8);const s=Ps(t*i*i),o=i,a=Ps(i*ls),c=s===e,l=s===Ps(-e),u=s===Ps(-e*ls);return c&&(i=o),(l||u)&&(i=a),Rs(i)&&(i=Ps(-i)),{isValid:c||l,value:i}}function Ls(e){return Bs(ns,e)}async function Ms(){const e=await Hs.sha512(_s(...arguments)),t=Ts(e);return Ps(t,as.l)}function Us(e,t){const r=e instanceof Uint8Array?Uint8Array.from(e):ks(e);if("number"===typeof t&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function js(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new TypeError("Specify max value");if("number"===typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"===typeof e&&e<t)if(r){if(rs<e)return e}else if(rs<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function Fs(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}async function zs(e){if(32!==(e="bigint"===typeof e||"number"===typeof e?Is(js(e,cs)):Us(e)).length)throw new Error("Expected 32 bytes");const t=await Hs.sha512(e),r=Fs(t.slice(0,32)),n=t.slice(32,64),i=Ps(Ts(r),as.l),s=bs.BASE.multiply(i),o=s.toRawBytes();return{head:r,prefix:n,scalar:i,point:s,pointBytes:o}}async function Vs(e){return(await zs(e)).pointBytes}async function Ks(e,t){e=Us(e);const{prefix:r,scalar:n,pointBytes:i}=await zs(t),s=await Ms(r,e),o=bs.BASE.multiply(s),a=Ps(s+await Ms(o.toRawBytes(),i,e)*n,as.l);return new Es(o,a).toRawBytes()}async function $s(e,t,r){t=Us(t),r instanceof bs||(r=bs.fromHex(r,!1));const{r:n,s:i}=e instanceof Es?e.assertValidity():Es.fromHex(e),s=fs.BASE.multiplyUnsafe(i),o=await Ms(n.toRawBytes(),r.toRawBytes(),t),a=fs.fromAffine(r).multiplyUnsafe(o);return fs.fromAffine(n).add(a).subtract(s).multiplyUnsafe(as.h).equals(fs.ZERO)}bs.BASE._setWindowSize(8);const qs={node:ts,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Hs={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:As,getExtendedPublicKey:zs,mod:Ps,invert:Ns,hashToPrivateScalar:e=>{if((e=Us(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const t=Ps(Ts(e),as.l);if(t===rs||t===ns)throw new Error("Invalid private key");return t},randomBytes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(qs.web)return qs.web.getRandomValues(new Uint8Array(e));if(qs.node){const{randomBytes:t}=qs.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Hs.randomBytes(32),sha512:async e=>{if(qs.web){const t=await qs.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}if(qs.node)return Uint8Array.from(qs.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bs.BASE;const r=t.equals(bs.BASE)?t:new bs(t.x,t.y);return r._setWindowSize(e),r.multiply(is),r}},Ws=64;function Gs(e,t){const r=new Uint8Array(Ws);for(let n=0;n<32;n++)r[n]=e[n],r[32+n]=t[n];return r}class Ys{constructor(e){this._key=to(e,32)}async verify(e,t){return await async function(e,t,r){return await $s(t,r,e)}(this._key,t,e)}marshal(){return this._key}get bytes(){return Pi.encode({Type:Ti.Ed25519,Data:this.marshal()})}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}}class Qs{constructor(e,t){this._key=to(e,Ws),this._publicKey=to(t,32)}async sign(e){return await async function(e,t){const r=e.slice(0,32);return await Ks(t,r)}(this._key,e)}get public(){return new Ys(this._publicKey)}marshal(){return this._key}get bytes(){return Ni.encode({Type:Ti.Ed25519,Data:this.marshal()})}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}async id(){const e=await Nt.identity.digest(this.public.bytes);return pe.base58btc.encode(e.bytes).substring(1)}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return await Gi(this.bytes,e);throw me(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function Js(e){if(e.length>Ws){const t=(e=to(e,96)).slice(0,Ws),r=e.slice(Ws,e.length);return new Qs(t,r)}const t=(e=to(e,Ws)).slice(0,Ws),r=e.slice(32);return new Qs(t,r)}function Xs(e){return e=to(e,32),new Ys(e)}async function Zs(){const{privateKey:e,publicKey:t}=await async function(){const e=Hs.randomPrivateKey(),t=await Vs(e);return{privateKey:Gs(e,t),publicKey:t}}();return new Qs(e,t)}async function eo(e){const{privateKey:t,publicKey:r}=await async function(e){if(32!==e.length)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,r=await Vs(t);return{privateKey:Gs(t,r),publicKey:r}}(e);return new Qs(t,r)}function to(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw me(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}var ro=__webpack_require__(5856),no=__webpack_require__.t(ro,2);const io=BigInt(0),so=BigInt(1),oo=BigInt(2),ao=BigInt(3),co=BigInt(8),lo=oo**BigInt(256),uo={a:io,b:BigInt(7),P:lo-oo**BigInt(32)-BigInt(977),n:lo-BigInt("432420386565659656852420866394968145599"),h:so,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function ho(e){const{a:t,b:r}=uo,n=No(e*e),i=No(n*e);return No(i+t*e+r)}const po=uo.a===io;class fo{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof go))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new fo(e.x,e.y,so)}static toAffineBatch(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uo.P;const r=new Array(e.length),n=e.reduce(((e,n,i)=>n===io?e:(r[i]=e,No(e*n,t))),so),i=Oo(n,t);return e.reduceRight(((e,n,i)=>n===io?e:(r[i]=No(e*r[i],t),No(e*n,t))),i),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return fo.toAffineBatch(e).map(fo.fromAffine)}equals(e){if(!(e instanceof fo))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e,a=No(n**oo),c=No(o**oo),l=No(t*c),u=No(i*a),h=No(No(r*o)*c),d=No(No(s*n)*a);return l===u&&h===d}negate(){return new fo(this.x,No(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=No(e**oo),i=No(t**oo),s=No(i**oo),o=No(oo*(No((e+i)**oo)-n-s)),a=No(ao*n),c=No(a**oo),l=No(c-oo*o),u=No(a*(o-l)-co*s),h=No(oo*t*r);return new fo(l,u,h)}add(e){if(!(e instanceof fo))throw new TypeError("JacobianPoint expected");const{x:t,y:r,z:n}=this,{x:i,y:s,z:o}=e;if(i===io||s===io)return this;if(t===io||r===io)return e;const a=No(n**oo),c=No(o**oo),l=No(t*c),u=No(i*a),h=No(No(r*o)*c),d=No(No(s*n)*a),p=No(u-l),f=No(d-h);if(p===io)return f===io?this.double():fo.ZERO;const y=No(p**oo),g=No(p*y),m=No(l*y),w=No(f**oo-g-oo*m),v=No(f*(m-w)-h*g),b=No(n*o*p);return new fo(w,v,b)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=fo.ZERO;if("bigint"===typeof e&&e===io)return t;let r=Po(e);if(r===so)return this;if(!po){let e=t,n=this;for(;r>io;)r&so&&(e=e.add(n)),n=n.double(),r>>=so;return e}let{k1neg:n,k1:i,k2neg:s,k2:o}=Mo(r),a=t,c=t,l=this;for(;i>io||o>io;)i&so&&(a=a.add(l)),o&so&&(c=c.add(l)),l=l.double(),i>>=so,o>>=so;return n&&(a=a.negate()),s&&(c=c.negate()),c=new fo(No(c.x*uo.beta),c.y,c.z),a.add(c)}precomputeWindow(e){const t=po?128/e+1:256/e+1,r=[];let n=this,i=n;for(let s=0;s<t;s++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(fo.BASE)&&(t=go.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&yo.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=fo.normalizeZ(n),yo.set(t,n)));let i=fo.ZERO,s=fo.ZERO;const o=1+(po?128/r:256/r),a=2**(r-1),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let h=0;h<o;h++){const t=h*a;let r=Number(e&c);if(e>>=u,r>a&&(r-=l,e+=so),0===r){let e=n[t];h%2&&(e=e.negate()),s=s.add(e)}else{let e=n[t+Math.abs(r)-1];r<0&&(e=e.negate()),i=i.add(e)}}return{p:i,f:s}}multiply(e,t){let r,n,i=Po(e);if(po){const{k1neg:e,k1:s,k2neg:o,k2:a}=Mo(i);let{p:c,f:l}=this.wNAF(s,t),{p:u,f:h}=this.wNAF(a,t);e&&(c=c.negate()),o&&(u=u.negate()),u=new fo(No(u.x*uo.beta),u.y,u.z),r=c.add(u),n=l.add(h)}else{const{p:e,f:s}=this.wNAF(i,t);r=e,n=s}return fo.normalizeZ([r,n])[0]}toAffine(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oo(this.z);const{x:t,y:r,z:n}=this,i=e,s=No(i*i),o=No(s*i),a=No(t*s),c=No(r*o);if(No(n*i)!==so)throw new Error("invZ was invalid");return new go(a,c)}}fo.BASE=new fo(uo.Gx,uo.Gy,so),fo.ZERO=new fo(io,so,io);const yo=new WeakMap;class go{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,yo.delete(this)}static fromCompressedHex(e){const t=32===e.length,r=To(t?e:e.subarray(1));if(!zo(r))throw new Error("Point is not on curve");let n=function(e){const{P:t}=uo,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),c=e*e*e%t,l=c*c*e%t,u=xo(l,ao)*l%t,h=xo(u,ao)*l%t,d=xo(h,oo)*c%t,p=xo(d,n)*d%t,f=xo(p,i)*p%t,y=xo(f,o)*f%t,g=xo(y,a)*y%t,m=xo(g,o)*f%t,w=xo(m,ao)*l%t,v=xo(w,s)*p%t,b=xo(v,r)*c%t;return xo(b,oo)}(ho(r));const i=(n&so)===so;if(t)i&&(n=No(-n));else{1===(1&e[0])!==i&&(n=No(-n))}const s=new go(r,n);return s.assertValidity(),s}static fromUncompressedHex(e){const t=To(e.subarray(1,33)),r=To(e.subarray(33,65)),n=new go(t,r);return n.assertValidity(),n}static fromHex(e){const t=Do(e),r=t.length,n=t[0];if(32===r||33===r&&(2===n||3===n))return this.fromCompressedHex(t);if(65===r&&4===n)return this.fromUncompressedHex(t);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return go.BASE.multiply(Ko(e))}static fromSignature(e,t,r){const n=Uo(e=Do(e)),{r:i,s:s}=qo(t);if(0!==r&&1!==r)throw new Error("Cannot recover signature: invalid recovery bit");const o=1&r?"03":"02",a=go.fromHex(o+Ao(i)),{n:c}=uo,l=Oo(i,c),u=No(-n*l,c),h=No(s*l,c),d=go.BASE.multiplyAndAddUnsafe(a,u,h);if(!d)throw new Error("Cannot recover signature: point at infinify");return d.assertValidity(),d}toRawBytes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ro(this.toHex(e))}toHex(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Ao(this.x);if(e){return`${this.y&so?"03":"02"}${t}`}return`04${t}${Ao(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!zo(t)||!zo(r))throw new Error(e);const n=No(r*r);if(No(n-ho(t))!==io)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new go(this.x,No(-this.y))}double(){return fo.fromAffine(this).double().toAffine()}add(e){return fo.fromAffine(this).add(fo.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return fo.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=fo.fromAffine(this),i=t===io||t===so||this!==go.BASE?n.multiplyUnsafe(t):n.multiply(t),s=fo.fromAffine(e).multiplyUnsafe(r),o=i.add(s);return o.equals(fo.ZERO)?void 0:o.toAffine()}}function mo(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function wo(e){if(e.length<2||2!==e[0])throw new Error(`Invalid signature integer tag: ${So(e)}`);const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:To(r),left:e.subarray(t+2)}}go.BASE=new go(uo.Gx,uo.Gy),go.ZERO=new go(io,io);class vo{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=Eo(e),r="Signature.fromCompact";if("string"!==typeof e&&!t)throw new TypeError(`${r}: Expected string or Uint8Array`);const n=t?So(e):e;if(128!==n.length)throw new Error(`${r}: Expected 64-byte hex`);return new vo(Co(n.slice(0,64)),Co(n.slice(64,128)))}static fromDER(e){const t=Eo(e);if("string"!==typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=function(e){if(e.length<2||48!=e[0])throw new Error(`Invalid signature tag: ${So(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=wo(e.subarray(2)),{data:n,left:i}=wo(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${So(i)}`);return{r:t,s:n}}(t?e:Ro(e));return new vo(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!Fo(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Fo(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=uo.n>>so;return this.s>e}normalizeS(){return this.hasHighS()?new vo(this.r,uo.n-this.s):this}toDERRawBytes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ro(this.toDERHex(e))}toDERHex(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=mo(Io(this.s));if(e)return t;const r=mo(Io(this.r)),n=Io(r.length/2),i=Io(t.length/2);return`30${Io(r.length/2+t.length/2+4)}02${n}${r}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Ro(this.toCompactHex())}toCompactHex(){return Ao(this.r)+Ao(this.s)}}function bo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every(Eo))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);for(let s=0,o=0;s<t.length;s++){const e=t[s];i.set(e,o),o+=e.length}return i}function Eo(e){return e instanceof Uint8Array}const _o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function So(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=_o[e[r]];return t}function Ao(e){if(e>lo)throw new Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function ko(e){return Ro(Ao(e))}function Io(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Co(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Ro(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function To(e){return Co(So(e))}function Do(e){return e instanceof Uint8Array?Uint8Array.from(e):Ro(e)}function Po(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&Fo(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function No(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uo.P;const r=e%t;return r>=io?r:t+r}function xo(e,t){const{P:r}=uo;let n=e;for(;t-- >io;)n*=n,n%=r;return n}function Oo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uo.P;if(e===io||t<=io)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=No(e,t),n=t,i=io,s=so,o=so,a=io;for(;r!==io;){const e=n/r,t=n%r,c=i-o*e,l=s-a*e;n=r,r=t,i=o,s=a,o=c,a=l}const c=n;if(c!==so)throw new Error("invert: does not exist");return No(i,t)}const Bo=(e,t)=>(e+t/oo)/t,Lo=oo**BigInt(128);function Mo(e){const{n:t}=uo,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-so*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=Bo(s*e,t),a=Bo(-n*e,t);let c=No(e-o*r-a*i,t),l=No(-o*n-a*s,t);const u=c>Lo,h=l>Lo;if(u&&(c=t-c),h&&(l=t-l),c>Lo||l>Lo)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:h,k2:l}}function Uo(e){const{n:t}=uo,r=8*e.length-256;let n=To(e);return r>0&&(n>>=BigInt(r)),n>=t&&(n-=t),n}class jo{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return na.hmacSha256(this.k,...t)}hmacSync(){if("function"!==typeof na.hmacSha256Sync)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=na.hmacSha256Sync(this.k,...t);if(n instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");return n}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function Fo(e){return io<e&&e<uo.n}function zo(e){return io<e&&e<uo.P}function Vo(e,t,r){const n=To(e);if(!Fo(n))return;const{n:i}=uo,s=go.BASE.multiply(n),o=No(s.x,i);if(o===io)return;const a=No(Oo(n,i)*No(t+r*o,i),i);if(a===io)return;const c=new vo(o,a);return{sig:c,recovery:(s.x===c.r?0:2)|Number(s.y&so)}}function Ko(e){let t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");t=Co(e)}else{if(!Eo(e))throw new TypeError("Expected valid private key");if(32!==e.length)throw new Error("Expected 32 bytes of private key");t=To(e)}if(!Fo(t))throw new Error("Expected private key: 0 < key < n");return t}function $o(e){return e instanceof go?(e.assertValidity(),e):go.fromHex(e)}function qo(e){if(e instanceof vo)return e.assertValidity(),e;try{return vo.fromDER(e)}catch(t){return vo.fromCompact(e)}}function Ho(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return go.fromPrivateKey(e).toRawBytes(t)}function Wo(e){return To(e.length>32?e.slice(0,32):e)}function Go(e){const t=Wo(e),r=No(t,uo.n);return Yo(r<io?t:r)}function Yo(e){if("bigint"!==typeof e)throw new Error("Expected bigint");return Ro(Ao(e))}function Qo(e,t,r){if(null==e)throw new Error(`sign: expected valid message hash, not "${e}"`);const n=Do(e),i=Ko(t),s=[Yo(i),Go(n)];if(null!=r){!0===r&&(r=na.randomBytes(32));const e=Do(r);if(32!==e.length)throw new Error("sign: Expected 32 bytes of extra data");s.push(e)}return{seed:bo(...s),m:Wo(n),d:i}}function Jo(e,t){let{sig:r,recovery:n}=e;const{canonical:i,der:s,recovered:o}=Object.assign({canonical:!0,der:!0},t);i&&r.hasHighS()&&(r=r.normalizeS(),n^=1);const a=s?r.toDERRawBytes():r.toCompactRawBytes();return o?[a,n]:a}async function Xo(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{seed:n,m:i,d:s}=Qo(e,t,r.extraEntropy);let o;const a=new jo;for(await a.reseed(n);!(o=Vo(await a.generate(),i,s));)await a.reseed();return Jo(o,r)}const Zo={strict:!0};function ea(e,t,r){let n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zo;try{n=qo(e),t=Do(t)}catch(y){return!1}const{r:s,s:o}=n;if(i.strict&&n.hasHighS())return!1;const a=Uo(t);let c;try{c=$o(r)}catch(y){return!1}const{n:l}=uo,u=Oo(o,l),h=No(a*u,l),d=No(s*u,l),p=go.BASE.multiplyAndAddUnsafe(c,h,d);if(!p)return!1;const f=No(p.x,l);return f===s}go.BASE._setWindowSize(8);const ta={node:no,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},ra={},na={isValidPrivateKey(e){try{return Ko(e),!0}catch(t){return!1}},privateAdd:(e,t)=>ko(No(Ko(e)+Ko(t),uo.n)),privateNegate:e=>{const t=Ko(e);return ko(uo.n-t)},pointAddScalar:(e,t,r)=>{const n=go.fromHex(e),i=Ko(t),s=go.BASE.multiplyAndAddUnsafe(n,i,so);if(!s)throw new Error("Tweaked point at infinity");return s.toRawBytes(r)},pointMultiply:(e,t,r)=>{const n=go.fromHex(e),i=To(Do(t));return n.multiply(i).toRawBytes(r)},hashToPrivateKey:e=>{if((e=Do(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return ko(No(To(e),uo.n-so)+so)},randomBytes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(ta.web)return ta.web.getRandomValues(new Uint8Array(e));if(ta.node){const{randomBytes:t}=ta.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>na.hashToPrivateKey(na.randomBytes(40)),bytesToHex:So,hexToBytes:Ro,concatBytes:bo,mod:No,invert:Oo,sha256:async function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(ta.web){const e=await ta.web.subtle.digest("SHA-256",bo(...t));return new Uint8Array(e)}if(ta.node){const{createHash:e}=ta.node,r=e("sha256");return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(ta.web){const t=await ta.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=bo(...r),i=await ta.web.subtle.sign("HMAC",t,n);return new Uint8Array(i)}if(ta.node){const{createHmac:t}=ta.node,n=t("sha256",e);return r.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async function(e){let t=ra[e];if(void 0===t){const r=await na.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=bo(r,r),ra[e]=t}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return na.sha256(t,...n)},taggedHashSync:function(e){if("function"!==typeof na.sha256Sync)throw new Error("utils.sha256Sync is undefined, you need to set it");let t=ra[e];if(void 0===t){const r=na.sha256Sync(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=bo(r,r),ra[e]=t}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return na.sha256Sync(t,...n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:go.BASE;const r=t===go.BASE?t:new go(t.x,t.y);return r._setWindowSize(e),r.multiply(ao),r}};function ia(e){try{go.fromHex(e)}catch(Up){throw me(Up,"ERR_INVALID_PUBLIC_KEY")}}class sa{constructor(e){ia(e),this._key=e}async verify(e,t){return await async function(e,t,r){try{const{digest:n}=await hn.sha256.digest(r);return ea(t,n,e)}catch(Up){throw me(Up,"ERR_INVALID_INPUT")}}(this._key,t,e)}marshal(){return e=this._key,go.fromHex(e).toRawBytes(!0);var e}get bytes(){return Pi.encode({Type:Ti.Secp256k1,Data:this.marshal()})}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}}class oa{constructor(e,t){this._key=e,this._publicKey=null!==t&&void 0!==t?t:function(e){try{return Ho(e,!0)}catch(Up){throw me(Up,"ERR_INVALID_PRIVATE_KEY")}}(e),function(e){try{Ho(e,!0)}catch(Up){throw me(Up,"ERR_INVALID_PRIVATE_KEY")}}(this._key),ia(this._publicKey)}async sign(e){return await async function(e,t){const{digest:r}=await hn.sha256.digest(t);try{return await Xo(r,e)}catch(Up){throw me(Up,"ERR_INVALID_INPUT")}}(this._key,e)}get public(){return new sa(this._publicKey)}marshal(){return this._key}get bytes(){return Ni.encode({Type:Ti.Secp256k1,Data:this.marshal()})}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}async id(){const e=await this.public.hash();return(0,$t.toString)(e,"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return await Gi(this.bytes,e);throw me(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function aa(e){return new oa(e)}function ca(e){return new sa(e)}async function la(){const e=await na.randomPrivateKey();return new oa(e)}const ua={rsa:n,ed25519:i,secp256k1:s};function ha(e){const t=Object.keys(ua).join(" / ");return me(new Error(`invalid or unsupported key type ${e}. Must be ${t}`),"ERR_UNSUPPORTED_KEY_TYPE")}function da(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return ua[e];throw ha(e)}function pa(e){const t=Pi.decode(e),r=t.Data;switch(t.Type){case Ti.RSA:return ua.rsa.unmarshalRsaPublicKey(r);case Ti.Ed25519:return ua.ed25519.unmarshalEd25519PublicKey(r);case Ti.Secp256k1:return ua.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw ha(t.Type)}}function fa(e,t){var r;return da(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}async function ya(e){const t=Ni.decode(e),r=t.Data;switch(t.Type){case Ti.RSA:return await ua.rsa.unmarshalRsaPrivateKey(r);case Ti.Ed25519:return ua.ed25519.unmarshalEd25519PrivateKey(r);case Ti.Secp256k1:return ua.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw ha(t.Type)}}async function ga(e,t){try{const r=await async function(e,t){const r=ye.base64.decode(e),n=Fi();return await n.decrypt(r,t)}(e,t);return await ya(r)}catch(i){}const r=xi.pki.decryptRsaPrivateKey(e,t);if(null===r)throw me(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=xi.asn1.toDer(xi.pki.privateKeyToAsn1(r));return n=(0,zt.fromString)(n.getBytes(),"ascii"),await ua.rsa.unmarshalRsaPrivateKey(n)}const ma="ERR_UNRECOGNIZED_VALIDITY",wa="ERR_SIGNATURE_VERIFICATION",va="ERR_UNDEFINED_PARAMETER";var ba;!function(e){let t,r;!function(e){e.EOL="EOL"}(t=e.ValidityType||(e.ValidityType={})),function(e){e[e.EOL=0]="EOL"}(r||(r={})),function(e){e.codec=()=>ui(r)}(t=e.ValidityType||(e.ValidityType={})),e.codec=()=>Ei({1:{name:"value",codec:ci,optional:!0},2:{name:"signature",codec:ci,optional:!0},3:{name:"validityType",codec:e.ValidityType.codec(),optional:!0},4:{name:"validity",codec:ci,optional:!0},5:{name:"sequence",codec:Ri,optional:!0},6:{name:"ttl",codec:Ri,optional:!0},7:{name:"pubKey",codec:ci,optional:!0},8:{name:"signatureV2",codec:ci,optional:!0},9:{name:"data",codec:ci,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(ba||(ba={}));const Ea=ge("ipns:utils"),_a=(0,zt.fromString)("/ipns/");function Sa(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),l=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,l))}const Aa=(e,t,r)=>{const n=(0,zt.fromString)(t);return(0,Ln.concat)([e,r,n])},ka=e=>{const t=(0,zt.fromString)("ipns-signature:");return(0,Ln.concat)([t,e])},Ia=e=>{var t,r,n,i,s,o;const a=ba.decode(e);return{value:null!==(t=a.value)&&void 0!==t?t:new Uint8Array(0),signature:null!==(r=a.signature)&&void 0!==r?r:new Uint8Array(0),validityType:null!==(n=a.validityType)&&void 0!==n?n:ba.ValidityType.EOL,validity:null!==(i=a.validity)&&void 0!==i?i:new Uint8Array(0),sequence:null!==(s=a.sequence)&&void 0!==s?s:0n,pubKey:a.pubKey,ttl:null!==(o=a.ttl)&&void 0!==o?o:void 0,signatureV2:a.signatureV2,data:a.data}},Ca=e=>(0,Ln.concat)([_a,e.toBytes()]),Ra=ge("ipns"),Ta=Nt.identity.code,Da="/ipns/",Pa=Da.length,Na=async(e,t,r,n,i,s)=>{r=BigInt(r);const o=(0,zt.fromString)(i.toString());if(null==e.privateKey)throw me(new Error("Missing private key"),"ERR_MISSING_PRIVATE_KEY");const a=await ya(e.privateKey),c=await Oa(a,t,n,o),l=((e,t,r,n,i)=>{let s;if(r!==ba.ValidityType.EOL)throw me(new Error("Unknown validity type"),ma);s=0;const o={Value:e,Validity:t,ValidityType:s,Sequence:n,TTL:i};return ot.cv(o)})(t,o,n,r,s),u=ka(l),h={value:t,signature:c,validityType:n,validity:o,sequence:r,ttl:s,signatureV2:await a.sign(u),data:l};if(null!=e.publicKey){const t=ln.decode(e.toBytes());t.code===Ta&&(0,un.equals)(e.publicKey,t.digest)||(h.pubKey=e.publicKey)}return Ra("ipns entry for %b created",t),h},xa=e=>new Gt(`/ipns/${(e=>fe.base32upper.encode(e).slice(1))(e)}`),Oa=async(e,t,r,n)=>{try{const i=Aa(t,r,n);return await e.sign(i)}catch(i){throw Ra.error("record signature creation failed",i),me(new Error("record signature creation failed"),"ERR_SIGNATURE_CREATION")}},Ba=ge("ipfs:ipns:publisher"),La=On().code,Ma=36e5;class Ua{constructor(e,t){this._routing=e,this._datastore=t}async publishWithEOL(e,t,r){const n=await this._updateOrCreateRecord(e,t,r);return this._putRecordToRouting(n,e)}publish(e,t){return this.publishWithEOL(e,t,Ma)}async _putRecordToRouting(e,t){if(!Dn(t)){const e="peerId received is not valid";throw Ba.error(e),me(new Error(e),"ERR_INVALID_PEER_ID")}if(null==t.publicKey)throw me(new Error("Public key was missing"),"ERR_MISSING_PUBLIC_KEY");const r=Ca(t);return await this._publishEntry(r,e),e}async _publishEntry(e,t){try{const r=await this._routing.put(e,t);return Ba(`ipns record for ${(0,$t.toString)(e,"base32")} was stored in the routing`),r}catch(Up){const r=`ipns record for ${(0,$t.toString)(e,"base32")} could not be stored in the routing - ${Up.stack}`;throw Ba.error(r),Ba.error(Up),me(new Error(r),"ERR_PUTTING_TO_ROUTING")}}async _getPublished(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Dn(e)){const e="peerId received is not valid";throw Ba.error(e),me(new Error(e),"ERR_INVALID_PEER_ID")}const r=!1!==t.checkRouting;try{const t=await this._datastore.get(xa(e.toBytes()));return this._unmarshalData(t)}catch(Up){if(Up.code!==La){const t=`unexpected error getting the ipns record ${e.toString()} from datastore`;throw Ba.error(t),me(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE")}if(!r)throw me(Up,"ERR_NOT_FOUND_AND_CHECK_ROUTING_NOT_ENABLED");try{const t=Ca(e),r=await this._routing.get(t);return this._unmarshalData(r)}catch(Up){throw Ba.error(Up),Up}}}_unmarshalData(e){try{return Ia(e)}catch(Up){throw me(Up,"ERR_INVALID_RECORD_DATA")}}async _updateOrCreateRecord(e,t,r){if(!Dn(e)){const e="peerId received is not valid";throw Ba.error(e),me(new Error(e),"ERR_INVALID_PEER_ID")}const n={checkRouting:!0};let i;try{i=await this._getPublished(e,n)}catch(Up){if(Up.code!==La){const r=`unexpected error when determining the last published IPNS record for ${e.toString()} ${Up.stack}`;throw Ba.error(r),me(new Error(r),"ERR_DETERMINING_PUBLISHED_RECORD")}}let s,o=0n;i&&void 0!==i.sequence&&(o=(0,un.equals)(i.value,t)?i.sequence:i.sequence+BigInt(1));try{s=await(async(e,t,r,n)=>{const i=new Bn(Date.now()+Number(n)),s=ba.ValidityType.EOL,[o,a]=n.toString().split("."),c=BigInt(o)*BigInt(1e5)+BigInt(null!==a&&void 0!==a?a:"0");return await Na(e,t,r,s,i,c)})(e,t,o,r)}catch(Up){const r=`ipns record for ${t} could not be created`;throw Ba.error(Up),me(new Error(r),"ERR_CREATING_IPNS_RECORD")}try{const r=(a=s,ba.encode(a));return await this._datastore.put(xa(e.toBytes()),r),Ba(`ipns record for ${(0,$t.toString)(t,"base32")} was stored in the datastore`),r}catch(Up){const r=`ipns record for ${t} could not be stored in the datastore`;throw Ba.error(r),me(new Error(r),"ERR_STORING_IN_DATASTORE")}var a}}Ua.defaultRecordLifetime=Ma;const ja=ge("ipfs:ipns:republisher");class Fa{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{pass:""};this._publisher=e,this._datastore=t,this._peerId=r,this._keychain=n,this._options=i,this._republishHandle=null}async start(){if(this._republishHandle)throw me(new Error("republisher is already running"),"ERR_REPUBLISH_ALREADY_RUNNING");const e={_task:null,_inflightTask:null,_timeoutId:null,runPeriodically:t=>{e._timeoutId=setTimeout((async()=>{e._timeoutId=null;try{e._inflightTask=e._task(),await e._inflightTask,e._task&&e.runPeriodically(t)}catch(Up){ja.error(Up)}}),t())},cancel:async()=>{null!=e._timeoutId&&clearTimeout(e._timeoutId),e._task=null,await e._inflightTask}},{pass:t}=this._options;let r=!0;e._task=()=>this._republishEntries(this._peerId,t),e.runPeriodically((()=>r?(r=!1,this._options.initialBroadcastInterval||6e4):this._options.broadcastInterval||144e5)),this._republishHandle=e}async stop(){const e=this._republishHandle;if(!e)throw me(new Error("republisher is not running"),"ERR_REPUBLISH_NOT_RUNNING");this._republishHandle=null,await e.cancel()}async _republishEntries(e,t){try{await this._republishEntry(e)}catch(Up){const t="cannot republish entry for the node's private key";return void ja.error(t)}if(t)try{const e=await this._keychain.listKeys();for(const r of e){if("self"===r.name)continue;const e=await this._keychain.exportKey(r.name,t),n=await ga(e,t),i=await En(n.public.bytes,n.bytes);await this._republishEntry(i)}}catch(Up){ja.error(Up)}}async _republishEntry(e){try{const t=await this._getPreviousValue(e);await this._publisher.publishWithEOL(e,t,864e5)}catch(Up){if("ERR_NO_ENTRY_FOUND"===Up.code)return;throw Up}}async _getPreviousValue(e){if(!Dn(e))throw me(new Error("invalid peer ID"),"ERR_INVALID_PEER_ID");try{const t=await this._datastore.get(xa(e.toBytes()));if(!(t instanceof Uint8Array))throw me(new Error("found ipns record that we couldn't process"),"ERR_INVALID_IPNS_RECORD");try{return Ia(t).value}catch(Up){throw ja.error(Up),me(new Error("found ipns record that we couldn't convert to a value"),"ERR_INVALID_IPNS_RECORD")}}catch(Up){if(Up&&Up.notFound)throw me(new Error(`no previous entry for record with id: ${e.toString()}`),"ERR_NO_ENTRY_FOUND");throw Up}}}const za=ge("ipns:validator"),Va=e=>{if(null==e.data)throw me(new Error("Record data is missing"),"ERR_INVALID_RECORD_DATA");const t=(e=>{const t=ot.Jx(e);if(0!==t.ValidityType)throw me(new Error("Unknown validity type"),ma);return t.ValidityType=ba.ValidityType.EOL,Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),t})(e.data);if(!(0,un.equals)(t.Value,e.value))throw me(new Error('Field "value" did not match between protobuf and CBOR'),wa);if(!(0,un.equals)(t.Validity,e.validity))throw me(new Error('Field "validity" did not match between protobuf and CBOR'),wa);if(t.ValidityType!==e.validityType)throw me(new Error('Field "validityType" did not match between protobuf and CBOR'),wa);if(t.Sequence!==e.sequence)throw me(new Error('Field "sequence" did not match between protobuf and CBOR'),wa);if(t.TTL!==e.ttl)throw me(new Error('Field "ttl" did not match between protobuf and CBOR'),wa)},Ka=async(e,t)=>{const r=(e=>bn(e.slice(_a.length)))(e),n=Ia(t),i=await(async(e,t)=>{if(null==t||null==e){const e=new Error("one or more of the provided parameters are not defined");throw Ea.error(e),me(e,va)}let r;if(null!=t.pubKey){try{r=pa(t.pubKey)}catch(Up){throw Ea.error(Up),Up}if(!(await En(t.pubKey)).equals(e))throw me(new Error("Embedded public key did not match PeerID"),"ERR_INVALID_EMBEDDED_KEY")}else null!=e.publicKey&&(r=pa(e.publicKey));if(null!=r)return r;throw me(new Error("no public key is available"),va)})(r,n);await(async(e,t)=>{const{value:r,validityType:n,validity:i}=t;let s,o;var a;let c;null!=t.signatureV2&&null!=t.data?(o=t.signatureV2,s=ka(t.data),Va(t)):(o=null!==(a=t.signature)&&void 0!==a?a:new Uint8Array(0),s=Aa(r,n,i));try{c=await e.verify(s,o)}catch(Up){c=!1}if(!c)throw za.error("record signature verification failed"),me(new Error("record signature verification failed"),wa);if(null!=i&&n===ba.ValidityType.EOL){let e;try{e=Sa((0,$t.toString)(i))}catch(l){throw za.error("unrecognized validity format (not an rfc3339 format)"),me(new Error("unrecognized validity format (not an rfc3339 format)"),"ERR_UNRECOGNIZED_FORMAT")}if(e.getTime()<Date.now())throw za.error("record has expired"),me(new Error("record has expired"),"ERR_IPNS_EXPIRED_RECORD")}else if(null!=n)throw za.error("unrecognized validity type"),me(new Error("unrecognized validity type"),ma);za("ipns entry for %b is valid",r)})(i,n)},$a=ge("ipfs:ipns:resolver"),qa=On().code;class Ha{constructor(e){this._routing=e}async resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof e)throw me(new Error("invalid name"),"ERR_INVALID_NAME");const r=t.recursive&&"true"===t.recursive.toString(),n=e.split("/");if(3!==n.length||""!==n[0])throw me(new Error("invalid name"),"ERR_INVALID_NAME");const i=n[2];let s=1/0;r&&(s=32);const o=await this.resolver(i,s);return $a(`${e} was locally resolved correctly`),o}async resolver(e,t){if(0===t){const e="could not resolve name (recursion limit of 32 exceeded)";throw $a.error(e),me(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT")}const r=await this._resolveName(e),n=r.split("/");return"ipfs"!==n[1]&&t?this.resolver(n[2],t-1):r}async _resolveName(e){const t=vn(e),r=Ca(t);let n;try{n=await this._routing.get(r)}catch(Up){if($a.error("could not get record from routing",Up),Up.code===qa)throw me(new Error(`record requested for ${e} was not found in the network`),"ERR_NO_RECORD_FOUND");throw me(new Error(`unexpected error getting the ipns record ${t.toString()}`),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}return this._validateRecord(t,n)}async _validateRecord(e,t){await Ka((0,Ln.concat)([(0,zt.fromString)("/ipns/"),e.toBytes()]),t);const r=Ia(t);return(0,$t.toString)(r.value)}}class Wa{constructor(e){this.lru=yr(e)}get(e){const t=this.lru.get(e);if(t)return t.expire&&t.expire<Date.now()?void this.lru.remove(e):t.value}set(e,t,r){this.lru.set(e,{value:t,expire:Date.now()+r})}has(e){return!!this.get(e)}remove(e){this.lru.remove(e)}clear(){this.lru.clear()}}const Ga=ge("ipfs:ipns");class Ya{constructor(e,t,r,n,i){this.publisher=new Ua(e,t),this.republisher=new Fa(this.publisher,t,r,n,i),this.resolver=new Ha(e),this.cache=new Wa(1e3),this.routing=e}async publish(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ua.defaultRecordLifetime;try{await this.publisher.publishWithEOL(e,t,r),Ga(`IPNS value ${(0,$t.toString)(t,"base32")} was published correctly`);const n=e.toString(),i=parseFloat(r),s=i<6e4?i:6e4;return this.cache.set(n,t,s),Ga(`IPNS value ${(0,$t.toString)(t,"base32")} was cached correctly`),{name:n,value:t}}catch(Up){throw Ga.error(Up),Up}}async resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!==typeof e)throw me(new Error("name received is not valid"),"ERR_INVALID_NAME");if(!t.nocache&&!t.recursive){const t=e.split("/")[2],r=this.cache.get(t);if(r)return r}try{const r=await this.resolver.resolve(e,t);return Ga(`IPNS record from ${e} was resolved correctly`),r}catch(Up){throw Ga.error(Up),Up}}async initializeKeyspace(e,t){return this.publish(e,t,Ua.defaultRecordLifetime)}}var Qa=__webpack_require__(464);const Ja=(e,t)=>async function*(){const r=await Qa(e);yield*r.sort(t)}();var Xa=__webpack_require__(9272),Za=__webpack_require__(2393),ec=__webpack_require__(5959);class tc{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of e)yield this.get(r,t)}async*deleteMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await Xa(this.putMany(e,r)),e=[],await Xa(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix&&(r=Za(r,(t=>t.key.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>Za(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>Ja(e,t)),r)),null!=e.offset){let t=0;r=Za(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=ec(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix&&(r=Za(r,(t=>t.toString().startsWith(e.prefix)))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>Za(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>Ja(e,t)),r)),null!=e.offset){let t=0;r=Za(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=ec(r,e.limit)),r}}var rc=__webpack_require__(7067);const nc=de("datastore:core:tiered");class ic extends tc{constructor(e){super(),this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map((e=>e.open())))}catch(Up){throw Pn()}}async put(e,t,r){try{await Promise.all(this.stores.map((n=>n.put(e,t,r))))}catch(Up){throw xn()}}async get(e,t){for(const r of this.stores)try{const n=await r.get(e,t);if(n)return n}catch(Up){nc(Up)}throw On()}async has(e,t){for(const r of this.stores)if(await r.has(e,t))return!0;return!1}async delete(e,t){try{await Promise.all(this.stores.map((r=>r.delete(e,t))))}catch(Up){throw Nn()}}async*putMany(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.stores.map((e=>{const n=rc();return Xa(e.putMany(n,r)).catch((e=>{t=e})),n}));try{for await(const r of e){if(t)throw t;n.forEach((e=>e.push(r))),yield r}}finally{n.forEach((e=>e.end()))}}async*deleteMany(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.stores.map((e=>{const n=rc();return Xa(e.deleteMany(n,r)).catch((e=>{t=e})),n}));try{for await(const r of e){if(t)throw t;n.forEach((e=>e.push(r))),yield r}}finally{n.forEach((e=>e.end()))}}async close(){await Promise.all(this.stores.map((e=>e.close())))}batch(){const e=this.stores.map((e=>e.batch()));return{put:(t,r)=>{e.forEach((e=>e.put(t,r)))},delete:t=>{e.forEach((e=>e.delete(t)))},commit:async t=>{for(const r of e)await r.commit(t)}}}query(e,t){return this.stores[this.stores.length-1].query(e,t)}queryKeys(e,t){return this.stores[this.stores.length-1].queryKeys(e,t)}}var sc=__webpack_require__(5157);const oc=(e,t)=>{const r=t.map(((e,t)=>({entry:ba.decode(e),index:t})));return r.sort(((e,t)=>{var r,n,i,s;if(null!=e.entry.signatureV2&&null==t.entry.signatureV2)return-1;if(null==e.entry.signatureV2&&null!=t.entry.signatureV2)return 1;const o=null!==(r=e.entry.sequence)&&void 0!==r?r:0n,a=null!==(n=t.entry.sequence)&&void 0!==n?n:0n;if(o>a)return-1;if(o<a)return 1;const c=null!==(i=e.entry.validity)&&void 0!==i?i:new Uint8Array(0),l=null!==(s=t.entry.validity)&&void 0!==s?s:new Uint8Array(0),u=Sa((0,$t.toString)(c)),h=Sa((0,$t.toString)(l));return u.getTime()>h.getTime()?-1:u.getTime()<h.getTime()?1:0})),r[0].index},ac="SHARDING";class cc extends tc{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,t){this.data[e.toString()]=t}async get(e){if(!await this.has(e))throw On();return this.data[e.toString()]}async has(e){return void 0!==this.data[e.toString()]}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map((e=>{let[t,r]=e;return{key:new Gt(t),value:r}}))}async*_allKeys(){yield*Object.entries(this.data).map((e=>{let[t]=e;return new Gt(t)}))}}var lc=__webpack_require__(7889);__webpack_require__(7241);new Gt(ac),new Gt("_README");var uc=__webpack_require__(6155);const hc="/record/";function dc(e){return(0,$t.toString)(e,"base32")}function pc(e){("string"===typeof e||e instanceof String)&&(e=(0,zt.fromString)(e.toString()));return`/record/${(0,$t.toString)(e,"base64url")}`}const fc=ge("datastore-pubsub:publisher");class yc extends tc{constructor(e,t,r,n,i,s){if(super(),!n)throw me(new TypeError("missing validator"),"ERR_INVALID_PARAMETERS");if("function"!==typeof n)throw me(new TypeError("missing validate function"),"ERR_INVALID_PARAMETERS");if("function"!==typeof i)throw me(new TypeError("missing select function"),"ERR_INVALID_PARAMETERS");if(s&&"function"!==typeof s)throw me(new TypeError("invalid subscriptionKeyFn received"),"ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=t,this._peerId=r,this._validator=n,this._selector=i,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this),this._pubsub.addEventListener("message",this._onMessage)}async put(e,t){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw fc.error(e),me(new Error(e),"ERR_INVALID_DATASTORE_KEY")}if(!(t instanceof Uint8Array)){const e="received value is not a Uint8Array";throw fc.error(e),me(new Error(e),"ERR_INVALID_VALUE_RECEIVED")}const r=pc(e);fc(`publish value for topic ${r}`),await this._pubsub.publish(r,t)}async get(e){if(!(e instanceof Uint8Array)){const e="datastore key does not have a valid format";throw fc.error(e),me(new Error(e),"ERR_INVALID_DATASTORE_KEY")}const t=pc(e),r=await this._pubsub.getTopics();if(r&&Array.isArray(r)&&r.indexOf(t)>-1)return this._getLocal(e);try{await this._pubsub.subscribe(t)}catch(Up){const r=`cannot subscribe topic ${t}`;throw fc.error(r),me(new Error(r),"ERR_SUBSCRIBING_TOPIC")}return fc(`subscribed values for key ${t}`),this._getLocal(e)}unsubscribe(e){const t=pc(e);return this._pubsub.unsubscribe(t)}async _getLocal(e){const t=new Gt("/"+dc(e),!1);let r;try{r=await this._datastore.get(t)}catch(Up){if("ERR_NOT_FOUND"!==Up.code){const e=`unexpected error getting the ipns record for ${t.toString()}`;throw fc.error(e),me(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const r=`local record requested was not found for ${t.toString()}`;throw fc.error(r),me(new Error(r),"ERR_NOT_FOUND")}if(!(r instanceof Uint8Array)){const e="found record that we couldn't convert to a value";throw fc.error(e),me(new Error(e),"ERR_INVALID_RECORD_RECEIVED")}return r}async _onMessage(e){const t=e.detail,{data:r,from:n,topic:i}=t;let s;try{s=function(e){if(e.substring(0,hc.length)!==hc)throw me(new Error("topic received is not from a record"),"ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const t=e.substring(hc.length);return(0,zt.fromString)(t,"base64url")}(i)}catch(Up){return void fc.error(Up)}if(fc(`message received for topic ${i}`),this._peerId.equals(n))fc("message discarded as it is from the same peer");else{if(this._handleSubscriptionKeyFn){let e;try{e=await this._handleSubscriptionKeyFn(s)}catch(Up){return void fc.error("message discarded by the subscriptionKeyFn")}s=e}try{await this._storeIfSubscriptionIsBetter(s,r)}catch(Up){fc.error(Up)}}}async _storeIfSubscriptionIsBetter(e,t){let r=!1;try{r=await this._isBetter(e,t)}catch(Up){if("ERR_NOT_VALID_RECORD"!==Up.code)throw Up}r&&await this._storeRecord(e,t)}async _validateRecord(e,t){return this._validator(e,t)}async _selectRecord(e,t){return 0===await this._selector(e,t)}async _isBetter(e,t){try{await this._validateRecord(e,t)}catch(Up){const t="record received through pubsub is not valid";throw fc.error(t),me(new Error(t),"ERR_NOT_VALID_RECORD")}const r=new Gt(e);let n;try{n=await this._getLocal(r.uint8Array())}catch(Up){return!0}return!(0,un.equals)(n,t)&&this._selectRecord(e,[n,t])}async _storeRecord(e,t){const r=new Gt("/"+dc(e),!1);await this._datastore.put(r,t),fc(`record for ${pc(e)} was stored in the datastore`)}}const gc=ge("ipfs:ipns:pubsub");class mc{constructor(e,t,r){this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new yc(e,t,r,Ka,oc,this._handleSubscriptionKey)}async put(e,t){try{await this._pubsubDs.put(e,t)}catch(Up){throw gc.error(Up),Up}}async get(e){let t,r;try{t=await this._pubsubDs.get(e)}catch(i){r=i}const n=e.slice(0,Pa);if((0,$t.toString)(n)===Da){const t=pe.base58btc.encode(e).substring(1),r=pe.base58btc.encode(e.slice(Pa)).substring(1);this._subscriptions[t]=r,gc(`subscribed to pubsub topic ${t}, id ${r}`)}if(r)throw r;return t}_handleSubscriptionKey(e){e instanceof Uint8Array&&(e=(0,$t.toString)(e,"base58btc"));const t=this._subscriptions[e];if(!t)throw me(new Error(`key ${e} does not correspond to a subscription`),"ERR_INVALID_KEY");try{return Ca(vn(t))}catch(Up){throw gc.error(Up),Up}}getSubscriptions(){return Object.values(this._subscriptions).filter(Boolean).map((e=>`/ipns/${e}`))}async cancel(e){if("string"!==typeof e)throw me(new Error("invalid subscription name"),"ERR_INVALID_SUBSCRIPTION_NAME");e.startsWith(Da)&&(e=e.substring(Pa));const t=Object.keys(this._subscriptions).find((t=>this._subscriptions[t]===e));if(!t)return{canceled:!1};const r=(0,zt.fromString)(t);return this._pubsubDs.unsubscribe(r),delete this._subscriptions[t],gc(`unsubscribed pubsub ${t}: ${e}`),{canceled:!0}}}var wc;function vc(e){const t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),n=String(e.getUTCDate()).padStart(2,"0"),i=String(e.getUTCHours()).padStart(2,"0"),s=String(e.getUTCMinutes()).padStart(2,"0"),o=String(e.getUTCSeconds()).padStart(2,"0"),a=e.getUTCMilliseconds();return`${t}-${r}-${n}T${i}:${s}:${o}.${String(1e3*a*1e3).padStart(9,"0")}Z`}!function(e){e.codec=()=>Ei({1:{name:"key",codec:ci},2:{name:"value",codec:ci},5:{name:"timeReceived",codec:Ii}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(wc||(wc={}));class bc{constructor(e,t,r){if(!(e instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(t instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=e,this.value=t,this.timeReceived=r}serialize(){return wc.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:vc(this.timeReceived)}}static deserialize(e){const t=wc.decode(e);return new bc(t.key,t.value,new Date(t.timeReceived))}static fromDeserialized(e){const t=function(e){const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw new Error("Invalid format");const n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),o=parseInt(r[4],10),a=parseInt(r[5],10),c=parseInt(r[6],10),l=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,s,o,a,c,l))}(e.timeReceived);if(null==e.key)throw new Error("key missing from deserialized object");if(null==e.value)throw new Error("value missing from deserialized object");return new bc(e.key,e.value,t)}}const Ec=ge("ipfs:ipns:offline-datastore");class _c{constructor(e){this._datastore=e,this.stores=[]}async put(e,t){if(!(e instanceof Uint8Array))throw me(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");if(!(t instanceof Uint8Array))throw me(new Error("Offline datastore value must be a Uint8Array"),"ERR_INVALID_VALUE");let r;try{r=this._routingKey(e)}catch(Up){throw Ec.error(Up),me(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const n=new bc(e,t,new Date);await this._datastore.put(r,n.serialize())}async get(e){if(!(e instanceof Uint8Array))throw me(new Error("Offline datastore key must be a Uint8Array"),"ERR_INVALID_KEY");let t;try{t=this._routingKey(e)}catch(Up){throw Ec.error(Up),me(new Error("Not possible to generate the routing key"),"ERR_GENERATING_ROUTING_KEY")}const r=await this._datastore.get(t);let n;try{n=bc.deserialize(r)}catch(Up){throw Ec.error(Up),Up}return n.value}_routingKey(e){return new Gt("/dht/record/"+(0,$t.toString)(e,"base32"),!1)}}const Sc=ge("ipfs:ipns:dht-datastore");class Ac{constructor(e){this._dht=e}async put(e,t){try{await Xa(this._dht.put(e,t))}catch(Up){throw Sc.error(Up),Up}}async get(e){for await(const t of this._dht.get(e))if("VALUE"===t.name)return t.value;throw On()}}const kc=ge("ipfs:components:ipns");class Ic{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pass:""};this.options=e,this.offline=null,this.online=null}getIPNS(){const e=this.online||this.offline;if(e)return e;throw new Ot}get routing(){return this.getIPNS().routing}startOffline(e){let{repo:t,peerId:r,keychain:n}=e;if(null!=this.offline)throw new Lt;kc("initializing IPNS keyspace (offline)");const i=new _c(t.datastore),s=new Ya(i,t.datastore,r,n,this.options);this.offline=s}async startOnline(e){let{libp2p:t,repo:r,peerId:n,keychain:i}=e;if(null!=this.online)throw new Lt;const s=function(e){let{libp2p:t,repo:r,peerId:n,options:i}=e;const s=[];let o;if(sc(i,"EXPERIMENTAL.ipnsPubsub",!1)&&(o=new mc(t.pubsub,r.datastore,n),s.push(o)),!0!==sc(i,"offline",!1)&&["dht","dhtclient","dhtserver"].includes(sc(i,"config.Routing.Type","none"))&&s.push(new Ac(t.dht)),sc(i,"offline",!1)||0===s.length){const e=new _c(r.datastore);s.push(e)}return new ic(s)}({libp2p:t,repo:r,peerId:n,options:this.options}),o=new Ya(s,r.datastore,n,i,this.options);await o.republisher.start(),this.online=o}async stop(){const e=this.online;e&&(await e.republisher.stop(),this.online=null)}publish(e,t,r){return this.getIPNS().publish(e,t,r)}resolve(e,t){return this.getIPNS().resolve(e,t)}initializeKeyspace(e,t){return this.getIPNS().initializeKeyspace(e,t)}}async function Cc(e,t,r){let{ipns:n,repo:i,codecs:s}=e;if(Vt.ipnsPath(t))return n.resolve(t);const{cid:o,path:a}=ir(t);await Xa(pr(o,a||"",s,i,r))}const Rc=ge("ipfs:name:publish");var Tc=__webpack_require__(5645),Dc=__webpack_require__(819);const Pc=ue.bind({ignoreUndefined:!0}),Nc=ge("ipfs:name:resolve"),xc=(e,t)=>t.length>0?e+"/"+t.join("/"):e;function Oc(e,t){if(!e||!t||!t.ipnsPubsub)throw me(new Error("IPNS pubsub subsystem is not enabled"),"ERR_IPNS_PUBSUB_NOT_ENABLED");if(e.routing instanceof mc)return e.routing;const r=(e.routing.stores||[]).find((e=>e instanceof mc));if(!r)throw me(new Error("IPNS pubsub datastore not found"),"ERR_PUBSUB_DATASTORE_NOT_FOUND");return r}class Bc{constructor(e){let{ipns:t,options:r}=e;this.cancel=function(e){let{ipns:t,options:r}=e;const n=r.EXPERIMENTAL;return rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Oc(t,n).cancel(e,r)}))}({ipns:t,options:r}),this.state=function(e){let{ipns:t,options:r}=e;const n=r.EXPERIMENTAL;return rr((async function(){try{return{enabled:Boolean(Oc(t,n))}}catch(Up){return{enabled:!1}}}))}({ipns:t,options:r}),this.subs=function(e){let{ipns:t,options:r}=e;const n=r.EXPERIMENTAL;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Oc(t,n).getSubscriptions(e)}))}({ipns:t,options:r})}}class Lc{constructor(e){let{dns:t,ipns:r,repo:n,codecs:i,peerId:s,isOnline:o,keychain:a,options:c}=e;this.publish=function(e){let{ipns:t,repo:r,codecs:n,peerId:i,isOnline:s,keychain:o}=e;const a=async e=>{let t;if("self"===e&&null!=i.privateKey)t=await ya(i.privateKey);else try{const r=await o.exportKey(e,"temp");t=await ga(r,"temp")}catch(Up){throw Rc.error(Up),me(Up,"ERR_CANNOT_GET_KEY")}return En(t.public.bytes,t.bytes)};return rr((async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=!(!1===i.resolve),c=i.lifetime||"24h",l=i.key||"self";if(!s())throw me(new Error(sr),"OFFLINE_ERROR");try{e=cr(e)}catch(Up){throw Rc.error(Up),Up}let u=0;try{u=er(c)||0,u=parseFloat(u.toFixed(6))}catch(Up){throw Rc.error(Up),Up}const h=await Promise.all([a(l),o?Cc({ipns:t,repo:r,codecs:n},e):Promise.resolve()]),d=(0,zt.fromString)(e),p=await t.publish(h[0],d,u);return{name:p.name,value:(0,$t.toString)(p.value)}}))}({ipns:r,repo:n,codecs:i,peerId:s,isOnline:o,keychain:a}),this.resolve=function(e){let{dns:t,ipns:r,isOnline:n,options:{offline:i}}=e;return rr((async function*(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s=Pc({nocache:!1,recursive:!0},s),i&&s&&s.nocache)throw me(new Error("cannot specify both offline and nocache"),"ERR_NOCACHE_AND_OFFLINE");if(!n()&&!i)throw me(new Error(sr),"OFFLINE_ERROR");let o=e.toString();o.startsWith("/ipns/")||(o=`/ipns/${o}`);let[a,c,...l]=o.slice(1).split("/");try{if("1"===c.substring(0,1)){const e=vn(c),t=ln.decode(e.toBytes());c=Ne.CID.createV1(114,t).toString(Tc.base36)}else{const e=Ne.CID.parse(c);1===e.version&&(c=e.toString(Tc.base36))}}catch(Up){if(Dc(c))return void(yield xc(await t(c,s),l));throw Nc.error(Up),me(new Error("Invalid IPNS name"),"ERR_IPNS_INVALID_NAME")}const u=await r.resolve(`/${a}/${c}`,s);yield xc(u instanceof Uint8Array?(0,$t.toString)(u):u,l)}))}({dns:t,ipns:r,isOnline:o,options:c}),this.pubsub=new Bc({ipns:r,options:c})}}const Mc=On().code,Uc="<dst>",jc="<src> -> <dst>";function Fc(e,t,r){const{cid:n,path:i}=ir(t);return!1!==r.preload&&e(n),`/ipfs/${n}${i||""}`}async function*zc(e,t,r,n,i){const s=await e(n,i),{cid:o}=ir(s),a=null!=i.maxDepth?i.maxDepth:1/0,c=i.unique||!1;for await(const l of async function*(e,t,r,n,i,s){const o=new Set;async function*a(r,c){const l=c+1;if(!(l>n))try{for await(const n of async function*(e,t,r,n){const i=await e.blocks.get(r,n),s=(await t.getCodec(r.code)).decode(i),o=r.code===nt,a=[];for(const[c,l]of Kc(s,a)){if(o){const e=c.match(/^Links\/(\d+)\/Hash$/);if(e){const t=Number(e[1]);if(t<s.Links.length){yield{name:s.Links[t].Name,cid:l};continue}}}yield{name:c,cid:l}}}(e,t,r.cid,s))yield{parent:r,node:n,isDuplicate:i&&o.has(n.cid.toString())},i&&o.add(n.cid.toString()),yield*a(n,l)}catch(Up){throw Up.code===Mc&&(Up.message=`Could not find object with CID: ${r.cid}`),Up}}yield*a({cid:r},0)}(t,r,o,a,c,i))l.parent&&(l.isDuplicate||(yield{ref:Vc(l.parent.cid,l.node.cid,l.node.name,i.format)}))}function Vc(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Uc,i=n.replace(/<src>/g,e.toString());return i=i.replace(/<dst>/g,t.toString()),i=i.replace(/<linkname>/g,r),i}const Kc=function*(e,t){if(null!=e&&!(e instanceof Uint8Array)){for(const[r,n]of Object.entries(e)){const e=[...t,r];if(null!=n&&"object"===typeof n)if(Array.isArray(n))for(const[t,r]of n.entries()){const n=[...e,t],i=Ne.CID.asCID(r);i?yield[n.join("/"),i]:"object"===typeof r&&(yield*Kc(r,n))}else{const t=Ne.CID.asCID(n);t?yield[e.join("/"),t]:yield*Kc(n,e)}}return[]}};function $c(e){let{repo:t}=e;return rr((async function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for await(const r of t.blocks.queryKeys({},{signal:e.signal}))yield{ref:r.toString()}}))}function qc(e){let{network:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=(await t.use(e)).bitswap,n=r.stat().snapshot;return{provideBufLen:parseInt(n.providesBufferLength.toString()),blocksReceived:BigInt(n.blocksReceived.toString()),wantlist:Array.from(r.getWantlist()).map((e=>e[1].cid)),peers:r.peers(),dupBlksReceived:BigInt(n.dupBlksReceived.toString()),dupDataReceived:BigInt(n.dupDataReceived.toString()),dataReceived:BigInt(n.dataReceived.toString()),blocksSent:BigInt(n.blocksSent.toString()),dataSent:BigInt(n.dataSent.toString())}}))}class Hc{constructor(e){let{network:t}=e;this.wantlist=function(e){let{network:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{bitswap:r}=await t.use(e),n=r.getWantlist();return Array.from(n).map((e=>e[1].cid))}))}({network:t}),this.wantlistForPeer=function(e){let{network:t}=e;return rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{bitswap:n}=await t.use(r),i=n.wantlistForPeer(e);return Array.from(i).map((e=>e[1].cid))}))}({network:t}),this.unwant=function(e){let{network:t}=e;return rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{bitswap:n}=await t.use(r);return Array.isArray(e)||(e=[e]),n.unwant(e)}))}({network:t}),this.stat=qc({network:t})}}const Wc="[a-fA-F\\d:]",Gc=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${Wc})|(?<=${Wc})(?=\\s|$))`:"",Yc="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Qc="[a-fA-F\\d]{1,4}",Jc=`\n(?:\n(?:${Qc}:){7}(?:${Qc}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${Qc}:){6}(?:${Yc}|:${Qc}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${Qc}:){5}(?::${Yc}|(?::${Qc}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${Qc}:){4}(?:(?::${Qc}){0,1}:${Yc}|(?::${Qc}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${Qc}:){3}(?:(?::${Qc}){0,2}:${Yc}|(?::${Qc}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${Qc}:){2}(?:(?::${Qc}){0,3}:${Yc}|(?::${Qc}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${Qc}:){1}(?:(?::${Qc}){0,4}:${Yc}|(?::${Qc}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${Qc}){0,5}:${Yc}|(?::${Qc}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Xc=new RegExp(`(?:^${Yc}$)|(?:^${Jc}$)`),Zc=new RegExp(`^${Yc}$`),el=new RegExp(`^${Jc}$`),tl=e=>e&&e.exact?Xc:new RegExp(`(?:${Gc(e)}${Yc}${Gc(e)})|(?:${Gc(e)}${Jc}${Gc(e)})`,"g");tl.v4=e=>e&&e.exact?Zc:new RegExp(`${Gc(e)}${Yc}${Gc(e)}`,"g"),tl.v6=e=>e&&e.exact?el:new RegExp(`${Gc(e)}${Jc}${Gc(e)}`,"g");const rl=tl;function nl(e){return rl({exact:!0}).test(e)}function il(e){return rl.v6({exact:!0}).test(e)}const sl=function(e){return rl.v4({exact:!0}).test(e)},ol=il,al=function(e){let t,r=0;if(sl(e))t=new Uint8Array(r+4),e.split(/\./g).forEach((e=>{t[r++]=255&parseInt(e,10)}));else if(ol(e)){const n=e.split(":",8);let i;for(i=0;i<n.length;i++){let e;sl(n[i])&&(e=al(n[i]),n[i]=(0,$t.toString)(e.slice(0,2),"base16")),null!=e&&++i<8&&n.splice(i,0,(0,$t.toString)(e.slice(2,4),"base16"))}if(""===n[0])for(;n.length<8;)n.unshift("0");else if(""===n[n.length-1])for(;n.length<8;)n.push("0");else if(n.length<8){for(i=0;i<n.length&&""!==n[i];i++);const e=[i,1];for(i=9-n.length;i>0;i--)e.push("0");n.splice.apply(n,e)}for(t=new Uint8Array(r+16),i=0;i<n.length;i++){const e=parseInt(n[i],16);t[r++]=e>>8&255,t[r++]=255&e}}if(null==t)throw Error("Invalid ip address: "+e);return t},cl=-1,ll={},ul={};function hl(e){if("number"===typeof e){if(null!=ul[e])return ul[e];throw new Error(`no protocol with code: ${e}`)}if("string"===typeof e){if(null!=ll[e])return ll[e];throw new Error(`no protocol with name: ${e}`)}throw new Error("invalid protocol id type: "+typeof e)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,cl,"ip6zone"],[53,cl,"dns",!0],[54,cl,"dns4",!0],[55,cl,"dns6",!0],[56,cl,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,cl,"unix",!1,!0],[421,cl,"ipfs"],[421,cl,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,cl,"garlic64"],[460,0,"quic"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,cl,"memory"]].forEach((e=>{const t=function(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...e);ul[t.code]=t,ll[t.name]=t}));var dl=__webpack_require__(4561);function pl(e,t){switch(hl(e).code){case 4:case 41:return function(e){const t=function(e,t,r){var n;t=~~t,r=null!==(n=r)&&void 0!==n?n:e.length-t;const i=[];let s="";const o=new DataView(e.buffer);if(4===r){for(let n=0;n<r;n++)i.push(e[t+n]);s=i.join(".")}else if(16===r){for(let e=0;e<r;e+=2)i.push(o.getUint16(t+e).toString(16));s=i.join(":"),s=s.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3"),s=s.replace(/:{3,4}/,"::")}return s}(e,0,e.length);if(null==t||!nl(t))throw new Error("invalid ip address");return t}(t);case 6:case 273:case 33:case 132:return ml(t).toString();case 53:case 54:case 55:case 56:case 400:case 777:return function(e){const t=dl.decode(e);if((e=e.slice(dl.decode.bytes)).length!==t)throw new Error("inconsistent lengths");return(0,$t.toString)(e)}(t);case 421:return function(e){const t=dl.decode(e),r=e.slice(dl.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return(0,$t.toString)(r,"base58btc")}(t);case 444:case 445:return wl(t);default:return(0,$t.toString)(t,"base16")}}function fl(e,t){switch(hl(e).code){case 4:case 41:return yl(t);case 6:case 273:case 33:case 132:return gl(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 777:return function(e){const t=(0,zt.fromString)(e),r=Uint8Array.from(dl.encode(t.length));return(0,Ln.concat)([r,t],r.length+t.length)}(t);case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?ln.decode(pe.base58btc.decode(`z${e}`)).bytes:Ne.CID.parse(e).multihash.bytes;const r=Uint8Array.from(dl.encode(t.length));return(0,Ln.concat)([r,t],r.length+t.length)}(t);case 444:return function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);const r=fe.base32.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=gl(n);return(0,Ln.concat)([r,i],r.length+i.length)}(t);case 445:return function(e){const t=e.split(":");if(2!==t.length)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);const r=fe.base32.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=gl(n);return(0,Ln.concat)([r,i],r.length+i.length)}(t);default:return(0,zt.fromString)(t,"base16")}}function yl(e){if(!nl(e))throw new Error("invalid ip address");return al(e)}function gl(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function ml(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function wl(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2);return`${(0,$t.toString)(t,"base32")}:${ml(r)}`}function vl(e){return e.map((e=>{const t=Tl(e);return null!=e[1]?[t.code,pl(t.code,e[1])]:[t.code]}))}function bl(e){return kl((0,Ln.concat)(e.map((e=>{const t=Tl(e);let r=Uint8Array.from(dl.encode(t.code));return e.length>1&&null!=e[1]&&(r=(0,Ln.concat)([r,e[1]])),r}))))}function El(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;return dl.decode(t)+dl.decode.bytes}function _l(e){const t=[];let r=0;for(;r<e.length;){const n=dl.decode(e,r),i=dl.decode.bytes,s=El(hl(n),e.slice(r+i));if(0===s){t.push([n]),r+=i;continue}const o=e.slice(r+i,r+i+s);if(r+=s+i,r>e.length)throw Rl("Invalid address Uint8Array: "+(0,$t.toString)(e,"base16"));t.push([n,o])}return t}function Sl(e){return function(e){const t=[];return e.map((e=>{const r=Tl(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),Cl(t.join("/"))}(vl(_l(e)))}function Al(e){const t=function(e){const t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){const i=r[n],s=hl(i);if(0!==s.size){if(n++,n>=r.length)throw Rl("invalid address: "+e);if(!0===s.path){t.push([i,Cl(r.slice(n).join("/"))]);break}t.push([i,r[n]])}else t.push([i])}return t}(e=Cl(e));return bl(t.map((e=>{Array.isArray(e)||(e=[e]);const t=Tl(e);return e.length>1?[t.code,fl(t.code,e[1])]:[t.code]})))}function kl(e){const t=Il(e);if(null!=t)throw t;return Uint8Array.from(e)}function Il(e){try{_l(e)}catch(Up){return Up}}function Cl(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function Rl(e){return new Error("Error parsing address: "+e)}function Tl(e){return hl(e[0])}const Dl=Symbol.for("nodejs.util.inspect.custom"),Pl=[hl("ip4").code,hl("ip6").code],Nl=[hl("dns").code,hl("dns4").code,hl("dns6").code,hl("dnsaddr").code],xl=[hl("p2p").code,hl("ipfs").code],Ol=[hl("tcp").code,hl("udp").code],Bl=new Map,Ll=Symbol.for("@multiformats/js-multiaddr/multiaddr");class Ml{constructor(e){if(null==e&&(e=""),Object.defineProperty(this,Ll,{value:!0}),e instanceof Uint8Array)this.bytes=kl(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Al(e)}else{if(!Ml.isMultiaddr(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=kl(e.bytes)}}toString(){return Sl(this.bytes)}toJSON(){return this.toString()}toOptions(){const e=this.protoCodes(),t=this.toString().split("/").slice(1);let r,n;if(t.length>2)Nl.includes(e[0])&&xl.includes(e[1])?(r=hl("tcp").name,n=443):(r=hl(t[2]).name,n=parseInt(t[3]));else{if(!Nl.includes(e[0]))throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');r=hl("tcp").name,n=443}return{family:41===e[0]||55===e[0]?6:4,host:t[1],transport:r,port:n}}protos(){return this.protoCodes().map((e=>Object.assign({},hl(e))))}protoCodes(){const e=[],t=this.bytes;let r=0;for(;r<t.length;){const n=dl.decode(t,r),i=dl.decode.bytes;r+=El(hl(n),t.slice(r+i))+i,e.push(n)}return e}protoNames(){return this.protos().map((e=>e.name))}tuples(){return _l(this.bytes)}stringTuples(){return vl(_l(this.bytes))}encapsulate(e){return e=new Ml(e),new Ml(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new Ml(r.slice(0,n))}decapsulateCode(e){const t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new Ml(bl(t.slice(0,r)));return this}getPeerId(){try{const e=this.stringTuples().filter((e=>e[0]===ll.ipfs.code)),t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){const e=t[1];return"Q"===e[0]||"1"===e[0]?(0,$t.toString)(pe.base58btc.decode(`z${e}`),"base58btc"):(0,$t.toString)(Ne.CID.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){let e=null;try{e=this.stringTuples().filter((e=>!0===hl(e[0]).path))[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const r=Bl.get(t.name);if(null==r)throw me(new Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,e)).map((e=>new Ml(e)))}nodeAddress(){const e=this.protoCodes(),t=this.protoNames(),r=this.toString().split("/").slice(1);let n=hl(r[2]).code,i=parseInt(r[3]);if(Nl.includes(e[0])&&xl.includes(e[1])&&(n=hl("tcp").code,i=443),r.length<4)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');if(!Pl.includes(e[0])&&!Nl.includes(e[0]))throw new Error(`no protocol with name: "'${t[0]}'". Must have a valid family name: "{ip4, ip6, dns, dns4, dns6, dnsaddr}".`);if(!Ol.includes(n))throw new Error(`no protocol with name: "'${t[1]}'". Must have a valid transport protocol: "{tcp, udp}".`);return{family:41===e[0]||55===e[0]?6:4,address:r[1],port:i}}isThinWaistAddress(e){const t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}static fromNodeAddress(e,t){if(null==e)throw new Error("requires node address object");if(null==t)throw new Error("requires transport protocol");let r;switch(e.family){case 4:r="ip4";break;case 6:r="ip6";break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new Ml("/"+[r,e.address,t,e.port].join("/"))}static isName(e){return!!Ml.isMultiaddr(e)&&e.protos().some((e=>e.resolvable))}static isMultiaddr(e){return Boolean(null===e||void 0===e?void 0:e[Ll])}[Dl](){return"<Multiaddr "+(0,$t.toString)(this.bytes,"base16")+" - "+Sl(this.bytes)+">"}inspect(){return"<Multiaddr "+(0,$t.toString)(this.bytes,"base16")+" - "+Sl(this.bytes)+">"}}Ml.resolvers=Bl;const Ul=lu("dns4"),jl=lu("dns6"),Fl=lu("dnsaddr"),zl=cu(lu("dns"),Fl,Ul,jl),Vl=cu(lu("ip4"),lu("ip6")),Kl=cu(au(Vl,lu("tcp")),au(zl,lu("tcp"))),$l=au(Vl,lu("udp")),ql=au($l,lu("utp")),Hl=au($l,lu("quic")),Wl=cu(au(Kl,lu("ws")),au(zl,lu("ws"))),Gl=cu(au(Kl,lu("wss")),au(zl,lu("wss"))),Yl=cu(au(Kl,lu("http")),au(Vl,lu("http")),au(zl,lu("http"))),Ql=cu(au(Kl,lu("https")),au(Vl,lu("https")),au(zl,lu("https"))),Jl=cu(au(Wl,lu("p2p-webrtc-star"),lu("p2p")),au(Gl,lu("p2p-webrtc-star"),lu("p2p")),au(Wl,lu("p2p-webrtc-star")),au(Gl,lu("p2p-webrtc-star"))),Xl=(cu(au(Wl,lu("p2p-websocket-star"),lu("p2p")),au(Gl,lu("p2p-websocket-star"),lu("p2p")),au(Wl,lu("p2p-websocket-star")),au(Gl,lu("p2p-websocket-star"))),cu(au(Yl,lu("p2p-webrtc-direct"),lu("p2p")),au(Ql,lu("p2p-webrtc-direct"),lu("p2p")),au(Yl,lu("p2p-webrtc-direct")),au(Ql,lu("p2p-webrtc-direct")))),Zl=cu(Wl,Gl,Yl,Ql,Jl,Xl,Kl,ql,Hl,zl),eu=(cu(au(Zl,lu("p2p-stardust"),lu("p2p")),au(Zl,lu("p2p-stardust"))),cu(au(Zl,lu("p2p")),Jl,Xl,lu("p2p"))),tu=cu(au(eu,lu("p2p-circuit"),eu),au(eu,lu("p2p-circuit")),au(lu("p2p-circuit"),eu),au(Zl,lu("p2p-circuit")),au(lu("p2p-circuit"),Zl),lu("p2p-circuit")),ru=()=>cu(au(tu,ru),tu),nu=ru(),iu=cu(au(nu,eu,nu),au(eu,nu),au(nu,eu),nu,eu),su=iu;function ou(e){return function(t){let r;try{r=new Ml(t)}catch(Up){return!1}const n=e(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function au(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:ou(n),partialMatch:n}}function cu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){let r=null;return t.some((t=>{const n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}const i={toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:ou(n),partialMatch:n};return i}function lu(e){const t=e;return{toString:function(){return t},matches:function(e){let r;try{r=new Ml(e)}catch(Up){return!1}const n=r.protoNames();return 1===n.length&&n[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}function uu(e){try{return su.matches(e)}catch(Up){return!1}}class hu{constructor(e){let{repo:t}=e;this.add=function(e){let{repo:t}=e;return rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!uu(e))throw new Error(`${e} is not a valid Multiaddr`);const n=await t.config.getAll(r),i=n.Bootstrap||[];return i.push(e.toString()),n.Bootstrap=Array.from(new Set(i)).sort(((e,t)=>e.localeCompare(t))),await t.config.replace(n),{Peers:[e]}}))}({repo:t}),this.list=function(e){let{repo:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{Peers:(await t.config.get("Bootstrap",e)||[]).map((e=>new Ml(e)))}}))}({repo:t}),this.rm=function(e){let{repo:t}=e;return rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!uu(e))throw new Error(`${e} is not a valid Multiaddr`);const n=await t.config.getAll(r);return n.Bootstrap=(n.Bootstrap||[]).filter((t=>t.toString()!==e.toString())),await t.config.replace(n),{Peers:[e]}}))}({repo:t}),this.clear=function(e){let{repo:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await t.config.getAll(e),n=r.Bootstrap||[];return r.Bootstrap=[],await t.config.replace(r),{Peers:n.map((e=>new Ml(e)))}}))}({repo:t}),this.reset=function(e){let{repo:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await t.config.getAll(e);return r.Bootstrap=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],await t.config.replace(r),{Peers:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"].map((e=>new Ml(e)))}}))}({repo:t})}}var du=__webpack_require__(1254);class pu{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class fu{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hwm=null!==(e=t.splitLimit)&&void 0!==e?e:16,this.head=new pu(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=(null===e||void 0===e?void 0:e.byteLength)?e.byteLength:1}push(e){if(null!=(null===e||void 0===e?void 0:e.value)&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new pu(2*this.head.buffer.length),this.head.push(e)}}shift(){var e;let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return null!=(null===(e=t)||void 0===e?void 0:e.value)&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}function yu(e,t){var r;let n,i,s,o=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,a=new fu;const c=e=>null!=i?i(e):(a.push(e),n),l=e=>{var r;if(s)return n;if(!0!==(null===(r=t)||void 0===r?void 0:r.objectMode)&&null==(null===e||void 0===e?void 0:e.byteLength))throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:e})},u=e=>s?n:(s=!0,null!=e?(e=>(a=new fu,null!=i?i({error:e}):(a.push({error:e}),n)))(e):c({done:!0}));if(n={[Symbol.asyncIterator](){return this},next:async()=>a.isEmpty()?s?{done:!0}:await new Promise(((t,r)=>{i=s=>{i=null,a.push(s);try{t(e(a))}catch(Up){r(Up)}return n}})):e(a),return:()=>(a=new fu,u(),{done:!0}),throw:e=>(u(e),{done:!0}),push:l,end:u,get readableLength(){return a.size}},null==o)return n;const h=n;return n={[Symbol.asyncIterator](){return this},next:()=>h.next(),throw:e=>(h.throw(e),null!=o&&(o(e),o=void 0),{done:!0}),return:()=>(h.return(),null!=o&&(o(),o=void 0),{done:!0}),push:l,end:e=>(h.end(e),null!=o&&(o(e),o=void 0),n),get readableLength(){return h.readableLength}},n}const gu=function(){let e;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length>0;)e=r.shift()(e);return e},mu=e=>null!=e&&("function"===typeof e[Symbol.asyncIterator]||"function"===typeof e[Symbol.iterator]||"function"===typeof e.next),wu=e=>null!=e&&"function"===typeof e.sink&&mu(e.source),vu=e=>t=>{const r=e.sink(t);if(null!=r.then){const t=function(){return yu((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({objectMode:!0});r.then((()=>{t.end()}),(e=>{t.end(e)}));const n=async function*(){yield*e.source,t.end()};return uc(t,n())}return e.source};function bu(e){if(wu(e)){const t=e;e=()=>t.source}else if(mu(e)){const t=e;e=()=>t}for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=[e,...r];if(i.length>1&&wu(i[i.length-1])&&(i[i.length-1]=i[i.length-1].sink),i.length>2)for(let s=1;s<i.length-1;s++)wu(i[s])&&(i[s]=vu(i[s]));return gu(...i)}function Eu(e){return e instanceof Uint8Array?Ne.CID.decode(e):Ne.CID.parse(e.toString())}class _u{constructor(e){let{codecs:t,hashers:r,preload:n,repo:i}=e;this.get=function(e){let{preload:t,repo:r}=e;return rr((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!1!==n.preload&&t(e),r.blocks.get(e,n)}))}({preload:n,repo:i}),this.put=function(e){let{codecs:t,hashers:r,repo:n,preload:i}=e;return rr((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=s.pin?await n.gcLock.readLock():null;try{const a=null!=s.version?s.version:0,c=s.format||(0===a?"dag-pb":"raw"),l=await r.getHasher(s.mhtype||"sha2-256"),u=await l.digest(e),h=await t.getCodec(c),d=Ne.CID.create(a,h.code,u);return await n.blocks.put(d,e,{signal:s.signal}),!1!==s.preload&&i(d),!0===s.pin&&await n.pins.pinRecursively(d,{signal:s.signal}),d}finally{o&&o()}}))}({codecs:t,hashers:r,preload:n,repo:i}),this.rm=function(e){let{repo:t}=e;return rr((async function*(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Array.isArray(e)||(e=[e]);const n=await t.gcLock.writeLock();try{yield*bu(e,(e=>lc(e,(e=>async()=>{const n={cid:e=Eu(e)};try{if(!await t.blocks.has(e))throw me(new Error("block not found"),"ERR_BLOCK_NOT_FOUND");await t.blocks.delete(e)}catch(Up){r.force||(Up.message=`cannot remove ${e}: ${Up.message}`,n.error=Up)}return n}))),(e=>du(e,{concurrency:8})),(e=>Za(e,(()=>!r.quiet))))}finally{n()}}))}({repo:i}),this.stat=function(e){let{repo:t,preload:r}=e;return rr((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Eu(e),!1!==n.preload&&r(e);return{cid:e,size:(await t.blocks.get(e)).length}}))}({preload:n,repo:i})}}var Su=__webpack_require__(6314),Au=__webpack_require__(2017),ku=__webpack_require__(8217);function Iu(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function Cu(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"===typeof e.stream}function Ru(e){return"object"===typeof e&&(e.path||e.content)}const Tu=e=>e&&"function"===typeof e.getReader;async function*Du(e){yield e}async function Pu(e){if(Iu(e))return Du(Nu(e));if("string"===typeof e||e instanceof String)return Du(Nu(e.toString()));if(Cu(e))return Au(e);if(Tu(e)&&(e=Su(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=ku(e),{value:r,done:n}=await t.peek();if(n)return Du(new Uint8Array(0));if(t.push(r),Number.isInteger(r))return Du(Uint8Array.from(await Qa(t)));if(Iu(r)||"string"===typeof r||r instanceof String)return lc(t,Nu)}throw me(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function Nu(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):(0,zt.fromString)(e.toString())}async function xu(e,t){const{path:r,mode:n,mtime:i,content:s}=e,o={path:r||"",mode:Te(n),mtime:De(i)};return s?o.content=await t(s):r||(o.content=await t(e)),o}function Ou(e){return async function*(e,t){if(null===e||void 0===e)throw me(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if("string"===typeof e||e instanceof String)yield xu(e.toString(),t);else if(Iu(e)||Cu(e))yield xu(e,t);else{if(Tu(e)&&(e=Su(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=ku(e),{value:n,done:i}=await r.peek();if(i)return void(yield{content:[]});if(r.push(n),Number.isInteger(n)||Iu(n)||"string"===typeof n||n instanceof String)return void(yield xu(r,t));throw me(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(!Ru(e))throw me(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT");yield xu(e,t)}}(e,Pu)}var Bu=__webpack_require__(857),Lu=__webpack_require__(2231),Mu=__webpack_require__(2165);(0,Lu.D)({name:"murmur3-32",code:35,encode:e=>function(e){const t=new Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return new Uint8Array(t)}(Mu.x86.hash32(e))});const Uu=(0,Lu.D)({name:"murmur3-128",code:34,encode:e=>pt.aI.fromHex(Mu.x64.hash128(e))});const ju={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:hn.sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn:async function(e){return(await Uu.encode(e)).slice(0,8).reverse()},hamtHashCode:34,hamtBucketBits:8},Fu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=ue.bind({ignoreUndefined:!0});return t(ju,e)},zu=async(t,r,n)=>{n.codec||(n.codec=e),n.hasher||(n.hasher=hn.sha256),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===e&&n.hasher!==hn.sha256&&(n.cidVersion=1);const i=await n.hasher.digest(t),s=Ne.CID.create(n.cidVersion,n.codec.code,i);return n.onlyHash||await r.put(s,t,{signal:n.signal}),s},Vu=async(e,t,r)=>{const n=new Pe({type:"directory",mtime:e.mtime,mode:e.mode}),i=it(Xe({Data:n.marshal()}));return{cid:await zu(i,t,r),path:e.path,unixfs:n,size:i.length}};var Ku=__webpack_require__(2710);const $u=async function(e,t){return t(await Qa(e))};var qu=__webpack_require__(817);async function Hu(e,t,r){const n=[];for await(const i of qu(e,r.maxChildrenPerNode))n.push(await t(i));return n.length>1?Hu(n,t,r):n[0]}const Wu=function(e,t,r){return Hu(e,t,r)};const Gu=async function(e,t,r){const n=new Qu(r.layerRepeat);let i=0,s=1,o=n;for await(const a of qu(e,r.maxChildrenPerNode))o.isFull()&&(o!==n&&n.addChild(await o.reduce(t)),i&&i%r.layerRepeat===0&&s++,o=new Yu(s,r.layerRepeat,i),i++),o.append(a);return o&&o!==n&&n.addChild(await o.reduce(t)),n.reduce(t)};class Yu{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.maxDepth=e,this.layerRepeat=t,this.currentDepth=1,this.iteration=r,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const e=this._findParent(this.node,this.currentDepth);return!e||(this._addNextNodeToParent(e),!1)}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t),this.currentDepth=t.depth,this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];return e.children.length&&(r=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))),t((e.data||[]).concat(r))}_findParent(e,t){const r=e.parent;if(r&&0!==r.depth)return r.children.length!==r.maxChildren&&r.maxChildren?r:this._findParent(r,t)}}class Qu extends Yu{constructor(e){super(0,e),this.root.depth=0,this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}const Ju=async function*(t,r,n){for await(let i of t.content)yield async()=>{let s;n.progress(i.length,t.path);const o={codec:e,cidVersion:n.cidVersion,hasher:n.hasher,onlyHash:n.onlyHash};return n.rawLeaves?(o.codec=Ku,o.cidVersion=1):(s=new Pe({type:n.leafType,data:i}),i=it({Data:s.marshal(),Links:[]})),{cid:await zu(i,r,o),unixfs:s,size:i.length}}},Xu={flat:$u,balanced:Wu,trickle:Gu};const Zu=function(t,r,n){const i=Xu[n.strategy];if(!i)throw me(new Error(`Unknown importer build strategy name: ${n.strategy}`),"ERR_BAD_STRATEGY");return i(async function*(e,t,r){let n,i,s=-1;i="function"===typeof r.bufferImporter?r.bufferImporter:Ju;for await(const o of Bu(i(e,t,r),r.blockWriteConcurrency))s++,0!==s?(1===s&&n&&(yield n,n=null),yield o):n=o;n&&(n.single=!0,yield n)}(t,r,n),((t,r,n)=>async function(i){if(1===i.length&&i[0].single&&n.reduceSingleLeafToSelf){const s=i[0];if(void 0!==t.mtime||void 0!==t.mode){let i=await r.get(s.cid);s.unixfs=new Pe({type:"file",mtime:t.mtime,mode:t.mode,data:i}),i=it(Xe({Data:s.unixfs.marshal()})),s.cid=await zu(i,r,{...n,codec:e,hasher:n.hasher,cidVersion:n.cidVersion}),s.size=i.length}return{cid:s.cid,path:t.path,unixfs:s.unixfs,size:s.size}}const s=new Pe({type:"file",mtime:t.mtime,mode:t.mode}),o=i.filter((e=>!(e.cid.code!==Ku.code||!e.size)||!(!e.unixfs||e.unixfs.data||!e.unixfs.fileSize())||Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length))).map((e=>e.cid.code===Ku.code?(s.addBlockSize(e.size),{Name:"",Tsize:e.size,Hash:e.cid}):(e.unixfs&&e.unixfs.data?s.addBlockSize(e.unixfs.data.length):s.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0),{Name:"",Tsize:e.size,Hash:e.cid}))),a={Data:s.marshal(),Links:o},c=it(Xe(a));return{cid:await zu(c,r,n),path:t.path,unixfs:s,size:c.length+a.Links.reduce(((e,t)=>e+t.Tsize),0)}})(t,r,n),n)};var eh=__webpack_require__(1976),th=__webpack_require__(8729);const rh=async function*(e,t){let r,n,i;if(t.minChunkSize&&t.maxChunkSize&&t.avgChunkSize)i=t.avgChunkSize,r=t.minChunkSize,n=t.maxChunkSize;else{if(!t.avgChunkSize)throw me(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");i=t.avgChunkSize,r=i/3,n=i+i/2}if(r<16)throw me(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");n<r&&(n=r),i<r&&(i=r);const s=Math.floor(Math.log2(i));for await(const o of async function*(e,t){const r=await(0,th.create)(t.bits,t.min,t.max,t.window),n=new eh;for await(const i of e){n.append(i);const e=r.fingerprint(i);for(let t=0;t<e.length;t++){const r=e[t],i=n.slice(0,r);n.consume(r),yield i}}n.length&&(yield n.slice(0))}(e,{min:r,max:n,bits:s,window:t.window,polynomial:t.polynomial}))yield o};const nh=async function*(e,t){let r=new eh,n=0,i=!1;const s=t.maxChunkSize;for await(const o of e)for(r.append(o),n+=o.length;n>=s;)if(yield r.slice(0,s),i=!0,s===r.length)r=new eh,n=0;else{const e=new eh;e.append(r.shallowSlice(s)),r=e,n-=s}i&&!n||(yield r.slice(0,n))};const ih=async function*(e){for await(const t of e){if(void 0===t.length)throw me(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if("string"===typeof t||t instanceof String)yield(0,zt.fromString)(t.toString());else if(Array.isArray(t))yield Uint8Array.from(t);else{if(!(t instanceof Uint8Array))throw me(new Error("Content was invalid"),"ERR_INVALID_CONTENT");yield t}}};function sh(e){try{if(e instanceof Uint8Array)return async function*(){yield e}();if(t=e,Symbol.iterator in t)return async function*(){yield*e}();if(function(e){return Symbol.asyncIterator in e}(e))return e}catch{throw me(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}var t;throw me(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}const oh=async function*(e,t,r){for await(const n of e)if(n.path&&("./"===n.path.substring(0,2)&&(r.wrapWithDirectory=!0),n.path=n.path.split("/").filter((e=>e&&"."!==e)).join("/")),n.content){let e,i;e="function"===typeof r.chunker?r.chunker:"rabin"===r.chunker?rh:nh,i="function"===typeof r.chunkValidator?r.chunkValidator:ih;const s={path:n.path,mtime:n.mtime,mode:n.mode,content:e(i(sh(n.content),r),r)};yield()=>Zu(s,t,r)}else{if(!n.path)throw new Error("Import candidate must have content or path or both");{const e={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>Vu(e,t,r)}}};const ah=class{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}};const ch=class extends ah{constructor(e,t){super(e,t),this._children={}}async put(e,t){this.cid=void 0,this.size=void 0,this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e){const t=Object.keys(this._children),r=[];for(let c=0;c<t.length;c++){let n=this._children[t[c]];if(n instanceof ah)for await(const t of n.flush(e))n=t,yield n;null!=n.size&&n.cid&&r.push({Name:t[c],Tsize:n.size,Hash:n.cid})}const n=new Pe({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:r},s=it(Xe(i)),o=await zu(s,e,this.options),a=s.length+i.Links.reduce(((e,t)=>e+(null==t.Tsize?0:t.Tsize)),0);this.cid=o,this.size=a,yield{cid:o,unixfs:n,path:this.path,size:a}}};var lh=__webpack_require__(7431);const uh=class extends ah{constructor(e,t){super(e,t),this._bucket=(0,lh.createHAMT)({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){for await(const t of hh(this._bucket,e,this,this.options))yield{...t,path:this.path}}};async function*hh(e,t,r,n){const i=e._children,s=[];let o=0;for(let d=0;d<i.length;d++){const e=i.get(d);if(!e)continue;const r=d.toString(16).toUpperCase().padStart(2,"0");if(e instanceof lh.Bucket){let i;for await(const r of await hh(e,t,null,n))i=r;if(!i)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:r,Tsize:i.size,Hash:i.cid}),o+=i.size}else if("function"===typeof e.value.flush){const n=e.value;let i;for await(const e of n.flush(t))i=e,yield i;const a=r+e.key;s.push({Name:a,Tsize:i.size,Hash:i.cid}),o+=i.size}else{const t=e.value;if(!t.cid)continue;const n=r+e.key,i=t.size;s.push({Name:n,Tsize:i,Hash:t.cid}),o+=i}}const a=Uint8Array.from(i.bitField().reverse()),c=new Pe({type:"hamt-sharded-directory",data:a,fanout:e.tableSize(),hashType:n.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode}),l=it(Xe({Data:c.marshal(),Links:s})),u=await zu(l,t,n),h=l.length+o;yield{cid:u,unixfs:c,size:h}}const dh=async function e(t,r,n,i){let s=r;r instanceof ch&&r.directChildrenCount()>=n&&(s=await async function(e,t){const r=new uh({root:e.root,dir:!0,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:!1,mtime:e.mtime,mode:e.mode},t);for await(const{key:n,child:i}of e.eachChildSeries())await r.put(n,i);return r}(r,i));const o=s.parent;if(o){if(s!==r){if(t&&(t.parent=s),!s.parentKey)throw new Error("No parent key found");await o.put(s.parentKey,s)}return e(s,o,n,i)}return s},ph=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean)};async function fh(e,t,r){const n=ph(e.path||""),i=n.length-1;let s=t,o="";for(let a=0;a<n.length;a++){const c=n[a];o+=`${o?"/":""}${c}`;const l=a===i;if(s.dirty=!0,s.cid=void 0,s.size=void 0,l)await s.put(c,e),t=await dh(null,s,r.shardSplitThreshold,r);else{let e=await s.get(c);e&&e instanceof ah||(e=new ch({root:!1,dir:!0,parent:s,parentKey:c,path:o,dirty:!0,flat:!0,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},r)),await s.put(c,e),s=e}}return t}async function*yh(e,t){e instanceof ah?yield*e.flush(t):e&&e.unixfs&&e.unixfs.isDirectory()&&(yield e)}const gh=async function*(e,t,r){let n=new ch({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r);for await(const i of e)i&&(n=await fh(i,n,r),i.unixfs&&i.unixfs.isDirectory()||(yield i));if(r.wrapWithDirectory)yield*yh(n,t);else for await(const i of n.eachChildSeries())i&&(yield*yh(i.child,t))};async function*mh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=Fu(r);let i,s,o;i="function"===typeof r.dagBuilder?r.dagBuilder:oh,s="function"===typeof r.treeBuilder?r.treeBuilder:gh,o=Symbol.asyncIterator in e||Symbol.iterator in e?e:[e];for await(const a of s(Bu(i(o,t,n),n.fileImportConcurrency),t,n))yield{cid:a.cid,path:a.path,unixfs:a.unixfs,size:a.size}}async function*wh(e,t){if("string"===typeof e||e instanceof String||Iu(e)||Cu(e)||e._readableState)throw me(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Tu(e)&&(e=Su(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const r=ku(e),{value:n,done:i}=await r.peek();if(i)return void(yield*[]);if(r.push(n),Number.isInteger(n))throw me(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState)return void(yield*lc(r,(e=>vh({content:e},t))));if(Iu(n))return void(yield vh({content:r},t));if(Ru(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Tu(n)||Cu(n))return void(yield*lc(r,(e=>vh(e,t))))}if(Ru(e))throw me(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw me(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function vh(e,t){const{path:r,mode:n,mtime:i,content:s}=e,o={path:r||"",mode:Te(n),mtime:De(i)};return s?o.content=await t(s):r||(o.content=await t(e)),o}function bh(e){return wh(e,Pu)}const Eh=e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],r=parseInt(t);if(isNaN(r))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",maxChunkSize:r}}if(e.startsWith("rabin"))return{chunker:"rabin",..._h(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},_h=e=>{const t={},r=e.split("-");switch(r.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=Sh(r[1],"avg");break;case 4:t.minChunkSize=Sh(r[1],"min"),t.avgChunkSize=Sh(r[2],"avg"),t.maxChunkSize=Sh(r[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},Sh=(e,t)=>{const r=parseInt(e);if(isNaN(r))throw new Error(`Chunker parameter ${t} must be an integer`);return r},Ah=ue.bind({ignoreUndefined:!0});function kh(e){return async function*(t){for await(const r of t){let t=r.cid;1===e.cidVersion&&(t=t.toV1());let n=r.path?r.path:t.toString();e.wrapWithDirectory&&!r.path&&(n=""),yield{path:n,cid:t,size:r.size,mode:r.unixfs&&r.unixfs.mode,mtime:r.unixfs&&r.unixfs.mtime}}}}function Ih(e,t){return async function*(r){for await(const n of r){(!n.path||t.wrapWithDirectory?""===n.path:!n.path.includes("/"))&&!t.onlyHash&&!1!==t.preload&&e(n.cid),yield n}}}function Ch(e,t){return async function*(r){for await(const n of r){const r=!(n.path&&n.path.includes("/"));(null==t.pin||t.pin)&&r&&!t.onlyHash&&await e.pins.pinRecursively(n.cid),yield n}}}const Rh=async function(e){return(await Uu.encode(e)).slice(0,8).reverse()},Th=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Dh=async(e,t,r,n,i)=>{if(!n){const e=(0,lh.createHAMT)({hashFn:Rh});n={rootBucket:e,hamtDepth:1,lastBucket:e}}await((e,t,r)=>Promise.all(e.map((e=>{if(null==e.Name)throw new Error("Unexpected Link without a Name");if(2===e.Name.length){const n=parseInt(e.Name,16);return t._putObjectAt(n,new lh.Bucket({hash:r._options.hash,bits:r._options.bits},t,n))}return r.put(e.Name.substring(2),!0)}))))(e.Links,n.lastBucket,n.rootBucket);const s=await n.rootBucket._findNewBucketAndPos(t);let o=Th(s.pos);const a=(e=>{let t=e.bucket;const r=[];for(;t._parent;)r.push(t),t=t._parent;return r.push(t),r.reverse()})(s);a.length>n.hamtDepth&&(n.lastBucket=a[n.hamtDepth],o=Th(n.lastBucket._posAtParent));const c=e.Links.find((e=>{if(null==e.Name)return!1;const r=e.Name.substring(0,2),n=e.Name.substring(2);return r===o&&(!n||n===t)}));if(!c)return null;if(null!=c.Name&&c.Name.substring(2)===t)return c.Hash;n.hamtDepth++;return e=st(await r.get(c.Hash,i)),Dh(e,t,r,n,i)},Ph=Dh;const Nh=function(e,t,r,n){const i=t+e.length;return r>=i||n<t?new Uint8Array(0):(n>=t&&n<i&&(e=e.slice(0,n-t)),r>=t&&r<i&&(e=e.slice(r-t)),e)},xh=(e,t,r)=>{if(t||(t=0),t<0)throw me(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(t>e)throw me(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(r||0===r||(r=e-t),r<0)throw me(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return t+r>e&&(r=e-t),{offset:t,length:r}};async function*Oh(e,t,r,n){let i,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;if(t instanceof Uint8Array){const e=Nh(t,s,r,n);return e.length&&(yield e),s+=e.length,s}if(null==t.Data)throw me(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{i=Pe.unmarshal(t.Data)}catch(Up){throw me(Up,"ERR_NOT_UNIXFS")}if(i.data&&i.data.length){const e=Nh(i.data,s,r,n);e.length&&(yield e),s+=i.data.length}let a=s;for(let c=0;c<t.Links.length;c++){const l=t.Links[c],u=s+i.blockSizes[c];if(r>=a&&r<u||n>a&&n<=u||r<a&&n>u){const t=await e.get(l.Hash,{signal:o.signal});let i;switch(l.Hash.code){case nt:i=await st(t);break;case Ku.code:i=t;break;case ut:i=await dt(t);break;default:throw Error(`Unsupported codec: ${l.Hash.code}`)}for await(const a of Oh(e,i,r,n,s,o))s+=a.length,yield a}s=u,a=u+1}}const Bh=(e,t,r,n,i,s,o)=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=r.fileSize();if(void 0===n)throw new Error("File was a directory");const{offset:i,length:s}=xh(n,e.offset,e.length),a=i,c=i+s;return Oh(o,t,a,c,0,e)},Lh=(e,t,r,n,i,s,o)=>async function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=e.offset||0,a=e.length||t.Links.length,c=t.Links.slice(r,a);for(const t of c){const r=await i(t.Hash,t.Name||"",`${n}/${t.Name||""}`,[],s+1,o,e);r.entry&&(yield r.entry)}};async function*Mh(e,t,r,n,i,s){const o=e.Links;for(const a of o){const o=null!=a.Name?a.Name.substring(2):null;if(o){const e=await r(a.Hash,o,`${t}/${o}`,[],n+1,i,s);yield e.entry}else{e=st(await i.get(a.Hash));for await(const o of Mh(e,t,r,n,i,s))yield o}}}const Uh=(e,t,r,n,i,s,o)=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Mh(t,n,i,s,o,e)},jh={raw:Bh,file:Bh,directory:Lh,"hamt-sharded-directory":Uh,metadata:(e,t,r,n,i,s,o)=>()=>[],symlink:(e,t,r,n,i,s,o)=>()=>[]},Fh=async(e,t,r,n,i,s,o,a)=>{const c=st(await o.get(e,a));let l,u;if(t||(t=e.toString()),null==c.Data)throw me(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{l=Pe.unmarshal(c.Data)}catch(Up){throw me(Up,"ERR_NOT_UNIXFS")}if(r||(r=t),n.length){let e;if(e=l&&"hamt-sharded-directory"===l.type?await Ph(c,n[0],o):((e,t)=>{const r=e.Links.find((e=>e.Name===t));return r&&r.Hash})(c,n[0]),!e)throw me(new Error("file does not exist"),"ERR_NOT_FOUND");const t=n.shift();u={cid:e,toResolve:n,name:t||"",path:`${r}/${t}`}}return{entry:{type:l.isDirectory()?"directory":"file",name:t,path:r,cid:e,content:jh[l.type](e,c,l,r,i,s,o),unixfs:l,depth:s,node:c,size:l.fileSize()},next:u}},zh=async(e,t,r,n,i,s,o,a)=>{if(n.length)throw me(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND");const c=await o.get(e,a);return{entry:{type:"raw",name:t,path:r,cid:e,content:(l=c,async function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{offset:t,length:r}=xh(l.length,e.offset,e.length);yield Nh(l,0,t,t+r)}),depth:s,size:c.length,node:c}};var l},Vh=async(e,t,r,n,i,s,o,a)=>{const c=await o.get(e),l=dt(c);let u=l,h=r;for(;n.length;){const i=n[0];if(!(i in u))throw me(new Error(`No property named ${i} found in cbor node ${e}`),"ERR_NO_PROP");{n.shift(),h=`${h}/${i}`;const o=Ne.CID.asCID(u[i]);if(o)return{entry:{type:"object",name:t,path:r,cid:e,node:c,depth:s,size:c.length,content:async function*(){yield l}},next:{cid:o,name:i,path:h,toResolve:n}};u=u[i]}}return{entry:{type:"object",name:t,path:r,cid:e,node:c,depth:s,size:c.length,content:async function*(){yield l}}}},Kh=async(e,t,r,n,i,s,o,a)=>{if(n.length)throw me(new Error(`No link named ${r} found in raw node ${e}`),"ERR_NOT_FOUND");const c=await ln.decode(e.multihash.bytes);return{entry:{type:"identity",name:t,path:r,cid:e,content:(l=c.digest,async function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{offset:t,length:r}=xh(l.length,e.offset,e.length);yield Nh(l,0,t,t+r)}),depth:s,size:c.digest.length,node:c.digest}};var l},$h={[nt]:Fh,[Ku.code]:zh,[ut]:Vh,[Nt.identity.code]:Kh};const qh=function e(t,r,n,i,s,o,a){const c=$h[t.code];if(!c)throw me(new Error(`No resolver for code ${t.code}`),"ERR_NO_RESOLVER");return c(t,r,n,i,e,s,o,a)},Hh=e=>{if(e instanceof Uint8Array)return{cid:Ne.CID.decode(e),toResolve:[]};const t=Ne.CID.asCID(e);if(t)return{cid:t,toResolve:[]};if("string"===typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}(e);return{cid:Ne.CID.parse(t[0]),toResolve:t.slice(1)}}throw me(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")};async function*Wh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{cid:n,toResolve:i}=Hh(e),s=n.toString(),o=s;const a=i.length;for(;;){const c=await qh(n,s,o,i,a,t,r);if(!c.entry&&!c.next)throw me(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(c.entry&&(yield c.entry),!c.next)return;i=c.next.toResolve,n=c.next.cid,s=c.next.name,o=c.next.path}}async function Gh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=await Sn(Wh(e,t,r));if(!n)throw me(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");return n}async function*Yh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=await Gh(e,t,r);if(n&&(yield n,"directory"===n.type))for await(const s of i(n,r))yield s;async function*i(e,t){for await(const r of e.content(t))yield r,r instanceof Uint8Array||"directory"===r.type&&(yield*i(r,t))}}"0".charCodeAt(0),(0,zt.fromString)("ustar\0","binary"),(0,zt.fromString)("ustar ","binary"),(0,zt.fromString)(" \0","binary");function Qh(e){const t=async function*(){let t=yield,r=new Fn;for await(const n of e)if(null!=t)for(r.append(n);r.length>=t;){const e=r.subarray(0,t);if(r.consume(t),t=yield e,null==t){r.length>0&&(t=yield r,r=new Fn);break}}else r.append(n),t=yield r,r=new Fn;if(null!=t)throw Object.assign(new Error(`stream ended before ${t} bytes became available`),{code:"ERR_UNDER_READ",buffer:r})}();return t.next(),t}var Jh=__webpack_require__(1926),Xh=__webpack_require__(9765);const Zh="0".charCodeAt(0),ed=(0,zt.fromString)("ustar\0","binary"),td=(0,zt.fromString)("00","binary"),rd=parseInt("7777",8),nd=function(e,t){const r=e.toString(8);return r.length>t?(0,zt.fromString)("7777777777777777777".slice(0,t)+" "):(0,zt.fromString)("0000000000000000000".slice(0,t-r.length)+r+" ")},id=function(e){const t=(0,zt.fromString)(e).byteLength;let r=Math.floor(Math.log(t)/Math.log(10))+1;return t+r>=Math.pow(10,r)&&r++,`${t+r}${e}`};function sd(e){var t,r;const n=new Uint8Array(512);let i=e.name,s="";if(5===e.typeflag&&"/"!==i[i.length-1]&&(i+="/"),(0,zt.fromString)(i).byteLength!==i.length)return null;for(;(0,zt.fromString)(i).byteLength>100;){const e=i.indexOf("/");if(-1===e)return null;s+=""!==s?"/"+i.slice(0,e):i.slice(0,e),i=i.slice(e+1)}return(0,zt.fromString)(i).byteLength>100||(0,zt.fromString)(s).byteLength>155||null!=e.linkname&&(0,zt.fromString)(e.linkname).byteLength>100?null:(n.set((0,zt.fromString)(i),0),n.set(nd(e.mode&rd,6),100),n.set(nd(e.uid,6),108),n.set(nd(e.gid,6),116),n.set(nd(e.size,11),124),n.set(nd(e.mtime.getTime()/1e3|0,11),136),n[156]=Zh+function(e){switch(e){case"file":default:return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}}(e.type),null!=e.linkname&&n.set((0,zt.fromString)(e.linkname),157),n.set(ed,257),n.set(td,263),null!=e.uname&&n.set((0,zt.fromString)(e.uname),265),null!=e.gname&&n.set((0,zt.fromString)(e.gname),297),n.set(nd(null!==(t=e.devmajor)&&void 0!==t?t:0,6),329),n.set(nd(null!==(r=e.devminor)&&void 0!==r?r:0,6),337),null!=s&&n.set((0,zt.fromString)(s),345),n.set(nd(function(e){let t=256;for(let r=0;r<148;r++)t+=e[r];for(let r=156;r<512;r++)t+=e[r];return t}(n),6),148),n)}const{S_IFMT:od,S_IFBLK:ad,S_IFCHR:cd,S_IFDIR:ld,S_IFIFO:ud,S_IFLNK:hd}=Jh,dd=parseInt("755",8),pd=parseInt("644",8),fd=new Uint8Array(1024);function yd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e&od){case ad:return"block-device";case cd:return"character-device";case ld:return"directory";case ud:return"fifo";case hd:return"symlink";default:return"file"}}function gd(e){return 0!==(e&=511)?fd.slice(0,512-e):new Uint8Array(0)}function md(e){if(null==e.pax){const t=sd(e);if(null!=t)return t}return function(e){var t,r;const n=function(e){let t="";null!=e.name&&(t+=id(" path="+e.name+"\n")),null!=e.linkname&&(t+=id(" linkpath="+e.linkname+"\n"));const r=e.pax;if(null!=r)for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t+=id(" "+n+"="+r[n]+"\n"));return(0,zt.fromString)(t)}(e),i={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname,uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};return new Fn(null!==(t=sd(i))&&void 0!==t?t:new Uint8Array(0),n,gd(n.length),null!==(r=sd({...i,size:e.size,type:e.type}))&&void 0!==r?r:new Uint8Array(0)).slice()}(e)}function wd(){return async function*(e){for await(let{header:c,body:l}of e){var t,r,n,i,s,o;const e={...c,size:"symlink"===c.type?0:null!==(t=c.size)&&void 0!==t?t:0,type:null!==(r=c.type)&&void 0!==r?r:yd(c.mode),mode:null!==(n=c.mode)&&void 0!==n?n:"directory"===c.type?dd:pd,uid:null!==(i=c.uid)&&void 0!==i?i:0,gid:null!==(s=c.gid)&&void 0!==s?s:0,mtime:null!==(o=c.mtime)&&void 0!==o?o:new Date};if("string"===typeof l&&(l=(0,zt.fromString)(l)),l instanceof Uint8Array||jn(l)){e.size=l.length,yield md(e),yield jn(l)?l.slice():l,yield gd(e.size);continue}if("symlink"===e.type&&null==e.linkname){if(null==l)throw new Error("type was symlink but no linkname or body specified");e.linkname=(0,$t.toString)(await Xh(l)),yield md(e);continue}if(yield md(e),"file"!==e.type&&"contiguous-file"!==e.type)continue;let u=0;for await(const t of null!==(a=l)&&void 0!==a?a:[]){var a;u+=t.length,yield jn(t)?t.slice():t}if(u!==e.size)throw new Error(`size mismatch, wrote ${u} of ${e.size} bytes`);yield gd(e.size)}yield fd}}function vd(e){let t=e.length;for(;--t>=0;)e[t]=0}const bd=256,Ed=286,_d=30,Sd=15,Ad=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),kd=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Id=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Cd=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rd=new Array(576);vd(Rd);const Td=new Array(60);vd(Td);const Dd=new Array(512);vd(Dd);const Pd=new Array(256);vd(Pd);const Nd=new Array(29);vd(Nd);const xd=new Array(_d);function Od(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let Bd,Ld,Md;function Ud(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}vd(xd);const jd=e=>e<256?Dd[e]:Dd[256+(e>>>7)],Fd=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},zd=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,Fd(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Vd=(e,t,r)=>{zd(e,r[2*t],r[2*t+1])},Kd=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},$d=(e,t,r)=>{const n=new Array(16);let i,s,o=0;for(i=1;i<=Sd;i++)n[i]=o=o+r[i-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=Kd(n[t]++,t))}},qd=e=>{let t;for(t=0;t<Ed;t++)e.dyn_ltree[2*t]=0;for(t=0;t<_d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Hd=e=>{e.bi_valid>8?Fd(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Wd=(e,t,r,n)=>{const i=2*t,s=2*r;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]},Gd=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Wd(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Wd(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},Yd=(e,t,r)=>{let n,i,s,o,a=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===n?Vd(e,i,t):(s=Pd[i],Vd(e,s+bd+1,t),o=Ad[s],0!==o&&(i-=Nd[s],zd(e,i,o)),n--,s=jd(n),Vd(e,s,r),o=kd[s],0!==o&&(n-=xd[s],zd(e,n,o)))}while(a<e.last_lit);Vd(e,256,t)},Qd=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c,l=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==r[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[2*c]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[2*c+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)Gd(e,r,o);c=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Gd(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,r[2*c]=r[2*o]+r[2*a],e.depth[c]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,r[2*o+1]=r[2*a+1]=c,e.heap[1]=c++,Gd(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,h,d,p,f,y=0;for(d=0;d<=Sd;d++)e.bl_count[d]=0;for(r[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],d=r[2*r[2*u+1]+1]+1,d>c&&(d=c,y++),r[2*u+1]=d,u>n||(e.bl_count[d]++,p=0,u>=a&&(p=o[u-a]),f=r[2*u],e.opt_len+=f*(d+p),s&&(e.static_len+=f*(i[2*u+1]+p)));if(0!==y){do{for(d=c-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[c]--,y-=2}while(y>0);for(d=c;0!==d;d--)for(u=e.bl_count[d];0!==u;)h=e.heap[--l],h>n||(r[2*h+1]!==d&&(e.opt_len+=(d-r[2*h+1])*r[2*h],r[2*h+1]=d),u--)}})(e,t),$d(r,l,e.bl_count)},Jd=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++a<c&&i===o||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))},Xd=(e,t,r)=>{let n,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++a<c&&i===o)){if(a<l)do{Vd(e,i,e.bl_tree)}while(0!==--a);else 0!==i?(i!==s&&(Vd(e,i,e.bl_tree),a--),Vd(e,16,e.bl_tree),zd(e,a-3,2)):a<=10?(Vd(e,17,e.bl_tree),zd(e,a-3,3)):(Vd(e,18,e.bl_tree),zd(e,a-11,7));a=0,s=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}};let Zd=!1;const ep=(e,t,r,n)=>{zd(e,0+(n?1:0),3),((e,t,r,n)=>{Hd(e),n&&(Fd(e,r),Fd(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r})(e,t,r,!0)};var tp=e=>{Zd||((()=>{let e,t,r,n,i;const s=new Array(16);for(r=0,n=0;n<28;n++)for(Nd[n]=r,e=0;e<1<<Ad[n];e++)Pd[r++]=n;for(Pd[r-1]=n,i=0,n=0;n<16;n++)for(xd[n]=i,e=0;e<1<<kd[n];e++)Dd[i++]=n;for(i>>=7;n<_d;n++)for(xd[n]=i<<7,e=0;e<1<<kd[n]-7;e++)Dd[256+i++]=n;for(t=0;t<=Sd;t++)s[t]=0;for(e=0;e<=143;)Rd[2*e+1]=8,e++,s[8]++;for(;e<=255;)Rd[2*e+1]=9,e++,s[9]++;for(;e<=279;)Rd[2*e+1]=7,e++,s[7]++;for(;e<=287;)Rd[2*e+1]=8,e++,s[8]++;for($d(Rd,287,s),e=0;e<_d;e++)Td[2*e+1]=5,Td[2*e]=Kd(e,5);Bd=new Od(Rd,Ad,257,Ed,Sd),Ld=new Od(Td,kd,0,_d,Sd),Md=new Od(new Array(0),Id,0,19,7)})(),Zd=!0),e.l_desc=new Ud(e.dyn_ltree,Bd),e.d_desc=new Ud(e.dyn_dtree,Ld),e.bl_desc=new Ud(e.bl_tree,Md),e.bi_buf=0,e.bi_valid=0,qd(e)},rp=(e,t,r,n)=>{let i,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<bd;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Qd(e,e.l_desc),Qd(e,e.d_desc),o=(e=>{let t;for(Jd(e,e.dyn_ltree,e.l_desc.max_code),Jd(e,e.dyn_dtree,e.d_desc.max_code),Qd(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Cd[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==t?ep(e,t,r,n):4===e.strategy||s===i?(zd(e,2+(n?1:0),3),Yd(e,Rd,Td)):(zd(e,4+(n?1:0),3),((e,t,r,n)=>{let i;for(zd(e,t-257,5),zd(e,r-1,5),zd(e,n-4,4),i=0;i<n;i++)zd(e,e.bl_tree[2*Cd[i]+1],3);Xd(e,e.dyn_ltree,t-1),Xd(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Yd(e,e.dyn_ltree,e.dyn_dtree)),qd(e),n&&Hd(e)},np=(e,t,r)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(Pd[r]+bd+1)]++,e.dyn_dtree[2*jd(t)]++),e.last_lit===e.lit_bufsize-1),ip={_tr_init:tp,_tr_stored_block:ep,_tr_flush_block:rp,_tr_tally:np,_tr_align:e=>{zd(e,2,3),Vd(e,256,Rd),(e=>{16===e.bi_valid?(Fd(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var sp=(e,t,r,n)=>{let i=65535&e|0,s=e>>>16&65535|0,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{i=i+t[n++]|0,s=s+i|0}while(--o);i%=65521,s%=65521}return i|s<<16|0};const op=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var ap=(e,t,r,n)=>{const i=op,s=n+r;e^=-1;for(let o=n;o<s;o++)e=e>>>8^i[255&(e^t[o])];return-1^e},cp={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},lp={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:up,_tr_stored_block:hp,_tr_flush_block:dp,_tr_tally:pp,_tr_align:fp}=ip,{Z_NO_FLUSH:yp,Z_PARTIAL_FLUSH:gp,Z_FULL_FLUSH:mp,Z_FINISH:wp,Z_BLOCK:vp,Z_OK:bp,Z_STREAM_END:Ep,Z_STREAM_ERROR:_p,Z_DATA_ERROR:Sp,Z_BUF_ERROR:Ap,Z_DEFAULT_COMPRESSION:kp,Z_FILTERED:Ip,Z_HUFFMAN_ONLY:Cp,Z_RLE:Rp,Z_FIXED:Tp,Z_DEFAULT_STRATEGY:Dp,Z_UNKNOWN:Pp,Z_DEFLATED:Np}=lp,xp=258,Op=262,Bp=103,Lp=113,Mp=666,Up=(e,t)=>(e.msg=cp[t],t),jp=e=>(e<<1)-(e>4?9:0),Fp=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let zp=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const Vp=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Kp=(e,t)=>{dp(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Vp(e.strm)},$p=(e,t)=>{e.pending_buf[e.pending++]=t},qp=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Hp=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),1===e.state.wrap?e.adler=sp(e.adler,t,i,r):2===e.state.wrap&&(e.adler=ap(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Wp=(e,t)=>{let r,n,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-Op?e.strstart-(e.w_size-Op):0,l=e.window,u=e.w_mask,h=e.prev,d=e.strstart+xp;let p=l[s+o-1],f=l[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,l[r+o]===f&&l[r+o-1]===p&&l[r]===l[s]&&l[++r]===l[s+1]){s+=2,r++;do{}while(l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<d);if(n=xp-(d-s),s=d-xp,n>o){if(e.match_start=t,o=n,n>=a)break;p=l[s+o-1],f=l[s+o]}}}while((t=h[t&u])>c&&0!==--i);return o<=e.lookahead?o:e.lookahead},Gp=e=>{const t=e.w_size;let r,n,i,s,o;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Op)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do{i=e.head[--r],e.head[r]=i>=t?i-t:0}while(--n);n=t,r=n;do{i=e.prev[--r],e.prev[r]=i>=t?i-t:0}while(--n);s+=t}if(0===e.strm.avail_in)break;if(n=Hp(e.strm,e.window,e.strstart+e.lookahead,s),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=zp(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=zp(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Op&&0!==e.strm.avail_in)},Yp=(e,t)=>{let r,n;for(;;){if(e.lookahead<Op){if(Gp(e),e.lookahead<Op&&t===yp)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=zp(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-Op&&(e.match_length=Wp(e,r)),e.match_length>=3)if(n=pp(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=zp(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=zp(e,e.ins_h,e.window[e.strstart+1]);else n=pp(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Kp(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===wp?(Kp(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Kp(e,!1),0===e.strm.avail_out)?1:2},Qp=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<Op){if(Gp(e),e.lookahead<Op&&t===yp)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=zp(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Op&&(e.match_length=Wp(e,r),e.match_length<=5&&(e.strategy===Ip||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,n=pp(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=zp(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(Kp(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(n=pp(e,0,e.window[e.strstart-1]),n&&Kp(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=pp(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===wp?(Kp(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Kp(e,!1),0===e.strm.avail_out)?1:2};function Jp(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const Xp=[new Jp(0,0,0,0,((e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Gp(e),0===e.lookahead&&t===yp)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Kp(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-Op&&(Kp(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===wp?(Kp(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(Kp(e,!1),e.strm.avail_out),1)})),new Jp(4,4,8,4,Yp),new Jp(4,5,16,8,Yp),new Jp(4,6,32,32,Yp),new Jp(4,4,16,16,Qp),new Jp(8,16,32,32,Qp),new Jp(8,16,128,128,Qp),new Jp(8,32,128,256,Qp),new Jp(32,128,258,1024,Qp),new Jp(32,258,258,4096,Qp)];function Zp(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Np,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Fp(this.dyn_ltree),Fp(this.dyn_dtree),Fp(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Fp(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Fp(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ef=e=>{if(!e||!e.state)return Up(e,_p);e.total_in=e.total_out=0,e.data_type=Pp;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:Lp,e.adler=2===t.wrap?0:1,t.last_flush=yp,up(t),bp},tf=e=>{const t=ef(e);var r;return t===bp&&((r=e.state).window_size=2*r.w_size,Fp(r.head),r.max_lazy_match=Xp[r.level].max_lazy,r.good_match=Xp[r.level].good_length,r.nice_match=Xp[r.level].nice_length,r.max_chain_length=Xp[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},rf=(e,t,r,n,i,s)=>{if(!e)return _p;let o=1;if(t===kp&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>9||r!==Np||n<8||n>15||t<0||t>9||s<0||s>Tp)return Up(e,_p);8===n&&(n=9);const a=new Zp;return e.state=a,a.strm=e,a.wrap=o,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=s,a.method=r,tf(e)};var nf=(e,t)=>{let r,n;if(!e||!e.state||t>vp||t<0)return e?Up(e,_p):_p;const i=e.state;if(!e.output||!e.input&&0!==e.avail_in||i.status===Mp&&t!==wp)return Up(e,0===e.avail_out?Ap:_p);i.strm=e;const s=i.last_flush;if(i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,$p(i,31),$p(i,139),$p(i,8),i.gzhead?($p(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),$p(i,255&i.gzhead.time),$p(i,i.gzhead.time>>8&255),$p(i,i.gzhead.time>>16&255),$p(i,i.gzhead.time>>24&255),$p(i,9===i.level?2:i.strategy>=Cp||i.level<2?4:0),$p(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&($p(i,255&i.gzhead.extra.length),$p(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=ap(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):($p(i,0),$p(i,0),$p(i,0),$p(i,0),$p(i,0),$p(i,9===i.level?2:i.strategy>=Cp||i.level<2?4:0),$p(i,3),i.status=Lp);else{let t=Np+(i.w_bits-8<<4)<<8,r=-1;r=i.strategy>=Cp||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=r<<6,0!==i.strstart&&(t|=32),t+=31-t%31,i.status=Lp,qp(i,t),0!==i.strstart&&(qp(i,e.adler>>>16),qp(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=ap(e.adler,i.pending_buf,i.pending-r,r)),Vp(e),r=i.pending,i.pending!==i.pending_buf_size));)$p(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=ap(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=ap(e.adler,i.pending_buf,i.pending-r,r)),Vp(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,$p(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=ap(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=ap(e.adler,i.pending_buf,i.pending-r,r)),Vp(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}n=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,$p(i,n)}while(0!==n);i.gzhead.hcrc&&i.pending>r&&(e.adler=ap(e.adler,i.pending_buf,i.pending-r,r)),0===n&&(i.status=Bp)}else i.status=Bp;if(i.status===Bp&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Vp(e),i.pending+2<=i.pending_buf_size&&($p(i,255&e.adler),$p(i,e.adler>>8&255),e.adler=0,i.status=Lp)):i.status=Lp),0!==i.pending){if(Vp(e),0===e.avail_out)return i.last_flush=-1,bp}else if(0===e.avail_in&&jp(t)<=jp(s)&&t!==wp)return Up(e,Ap);if(i.status===Mp&&0!==e.avail_in)return Up(e,Ap);if(0!==e.avail_in||0!==i.lookahead||t!==yp&&i.status!==Mp){let r=i.strategy===Cp?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(Gp(e),0===e.lookahead)){if(t===yp)return 1;break}if(e.match_length=0,r=pp(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Kp(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===wp?(Kp(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Kp(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===Rp?((e,t)=>{let r,n,i,s;const o=e.window;for(;;){if(e.lookahead<=xp){if(Gp(e),e.lookahead<=xp&&t===yp)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,n=o[i],n===o[++i]&&n===o[++i]&&n===o[++i])){s=e.strstart+xp;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);e.match_length=xp-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=pp(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=pp(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Kp(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===wp?(Kp(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(Kp(e,!1),0===e.strm.avail_out)?1:2})(i,t):Xp[i.level].func(i,t);if(3!==r&&4!==r||(i.status=Mp),1===r||3===r)return 0===e.avail_out&&(i.last_flush=-1),bp;if(2===r&&(t===gp?fp(i):t!==vp&&(hp(i,0,0,!1),t===mp&&(Fp(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Vp(e),0===e.avail_out))return i.last_flush=-1,bp}return t!==wp?bp:i.wrap<=0?Ep:(2===i.wrap?($p(i,255&e.adler),$p(i,e.adler>>8&255),$p(i,e.adler>>16&255),$p(i,e.adler>>24&255),$p(i,255&e.total_in),$p(i,e.total_in>>8&255),$p(i,e.total_in>>16&255),$p(i,e.total_in>>24&255)):(qp(i,e.adler>>>16),qp(i,65535&e.adler)),Vp(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?bp:Ep)},sf=(e,t)=>{let r=t.length;if(!e||!e.state)return _p;const n=e.state,i=n.wrap;if(2===i||1===i&&42!==n.status||n.lookahead)return _p;if(1===i&&(e.adler=sp(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===i&&(Fp(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Gp(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do{n.ins_h=zp(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++}while(--t);n.strstart=e,n.lookahead=2,Gp(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,n.wrap=i,bp},of={deflateInit:(e,t)=>rf(e,t,Np,15,8,Dp),deflateInit2:rf,deflateReset:tf,deflateResetKeep:ef,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?_p:(e.state.gzhead=t,bp):_p,deflate:nf,deflateEnd:e=>{if(!e||!e.state)return _p;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==Bp&&t!==Lp&&t!==Mp?Up(e,_p):(e.state=null,t===Lp?Up(e,Sp):bp)},deflateSetDictionary:sf,deflateInfo:"pako deflate (from Nodeca project)"};const af=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var cf=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(const t in r)af(r,t)&&(e[t]=r[t])}}return e},lf=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,s=e.length;n<s;n++){let t=e[n];r.set(t,i),i+=t.length}return r};let uf=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(xM){uf=!1}const hf=new Uint8Array(256);for(let OM=0;OM<256;OM++)hf[OM]=OM>=252?6:OM>=248?5:OM>=240?4:OM>=224?3:OM>=192?2:1;hf[254]=hf[254]=1;var df=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,n,i,s,o=e.length,a=0;for(i=0;i<o;i++)r=e.charCodeAt(i),55296===(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),s=0,i=0;s<a;i++)r=e.charCodeAt(i),55296===(64512&r)&&i+1<o&&(n=e.charCodeAt(i+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|63&r):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|63&r):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|63&r);return t},pf=(e,t)=>{const r=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let n,i;const s=new Array(2*r);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){s[i++]=t;continue}let o=hf[t];if(o>4)s[i++]=65533,n+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&n<r;)t=t<<6|63&e[n++],o--;o>1?s[i++]=65533:t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&uf)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(s,i)},ff=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128===(192&e[r]);)r--;return r<0||0===r?t:r+hf[e[r]]>t?r:t};var yf=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const gf=Object.prototype.toString,{Z_NO_FLUSH:mf,Z_SYNC_FLUSH:wf,Z_FULL_FLUSH:vf,Z_FINISH:bf,Z_OK:Ef,Z_STREAM_END:_f,Z_DEFAULT_COMPRESSION:Sf,Z_DEFAULT_STRATEGY:Af,Z_DEFLATED:kf}=lp;function If(e){this.options=cf({level:Sf,method:kf,chunkSize:16384,windowBits:15,memLevel:8,strategy:Af},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yf,this.strm.avail_out=0;let r=of.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Ef)throw new Error(cp[r]);if(t.header&&of.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?df(t.dictionary):"[object ArrayBuffer]"===gf.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=of.deflateSetDictionary(this.strm,e),r!==Ef)throw new Error(cp[r]);this._dict_set=!0}}function Cf(e,t){const r=new If(t);if(r.push(e,!0),r.err)throw r.msg||cp[r.err];return r.result}If.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,s;if(this.ended)return!1;for(s=t===~~t?t:!0===t?bf:mf,"string"===typeof e?r.input=df(e):"[object ArrayBuffer]"===gf.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===wf||s===vf)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(i=of.deflate(r,s),i===_f)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=of.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Ef;if(0!==r.avail_out){if(s>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},If.prototype.onData=function(e){this.chunks.push(e)},If.prototype.onEnd=function(e){e===Ef&&(this.result=lf(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Rf={Deflate:If,deflate:Cf,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Cf(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Cf(e,t)},constants:lp};var Tf=function(e,t){let r,n,i,s,o,a,c,l,u,h,d,p,f,y,g,m,w,v,b,E,_,S,A,k;const I=e.state;r=e.next_in,A=e.input,n=r+(e.avail_in-5),i=e.next_out,k=e.output,s=i-(t-e.avail_out),o=i+(e.avail_out-257),a=I.dmax,c=I.wsize,l=I.whave,u=I.wnext,h=I.window,d=I.hold,p=I.bits,f=I.lencode,y=I.distcode,g=(1<<I.lenbits)-1,m=(1<<I.distbits)-1;e:do{p<15&&(d+=A[r++]<<p,p+=8,d+=A[r++]<<p,p+=8),w=f[d&g];t:for(;;){if(v=w>>>24,d>>>=v,p-=v,v=w>>>16&255,0===v)k[i++]=65535&w;else{if(!(16&v)){if(0===(64&v)){w=f[(65535&w)+(d&(1<<v)-1)];continue t}if(32&v){I.mode=12;break e}e.msg="invalid literal/length code",I.mode=30;break e}b=65535&w,v&=15,v&&(p<v&&(d+=A[r++]<<p,p+=8),b+=d&(1<<v)-1,d>>>=v,p-=v),p<15&&(d+=A[r++]<<p,p+=8,d+=A[r++]<<p,p+=8),w=y[d&m];r:for(;;){if(v=w>>>24,d>>>=v,p-=v,v=w>>>16&255,!(16&v)){if(0===(64&v)){w=y[(65535&w)+(d&(1<<v)-1)];continue r}e.msg="invalid distance code",I.mode=30;break e}if(E=65535&w,v&=15,p<v&&(d+=A[r++]<<p,p+=8,p<v&&(d+=A[r++]<<p,p+=8)),E+=d&(1<<v)-1,E>a){e.msg="invalid distance too far back",I.mode=30;break e}if(d>>>=v,p-=v,v=i-s,E>v){if(v=E-v,v>l&&I.sane){e.msg="invalid distance too far back",I.mode=30;break e}if(_=0,S=h,0===u){if(_+=c-v,v<b){b-=v;do{k[i++]=h[_++]}while(--v);_=i-E,S=k}}else if(u<v){if(_+=c+u-v,v-=u,v<b){b-=v;do{k[i++]=h[_++]}while(--v);if(_=0,u<b){v=u,b-=v;do{k[i++]=h[_++]}while(--v);_=i-E,S=k}}}else if(_+=u-v,v<b){b-=v;do{k[i++]=h[_++]}while(--v);_=i-E,S=k}for(;b>2;)k[i++]=S[_++],k[i++]=S[_++],k[i++]=S[_++],b-=3;b&&(k[i++]=S[_++],b>1&&(k[i++]=S[_++]))}else{_=i-E;do{k[i++]=k[_++],k[i++]=k[_++],k[i++]=k[_++],b-=3}while(b>2);b&&(k[i++]=k[_++],b>1&&(k[i++]=k[_++]))}break}}break}}while(r<n&&i<o);b=p>>3,r-=b,p-=b<<3,d&=(1<<p)-1,e.next_in=r,e.next_out=i,e.avail_in=r<n?n-r+5:5-(r-n),e.avail_out=i<o?o-i+257:257-(i-o),I.hold=d,I.bits=p};const Df=15,Pf=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Nf=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xf=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Of=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Bf=(e,t,r,n,i,s,o,a)=>{const c=a.bits;let l,u,h,d,p,f,y=0,g=0,m=0,w=0,v=0,b=0,E=0,_=0,S=0,A=0,k=null,I=0;const C=new Uint16Array(16),R=new Uint16Array(16);let T,D,P,N=null,x=0;for(y=0;y<=Df;y++)C[y]=0;for(g=0;g<n;g++)C[t[r+g]]++;for(v=c,w=Df;w>=1&&0===C[w];w--);if(v>w&&(v=w),0===w)return i[s++]=20971520,i[s++]=20971520,a.bits=1,0;for(m=1;m<w&&0===C[m];m++);for(v<m&&(v=m),_=1,y=1;y<=Df;y++)if(_<<=1,_-=C[y],_<0)return-1;if(_>0&&(0===e||1!==w))return-1;for(R[1]=0,y=1;y<Df;y++)R[y+1]=R[y]+C[y];for(g=0;g<n;g++)0!==t[r+g]&&(o[R[t[r+g]]++]=g);if(0===e?(k=N=o,f=19):1===e?(k=Pf,I-=257,N=Nf,x-=257,f=256):(k=xf,N=Of,f=-1),A=0,g=0,y=m,p=s,b=v,E=0,h=-1,S=1<<v,d=S-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){T=y-E,o[g]<f?(D=0,P=o[g]):o[g]>f?(D=N[x+o[g]],P=k[I+o[g]]):(D=96,P=0),l=1<<y-E,u=1<<b,m=u;do{u-=l,i[p+(A>>E)+u]=T<<24|D<<16|P|0}while(0!==u);for(l=1<<y-1;A&l;)l>>=1;if(0!==l?(A&=l-1,A+=l):A=0,g++,0===--C[y]){if(y===w)break;y=t[r+o[g]]}if(y>v&&(A&d)!==h){for(0===E&&(E=v),p+=m,b=y-E,_=1<<b;b+E<w&&(_-=C[b+E],!(_<=0));)b++,_<<=1;if(S+=1<<b,1===e&&S>852||2===e&&S>592)return 1;h=A&d,i[h]=v<<24|b<<16|p-s|0}}return 0!==A&&(i[p+A]=y-E<<24|64<<16|0),a.bits=v,0};const{Z_FINISH:Lf,Z_BLOCK:Mf,Z_TREES:Uf,Z_OK:jf,Z_STREAM_END:Ff,Z_NEED_DICT:zf,Z_STREAM_ERROR:Vf,Z_DATA_ERROR:Kf,Z_MEM_ERROR:$f,Z_BUF_ERROR:qf,Z_DEFLATED:Hf}=lp,Wf=12,Gf=30,Yf=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Qf(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Jf=e=>{if(!e||!e.state)return Vf;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,jf},Xf=e=>{if(!e||!e.state)return Vf;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Jf(e)},Zf=(e,t)=>{let r;if(!e||!e.state)return Vf;const n=e.state;return t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Vf:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Xf(e))},ey=(e,t)=>{if(!e)return Vf;const r=new Qf;e.state=r,r.window=null;const n=Zf(e,t);return n!==jf&&(e.state=null),n};let ty,ry,ny=!0;const iy=e=>{if(ny){ty=new Int32Array(512),ry=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Bf(1,e.lens,0,288,ty,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Bf(2,e.lens,0,32,ry,0,e.work,{bits:5}),ny=!1}e.lencode=ty,e.lenbits=9,e.distcode=ry,e.distbits=5},sy=(e,t,r,n)=>{let i;const s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),s.window.set(t.subarray(r-n,r-n+i),s.wnext),(n-=i)?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0};var oy=(e,t)=>{let r,n,i,s,o,a,c,l,u,h,d,p,f,y,g,m,w,v,b,E,_,S,A=0;const k=new Uint8Array(4);let I,C;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Vf;r=e.state,r.mode===Wf&&(r.mode=13),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,h=a,d=c,S=jf;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(2&r.wrap&&35615===l){r.check=0,k[0]=255&l,k[1]=l>>>8&255,r.check=ap(r.check,k,2,0),l=0,u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",r.mode=Gf;break}if((15&l)!==Hf){e.msg="unknown compression method",r.mode=Gf;break}if(l>>>=4,u-=4,_=8+(15&l),0===r.wbits)r.wbits=_;else if(_>r.wbits){e.msg="invalid window size",r.mode=Gf;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=512&l?10:Wf,l=0,u=0;break;case 2:for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(r.flags=l,(255&r.flags)!==Hf){e.msg="unknown compression method",r.mode=Gf;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Gf;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(k[0]=255&l,k[1]=l>>>8&255,r.check=ap(r.check,k,2,0)),l=0,u=0,r.mode=3;case 3:for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.head&&(r.head.time=l),512&r.flags&&(k[0]=255&l,k[1]=l>>>8&255,k[2]=l>>>16&255,k[3]=l>>>24&255,r.check=ap(r.check,k,4,0)),l=0,u=0,r.mode=4;case 4:for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(k[0]=255&l,k[1]=l>>>8&255,r.check=ap(r.check,k,2,0)),l=0,u=0,r.mode=5;case 5:if(1024&r.flags){for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(k[0]=255&l,k[1]=l>>>8&255,r.check=ap(r.check,k,2,0)),l=0,u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(p=r.length,p>a&&(p=a),p&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+p),_)),512&r.flags&&(r.check=ap(r.check,n,p,s)),a-=p,s+=p,r.length-=p),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===a)break e;p=0;do{_=n[s+p++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_))}while(_&&p<a);if(512&r.flags&&(r.check=ap(r.check,n,p,s)),a-=p,s+=p,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===a)break e;p=0;do{_=n[s+p++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_))}while(_&&p<a);if(512&r.flags&&(r.check=ap(r.check,n,p,s)),a-=p,s+=p,_)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;u<16;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(l!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Gf;break}l=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Wf;break;case 10:for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}e.adler=r.check=Yf(l),l=0,u=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,zf;e.adler=r.check=1,r.mode=Wf;case Wf:if(t===Mf||t===Uf)break e;case 13:if(r.last){l>>>=7&u,u-=7&u,r.mode=27;break}for(;u<3;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}switch(r.last=1&l,l>>>=1,u-=1,3&l){case 0:r.mode=14;break;case 1:if(iy(r),r.mode=20,t===Uf){l>>>=2,u-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=Gf}l>>>=2,u-=2;break;case 14:for(l>>>=7&u,u-=7&u;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if((65535&l)!==(l>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Gf;break}if(r.length=65535&l,l=0,u=0,r.mode=15,t===Uf)break e;case 15:r.mode=16;case 16:if(p=r.length,p){if(p>a&&(p=a),p>c&&(p=c),0===p)break e;i.set(n.subarray(s,s+p),o),a-=p,s+=p,c-=p,o+=p,r.length-=p;break}r.mode=Wf;break;case 17:for(;u<14;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(r.nlen=257+(31&l),l>>>=5,u-=5,r.ndist=1+(31&l),l>>>=5,u-=5,r.ncode=4+(15&l),l>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Gf;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;u<3;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.lens[R[r.have++]]=7&l,l>>>=3,u-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,I={bits:r.lenbits},S=Bf(0,r.lens,0,19,r.lencode,0,r.work,I),r.lenbits=I.bits,S){e.msg="invalid code lengths set",r.mode=Gf;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;A=r.lencode[l&(1<<r.lenbits)-1],g=A>>>24,m=A>>>16&255,w=65535&A,!(g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(w<16)l>>>=g,u-=g,r.lens[r.have++]=w;else{if(16===w){for(C=g+2;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(l>>>=g,u-=g,0===r.have){e.msg="invalid bit length repeat",r.mode=Gf;break}_=r.lens[r.have-1],p=3+(3&l),l>>>=2,u-=2}else if(17===w){for(C=g+3;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=g,u-=g,_=0,p=3+(7&l),l>>>=3,u-=3}else{for(C=g+7;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=g,u-=g,_=0,p=11+(127&l),l>>>=7,u-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Gf;break}for(;p--;)r.lens[r.have++]=_}}if(r.mode===Gf)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Gf;break}if(r.lenbits=9,I={bits:r.lenbits},S=Bf(1,r.lens,0,r.nlen,r.lencode,0,r.work,I),r.lenbits=I.bits,S){e.msg="invalid literal/lengths set",r.mode=Gf;break}if(r.distbits=6,r.distcode=r.distdyn,I={bits:r.distbits},S=Bf(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,I),r.distbits=I.bits,S){e.msg="invalid distances set",r.mode=Gf;break}if(r.mode=20,t===Uf)break e;case 20:r.mode=21;case 21:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,Tf(e,d),o=e.next_out,i=e.output,c=e.avail_out,s=e.next_in,n=e.input,a=e.avail_in,l=r.hold,u=r.bits,r.mode===Wf&&(r.back=-1);break}for(r.back=0;A=r.lencode[l&(1<<r.lenbits)-1],g=A>>>24,m=A>>>16&255,w=65535&A,!(g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(m&&0===(240&m)){for(v=g,b=m,E=w;A=r.lencode[E+((l&(1<<v+b)-1)>>v)],g=A>>>24,m=A>>>16&255,w=65535&A,!(v+g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=v,u-=v,r.back+=v}if(l>>>=g,u-=g,r.back+=g,r.length=w,0===m){r.mode=26;break}if(32&m){r.back=-1,r.mode=Wf;break}if(64&m){e.msg="invalid literal/length code",r.mode=Gf;break}r.extra=15&m,r.mode=22;case 22:if(r.extra){for(C=r.extra;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;A=r.distcode[l&(1<<r.distbits)-1],g=A>>>24,m=A>>>16&255,w=65535&A,!(g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(0===(240&m)){for(v=g,b=m,E=w;A=r.distcode[E+((l&(1<<v+b)-1)>>v)],g=A>>>24,m=A>>>16&255,w=65535&A,!(v+g<=u);){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}l>>>=v,u-=v,r.back+=v}if(l>>>=g,u-=g,r.back+=g,64&m){e.msg="invalid distance code",r.mode=Gf;break}r.offset=w,r.extra=15&m,r.mode=24;case 24:if(r.extra){for(C=r.extra;u<C;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Gf;break}r.mode=25;case 25:if(0===c)break e;if(p=d-c,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Gf;break}p>r.wnext?(p-=r.wnext,f=r.wsize-p):f=r.wnext-p,p>r.length&&(p=r.length),y=r.window}else y=i,f=o-r.offset,p=r.length;p>c&&(p=c),c-=p,r.length-=p;do{i[o++]=y[f++]}while(--p);0===r.length&&(r.mode=21);break;case 26:if(0===c)break e;i[o++]=r.length,c--,r.mode=21;break;case 27:if(r.wrap){for(;u<32;){if(0===a)break e;a--,l|=n[s++]<<u,u+=8}if(d-=c,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?ap(r.check,i,d,o-d):sp(r.check,i,d,o-d)),d=c,(r.flags?l:Yf(l))!==r.check){e.msg="incorrect data check",r.mode=Gf;break}l=0,u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;u<32;){if(0===a)break e;a--,l+=n[s++]<<u,u+=8}if(l!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Gf;break}l=0,u=0}r.mode=29;case 29:S=Ff;break e;case Gf:S=Kf;break e;case 31:return $f;default:return Vf}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,r.hold=l,r.bits=u,(r.wsize||d!==e.avail_out&&r.mode<Gf&&(r.mode<27||t!==Lf))&&sy(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?ap(r.check,i,d,e.next_out-d):sp(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Wf?128:0)+(20===r.mode||15===r.mode?256:0),(0===h&&0===d||t===Lf)&&S===jf&&(S=qf),S},ay={inflateReset:Xf,inflateReset2:Zf,inflateResetKeep:Jf,inflateInit:e=>ey(e,15),inflateInit2:ey,inflate:oy,inflateEnd:e=>{if(!e||!e.state)return Vf;let t=e.state;return t.window&&(t.window=null),e.state=null,jf},inflateGetHeader:(e,t)=>{if(!e||!e.state)return Vf;const r=e.state;return 0===(2&r.wrap)?Vf:(r.head=t,t.done=!1,jf)},inflateSetDictionary:(e,t)=>{const r=t.length;let n,i,s;return e&&e.state?(n=e.state,0!==n.wrap&&11!==n.mode?Vf:11===n.mode&&(i=1,i=sp(i,t,r,0),i!==n.check)?Kf:(s=sy(e,t,r,r),s?(n.mode=31,$f):(n.havedict=1,jf))):Vf},inflateInfo:"pako inflate (from Nodeca project)"};var cy=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const ly=Object.prototype.toString,{Z_NO_FLUSH:uy,Z_FINISH:hy,Z_OK:dy,Z_STREAM_END:py,Z_NEED_DICT:fy,Z_STREAM_ERROR:yy,Z_DATA_ERROR:gy,Z_MEM_ERROR:my}=lp;function wy(e){this.options=cf({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yf,this.strm.avail_out=0;let r=ay.inflateInit2(this.strm,t.windowBits);if(r!==dy)throw new Error(cp[r]);if(this.header=new cy,ay.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=df(t.dictionary):"[object ArrayBuffer]"===ly.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=ay.inflateSetDictionary(this.strm,t.dictionary),r!==dy)))throw new Error(cp[r])}function vy(e,t){const r=new wy(t);if(r.push(e),r.err)throw r.msg||cp[r.err];return r.result}wy.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(o=t===~~t?t:!0===t?hy:uy,"[object ArrayBuffer]"===ly.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=ay.inflate(r,o),s===fy&&i&&(s=ay.inflateSetDictionary(r,i),s===dy?s=ay.inflate(r,o):s===gy&&(s=fy));r.avail_in>0&&s===py&&r.state.wrap>0&&0!==e[r.next_in];)ay.inflateReset(r),s=ay.inflate(r,o);switch(s){case yy:case gy:case fy:case my:return this.onEnd(s),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||s===py))if("string"===this.options.to){let e=ff(r.output,r.next_out),t=r.next_out-e,i=pf(r.output,e);r.next_out=t,r.avail_out=n-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(i)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(s!==dy||0!==a){if(s===py)return s=ay.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},wy.prototype.onData=function(e){this.chunks.push(e)},wy.prototype.onEnd=function(e){e===dy&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=lf(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var by={Inflate:wy,inflate:vy,inflateRaw:function(e,t){return(t=t||{}).raw=!0,vy(e,t)},ungzip:vy,constants:lp};const{Deflate:Ey,deflate:_y,deflateRaw:Sy,gzip:Ay}=Rf,{Inflate:ky,inflate:Iy,inflateRaw:Cy,ungzip:Ry}=by;var Ty={Deflate:Ey,deflate:_y,deflateRaw:Sy,gzip:Ay,Inflate:ky,inflate:Iy,inflateRaw:Cy,ungzip:Ry,constants:lp};class Dy{constructor(e){let{preload:t,repo:r,hashers:n,options:i}=e;const s=function(e){let{repo:t,preload:r,hashers:n,options:i}=e;const s=i&&i.sharding;return rr((async function*(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=Ah({shardSplitThreshold:s?1e3:1/0,strategy:"balanced"},i,{...Eh(i.chunker)});o.hashAlg&&"sha2-256"!==o.hashAlg&&1!==o.cidVersion&&(o.cidVersion=1),o.trickle&&(o.strategy="trickle"),"trickle"===o.strategy&&(o.leafType="raw",o.reduceSingleLeafToSelf=!1),o.cidVersion>0&&void 0===o.rawLeaves&&(o.rawLeaves=!0),void 0!==o.hashAlg&&void 0===o.rawLeaves&&(o.rawLeaves=!0),delete o.trickle;const a={};if(o.progress){const e=o.progress;o.progress=(t,r)=>{a[r]||(a[r]=0),a[r]+=t,e(a[r],r)}}let c;null!=o.hashAlg&&(c=await n.getHasher(o.hashAlg));const l=bu(bh(e),(e=>mh(e,t.blocks,{...o,hasher:c,pin:!1})),kh(o),Ih(r,o),Ch(t,o)),u=await t.gcLock.readLock();try{for await(const e of l){var h;const t=null!==(h=e.path)&&void 0!==h?h:e.cid.toString();delete a[t],yield{...e,path:t}}}finally{u()}}))}({preload:t,repo:r,options:i,hashers:n});this.addAll=s,this.add=function(e){let{addAll:t}=e;return async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await Sn(t(Ou(e),r));if(null==n)throw Error("Failed to add a file, if you see this please report a bug");return n}}({addAll:s}),this.cat=function(e){let{repo:t,preload:r}=e;return rr((async function*(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=lr(e),!1!==n.preload){const t=e.split("/");r(Ne.CID.parse(t[0]))}const i=await Gh(e,t.blocks,n);if("directory"===i.type)throw new Error("this dag node is a directory");if(!i.content)throw new Error("this dag node has no content");yield*i.content(n)}))}({repo:r,preload:t}),this.get=function(e){let{repo:t,preload:r}=e;return rr((async function*(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=n.compressionLevel&&(n.compressionLevel<-1||n.compressionLevel>9))throw me(new Error("Compression level must be between -1 and 9"),"ERR_INVALID_PARAMS");if(!1!==n.preload){let t;try{t=lr(e).split("/")}catch(Up){throw me(Up,"ERR_INVALID_PATH")}r(Ne.CID.parse(t[0]))}const i=Ne.CID.asCID(e)||e,s=await Gh(i,t.blocks,n);if("file"===s.type||"raw"===s.type){const e=[];return n.compress&&!0!==n.archive?e.push(s.content):e.push([{header:{name:s.path,mode:"file"===s.type&&s.unixfs.mode,mtime:"file"===s.type&&s.unixfs.mtime?new Date(1e3*s.unixfs.mtime.secs):void 0,size:s.size,type:"file"},body:s.content()}],wd(),(e=>lc(e,(e=>e.slice())))),n.compress&&e.push((async function*(e){const t=await Xh(e);yield Ty.gzip(t,{level:n.compressionLevel||6})})),void(yield*bu(...e))}if("directory"!==s.type)throw me(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");{const e=[Yh(i,t.blocks,n),async function*(e){for await(const t of e){const e={header:{name:t.path,size:t.size}};if("file"===t.type)e.header.type="file",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0,e.body=t.content();else if("raw"===t.type)e.header.type="file",e.body=t.content();else{if("directory"!==t.type)throw me(new Error("Not a UnixFS node"),"ERR_NOT_UNIXFS");e.header.type="directory",e.header.mode=null!=t.unixfs.mode?t.unixfs.mode:void 0,e.header.mtime=t.unixfs.mtime?new Date(1e3*t.unixfs.mtime.secs):void 0}yield e}},wd(),e=>lc(e,(e=>e.slice()))];if(n.compress){if(!n.archive)throw me(new Error("file is not regular"),"ERR_INVALID_PATH");n.compress&&e.push((async function*(e){const t=await Xh(e);yield Ty.gzip(t,{level:n.compressionLevel||6})}))}yield*bu(...e)}}))}({repo:r,preload:t}),this.ls=function(e){let{repo:t,preload:r}=e;return rr((async function*(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=lr(e),s=i.split("/");!1!==n.preload&&r(Ne.CID.parse(s[0]));const o=Ne.CID.asCID(i)||i,a=await Gh(o,t.blocks,n);if("file"!==a.type){if("directory"!==a.type)throw me(new Error(`Unknown UnixFS type ${a.type}`),"ERR_UNKNOWN_UNIXFS_TYPE");for await(const e of a.content())yield hr(e)}else yield hr(a)}))}({repo:r,preload:t})}}const Py="0.15.4",Ny="965f5a4e00254cee48fca2127d95209deaee09cf",xy="^0.155.2";const Oy=ge("ipfs:components:id");async function By(e,t,r){let n=await t.peerStore.get(e);n||(n=await async function(e,t,r){if(null==t.dht)throw me(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");for await(const i of t.dht.findPeer(e,r))if("FINAL_PEER"===i.name)break;const n=await t.peerStore.get(e);if(!n)throw me(new Error("Could not find peer"),"ERR_NOT_FOUND");return n}(e,t,r));let i=e.publicKey?e.publicKey:await t.peerStore.keyBook.get(e);if(null==i)try{i=await t.getPublicKey(e,r)}catch(Up){Oy.error("Could not load public key for",e.toString(),Up)}return{...n,publicKey:i,metadata:n.metadata||new Map,addresses:n.addresses.map((e=>e.multiaddr))}}var Ly=function(e,t,r){var n,i,s;Array.isArray(t)&&(n=t.slice(0));"string"==typeof t&&(n=t.split("."));"symbol"==typeof t&&(n=[t]);if(!Array.isArray(n))throw new Error("props arg must be an array, a string or a symbol");if(!(i=n.pop()))return!1;My(i);for(;s=n.shift();)if(My(s),"undefined"==typeof e[s]&&(e[s]={}),!(e=e[s])||"object"!=typeof e)return!1;return e[i]=r,!0};function My(e){if("__proto__"==e||"constructor"==e||"prototype"==e)throw new Error("setting of prototype values not supported")}const Uy={server:{description:"Recommended for nodes with public IPv4 address (servers, VPSes, etc.), disables host and content discovery and UPnP in local networks.",transform:e=>(Ly(e,"Discovery.MDNS.Enabled",!1),Ly(e,"Discovery.webRTCStar.Enabled",!1),e.Swarm={...e.Swarm||{},DisableNatPortMap:!0},e)},"local-discovery":{description:"Sets default values to fields affected by `server` profile, enables discovery and UPnP in local networks.",transform:e=>(Ly(e,"Discovery.MDNS.Enabled",!0),Ly(e,"Discovery.webRTCStar.Enabled",!0),Ly(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e)},test:{description:"Reduces external interference, useful for running ipfs in test environments. Note that with these settings node won't be able to talk to the rest of the network without manual bootstrap.",transform:e=>{const t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return Ly(e,"Addresses.API",t.Addresses.API?"/ip4/127.0.0.1/tcp/0":""),Ly(e,"Addresses.Gateway",t.Addresses.Gateway?"/ip4/127.0.0.1/tcp/0":""),Ly(e,"Addresses.Swarm",t.Addresses.Swarm.length?["/ip4/127.0.0.1/tcp/0"]:[]),Ly(e,"Addresses.Delegates",[]),Ly(e,"Bootstrap",[]),Ly(e,"Discovery.MDNS.Enabled",!1),Ly(e,"Discovery.webRTCStar.Enabled",!1),Ly(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!0}),e}},"default-networking":{description:"Restores default network settings. Inverse profile of the `test` profile.",transform:e=>{const t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return Ly(e,"Addresses.API",t.Addresses.API),Ly(e,"Addresses.Gateway",t.Addresses.Gateway),Ly(e,"Addresses.Swarm",t.Addresses.Swarm),Ly(e,"Addresses.Delegates",t.Addresses.Delegates),Ly(e,"Bootstrap",t.Bootstrap),Ly(e,"Discovery.MDNS.Enabled",t.Discovery.MDNS.Enabled),Ly(e,"Discovery.webRTCStar.Enabled",t.Discovery.webRTCStar.Enabled),Ly(e,"Swarm",{...e.Swarm||{},DisableNatPortMap:!1}),e}},lowpower:{description:"Reduces daemon overhead on the system. May affect node functionality,performance of content discovery and data fetching may be degraded. Recommended for low power systems.",transform:e=>{const t=e.Swarm||{},r=t.ConnMgr||{};return r.LowWater=20,r.HighWater=40,t.ConnMgr=r,e.Swarm=t,e}},"default-power":{description:'Inverse of "lowpower" profile.',transform:e=>{const t={Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}};return e.Swarm=t.Swarm,e}}},jy=ge("ipfs:core:config");async function Fy(e){return Object.keys(Uy).map((e=>({name:e,description:Uy[e].description})))}const zy=function(){let{enumerable:e=!0,configurable:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{enumerable:e,configurable:t,writable:!1}},Vy=function*(e,t){if(null!=e&&!(e instanceof Uint8Array))for(const[r,n]of Object.entries(e)){const e=[...t,r];if(null!=n&&"object"===typeof n)if(Array.isArray(n))for(const[t,r]of n.entries()){const n=[...e,t],i=pt.k0.asCID(r);i?yield[n.join("/"),i]:"object"===typeof r&&(yield*Vy(r,n))}else{const t=pt.k0.asCID(n);t?yield[e.join("/"),t]:yield*Vy(n,e)}}},Ky=function*(e,t){if(null!=e)for(const[r,n]of Object.entries(e)){const e=[...t,r];if(yield e.join("/"),null!=n&&!(n instanceof Uint8Array)&&"object"===typeof n&&!pt.k0.asCID(n))if(Array.isArray(n))for(const[t,r]of n.entries()){const n=[...e,t];yield n.join("/"),"object"!==typeof r||pt.k0.asCID(r)||(yield*Ky(r,n))}else yield*Ky(n,e)}};class $y{constructor(e){let{cid:t,bytes:r,value:n}=e;if(!t||!r||"undefined"===typeof n)throw new Error("Missing required argument");this.cid=t,this.bytes=r,this.value=n,this.asBlock=this,Object.defineProperties(this,{cid:zy(),bytes:zy(),value:zy(),asBlock:zy()})}links(){return Vy(this.value,[])}tree(){return Ky(this.value,[])}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return((e,t)=>{let r=e;for(const[n,i]of t.entries()){if(r=r[i],null==r)throw new Error(`Object has no property at ${t.slice(0,n+1).map((e=>`[${JSON.stringify(e)}]`)).join("")}`);const e=pt.k0.asCID(r);if(e)return{value:e,remaining:t.slice(n+1).join("/")}}return{value:r}})(this.value,e.split("/").filter(Boolean))}}const qy=e=>{let{bytes:t,cid:r,value:n,codec:i}=e;const s=void 0!==n?n:i&&i.decode(t);if(void 0===s)throw new Error('Missing required argument, must either provide "value" or "codec"');return new $y({cid:r,bytes:t,value:s})};function Hy(e){const t=ht({version:1,roots:e}),r=dl.encode(t.length),n=new Uint8Array(r.length+t.length);return n.set(r,0),n.set(t,r.length),n}function Wy(){}const Gy={Null:e=>null===e,Int:e=>Number.isInteger(e),Float:e=>"number"===typeof e&&Number.isFinite(e),String:e=>"string"===typeof e,Bool:e=>"boolean"===typeof e,Bytes:e=>e instanceof Uint8Array,Link:e=>!Gy.Null(e)&&"object"===typeof e&&e.asCID===e,List:e=>Array.isArray(e),Map:e=>!Gy.Null(e)&&"object"===typeof e&&e.asCID!==e&&!Gy.List(e)&&!Gy.Bytes(e)},Yy={Int:Gy.Int,"CarHeader > version":e=>Yy.Int(e),"CarHeader > roots (anon) > valueType (anon)":Gy.Link,"CarHeader > roots (anon)":e=>Gy.List(e)&&Array.prototype.every.call(e,Yy["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":e=>Yy["CarHeader > roots (anon)"](e),CarHeader:e=>{const t=e&&Object.keys(e);return Gy.Map(e)&&["version"].every((e=>t.includes(e)))&&Object.entries(e).every((e=>{let[t,r]=e;return Yy["CarHeader > "+t]&&Yy["CarHeader > "+t](r)}))}},Qy=Yy.CarHeader,Jy=18,Xy=32,Zy=112;async function eg(e){const t=await e.upTo(8);if(!t.length)throw new Error("Unexpected end of data");const r=dl.decode(t);return e.seek(dl.decode.bytes),r}async function tg(e,t){const r=await eg(e);if(0===r)throw new Error("Invalid CAR header (zero length)");const n=await e.exactly(r);e.seek(r);const i=dt(n);if(!Qy(i))throw new Error("Invalid CAR header format");if(1!==i.version&&2!==i.version||void 0!==t&&i.version!==t)throw new Error(`Invalid CAR version: ${i.version}${void 0!==t?` (expected ${t})`:""}`);const s=Array.isArray(i.roots);if(1===i.version&&!s||2===i.version&&s)throw new Error("Invalid CAR header format");if(1===i.version)return i;const o=await async function(e){const t=await e.exactly(40),r=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;const i={version:2,characteristics:[r.getBigUint64(n,!0),r.getBigUint64(n+=8,!0)],dataOffset:Number(r.getBigUint64(n+=8,!0)),dataSize:Number(r.getBigUint64(n+=8,!0)),indexOffset:Number(r.getBigUint64(n+=8,!0))};return e.seek(40),i}(e);e.seek(o.dataOffset-e.pos);const a=await tg(e,1);return Object.assign(a,o)}async function rg(e){const t=await e.exactly(2);if(t[0]===Jy&&t[1]===Xy){const t=await e.exactly(34);e.seek(34);const r=ln.decode(t);return Ne.CID.create(0,Zy,r)}const r=await eg(e);if(1!==r)throw new Error(`Unexpected CID version (${r})`);const n=await eg(e),i=await async function(e){const t=await e.upTo(8);dl.decode(t);const r=dl.decode.bytes,n=dl.decode(t.subarray(dl.decode.bytes)),i=r+dl.decode.bytes+n,s=await e.exactly(i);return e.seek(i),s}(e),s=ln.decode(i);return Ne.CID.create(r,n,s)}async function ng(e){const t=e.pos;let r=await eg(e);if(0===r)throw new Error("Invalid CAR section (zero length)");r+=e.pos-t;return{cid:await rg(e),length:r,blockLength:r-Number(e.pos-t)}}async function ig(e){const{cid:t,blockLength:r}=await ng(e),n=await e.exactly(r);return e.seek(r),{bytes:n,cid:t}}async function sg(e){const t=e.pos,{cid:r,length:n,blockLength:i}=await ng(e),s={cid:r,length:n,blockLength:i,offset:t,blockOffset:e.pos};return e.seek(s.blockLength),s}function og(e){const t=(async()=>{const t=await tg(e);if(2===t.version){const r=e.pos-t.dataOffset;e=function(e,t){let r=0;return{async upTo(n){let i=await e.upTo(n);return i.length+r>t&&(i=i.subarray(0,t-r)),i},async exactly(n){const i=await e.exactly(n);if(i.length+r>t)throw new Error("Unexpected end of data");return i},seek(t){r+=t,e.seek(t)},get pos(){return e.pos}}}(e,t.dataSize-r)}return t})();return{header:()=>t,async*blocks(){for(await t;(await e.upTo(8)).length>0;)yield await ig(e)},async*blocksIndex(){for(await t;(await e.upTo(8)).length>0;)yield await sg(e)}}}function ag(e){let t=0;return{upTo:async r=>e.subarray(t,t+Math.min(r,e.length-t)),async exactly(r){if(r>e.length-t)throw new Error("Unexpected end of data");return e.subarray(t,t+r)},seek(e){t+=e},get pos(){return t}}}function cg(e){const t=e[Symbol.asyncIterator]();return function(e){let t=0,r=0,n=0,i=new Uint8Array(0);const s=async t=>{r=i.length-n;const s=[i.subarray(n)];for(;r<t;){const t=await e();if(null==t)break;r<0?t.length>r&&s.push(t.subarray(-r)):s.push(t),r+=t.length}i=new Uint8Array(s.reduce(((e,t)=>e+t.length),0));let o=0;for(const e of s)i.set(e,o),o+=e.length;n=0};return{upTo:async e=>(i.length-n<e&&await s(e),i.subarray(n,n+Math.min(i.length-n,e))),async exactly(e){if(i.length-n<e&&await s(e),i.length-n<e)throw new Error("Unexpected end of data");return i.subarray(n,n+e)},seek(e){t+=e,n+=e},get pos(){return t}}}((async function(){const e=await t.next();return e.done?null:e.value}))}class lg{constructor(e,t){this._encoder=t,this._mutex=t.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const t=Ne.CID.asCID(e.cid);if(!t)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then((()=>this._encoder.writeBlock({cid:t,bytes:e.bytes}))),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=function(e){if(void 0===e)return[];if(!Array.isArray(e)){const t=Ne.CID.asCID(e);if(!t)throw new TypeError("roots must be a single CID or an array of CIDs");return[t]}const t=[];for(const r of e){const e=Ne.CID.asCID(r);if(!e)throw new TypeError("roots must be a single CID or an array of CIDs");t.push(e)}return t}(e);const{encoder:t,iterator:r}=hg();return{writer:new lg(e,t),out:new ug(r)}}static createAppender(){const{encoder:e,iterator:t}=hg();e.setRoots=()=>Promise.resolve();return{writer:new lg([],e),out:new ug(t)}}static async updateRootsInBytes(e,t){const r=ag(e);await tg(r);const n=Hy(t);if(Number(r.pos)!==n.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${r.pos} bytes, new header is ${n.length} bytes)`);return e.set(n,0),e}}class ug{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function hg(){const e=function(){const e=[];let t=null,r=Wy,n=!1,i=null,s=Wy;const o=()=>(t||(t=new Promise((e=>{r=()=>{t=null,r=Wy,e()}}))),t),a={write(t){e.push(t);const r=o();return s(),r},async end(){n=!0;const e=o();s(),await e}},c={async next(){const t=e.shift();return t?(0===e.length&&r(),{done:!1,value:t}):n?(r(),{done:!0,value:void 0}):(i||(i=new Promise((e=>{s=()=>(i=null,s=Wy,e(c.next()))}))),i)}};return{writer:a,iterator:c}}(),{writer:t,iterator:r}=e,n=function(e){return{async setRoots(t){const r=Hy(t);await e.write(r)},async writeBlock(t){const{cid:r,bytes:n}=t;await e.write(new Uint8Array(dl.encode(r.bytes.length+n.length))),await e.write(r.bytes),n.length&&await e.write(n)},async close(){await e.end()}}}(t);return{encoder:n,iterator:r}}var dg=__webpack_require__(7512);const pg=async e=>{let{cid:t,load:r,seen:n}=e;n=n||new Set;const i=t.toString(pe.base58btc);if(n.has(i))return;const s=await r(t);if(n.add(i),null!==s)for(const[,o]of s.links())await pg({cid:o,load:r,seen:n})},fg=ge("ipfs:components:dag:import"),yg=[Ku.code,dg.code];function gg(e,t,r,n){return async i=>{const s=await n.getCodec(i.code);if(!s)throw new Error(`Can't decode links in block with codec 0x${i.code.toString(16)} to form complete DAG`);const o=await e.blocks.get(i,r);return fg(`Adding block ${i} to car`),await t.put({cid:i,bytes:o}),yg.includes(i.code)?null:qy({bytes:o,cid:i,codec:s})}}var mg=__webpack_require__(4744);class wg{constructor(e,t,r){this._version=e,this._roots=t,this._iterable=r,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class vg extends wg{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:t,roots:r,iterator:n}=await bg(e);return new vg(t,r,n)}static async fromIterable(e){const{version:t,roots:r,iterator:n}=await Eg(e);return new vg(t,r,n)}}Symbol.asyncIterator;async function bg(e){if(!(e instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return _g(ag(e))}async function Eg(e){if(!e||"function"!==typeof e[Symbol.asyncIterator])throw new TypeError("fromIterable() requires an async iterable");return _g(cg(e))}async function _g(e){const t=og(e),{version:r,roots:n}=await t.header();return{version:r,roots:n,iterator:t.blocks()}}const Sg=ge("ipfs:components:dag:import");async function Ag(e,t,r){const n=await vg.fromIterable(r),i=await n.getRoots();return await Xa(e.blocks.putMany(lc(n,(e=>{let{cid:t,bytes:r}=e;return Sg(`Import block ${t}`),{key:t,value:r}})),{signal:t.signal})),i}class kg{constructor(e){let{repo:t,codecs:r,hashers:n,preload:i}=e;this.export=function(e){let{repo:t,preload:r,codecs:n}=e;return rr((async function*(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!1!==i.preload&&r(e);const s=Ne.CID.asCID(e);if(!s)throw new Error(`Unexpected error converting CID type: ${e}`);fg(`Exporting ${s} as car`);const{writer:o,out:a}=await lg.create([s]);let c=null;(async()=>{try{const e=gg(t,o,{signal:i.signal,timeout:i.timeout},n);await pg({cid:s,load:e})}catch(e){c=e}finally{o.close()}})();for await(const t of a){if(c)break;yield t}if(c)throw c}))}({repo:t,preload:i,codecs:r}),this.get=function(e){let{codecs:t,repo:r,preload:n}=e;return rr((async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!1!==i.preload&&n(e),i.path){const n=i.localResolve?await mg(pr(e,i.path,t,r,i)):await Sn(pr(e,i.path,t,r,i));if(!n)throw me(new Error("Not found"),"ERR_NOT_FOUND");return n}const s=await t.getCodec(e.code),o=await r.blocks.get(e,i);return{value:s.decode(o),remainderPath:""}}))}({codecs:r,repo:t,preload:i}),this.import=function(e){let{repo:t}=e;return rr((async function*(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await t.gcLock.readLock();try{const i={signal:r.signal,timeout:r.timeout},s=ku(e),{value:o,done:a}=await s.peek();if(a)return;let c;o&&s.push(o),c=o instanceof Uint8Array?[s]:s;for await(const e of c){const n=await Ag(t,i,e);if(!1!==r.pinRoots)for(const e of n){let r="";try{await t.blocks.has(e)?(Sg(`Pinning root ${e}`),await t.pins.pinRecursively(e)):r="blockstore: block not found"}catch(Up){r=Up.message}yield{root:{cid:e,pinErrorMsg:r}}}}}finally{n()}}))}({repo:t}),this.resolve=function(e){let{repo:t,codecs:r,preload:n}=e;return rr((async function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cid:s}=ir(e);return!1!==i.preload&&n(s),ur(t,r,e,i)}))}({repo:t,codecs:r,preload:i}),this.put=function(e){let{repo:t,codecs:r,hashers:n,preload:i}=e;return rr((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=s.pin?await t.gcLock.readLock():null;try{const a=await r.getCodec(s.storeCodec||"dag-cbor");if(!a)throw new Error(`Unknown storeCodec ${s.storeCodec}, please configure additional BlockCodecs for this IPFS instance`);if(s.inputCodec){if(!(e instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");const t=await r.getCodec(s.inputCodec);if(!t)throw new Error(`Unknown inputCodec ${s.inputCodec}, please configure additional BlockCodecs for this IPFS instance`);e=t.decode(e)}const c=null!=s.version?s.version:1,l=await n.getHasher(s.hashAlg||"sha2-256");if(!l)throw new Error(`Unknown hash algorithm ${s.hashAlg}, please configure additional MultihashHashers for this IPFS instance`);const u=a.encode(e),h=await l.digest(u),d=Ne.CID.create(c,a.code,h);return await t.blocks.put(d,u,{signal:s.signal}),s.pin&&await t.pins.pinRecursively(d),!1!==s.preload&&i(d),d}finally{o&&o()}}))}({repo:t,codecs:r,hashers:n,preload:i})}}const Ig=(e,t)=>t,Cg={ip4:Ig,ip6:(e,t,r,n)=>1===n.length&&"ip6"===n[0].protocol?t:`[${t}]`,tcp:(e,t,r,n,i)=>n.some((e=>["http","https","ws","wss"].includes(e.protocol)))?`${e}:${t}`:((e,t,r,n)=>{if(null!=n&&!1===n.assumeHttp)return`tcp://${e}:${t}`;let i="tcp",s=`:${t}`;return"tcp"===r[r.length-1].protocol&&(i="443"===t?"https":"http",s="443"===t||"80"===t?"":s),`${i}://${e}${s}`})(e,t,n,i),udp:(e,t)=>`udp://${e}:${t}`,dnsaddr:Ig,dns4:Ig,dns6:Ig,ipfs:(e,t)=>`${e}/ipfs/${t}`,p2p:(e,t)=>`${e}/p2p/${t}`,http:e=>`http://${e}`,https:e=>`https://${e}`,ws:e=>`ws://${e}`,wss:e=>`wss://${e}`,"p2p-websocket-star":e=>`${e}/p2p-websocket-star`,"p2p-webrtc-star":e=>`${e}/p2p-webrtc-star`,"p2p-webrtc-direct":e=>`${e}/p2p-webrtc-direct`};function Rg(e,t){const r=new Ml(e),n=e.toString().split("/").slice(1);return r.tuples().map((e=>{var t,r;return{protocol:null!==(t=n.shift())&&void 0!==t?t:"",content:null!=e[1]&&null!==(r=n.shift())&&void 0!==r?r:""}})).reduce(((e,r,n,i)=>{const s=Cg[r.protocol];if(null==s)throw new Error(`Unsupported protocol ${r.protocol}`);return s(e,r.content,n,i,t)}),"")}function Tg(e){if(!Array.isArray(e))throw new TypeError("Expected an array, got "+typeof e);for(let t=(e=[...e]).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}const Dg=ge("ipfs:preload"),Pg=new(tn.default?tn.default:tn)({concurrency:4});function Ng(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Dg(e),Pg.add((async()=>{const r=(await rn.post(e,{signal:t.signal})).body.getReader();try{for(;;){const{done:e}=await r.read();if(e)return}}finally{r.releaseLock()}}))}const xg=ge("ipfs:preload");function Og(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.enabled=Boolean(e.enabled),e.addresses=e.addresses||[],e.cache=e.cache||1e3,!e.enabled||!e.addresses.length){xg("preload disabled");const e=()=>{};return Object.assign(e,{start:()=>{},stop:()=>{}})}let t=!0,r=[];const n=e.addresses.map((e=>Rg(e))),i=yr(e.cache),s=async e=>{try{if(t)throw new Error(`preload ${e} but preloader is not started`);const s=e.toString();if(i.has(s))return;i.set(s,!0);const o=Tg(n);let a=!1;const c=Date.now();for(const e of o){if(t)throw new Error(`preload aborted for ${s}`);let n;try{n=new AbortController,r=r.concat(n),await Ng(`${e}/api/v0/refs?r=true&arg=${encodeURIComponent(s)}`,{signal:n.signal}),a=!0}catch(Up){"aborted"!==Up.type&&xg.error(Up)}finally{r=r.filter((e=>e!==n))}if(a)break}xg(`${a?"":"un"}successfully preloaded ${s} in ${Date.now()-c}ms`)}catch(Up){xg.error(Up)}};return s.start=()=>{t=!1},s.stop=()=>{t=!0,xg(`aborting ${r.length} pending preload request(s)`),r.forEach((e=>e.abort())),r=[]},s}const Bg=ge("ipfs:mfs-preload");class Lg extends Error{constructor(e){super(e),this.name="TimeoutError"}}class Mg extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const Ug=e=>void 0===globalThis.DOMException?new Mg(e):new DOMException(e),jg=e=>{const t=void 0===e.reason?Ug("This operation was aborted."):e.reason;return t instanceof Error?t:Ug(t)};const Fg="lock:worker:request-read",zg="lock:worker:release-read",Vg="lock:master:grant-read",Kg="lock:worker:request-write",$g="lock:worker:release-write",qg="lock:master:grant-write",Hg={},Wg=e=>{e.addEventListener("message",(t=>{Wg.dispatchEvent("message",e,t)})),null!=e.port&&e.port.addEventListener("message",(t=>{Wg.dispatchEvent("message",e,t)}))};Wg.addEventListener=(e,t)=>{null==Hg[e]&&(Hg[e]=[]),Hg[e].push(t)},Wg.removeEventListener=(e,t)=>{null!=Hg[e]&&(Hg[e]=Hg[e].filter((e=>e===t)))},Wg.dispatchEvent=function(e,t,r){null!=Hg[e]&&Hg[e].forEach((e=>e(t,r)))};const Gg=Wg,Yg=(e,t,r,n,i)=>(s,o)=>{if(o.data.type!==r)return;const a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise((e=>{const t=r=>{if(null==r||null==r.data)return;const i=r.data.type,o=(r.data.name,r.data.identifier);i===n&&o===a.identifier&&(s.removeEventListener("message",t),e())};s.addEventListener("message",t)})))}}))},Qg=(e,t,r,n)=>async()=>{const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),"")}();return globalThis.postMessage({type:t,identifier:i,name:e}),await new Promise((t=>{const s=o=>{if(null==o||null==o.data)return;const a=o.data.type,c=o.data.identifier;a===r&&c===i&&(globalThis.removeEventListener("message",s),t((()=>{globalThis.postMessage({type:n,identifier:i,name:e})})))};globalThis.addEventListener("message",s)}))},Jg={singleProcess:!1},Xg={};let Zg;async function em(e,t){let r;const n=new Promise((e=>{r=e}));return e.add((async()=>await function(e,t){const{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let o;const a=new Promise(((a,c)=>{if("number"!==typeof r||1!==Math.sign(r))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(r!==Number.POSITIVE_INFINITY){if(t.signal){const{signal:e}=t;e.aborted&&c(jg(e)),e.addEventListener("abort",(()=>{c(jg(e))}))}o=s.setTimeout.call(void 0,(()=>{if(n){try{a(n())}catch(s){c(s)}return}const t=i instanceof Error?i:new Lg("string"===typeof i?i:`Promise timed out after ${r} milliseconds`);"function"===typeof e.cancel&&e.cancel(),c(t)}),r),(async()=>{try{a(await e)}catch(t){c(t)}finally{s.clearTimeout.call(void 0,o)}})()}else a(e)}));return a.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},a}((async()=>await new Promise((e=>{r((()=>{e()}))})))(),{milliseconds:t.timeout}))),await n}const tm={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function rm(e){const t=Object.assign({},tm,e);return null==Zg&&(Zg=(e=>{if(e=Object.assign({},Jg,e),Boolean(globalThis.document)||e.singleProcess){const e=new EventTarget;return Gg.addEventListener("message",Yg(e,"requestReadLock",Fg,zg,Vg)),Gg.addEventListener("message",Yg(e,"requestWriteLock",Kg,$g,qg)),e}return{isWorker:!0,readLock:e=>Qg(e,Fg,Vg,zg),writeLock:e=>Qg(e,Kg,qg,$g)}})(t),!0!==Zg.isWorker&&(Zg.addEventListener("requestReadLock",(e=>{null!=Xg[e.data.name]&&Xg[e.data.name].readLock().then((async t=>await e.data.handler().finally((()=>t()))))})),Zg.addEventListener("requestWriteLock",(async e=>{null!=Xg[e.data.name]&&Xg[e.data.name].writeLock().then((async t=>await e.data.handler().finally((()=>t()))))})))),null==Xg[t.name]&&(Xg[t.name]=((e,t)=>{if(!0===Zg.isWorker)return{readLock:Zg.readLock(e,t),writeLock:Zg.writeLock(e,t)};const r=new tn({concurrency:1});let n;return{async readLock(){if(null!=n)return await em(n,t);n=new tn({concurrency:t.concurrency,autoStart:!1});const e=n,i=em(n,t);return r.add((async()=>(e.start(),await e.onIdle().then((()=>{n===e&&(n=null)}))))),await i},writeLock:async()=>(n=null,await em(r,t))}})(t.name,t)),Xg[t.name]}let nm;function im(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(nm)return nm;const t=rm({singleProcess:e});return nm={readLock:e=>async function(){const r=await t.readLock();try{for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return await e.apply(null,i)}finally{r()}},writeLock:e=>async function(){const r=await t.writeLock();try{for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return await e.apply(null,i)}finally{r()}}},nm}const sm=ge("ipfs:mfs:utils:with-mfs-root");async function om(e,t){if(t&&t.signal&&t.signal.aborted)throw me(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});let r;await e.repo.datastore.open();try{const t=await e.repo.datastore.get(or);r=Ne.CID.decode(t)}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up;sm("Creating new MFS root");const i=it({Data:new Pe({type:"directory"}).marshal(),Links:[]}),s=await hn.sha256.digest(i);if(r=Ne.CID.createV0(s),await e.repo.blocks.put(r,i),t&&t.signal&&t.signal.aborted)throw me(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});await e.repo.datastore.put(or,r.bytes)}return sm(`Loaded MFS root /ipfs/${r}`),r}function am(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean)}const cm="ipfs",lm=async(e,t,r)=>{const n=await om(e,r);let i={entryType:"file"},s="";if(s=Ne.CID.asCID(t)?`/ipfs/${t}`:t.toString(),s=s.trim(),s=s.replace(/(\/\/+)/g,"/"),s.endsWith("/")&&s.length>1&&(s=s.substring(0,s.length-1)),!s)throw me(new Error("paths must not be empty"),"ERR_NO_PATH");if("/"!==s.substring(0,1))throw me(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");"/"===s.substring(s.length-1)&&(s=s.substring(0,s.length-1));const o=am(s);if(o[0]===cm){let e;e=2===o.length?`/${o.join("/")}`:`/${o.slice(0,o.length-1).join("/")}`,i={type:"ipfs",depth:o.length-2,entryType:"file",mfsPath:`/${o.join("/")}`,mfsDirectory:e,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}else{const e=`/ipfs/${n}${o.length?"/"+o.join("/"):""}`,t=`/ipfs/${n}/${o.slice(0,o.length-1).join("/")}`;i={type:"mfs",depth:o.length,entryType:"file",mfsDirectory:t,mfsPath:e,parts:o,path:`/${o.join("/")}`,name:o[o.length-1]}}const a="mfs"===i.type?i.mfsPath:i.path;try{const t=await Gh(a,e.repo.blocks,r);i.cid=t.cid,i.mfsPath=`/ipfs/${t.path}`,i.entryType=t.type,i.content=t.content,"file"!==i.entryType&&"directory"!==i.entryType||"file"!==t.type&&"directory"!==t.type||(i.unixfs=t.unixfs)}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}return i.exists=Boolean(i.cid),i},um=ue.bind({ignoreUndefined:!0}),hm=ge("ipfs:mfs:stat"),dm={withLocal:!1};function pm(e){return rr((async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=um(dm,r),hm(`Fetching stats for ${t}`);const{type:n,cid:i,mfsPath:s}=await lm(e,t,r),o="ipfs"===n&&i?i:s;let a;try{a=await Gh(o,e.repo.blocks)}catch(Up){if("ERR_NOT_FOUND"===Up.code)throw me(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw Up}if(!fm[a.type])throw new Error(`Cannot stat codec ${a.cid.code}`);return fm[a.type](a)}))}const fm={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1}),file:e=>{const t={cid:e.cid,type:"file",size:e.unixfs.fileSize(),cumulativeSize:it(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.unixfs.blockSizes.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},directory:e=>{const t={cid:e.cid,type:"directory",size:0,cumulativeSize:it(e.node).length+(e.node.Links||[]).reduce(((e,t)=>e+(t.Tsize||0)),0),blocks:e.node.Links.length,local:void 0,sizeLocal:void 0,withLocality:!1,mode:e.unixfs.mode};return e.unixfs.mtime&&(t.mtime=e.unixfs.mtime),t},object:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,type:"file",blocks:0,local:void 0,sizeLocal:void 0,withLocality:!1}),identity:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:void 0,sizeLocal:void 0,withLocality:!1})},ym=ge("ipfs:mfs:utils:to-trail");async function gm(e,t){ym(`Creating trail for path ${t}`);const r=[];for await(const n of Wh(t,e.repo.blocks))r.push({name:n.name,cid:n.cid,size:n.size,type:n.type});return r}const mm=async(t,r,n)=>{n.codec||(n.codec=e),n.hasher||(n.hasher=hn.sha256),void 0===n.cidVersion&&(n.cidVersion=1),n.codec===e&&n.hasher!==hn.sha256&&(n.cidVersion=1);const i=await n.hasher.digest(t),s=Ne.CID.create(n.cidVersion,n.codec.code,i);return n.onlyHash||await r.put(s,t,{signal:n.signal}),s},wm=Uu.code;async function vm(e){return(await Uu.encode(e)).slice(0,8).reverse()}class bm extends class{constructor(e,t){this.options=t||{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime,this.cid=void 0,this.size=void 0}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}{constructor(e,t){super(e,t),this._bucket=(0,lh.createHAMT)({hashFn:vm,bits:8})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}async*flush(e){yield*Em(this._bucket,e,this,this.options)}}async function*Em(e,t,r,n){const i=e._children,s=[];let o=0;for(let d=0;d<i.length;d++){const e=i.get(d);if(!e)continue;const r=d.toString(16).toUpperCase().padStart(2,"0");if(e instanceof lh.Bucket){let i;for await(const r of await Em(e,t,null,n))i=r;if(!i)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:r,Tsize:i.size,Hash:i.cid}),o+=i.size}else if("function"===typeof e.value.flush){const n=e.value;let i;for await(const e of n.flush(t))i=e,yield i;const a=r+e.key;s.push({Name:a,Tsize:i.size,Hash:i.cid}),o+=i.size}else{const t=e.value;if(!t.cid)continue;const n=r+e.key,i=t.size;s.push({Name:n,Tsize:i,Hash:t.cid}),o+=i}}const a=Uint8Array.from(i.bitField().reverse()),c={Data:new Pe({type:"hamt-sharded-directory",data:a,fanout:e.tableSize(),hashType:wm,mtime:r&&r.mtime,mode:r&&r.mode}).marshal(),Links:s},l=it(Xe(c)),u=await mm(l,t,n),h=l.length+o;yield{cid:u,node:c,size:h}}const _m=ge("ipfs:mfs:core:utils:hamt-utils"),Sm=async(e,t,r,n)=>{if(!n.parent.Data)throw new Error("Could not update HAMT directory because parent had no data");const i=Uint8Array.from(r._children.bitField().reverse()),s=Pe.unmarshal(n.parent.Data),o=new Pe({type:"hamt-sharded-directory",data:i,fanout:r.tableSize(),hashType:wm,mode:s.mode,mtime:s.mtime}),a=await e.hashers.getHasher(n.hashAlg),c={Data:o.marshal(),Links:t.sort(((e,t)=>(e.Name||"").localeCompare(t.Name||"")))},l=it(c),u=await a.digest(l),h=Ne.CID.create(n.cidVersion,nt,u);return n.flush&&await e.repo.blocks.put(h,l),{node:c,cid:h,size:t.reduce(((e,t)=>e+(t.Tsize||0)),l.length)}},Am=async(e,t,r,n,i)=>{const s=new lh.Bucket({hash:r._options.hash,bits:r._options.bits},n,i);return n._putObjectAt(i,s),await Im(e,t,s,r),s},km=async e=>{const t=(0,lh.createHAMT)({hashFn:vm,bits:8});return await Promise.all(e.map((async e=>{const r=e.Name||"";if(2===r.length){const e=parseInt(r,16),n=new lh.Bucket({hash:t._options.hash,bits:t._options.bits},t,e);return t._putObjectAt(e,n),Promise.resolve()}return t.put(r.substring(2),{size:e.Tsize,cid:e.Hash})}))),t},Im=async(e,t,r,n)=>{await Promise.all(t.map((async t=>{const i=t.Name||"";if(2===i.length){_m("Populating sub bucket",i);const s=parseInt(i,16),o=st(await e.repo.blocks.get(t.Hash)),a=new lh.Bucket({hash:n._options.hash,bits:n._options.bits},r,s);return r._putObjectAt(s,a),await Im(e,o.Links,a,n),Promise.resolve()}return n.put(i.substring(2),{size:t.Tsize,cid:t.Hash})})))},Cm=e=>e.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Rm=ge("ipfs:mfs:core:utils:add-link");async function Tm(e,t){let r=t.parent;if(t.parentCid){const n=Ne.CID.asCID(t.parentCid);if(null===n)throw me(new Error("Invalid CID passed to addLink"),"EINVALIDPARENTCID");if(n.code!==nt)throw me(new Error("Unsupported codec. Only DAG-PB is supported"),"EINVALIDPARENTCID");Rm(`Loading parent node ${n}`);r=st(await e.repo.blocks.get(n))}if(!r)throw me(new Error("No parent node or CID passed to addLink"),"EINVALIDPARENT");if(!t.cid)throw me(new Error("No child cid passed to addLink"),"EINVALIDCHILDCID");if(!t.name)throw me(new Error("No child name passed to addLink"),"EINVALIDCHILDNAME");if(!t.size&&0!==t.size)throw me(new Error("No child size passed to addLink"),"EINVALIDCHILDSIZE");if(!r.Data)throw me(new Error("Parent node with no data passed to addLink"),"ERR_INVALID_PARENT");const n=Pe.unmarshal(r.Data);return"hamt-sharded-directory"===n.type?(Rm("Adding link to sharded directory"),Nm(e,{...t,parent:r})):r.Links.length>=t.shardSplitThreshold?(Rm("Converting directory to sharded directory"),Dm(e,{...t,parent:r,mtime:n.mtime,mode:n.mode})):(Rm(`Adding ${t.name} (${t.cid}) to regular directory`),Pm(e,{...t,parent:r}))}const Dm=async(e,t)=>{const r=await async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new bm({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:r.mtime,mode:r.mode},r);for(let s=0;s<t.length;s++)await n._bucket.put(t[s].name,{size:t[s].size,cid:t[s].cid});const i=await Sn(n.flush(e.repo.blocks));if(!i)throw new Error("Flushing shard yielded no result");return i}(e,t.parent.Links.map((e=>({name:e.Name||"",size:e.Tsize||0,cid:e.Hash}))).concat({name:t.name,size:t.size,cid:t.cid}),t);return Rm(`Converted directory to sharded directory ${r.cid}`),r},Pm=async(e,t)=>{const r=t.parent.Links.filter((e=>e.Name!==t.name));if(r.push({Name:t.name,Tsize:t.size,Hash:t.cid}),!t.parent.Data)throw me(new Error("Parent node with no data passed to addToDirectory"),"ERR_INVALID_PARENT");const n=Pe.unmarshal(t.parent.Data);let i;if(n.mtime){const e=Date.now(),t=Math.floor(e/1e3);n.mtime={secs:t,nsecs:1e3*(e-1e3*t)},i=n.marshal()}else i=t.parent.Data;t.parent=Xe({Data:i,Links:r});const s=await e.hashers.getHasher(t.hashAlg),o=it(t.parent),a=await s.digest(o),c=Ne.CID.create(t.cidVersion,nt,a);return t.flush&&await e.repo.blocks.put(c,o),{node:t.parent,cid:c,size:o.length}},Nm=async(e,t)=>{const{shard:r,path:n}=await xm(e,t),i=await Sn(r.flush(e.repo.blocks));if(!i)throw new Error("No result from flushing shard");const s=st(await e.repo.blocks.get(i.cid)),o=t.parent.Links.filter((e=>(e.Name||"").substring(0,2)!==n[0].prefix)),a=s.Links.find((e=>(e.Name||"").substring(0,2)===n[0].prefix));if(!a)throw new Error(`No link found with prefix ${n[0].prefix}`);return o.push(a),Sm(e,o,n[0].bucket,t)},xm=async(e,t)=>{const r={name:t.name,cid:t.cid,size:t.size};if(!t.parent.Data)throw me(new Error("Parent node with no data passed to addFileToShardedDirectory"),"ERR_INVALID_PARENT");const n=await km(t.parent.Links),i=Pe.unmarshal(t.parent.Data),s=new bm({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mode:i.mode},t);s._bucket=n,i.mtime&&(s.mtime={secs:Math.round(Date.now()/1e3)});const o=await n._findNewBucketAndPos(r.name),a=Om(o);a[0].node=t.parent;let c=0;for(;c<a.length;){const t=a[c];c++;const i=t.node;if(!i)throw new Error("Segment had no node");const s=i.Links.find((e=>(e.Name||"").substring(0,2)===t.prefix));if(!s){Rm(`Link ${t.prefix}${r.name} will be added`),c=a.length;break}if(s.Name===`${t.prefix}${r.name}`){Rm(`Link ${t.prefix}${r.name} will be replaced`),c=a.length;break}if((s.Name||"").length>2){Rm(`Link ${s.Name} ${s.Hash} will be replaced with a subshard`),c=a.length;break}Rm(`Found subshard ${t.prefix}`);const o=st(await e.repo.blocks.get(s.Hash));if(!a[c]){Rm(`Loaded new subshard ${t.prefix}`),await Am(e,o.Links,n,t.bucket,parseInt(t.prefix,16));const i=await n._findNewBucketAndPos(r.name);a.push({bucket:i.bucket,prefix:Cm(i.pos),node:o});break}const l=a[c];await Im(e,o.Links,l.bucket,n),l.node=o}return await s._bucket.put(r.name,{size:r.size,cid:r.cid}),{shard:s,path:a}},Om=e=>{const t=[{bucket:e.bucket,prefix:Cm(e.pos)}];let r=e.bucket._parent,n=e.bucket._posAtParent;for(;r;)t.push({bucket:r,prefix:Cm(n)}),n=r._posAtParent,r=r._parent;return t.reverse(),t},Bm=ge("ipfs:mfs:utils:update-tree"),Lm={shardSplitThreshold:1e3};async function Mm(e,t,r){r=Object.assign({},Lm,r),Bm("Trail",t),t=t.slice().reverse();let n,i=0;for await(const o of e.repo.blocks.getMany(t.map((e=>e.cid)))){const s=st(o),a=t[i].cid,c=t[i].name;if(i++,!n){n={cid:a,name:c,size:o.length};continue}const l=await Tm(e,{parent:s,name:n.name,cid:n.cid,size:n.size,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold,hashAlg:r.hashAlg,cidVersion:r.cidVersion});n={cid:l.cid,name:c,size:l.size}}const{cid:s}=n;return Bm(`Final CID ${s}`),s}const Um=ge("ipfs:mfs:utils:update-mfs-root");async function jm(e,t,r){if(r&&r.signal&&r.signal.aborted)throw me(new Error("Request aborted"),"ERR_ABORTED",{name:"Aborted"});return Um(`New MFS root will be ${t}`),await e.repo.datastore.put(or,t.bytes),t}async function Fm(e,t,r){const n=new Pe({type:t,mode:r.mode,mtime:r.mtime}),i=await e.hashers.getHasher(r.hashAlg),s={Data:n.marshal(),Links:[]},o=it(s),a=await i.digest(o),c=Ne.CID.create(r.cidVersion,nt,a);return r.flush&&await e.repo.blocks.put(c,o),{cid:c,node:s}}const zm=ue.bind({ignoreUndefined:!0}),Vm=ge("ipfs:mfs:mkdir"),Km={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,flush:!0};function $m(e){return rr((async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=zm(Km,r);if(!t)throw new Error("no path given to Mkdir");if("/"===(t=t.trim())){if(n.parents)return;throw me(new Error("cannot create directory '/': Already exists"),"ERR_INVALID_PATH")}if("/"!==t.substring(0,1))throw me(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");Vm(`Creating ${t}`);const i=am(t);if("ipfs"===i[0])throw me(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");const s=await om(e,n);let o;const a=[],c=await Fm(e,"directory",n);for(let u=0;u<=i.length;u++){const r=i.slice(0,u),l=`/ipfs/${s}/${r.join("/")}`;try{if(o=await Gh(l,e.repo.blocks),"file"!==o.type&&"directory"!==o.type)throw me(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(u===i.length){if(n.parents)return;throw me(new Error("file already exists"),"ERR_ALREADY_EXISTS")}a.push({name:o.name,cid:o.cid})}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up;if(u<i.length&&!n.parents)throw me(new Error(`Intermediate directory path ${l} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await qm(e,r[r.length-1],c,a[a.length-1],a,n)}}const l=await Mm(e,a,n);await jm(e,l,n)}))}const qm=async(e,t,r,n,i,s)=>{Vm(`Adding empty dir called ${t} to ${n.cid}`);const o=await Tm(e,{parent:n.node,parentCid:n.cid,size:0,cid:r.cid,name:t,hashAlg:s.hashAlg,cidVersion:s.cidVersion,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold});i[i.length-1].cid=o.cid,i.push({name:t,cid:r.cid})},Hm=ue.bind({ignoreUndefined:!0}),Wm=ge("ipfs:mfs:cp"),Gm={parents:!1,flush:!0,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};function Ym(e){return rr((async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Hm(Gm,n);Array.isArray(t)||(t=[t]);const s=await Promise.all(t.map((t=>lm(e,t,i))));let o=await lm(e,r,i);if(!s.length||!o)throw me(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");const a=s.find((e=>!e.exists));if(a)throw me(new Error(`${a.path} does not exist`),"ERR_INVALID_PARAMS");const c=Qm(o);if(o.exists){if(Wm("Destination exists"),1===s.length&&!c)throw me(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(Wm("Destination does not exist"),s.length>1){if(!i.parents)throw me(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await $m(e)(o.path,i),o=await lm(e,o.path,i)}else if(o.parts.length>1){const t=`/${o.parts.slice(0,-1).join("/")}`;try{await pm(e)(t,i)}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up;if(!i.parents)throw me(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await $m(e)(t,i),o=await lm(e,o.path,i)}}const l=Qm(o)?o.mfsPath:o.mfsDirectory,u=await gm(e,l);if(1===s.length){const t=s.pop();if(!t)throw me(new Error("could not find source"),"ERR_INVALID_PARAMS");const r=c?t.name:o.name;return Wm(`Only one source, copying to destination ${c?"directory":"file"} ${r}`),Jm(e,t,r,u,i)}return Wm("Multiple sources, wrapping in a directory"),Xm(e,s,o,u,i)}))}const Qm=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),Jm=async(e,t,r,n,i)=>{let s=n.pop();if(!s)throw me(new Error("destination had no parent"),"ERR_INVALID_PARAMS");s=await Zm(e,t,r,s,i),n.push(s);const o=await Mm(e,n,i);await jm(e,o,i)},Xm=async(e,t,r,n,i)=>{for(let o=0;o<t.length;o++){const n=t[o];r=await Zm(e,n,n.name,r,i)}n[n.length-1]=r;const s=await Mm(e,n,i);await jm(e,s,i)},Zm=async(e,t,r,n,i)=>{const s=await e.repo.blocks.get(t.cid),{node:o,cid:a,size:c}=await Tm(e,{parentCid:n.cid,size:s.length,cid:t.cid,name:r,hashAlg:i.hashAlg,cidVersion:i.cidVersion,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold});return n.node=o,n.cid=a,n.size=c,n},ew=ge("ipfs:mfs:core:utils:remove-link");const tw=async(e,t)=>{t.parent.Links=t.parent.Links.filter((e=>e.Name!==t.name));const r=await it(t.parent),n=await e.hashers.getHasher(t.hashAlg),i=await n.digest(r),s=Ne.CID.create(t.cidVersion,nt,i);return await e.repo.blocks.put(s,r),ew(`Updated regular directory ${s}`),{node:t.parent,cid:s}},rw=async(e,t)=>{const{rootBucket:r,path:n}=await(async(e,t,r)=>{const n=await km(r.Links),i=await n._findNewBucketAndPos(t),s=[{bucket:i.bucket,prefix:Cm(i.pos)}];let o=i.bucket;for(;o!==n;)s.push({bucket:o,prefix:Cm(o._posAtParent)}),o=o._parent;s.reverse(),s[0].node=r;for(let a=0;a<s.length;a++){const r=s[a];if(!r.node)throw new Error("Could not generate HAMT path");const i=r.node.Links.filter((e=>(e.Name||"").substring(0,2)===r.prefix)).pop();if(!i){_m(`Link ${r.prefix}${t} will be added`);continue}if(i.Name===`${r.prefix}${t}`){_m(`Link ${r.prefix}${t} will be replaced`);continue}_m(`Found subshard ${r.prefix}`);const o=st(await e.repo.blocks.get(i.Hash));if(!s[a+1]){_m(`Loaded new subshard ${r.prefix}`),await Am(e,o.Links,n,r.bucket,parseInt(r.prefix,16));const i=await n._findNewBucketAndPos(t);s.push({bucket:i.bucket,prefix:Cm(i.pos),node:o});continue}const c=s[a+1];await Im(e,o.Links,c.bucket,n),c.node=o}return await n.put(t,!0),s.reverse(),{rootBucket:n,path:s}})(e,t.name,t.parent);await r.del(t.name);const{node:i}=await nw(e,n,t.name,t);return Sm(e,i.Links,r,t)},nw=async(e,t,r,n)=>{const i=t.pop();if(!i)throw me(new Error("Could not find parent"),"EINVALIDPARENT");const{bucket:s,prefix:o,node:a}=i;if(!a)throw me(new Error("Could not find parent"),"EINVALIDPARENT");const c=a.Links.find((e=>(e.Name||"").substring(0,2)===o));if(!c)throw me(new Error(`No link found with prefix ${o} for file ${r}`),"ERR_NOT_FOUND");if(c.Name===`${o}${r}`){ew(`Removing existing link ${c.Name}`);const t=a.Links.filter((e=>e.Name!==c.Name));return await s.del(r),Sm(e,t,s,n)}ew(`Descending into sub-shard ${c.Name} for ${o}${r}`);const l=await nw(e,t,r,n);let u=l.cid,h=l.size,d=o;if(1===l.node.Links.length){ew(`Removing subshard for ${o}`);const e=l.node.Links[0];d=`${o}${(e.Name||"").substring(2)}`,u=e.Hash,h=e.Tsize||0}return ew(`Updating shard ${o} with name ${d}`),iw(e,s,a,o,d,h,u,n)},iw=(e,t,r,n,i,s,o,a)=>{const c=r.Links.filter((e=>e.Name!==n));return c.push({Name:i,Tsize:s,Hash:o}),Sm(e,c,t,a)},sw=ue.bind({ignoreUndefined:!0}),ow={recursive:!1,cidVersion:0,hashAlg:"sha2-256",flush:!0,shardSplitThreshold:1e3};function aw(e){return rr((async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=sw(ow,r);Array.isArray(t)||(t=[t]);const i=await Promise.all(t.map((t=>lm(e,t,n))));if(!i.length)throw me(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");i.forEach((e=>{if("/"===e.path)throw me(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const s of i)await cw(e,s.path,n)}))}const cw=async(e,t,r)=>{const n=await lm(e,t,r),i=await gm(e,n.mfsPath),s=i[i.length-1];i.pop();const o=i[i.length-1];if(!o)throw me(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===s.type&&!r.recursive)throw me(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:a}=await async function(e,t){let r=t.parent;if(t.parentCid){const n=Ne.CID.asCID(t.parentCid);if(null===n)throw me(new Error("Invalid CID passed to removeLink"),"EINVALIDPARENTCID");ew(`Loading parent node ${n}`),r=st(await e.repo.blocks.get(n))}if(!r)throw me(new Error("No parent node or CID passed to removeLink"),"EINVALIDPARENT");if(!t.name)throw me(new Error("No child name passed to removeLink"),"EINVALIDCHILDNAME");if(!r.Data)throw me(new Error("Parent node had no data"),"ERR_INVALID_NODE");return"hamt-sharded-directory"===Pe.unmarshal(r.Data).type?(ew(`Removing ${t.name} from sharded directory`),rw(e,{...t,parent:r})):(ew(`Removing link ${t.name} regular directory`),tw(e,{...t,parent:r}))}(e,{parentCid:o.cid,name:s.name,hashAlg:r.hashAlg,cidVersion:r.cidVersion,flush:r.flush,shardSplitThreshold:r.shardSplitThreshold});o.cid=a;const c=await Mm(e,i,r);await jm(e,c,r)},lw=ue.bind({ignoreUndefined:!0}),uw=ge("ipfs:mfs:touch"),hw={flush:!0,shardSplitThreshold:1e3,hashAlg:"sha2-256",cidVersion:0,recursive:!1};function dw(e,t,r){t||(t=0);const n=e.match(/^(u?g?o?a?)(-?\+?=?)?(r?w?x?X?s?t?)$/);if(!n)throw new Error(`Invalid file mode: ${e}`);let[,i,s,o]=n;"a"!==i&&i||(i="ugo");let a=function(e,t,r){let n=0;return(e.includes("x")||e.includes("X")&&(r||1&t||8&t||64&t))&&(n+=1),e.includes("w")&&(n+=2),e.includes("r")&&(n+=4),n}(o,t,r);return a=function(e,t){let r=0;return e.includes("u")&&(r+=t<<6),e.includes("g")&&(r+=t<<3),e.includes("o")&&(r+=t),r}(i,a),a=function(e,t,r){return t.includes("t")&&(r+=parseInt("1000",8)),t.includes("s")&&(e.includes("u")&&(r+=parseInt("4000",8)),e.includes("g")&&(r+=parseInt("2000",8))),r}(i,o,a),"="===s?(i.includes("u")&&(t&=parseInt("7077",8),t|=a),i.includes("g")&&(t&=parseInt("7707",8),t|=a),i.includes("o")&&(t&=parseInt("7770",8),t|=a),t):"+"===s?a|t:"-"===s?a^t:t}function pw(e,t){if(e instanceof String||"string"===typeof e){const r=`${e}`;e=r.match(/^\d+$/g)?parseInt(r,8):0+r.split(",").reduce(((e,r)=>dw(r,e,t.isDirectory())),t.mode||0)}return e}const fw=ue.bind({ignoreUndefined:!0}),yw={};const gw=ue.bind({ignoreUndefined:!0}),mw={parents:!1,flush:!0,cidVersion:0,hashAlg:"sha2-256",shardSplitThreshold:1e3};const ww=ue.bind({ignoreUndefined:!0}),vw=ge("ipfs:mfs:touch"),bw={flush:!0,shardSplitThreshold:1e3,cidVersion:0,hashAlg:"sha2-256"};const Ew=ue.bind({ignoreUndefined:!0}),_w={offset:0,length:1/0};const Sw=ge("ipfs:mfs:utils:to-async-iterator");function Aw(e){if(!e)throw me(new Error("paths must start with a leading slash"),"ERR_INVALID_PATH");if(("string"===typeof e||e instanceof String)&&(Sw("Content was a string"),e=(0,zt.fromString)(e.toString())),e.length)return Sw("Content was array-like"),{[Symbol.asyncIterator]:function*(){yield e}};if(e[Symbol.asyncIterator])return Sw("Content was an async iterator"),e;if(e[Symbol.iterator])return Sw("Content was an iterator"),e;if(global.Blob&&e instanceof global.Blob){Sw("Content was an HTML5 Blob");let t=0;const r={next:()=>t>e.size?{done:!0}:new Promise(((r,n)=>{const i=e.slice(t,ar);t+=ar;const s=new global.FileReader,o=e=>{if(s.removeEventListener("loadend",o,!1),e.error)return n(e.error);r({done:!1,value:new Uint8Array(s.result)})};s.addEventListener("loadend",o),s.readAsArrayBuffer(i)}))};return{[Symbol.asyncIterator]:()=>r}}throw me(new Error(`Don't know how to convert ${e} into an async iterator`),"ERR_INVALID_PARAMS")}const kw=ue.bind({ignoreUndefined:!0}),Iw=ge("ipfs:mfs:write"),Cw={offset:0,length:1/0,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",parents:!1,progress:(e,t)=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};const Rw=async(e,t,r,n,i)=>{const s=await Tw(e,r,n,i);await im().writeLock((async()=>{const r=am(t),n=r.pop();if(null==n)throw me(new Error("source does not exist"),"ERR_NO_EXIST");let o=!1;try{await pm(e)(`/${r.join("/")}`,i),o=!0}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}o||await $m(e)(`/${r.join("/")}`,i);const a=await lm(e,t,i),c=await gm(e,a.mfsDirectory),l=c[c.length-1];if(!l)throw me(new Error("directory does not exist"),"ERR_NO_EXIST");if(!l.type||!l.type.includes("directory"))throw me(new Error(`cannot write to ${l.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const u=st(await e.repo.blocks.get(l.cid)),h=await Tm(e,{parent:u,name:n,cid:s.cid,size:s.size,flush:i.flush,shardSplitThreshold:i.shardSplitThreshold,hashAlg:i.hashAlg,cidVersion:i.cidVersion});l.cid=h.cid;const d=await Mm(e,c,i);await jm(e,d,i)}))()},Tw=async(e,t,r,n)=>{r.exists?Iw(`Overwriting file ${r.cid} offset ${n.offset} length ${n.length}`):Iw(`Writing file offset ${n.offset} length ${n.length}`);const i=[];if(n.offset>0)if(r.unixfs){if(Iw(`Writing first ${n.offset} bytes of original file`),i.push((()=>r.content({offset:0,length:n.offset}))),r.unixfs.fileSize()<n.offset){const e=n.offset-r.unixfs.fileSize();Iw(`Writing zeros for extra ${e} bytes`),i.push(Pw(e))}}else Iw(`Writing zeros for first ${n.offset} bytes`),i.push(Pw(n.offset));i.push(Dw(t,n.length));const s=xw(Nw(i),(e=>{if(r.unixfs&&!n.truncate){const t=r.unixfs.fileSize();if(t>e)return Iw(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),r.content({offset:e});Iw("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let o,a;void 0!==n.mode&&null!==n.mode?o=Te(n.mode):r&&r.unixfs&&(o=r.unixfs.mode),null!=n.mtime?a=De(n.mtime):r&&r.unixfs&&(a=r.unixfs.mtime);const c=await e.hashers.getHasher(n.hashAlg),l=await Sn(mh([{content:s,mode:o,mtime:a}],e.repo.blocks,{progress:n.progress,hasher:c,cidVersion:n.cidVersion,strategy:n.strategy,rawLeaves:n.rawLeaves,reduceSingleLeafToSelf:n.reduceSingleLeafToSelf,leafType:n.leafType}));if(!l)throw me(new Error(`cannot write to ${parent.name}`),"ERR_COULD_NOT_WRITE");return Iw(`Wrote ${l.cid}`),{cid:l.cid,size:l.size}},Dw=(e,t)=>async function*(){let r=0;for await(const n of e){if(r+=n.length,r>t)return void(yield n.slice(0,t-r));yield n}},Pw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar;const r=new Uint8Array(t);async function*n(){for(;;)yield r.slice()}return Dw(n(),e)},Nw=async function*(e){for(let t=0;t<e.length;t++)yield*e[t]()},xw=async function*(e,t){let r=0;for await(const n of e)r+=n.length,yield n;for await(const n of t(r))r+=n.length,yield n},Ow=e=>{const t={cid:e.cid,name:e.name,type:"directory"===e.type?"directory":"file",size:e.size};return"file"!==e.type&&"directory"!==e.type||(t.mode=e.unixfs.mode,t.mtime=e.unixfs.mtime),t};const Bw={stat:pm},Lw={chmod:function(e){return rr((async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=lw(hw,n);uw(`Fetching stats for ${t}`);const{cid:s,mfsDirectory:o,name:a}=await lm(e,t,i);if(s.code!==nt)throw me(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");if(i.recursive){const n=await bu((async function*(){for await(const n of Yh(s,e.repo.blocks)){if("file"!==n.type&&"directory"!==n.type)throw me(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");n.unixfs.mode=pw(r,n.unixfs);const e=Xe({Data:n.unixfs.marshal(),Links:n.node.Links});yield{path:n.path,content:e}}}),(t=>mh(t,e.repo.blocks,{...i,pin:!1,dagBuilder:async function*(e,t,r){for await(const n of e)yield async function(){const e=n.content,i=it(e),s=await mm(i,t,r);if(!e.Data)throw me(new Error(`${s} had no data`),"ERR_INVALID_NODE");const o=Pe.unmarshal(e.Data);return{cid:s,size:i.length,path:n.path,unixfs:o}}}})),(e=>Sn(e)));if(!n)throw me(new Error(`Could not chmod ${t}`),"ERR_COULD_NOT_CHMOD");return await aw(e)(t,i),void await Ym(e)(`/ipfs/${n.cid}`,t,i)}const c=await e.repo.blocks.get(s),l=st(c);if(!l.Data)throw me(new Error(`${s} had no data`),"ERR_INVALID_NODE");const u=Pe.unmarshal(l.Data);u.mode=pw(r,u);const h=it({Data:u.marshal(),Links:l.Links}),d=i.hashAlg||hw.hashAlg,p=await e.hashers.getHasher(d),f=await p.digest(h),y=Ne.CID.create(i.cidVersion,nt,f);i.flush&&await e.repo.blocks.put(y,h);const g=await gm(e,o),m=g[g.length-1],w=Ne.CID.decode(m.cid.bytes),v=await e.repo.blocks.get(w),b=st(v),E=await Tm(e,{parent:b,name:a,cid:y,size:h.length,flush:i.flush,hashAlg:d,cidVersion:s.version,shardSplitThreshold:1/0});m.cid=E.cid;const _=await Mm(e,g,i);await jm(e,_,i)}))},cp:Ym,flush:function(e){return rr((async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=fw(yw,r);const{cid:n}=await pm(e)(t,r);return n}))},mkdir:$m,mv:function(e){return rr((async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=gw(mw,n);await Ym(e)(t,r,i),await aw(e)(t,{...i,recursive:!0})}))},rm:aw,touch:function(e){return rr((async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ww(bw,r);n.mtime=n.mtime||new Date,vw(`Touching ${t} mtime: ${n.mtime}`);const{cid:i,mfsDirectory:s,name:o,exists:a}=await lm(e,t,n),c=r.hashAlg||bw.hashAlg,l=await e.hashers.getHasher(c);let u,h,d=n.cidVersion;if(a){if(i.code!==nt)throw me(new Error(`${t} was not a UnixFS node`),"ERR_NOT_UNIXFS");d=i.version;const r=st(await e.repo.blocks.get(i));if(!r.Data)throw me(new Error(`${t} had no data`),"ERR_INVALID_NODE");const s=Pe.unmarshal(r.Data);s.mtime=n.mtime,u=it({Data:s.marshal(),Links:r.Links});const o=await l.digest(u);h=Ne.CID.create(n.cidVersion,nt,o),n.flush&&await e.repo.blocks.put(h,u)}else{u=it({Data:new Pe({type:"file",mtime:n.mtime}).marshal(),Links:[]});const t=await l.digest(u);h=Ne.CID.create(n.cidVersion,nt,t),n.flush&&await e.repo.blocks.put(h,u)}const p=await gm(e,s),f=p[p.length-1],y=f.cid,g=await e.repo.blocks.get(y),m=st(g),w=await Tm(e,{parent:m,name:o,cid:h,size:u.length,flush:n.flush,shardSplitThreshold:n.shardSplitThreshold,hashAlg:n.hashAlg,cidVersion:d});f.cid=w.cid;const v=await Mm(e,p,n);await jm(e,v,n)}))}},Mw={write:function(e){return rr((async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=kw(Cw,n);let s,o,a;if(Iw("Reading source, destination and parent"),await im().readLock((async()=>{s=await Aw(r),o=await lm(e,t,i),a=await lm(e,o.mfsDirectory,i)}))(),Iw("Read source, destination and parent"),!i.parents&&!a.exists)throw me(new Error("directory does not exist"),"ERR_NO_EXIST");if(null==s)throw me(new Error("could not create source"),"ERR_NO_SOURCE");if(null==o)throw me(new Error("could not create destination"),"ERR_NO_DESTINATION");if(!i.create&&!o.exists)throw me(new Error("file does not exist"),"ERR_NO_EXIST");if("file"!==o.entryType)throw me(new Error("not a file"),"ERR_NOT_A_FILE");return Rw(e,t,s,o,i)}))},read:function(e){return rr((function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=Ew(_w,r),{[Symbol.asyncIterator]:async function*(){const n=await lm(e,t,r),i=await Gh(n.mfsPath,e.repo.blocks);if("file"!==i.type)throw me(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!i.content)throw me(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of i.content({offset:r.offset,length:r.length}))yield e}}}))},ls:function(e){return rr((async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await lm(e,t,r),i=await Gh(n.mfsPath,e.repo.blocks);"directory"!==i.type?yield Ow(i):yield*lc(i.content(r),Ow)}))}},Uw=e=>{let{options:t,mfs:r,operations:n,lock:i}=e;Object.keys(n).forEach((e=>{r[e]=i(n[e](t))}))},jw={repoOwner:!0,repo:null};function Fw(e){let{repo:t,preload:r,hashers:n,options:i}=e;const s=function(e){const{repoOwner:t}=Object.assign({},jw||{},e),r=im(t),n={};return Uw({options:e,mfs:n,operations:Bw,lock:e=>r.readLock(e)}),Uw({options:e,mfs:n,operations:Lw,lock:e=>r.writeLock(e)}),Object.keys(Mw).forEach((t=>{n[t]=Mw[t](e)})),n}({repo:t,repoOwner:!1!==i.repoOwner,hashers:n}),o=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const s=n.filter((e=>Vt.ipfsPath(e)||Vt.cid(e)));if(s.length){const e=n[n.length-1];e&&!1!==e.preload&&s.forEach((e=>r(e)))}return e(...n)};return{...s,chmod:s.chmod,cp:o(s.cp),mkdir:s.mkdir,stat:o(s.stat),rm:s.rm,read:o(s.read),touch:s.touch,write:s.write,mv:o(s.mv),flush:s.flush,ls:o((async function*(){for await(const e of s.ls(...arguments))yield{...e,size:e.size||0}}))}}const zw="Ed25519",Vw=2048;class Kw{constructor(e){let{keychain:t}=e;this.gen=function(e){let{keychain:t}=e;return rr((function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:zw,size:Vw};return t.createKey(e,r.type||zw,r.size||Vw)}))}({keychain:t}),this.list=function(e){let{keychain:t}=e;return rr((()=>t.listKeys()))}({keychain:t}),this.rm=function(e){let{keychain:t}=e;return rr((e=>t.removeKey(e)))}({keychain:t}),this.rename=function(e){let{keychain:t}=e;return rr((async(e,r)=>{const n=await t.renameKey(e,r);return{was:e,now:n.name,id:n.id,overwrite:!1}}))}({keychain:t}),this.export=function(e){let{keychain:t}=e;return rr(((e,r)=>t.exportKey(e,r)))}({keychain:t}),this.import=function(e){let{keychain:t}=e;return rr(((e,r,n)=>t.importKey(e,r,n)))}({keychain:t}),this.info=function(e){let{keychain:t}=e;return rr((e=>t.findKeyByName(e)))}({keychain:t})}}function $w(e){let{repo:t,preload:r}=e;return rr((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!1!==n.preload&&r(e);const i=await t.blocks.get(e,n);return st(i)}))}function qw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const n in e){const i=e[n];if("/"===n&&1===Object.keys(e).length)try{t.push({Name:"",Tsize:0,Hash:Ne.CID.parse(i)});continue}catch(r){}const s=Ne.CID.asCID(i);s?t.push({Name:"",Tsize:0,Hash:s}):(Array.isArray(i)&&qw(i,t),i&&"object"===typeof i&&qw(i,t))}return t}function Hw(e){let{repo:t,preload:r}=e;return rr((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=await t.gcLock.readLock();try{const s=it(e),o=await hn.sha256.digest(s),a=Ne.CID.createV1(nt,o);return await t.blocks.put(a,s,{signal:n.signal}),!1!==n.preload&&r(a),n.pin&&await t.pins.pinRecursively(a,{signal:n.signal}),a}finally{i()}}))}class Ww{constructor(e){let{repo:t,preload:r}=e;this.addLink=function(e){let{repo:t,preload:r}=e;const n=$w({repo:t,preload:r}),i=Hw({repo:t,preload:r});return rr((async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await n(e,r);return i({...s,Links:s.Links.concat([t])},r)}))}({repo:t,preload:r}),this.appendData=function(e){let{repo:t,preload:r}=e;const n=$w({repo:t,preload:r}),i=Hw({repo:t,preload:r});return rr((async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await n(e,r),o=(0,Ln.concat)([s.Data||[],t]);return i({...s,Data:o},r)}))}({repo:t,preload:r}),this.rmLink=function(e){let{repo:t,preload:r}=e;const n=$w({repo:t,preload:r}),i=Hw({repo:t,preload:r});return rr((async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await n(e,r),o=("string"===typeof t?t:t.Name)||"";return s.Links=s.Links.filter((e=>e.Name!==o)),i(s,r)}))}({repo:t,preload:r}),this.setData=function(e){let{repo:t,preload:r}=e;const n=$w({repo:t,preload:r}),i=Hw({repo:t,preload:r});return rr((async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=await n(e,r);return i({...s,Data:t},r)}))}({repo:t,preload:r})}}class Gw{constructor(e){let{repo:t,codecs:r,preload:n}=e;this.data=function(e){let{repo:t,preload:r}=e;const n=$w({repo:t,preload:r});return rr((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await n(e,t)).Data||new Uint8Array(0)}))}({repo:t,preload:n}),this.get=$w({repo:t,preload:n}),this.links=function(e){let{repo:t,codecs:r}=e;return rr((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=await r.getCodec(e.code),s=await t.blocks.get(e,n),o=i.decode(s);switch(e.code){case Ku.code:return[];case nt:return o.Links;case ut:case Ct:return qw(o);default:throw new Error(`Cannot resolve links from codec ${e.code}`)}}))}({repo:t,codecs:r}),this.new=function(e){let{repo:t,preload:r}=e;return rr((async function(){let e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.template){if("unixfs-dir"!==n.template)throw new Error("unknown template");e=new Pe({type:"directory"}).marshal()}const i=it({Data:e,Links:[]}),s=await hn.sha256.digest(i),o=Ne.CID.createV0(s);return await t.blocks.put(o,i,{signal:n.signal}),!1!==n.preload&&r(o),o}))}({repo:t,preload:n}),this.put=Hw({repo:t,preload:n}),this.stat=function(e){let{repo:t,preload:r}=e;const n=$w({repo:t,preload:r});return rr((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await n(e,t),i=it(r).length,s=r.Links.reduce(((e,t)=>e+(t.Tsize||0)),0);return{Hash:e,NumLinks:r.Links.length,BlockSize:i,LinksSize:i-(r.Data||[]).length,DataSize:(r.Data||[]).length,CumulativeSize:i+s}}))}({repo:t,preload:n}),this.patch=new Ww({repo:t,preload:n})}}const Yw=ge("ipfs:repo:gc");function Qw(e){let{repo:t}=e;return rr((async function(){const e=await t.stat();return{numObjects:BigInt(e.numObjects.toString()),repoSize:BigInt(e.repoSize.toString()),repoPath:e.repoPath,version:`${e.version}`,storageMax:BigInt(e.storageMax.toString())}}))}class Jw{constructor(e){let{repo:t,hashers:r}=e;this.gc=function(e){let{repo:t,hashers:r}=e;return rr((async function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Date.now();let i;try{i=await om({repo:t,hashers:r},e),await t.pins.pinRecursively(i),yield*t.gc()}finally{i&&await t.pins.unpin(i)}Yw(`Complete (${Date.now()-n}ms)`)}))}({repo:t,hashers:r}),this.stat=Qw({repo:t}),this.version=function(e){let{repo:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{await t._checkInitialized(e)}catch(Up){if([/Key not found in database \[\/version\]/,/ENOENT/,/repo is not initialized yet/].some((t=>t.test(Up.message))))return 12;throw Up}return t.version.get()}))}({repo:t}),this.setApiAddr=e=>t.apiAddr.set(e)}}function Xw(e,t){let r;if(r=e.metrics?t.peer?e.metrics.forPeer(t.peer):t.proto?e.metrics.forProtocol(t.proto):e.metrics.getGlobal():void 0,!r)return{totalIn:BigInt(0),totalOut:BigInt(0),rateIn:0,rateOut:0};const n=r.getMovingAverages(),i=r.getSnapshot();return{totalIn:i.dataReceived,totalOut:i.dataSent,rateIn:n.dataReceived[6e4].movingAverage/60,rateOut:n.dataSent[6e4].movingAverage/60}}class Zw{constructor(e){let{repo:t,network:r}=e;this.repo=Qw({repo:t}),this.bw=function(e){let{network:t}=e;return rr((async function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{libp2p:r}=await t.use(e);if(!e.poll)return void(yield Xw(r,e));const n=e.interval||1e3;let i,s=-1;try{if(s="string"===typeof n?er(n)||-1:n,!s||s<0)throw new Error("invalid duration")}catch(Up){throw me(Up,"ERR_INVALID_POLL_INTERVAL")}try{for(;;)yield Xw(r,e),await new Promise((e=>{i=setTimeout(e,s)}))}finally{clearTimeout(i)}}))}({network:r}),this.bitswap=qc({network:r})}}var ev=__webpack_require__(3003),tv=__webpack_require__(3144);const rv=de("ipfs:repo:migrator:migration-8");function nv(e){return e.child?nv(e.child):e}function iv(e){try{const t=fe.base32.decode(`b${e.toString().toLowerCase().slice(1)}`),r=Ne.CID.decode(t).multihash.bytes,n=fe.base32.encode(r).slice(1).toUpperCase();return new Gt(`/${n}`,!1)}catch(Up){return e}}function sv(e){try{const t=fe.base32.decode(`b${e.toString().toLowerCase().slice(1)}`),r=ln.decode(t),n=fe.base32.encode(Ne.CID.createV1(Ku.code,r).bytes).slice(1);return new Gt(`/${n.toUpperCase()}`,!1)}catch{return e}}async function ov(e,t,r){const n=e.blocks;await n.open();const i=nv(n),s=await tv(i.queryKeys({filters:[e=>r(e).toString()!==e.toString()]}));try{let e=0;for await(const n of i.query({})){const o=r(n.key);o.toString()!==n.key.toString()&&(e+=1,rv(`Migrating Block from ${n.key} to ${o}`,await i.has(n.key)),await i.delete(n.key),await i.put(o,n.value),t(e/s*100,`Migrated Block from ${n.key} to ${o}`))}}finally{await n.close()}}const av={version:8,description:"Transforms key names into base32 encoding and converts Block store to use bare multihashes encoded as base32",migrate:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return ov(e,t,iv)},revert:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return ov(e,t,sv)}},cv=we.Reader,lv=we.Writer,uv=(we.util,we.roots.default||(we.roots.default={})),hv=uv.ipfs=(()=>{const e={};return e.pin=function(){const e={};return e.Set=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=0,e.prototype.fanout=0,e.prototype.seed=0,e.encode=function(e,t){return t||(t=lv.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(16).uint32(e.fanout),null!=e.seed&&Object.hasOwnProperty.call(e,"seed")&&t.uint32(29).fixed32(e.seed),t},e.decode=function(e,t){e instanceof cv||(e=cv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new uv.ipfs.pin.Set;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.version=e.uint32();break;case 2:n.fanout=e.uint32();break;case 3:n.seed=e.fixed32();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof uv.ipfs.pin.Set)return e;var t=new uv.ipfs.pin.Set;return null!=e.version&&(t.version=e.version>>>0),null!=e.fanout&&(t.fanout=e.fanout>>>0),null!=e.seed&&(t.seed=e.seed>>>0),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.version=0,r.fanout=0,r.seed=0),null!=e.version&&e.hasOwnProperty("version")&&(r.version=e.version),null!=e.fanout&&e.hasOwnProperty("fanout")&&(r.fanout=e.fanout),null!=e.seed&&e.hasOwnProperty("seed")&&(r.seed=e.seed),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e}(),e}(),e})();var dv=__webpack_require__(5187);const pv=new Gt("/local/pins"),fv=Ne.CID.parse("QmdfTbBqBPQ7VNxZEYEj14VmRuZBkqFbiwReogJgS1zR1n"),yv="direct",gv="recursive";function mv(e){return new Gt(`/${fe.base32.encode(e.multihash.bytes).toUpperCase().substring(1)}`)}function wv(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}const vv=hv.pin.Set;async function*bv(e,t){const r=function(e){const t=e.Data;if(!t)throw new Error("No data present");const r=dl.decode(t),n=dl.decode.bytes;if(n<=0)throw new Error("Invalid Set header length");if(n+r>t.length)throw new Error("Impossibly large set header length");const i=t.slice(n,r+n),s=vv.toObject(vv.decode(i),{defaults:!1,arrays:!0,longs:Number,objects:!1});if(1!==s.version)throw new Error(`Unsupported Set version: ${s.version}`);if(s.fanout>e.Links.length)throw new Error("Impossibly large fanout");return{header:s,data:t.slice(r+n)}}(t);let n=0;for(const i of t.Links){if(n<r.header.fanout){const t=i.Hash;if(!fv.equals(t)){const r=st(await e.get(t));yield*bv(e,r)}}else yield i.Hash;n++}}async function*Ev(e,t,r){const n=t.Links.find((e=>e.Name===r));if(!n)throw new Error("No link found with name "+r);const i=st(await e.get(n.Hash));yield*bv(e,i)}function _v(e,t){return async function t(r,n){const i=vv.encode({version:1,fanout:256,seed:n}).finish(),s=dl.encode(i.length),o=(0,Ln.concat)([s,i]),a=[];for(let e=0;e<256;e++)a.push({Name:"",Tsize:1,Hash:fv});if(r.length<=8192){const e=r.map((e=>({link:{Name:"",Tsize:1,Hash:e.key},data:e.data||new Uint8Array}))).sort(((e,t)=>wv(e.link.Hash.bytes,t.link.Hash.bytes))),t=a.concat(e.map((e=>e.link)));return{Data:(0,Ln.concat)([o,...e.map((e=>e.data))]),Links:t}}{const e=r.reduce(((e,t)=>{const r=function(e,t){const r=new Uint8Array(4);new DataView(r.buffer).setUint32(0,e,!0);const n=(0,zt.fromString)(t.toString()),i=(0,Ln.concat)([r,n],r.byteLength+n.byteLength);return dv((0,$t.toString)(i))}(n,t.key)%256;return e[r]=r in e?e[r].concat([t]):[t],e}),[]);let i=0;for(const r of e){const e=await t(r,n+1);await c(e,i),i++}return{Data:o,Links:a}}async function c(t,r){const n=it(t),i=await hn.sha256.digest(n),s=Ne.CID.createV0(i);await e.put(s,n);const o=t.Links.reduce(((e,t)=>e+(t.Tsize||0)),0)+n.length;a[r]={Name:"",Tsize:o,Hash:s}}}(t,0)}async function Sv(e,t,r){const n=await _v(e,r.map((e=>({key:e})))),i=it(n),s=await hn.sha256.digest(i),o=Ne.CID.createV0(s);await e.put(o,i);return{Name:t,Tsize:n.Links.reduce(((e,t)=>e+t.Tsize),0)+i.length,Hash:o}}async function Av(e,t,r,n){if(!await t.has(pv))return;const i=await t.get(pv),s=Ne.CID.decode(i),o=st(await e.get(s));let a=0;const c=await tv(Ev(e,o,gv))+await tv(Ev(e,o,yv));for await(const l of Ev(e,o,gv)){a++;const e={depth:1/0};0!==l.version&&(e.version=l.version),l.code!==nt&&(e.codec=l.code),await r.put(mv(l),ot.cv(e)),n(a/c*100,`Migrated recursive pin ${l}`)}for await(const l of Ev(e,o,yv)){a++;const e={depth:0};0!==l.version&&(e.version=l.version),l.code!==nt&&(e.codec=l.code),await r.put(mv(l),ot.cv(e)),n(a/c*100,`Migrated direct pin ${l}`)}await e.delete(s),await t.delete(pv)}async function kv(e,t,r,n){const i=[],s=[];let o=0;const a=await tv(r.queryKeys({}));for await(const{key:h,value:d}of r.query({})){o++;const e=ot.Jx(d),t=Ne.CID.create(e.version||0,e.codec||nt,ln.decode(fe.base32.decode("b"+h.toString().toLowerCase().split("/").pop())));0===e.depth?(n(o/a*100,`Reverted direct pin ${t}`),s.push(t)):(n(o/a*100,`Reverted recursive pin ${t}`),i.push(t))}n(100,"Updating pin root");const c=it({Links:[await Sv(e,yv,s),await Sv(e,gv,i)]}),l=await hn.sha256.digest(c),u=Ne.CID.createV0(l);await e.put(u,c),await t.put(pv,u.bytes)}async function Iv(e,t,r){const n=e.blocks,i=e.datastore,s=e.pins;await n.open(),await i.open(),await s.open();try{await r(n,i,s,t)}finally{await s.close(),await i.close(),await n.close()}}const Cv={version:9,description:"Migrates pins to datastore",migrate:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return Iv(e,t,Av)},revert:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return Iv(e,t,kv)}},Rv=new Gt("/config"),Tv=new Gt("/version");function Dv(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}function Pv(e){const t=e.get.bind(e),r=e.has.bind(e);return e.get=n=>async function(e,t,r,n){if(await r(e))return t(e);const i=Dv(n);if(!i)throw On();return new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{if(n.result)return t(n.result);r(On())}}))}(n,t,r,e),e.has=t=>async function(e,t,r){const n=await t(e);if(n)return n;const i=Dv(r);return!!i&&new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{t(Boolean(n.result))}}))}(t,r,e),e}function Nv(e){return{...e,root:Pv(e.root),datastore:Pv(e.datastore),pins:Pv(e.pins),keys:Pv(e.keys)}}async function xv(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const n=Dv(t);if(!n)return void r(`${e} did not need an upgrade`);r(`Upgrading ${e}`);const i=(e,t)=>[{type:"del",key:e},{type:"put",key:(0,zt.fromString)(e),value:t}];await Uv(n,i)}async function Ov(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const n=Dv(t);if(!n)return void r(`${e} did not need a downgrade`);r(`Downgrading ${e}`);const i=(e,t)=>[{type:"del",key:e},{type:"put",key:(0,$t.toString)(e),value:t}];await Uv(n,i)}function Bv(e){return e.child?Bv(e.child):e}async function Lv(e,t,r){const n=Object.entries(e).map((e=>{let[t,r]=e;return{key:t,backend:Bv(r)}})).filter((e=>{let{key:t,backend:r}=e;return"LevelDatastore"===r.constructor.name})).map((e=>{let{key:t,backend:r}=e;return{name:t,store:r}}));t(0,`Migrating ${n.length} dbs`);let i=0;const s=e=>{t(Math.round(i/n.length*100),e)};for(const{name:o,store:a}of n){await a.open();try{await r(o,a,s)}finally{i++,await a.close()}}t(100,`Migrated ${n.length} dbs`)}const Mv={version:10,description:"Migrates datastore-level keys to binary",migrate:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return Lv(e,t,xv)},revert:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};return Lv(e,t,Ov)}};function Uv(e,t){return new Promise(((r,n)=>{const i=e.iterator();i._deserializeKey=i._deserializeValue=e=>e,function s(){const o=(o,a,c)=>{if(o||void 0===a){const e=e=>{e?n(e):r()};i.end(e)}else!function(t,r){const n=e.store("readwrite"),i=n.transaction;let s,a=0;i.onabort=()=>r(s||i.error||new Error("aborted by user")),i.oncomplete=()=>r(),function e(){const r=t[a++],c=r.key;let l;try{l="del"===r.type?n.delete(c):n.put(r.value,c)}catch(o){return s=o,void i.abort()}a<t.length&&(l.onsuccess=e)}()}(t(a,c),s)};i.next(o)}()}))}const jv=new Gt("/local/filesroot");const Fv={version:11,description:"Store mfs root in the datastore",migrate:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(t(100,"Migrating MFS root to repo datastore"),await e.root.open(),await e.datastore.open(),await e.root.has(jv)){const t=await e.root.get(jv);await e.datastore.put(jv,t),await e.root.delete(jv)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo datastore")},revert:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(t(100,"Migrating MFS root to repo root datastore"),await e.root.open(),await e.datastore.open(),await e.datastore.has(jv)){const t=await e.datastore.get(jv);await e.root.put(jv,t),await e.datastore.delete(jv)}await e.datastore.close(),await e.root.close(),t(100,"Stored MFS root in repo root datastore")}},zv=we.Reader,Vv=we.Writer,Kv=we.util,$v=we.roots.default||(we.roots.default={}),qv=$v.Protocols=(()=>{function e(e){if(this.protocols=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.protocols=Kv.emptyArray,e.encode=function(e,t){if(t||(t=Vv.create()),null!=e.protocols&&e.protocols.length)for(var r=0;r<e.protocols.length;++r)t.uint32(10).string(e.protocols[r]);return t},e.decode=function(e,t){e instanceof zv||(e=zv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $v.Protocols;e.pos<r;){var i=e.uint32();if(i>>>3===1)n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());else e.skipType(7&i)}return n},e.fromObject=function(e){if(e instanceof $v.Protocols)return e;var t=new $v.Protocols;if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Protocols.protocols: array expected");t.protocols=[];for(var r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.protocols=[]),e.protocols&&e.protocols.length){r.protocols=[];for(var n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e})(),Hv=we.Reader,Wv=we.Writer,Gv=we.util,Yv=we.roots.default||(we.roots.default={}),Qv=Yv.Addresses=(()=>{function e(e){if(this.addrs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.addrs=Gv.emptyArray,e.prototype.certifiedRecord=null,e.encode=function(e,t){if(t||(t=Wv.create()),null!=e.addrs&&e.addrs.length)for(var r=0;r<e.addrs.length;++r)Yv.Addresses.Address.encode(e.addrs[r],t.uint32(10).fork()).ldelim();return null!=e.certifiedRecord&&Object.hasOwnProperty.call(e,"certifiedRecord")&&Yv.Addresses.CertifiedRecord.encode(e.certifiedRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof Hv||(e=Hv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Yv.Addresses;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.addrs&&n.addrs.length||(n.addrs=[]),n.addrs.push(Yv.Addresses.Address.decode(e,e.uint32()));break;case 2:n.certifiedRecord=Yv.Addresses.CertifiedRecord.decode(e,e.uint32());break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof Yv.Addresses)return e;var t=new Yv.Addresses;if(e.addrs){if(!Array.isArray(e.addrs))throw TypeError(".Addresses.addrs: array expected");t.addrs=[];for(var r=0;r<e.addrs.length;++r){if("object"!==typeof e.addrs[r])throw TypeError(".Addresses.addrs: object expected");t.addrs[r]=Yv.Addresses.Address.fromObject(e.addrs[r])}}if(null!=e.certifiedRecord){if("object"!==typeof e.certifiedRecord)throw TypeError(".Addresses.certifiedRecord: object expected");t.certifiedRecord=Yv.Addresses.CertifiedRecord.fromObject(e.certifiedRecord)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addrs=[]),t.defaults&&(r.certifiedRecord=null),e.addrs&&e.addrs.length){r.addrs=[];for(var n=0;n<e.addrs.length;++n)r.addrs[n]=Yv.Addresses.Address.toObject(e.addrs[n],t)}return null!=e.certifiedRecord&&e.hasOwnProperty("certifiedRecord")&&(r.certifiedRecord=Yv.Addresses.CertifiedRecord.toObject(e.certifiedRecord,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e.Address=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.multiaddr=Gv.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:Gv.oneOfGetter(t=["isCertified"]),set:Gv.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Wv.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof Hv||(e=Hv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Yv.Addresses.Address;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof Yv.Addresses.Address)return e;var t=new Yv.Addresses.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?Gv.base64.decode(e.multiaddr,t.multiaddr=Gv.newBuffer(Gv.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=Gv.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?Gv.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e}(),e.CertifiedRecord=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seq=Gv.Long?Gv.Long.fromBits(0,0,!0):0,e.prototype.raw=Gv.newBuffer([]),e.encode=function(e,t){return t||(t=Wv.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.raw&&Object.hasOwnProperty.call(e,"raw")&&t.uint32(18).bytes(e.raw),t},e.decode=function(e,t){e instanceof Hv||(e=Hv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new Yv.Addresses.CertifiedRecord;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.seq=e.uint64();break;case 2:n.raw=e.bytes();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof Yv.Addresses.CertifiedRecord)return e;var t=new Yv.Addresses.CertifiedRecord;return null!=e.seq&&(Gv.Long?(t.seq=Gv.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new Gv.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),null!=e.raw&&("string"===typeof e.raw?Gv.base64.decode(e.raw,t.raw=Gv.newBuffer(Gv.base64.length(e.raw)),0):e.raw.length&&(t.raw=e.raw)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(Gv.Long){var n=new Gv.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;t.bytes===String?r.raw="":(r.raw=[],t.bytes!==Array&&(r.raw=Gv.newBuffer(r.raw)))}return null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?Gv.Long.prototype.toString.call(e.seq):t.longs===Number?new Gv.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),null!=e.raw&&e.hasOwnProperty("raw")&&(r.raw=t.bytes===String?Gv.base64.encode(e.raw,0,e.raw.length):t.bytes===Array?Array.prototype.slice.call(e.raw):e.raw),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e}(),e})(),Jv=we.Reader,Xv=we.Writer,Zv=we.util,eb=we.roots.default||(we.roots.default={}),tb=eb.Peer=(()=>{function e(e){if(this.addresses=[],this.protocols=[],this.metadata=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.addresses=Zv.emptyArray,e.prototype.protocols=Zv.emptyArray,e.prototype.metadata=Zv.emptyArray,e.prototype.pubKey=null,e.prototype.peerRecordEnvelope=null,Object.defineProperty(e.prototype,"_pubKey",{get:Zv.oneOfGetter(t=["pubKey"]),set:Zv.oneOfSetter(t)}),Object.defineProperty(e.prototype,"_peerRecordEnvelope",{get:Zv.oneOfGetter(t=["peerRecordEnvelope"]),set:Zv.oneOfSetter(t)}),e.encode=function(e,t){if(t||(t=Xv.create()),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)eb.Address.encode(e.addresses[r],t.uint32(10).fork()).ldelim();if(null!=e.protocols&&e.protocols.length)for(r=0;r<e.protocols.length;++r)t.uint32(18).string(e.protocols[r]);if(null!=e.metadata&&e.metadata.length)for(r=0;r<e.metadata.length;++r)eb.Metadata.encode(e.metadata[r],t.uint32(26).fork()).ldelim();return null!=e.pubKey&&Object.hasOwnProperty.call(e,"pubKey")&&t.uint32(34).bytes(e.pubKey),null!=e.peerRecordEnvelope&&Object.hasOwnProperty.call(e,"peerRecordEnvelope")&&t.uint32(42).bytes(e.peerRecordEnvelope),t},e.decode=function(e,t){e instanceof Jv||(e=Jv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new eb.Peer;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(eb.Address.decode(e,e.uint32()));break;case 2:n.protocols&&n.protocols.length||(n.protocols=[]),n.protocols.push(e.string());break;case 3:n.metadata&&n.metadata.length||(n.metadata=[]),n.metadata.push(eb.Metadata.decode(e,e.uint32()));break;case 4:n.pubKey=e.bytes();break;case 5:n.peerRecordEnvelope=e.bytes();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof eb.Peer)return e;var t=new eb.Peer;if(e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".Peer.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".Peer.addresses: object expected");t.addresses[r]=eb.Address.fromObject(e.addresses[r])}}if(e.protocols){if(!Array.isArray(e.protocols))throw TypeError(".Peer.protocols: array expected");t.protocols=[];for(r=0;r<e.protocols.length;++r)t.protocols[r]=String(e.protocols[r])}if(e.metadata){if(!Array.isArray(e.metadata))throw TypeError(".Peer.metadata: array expected");t.metadata=[];for(r=0;r<e.metadata.length;++r){if("object"!==typeof e.metadata[r])throw TypeError(".Peer.metadata: object expected");t.metadata[r]=eb.Metadata.fromObject(e.metadata[r])}}return null!=e.pubKey&&("string"===typeof e.pubKey?Zv.base64.decode(e.pubKey,t.pubKey=Zv.newBuffer(Zv.base64.length(e.pubKey)),0):e.pubKey.length&&(t.pubKey=e.pubKey)),null!=e.peerRecordEnvelope&&("string"===typeof e.peerRecordEnvelope?Zv.base64.decode(e.peerRecordEnvelope,t.peerRecordEnvelope=Zv.newBuffer(Zv.base64.length(e.peerRecordEnvelope)),0):e.peerRecordEnvelope.length&&(t.peerRecordEnvelope=e.peerRecordEnvelope)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[],r.protocols=[],r.metadata=[]),e.addresses&&e.addresses.length){r.addresses=[];for(var n=0;n<e.addresses.length;++n)r.addresses[n]=eb.Address.toObject(e.addresses[n],t)}if(e.protocols&&e.protocols.length){r.protocols=[];for(n=0;n<e.protocols.length;++n)r.protocols[n]=e.protocols[n]}if(e.metadata&&e.metadata.length){r.metadata=[];for(n=0;n<e.metadata.length;++n)r.metadata[n]=eb.Metadata.toObject(e.metadata[n],t)}return null!=e.pubKey&&e.hasOwnProperty("pubKey")&&(r.pubKey=t.bytes===String?Zv.base64.encode(e.pubKey,0,e.pubKey.length):t.bytes===Array?Array.prototype.slice.call(e.pubKey):e.pubKey,t.oneofs&&(r._pubKey="pubKey")),null!=e.peerRecordEnvelope&&e.hasOwnProperty("peerRecordEnvelope")&&(r.peerRecordEnvelope=t.bytes===String?Zv.base64.encode(e.peerRecordEnvelope,0,e.peerRecordEnvelope.length):t.bytes===Array?Array.prototype.slice.call(e.peerRecordEnvelope):e.peerRecordEnvelope,t.oneofs&&(r._peerRecordEnvelope="peerRecordEnvelope")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e})(),rb=(eb.Address=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.multiaddr=Zv.newBuffer([]),e.prototype.isCertified=null,Object.defineProperty(e.prototype,"_isCertified",{get:Zv.oneOfGetter(t=["isCertified"]),set:Zv.oneOfSetter(t)}),e.encode=function(e,t){return t||(t=Xv.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),null!=e.isCertified&&Object.hasOwnProperty.call(e,"isCertified")&&t.uint32(16).bool(e.isCertified),t},e.decode=function(e,t){e instanceof Jv||(e=Jv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new eb.Address;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof eb.Address)return e;var t=new eb.Address;return null!=e.multiaddr&&("string"===typeof e.multiaddr?Zv.base64.decode(e.multiaddr,t.multiaddr=Zv.newBuffer(Zv.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),null!=e.isCertified&&(t.isCertified=Boolean(e.isCertified)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=Zv.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?Zv.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),null!=e.isCertified&&e.hasOwnProperty("isCertified")&&(r.isCertified=e.isCertified,t.oneofs&&(r._isCertified="isCertified")),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e})(),eb.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.key="",e.prototype.value=Zv.newBuffer([]),e.encode=function(e,t){return t||(t=Xv.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.decode=function(e,t){e instanceof Jv||(e=Jv.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new eb.Metadata;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.key=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof eb.Metadata)return e;var t=new eb.Metadata;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&("string"===typeof e.value?Zv.base64.decode(e.value,t.value=Zv.newBuffer(Zv.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key="",t.bytes===String?r.value="":(r.value=[],t.bytes!==Array&&(r.value=Zv.newBuffer(r.value)))),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.bytes===String?Zv.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e})(),we.Reader),nb=we.Writer,ib=we.util,sb=we.roots.default||(we.roots.default={}),ob=sb.Envelope=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.publicKey=ib.newBuffer([]),e.prototype.payloadType=ib.newBuffer([]),e.prototype.payload=ib.newBuffer([]),e.prototype.signature=ib.newBuffer([]),e.encode=function(e,t){return t||(t=nb.create()),null!=e.publicKey&&Object.hasOwnProperty.call(e,"publicKey")&&t.uint32(10).bytes(e.publicKey),null!=e.payloadType&&Object.hasOwnProperty.call(e,"payloadType")&&t.uint32(18).bytes(e.payloadType),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(26).bytes(e.payload),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(42).bytes(e.signature),t},e.decode=function(e,t){e instanceof rb||(e=rb.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new sb.Envelope;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=e.bytes();break;case 5:n.signature=e.bytes();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof sb.Envelope)return e;var t=new sb.Envelope;return null!=e.publicKey&&("string"===typeof e.publicKey?ib.base64.decode(e.publicKey,t.publicKey=ib.newBuffer(ib.base64.length(e.publicKey)),0):e.publicKey.length&&(t.publicKey=e.publicKey)),null!=e.payloadType&&("string"===typeof e.payloadType?ib.base64.decode(e.payloadType,t.payloadType=ib.newBuffer(ib.base64.length(e.payloadType)),0):e.payloadType.length&&(t.payloadType=e.payloadType)),null!=e.payload&&("string"===typeof e.payload?ib.base64.decode(e.payload,t.payload=ib.newBuffer(ib.base64.length(e.payload)),0):e.payload.length&&(t.payload=e.payload)),null!=e.signature&&("string"===typeof e.signature?ib.base64.decode(e.signature,t.signature=ib.newBuffer(ib.base64.length(e.signature)),0):e.signature.length&&(t.signature=e.signature)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.publicKey="":(r.publicKey=[],t.bytes!==Array&&(r.publicKey=ib.newBuffer(r.publicKey))),t.bytes===String?r.payloadType="":(r.payloadType=[],t.bytes!==Array&&(r.payloadType=ib.newBuffer(r.payloadType))),t.bytes===String?r.payload="":(r.payload=[],t.bytes!==Array&&(r.payload=ib.newBuffer(r.payload))),t.bytes===String?r.signature="":(r.signature=[],t.bytes!==Array&&(r.signature=ib.newBuffer(r.signature)))),null!=e.publicKey&&e.hasOwnProperty("publicKey")&&(r.publicKey=t.bytes===String?ib.base64.encode(e.publicKey,0,e.publicKey.length):t.bytes===Array?Array.prototype.slice.call(e.publicKey):e.publicKey),null!=e.payloadType&&e.hasOwnProperty("payloadType")&&(r.payloadType=t.bytes===String?ib.base64.encode(e.payloadType,0,e.payloadType.length):t.bytes===Array?Array.prototype.slice.call(e.payloadType):e.payloadType),null!=e.payload&&e.hasOwnProperty("payload")&&(r.payload=t.bytes===String?ib.base64.encode(e.payload,0,e.payload.length):t.bytes===Array?Array.prototype.slice.call(e.payload):e.payload),null!=e.signature&&e.hasOwnProperty("signature")&&(r.signature=t.bytes===String?ib.base64.encode(e.signature,0,e.signature.length):t.bytes===Array?Array.prototype.slice.call(e.signature):e.signature),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e})(),ab=we.Reader,cb=we.Writer,lb=we.util,ub=we.roots.default||(we.roots.default={}),hb=ub.PeerRecord=(()=>{function e(e){if(this.addresses=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.peerId=lb.newBuffer([]),e.prototype.seq=lb.Long?lb.Long.fromBits(0,0,!0):0,e.prototype.addresses=lb.emptyArray,e.encode=function(e,t){if(t||(t=cb.create()),null!=e.peerId&&Object.hasOwnProperty.call(e,"peerId")&&t.uint32(10).bytes(e.peerId),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.addresses&&e.addresses.length)for(var r=0;r<e.addresses.length;++r)ub.PeerRecord.AddressInfo.encode(e.addresses[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof ab||(e=ab.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new ub.PeerRecord;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.peerId=e.bytes();break;case 2:n.seq=e.uint64();break;case 3:n.addresses&&n.addresses.length||(n.addresses=[]),n.addresses.push(ub.PeerRecord.AddressInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof ub.PeerRecord)return e;var t=new ub.PeerRecord;if(null!=e.peerId&&("string"===typeof e.peerId?lb.base64.decode(e.peerId,t.peerId=lb.newBuffer(lb.base64.length(e.peerId)),0):e.peerId.length&&(t.peerId=e.peerId)),null!=e.seq&&(lb.Long?(t.seq=lb.Long.fromValue(e.seq)).unsigned=!0:"string"===typeof e.seq?t.seq=parseInt(e.seq,10):"number"===typeof e.seq?t.seq=e.seq:"object"===typeof e.seq&&(t.seq=new lb.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0))),e.addresses){if(!Array.isArray(e.addresses))throw TypeError(".PeerRecord.addresses: array expected");t.addresses=[];for(var r=0;r<e.addresses.length;++r){if("object"!==typeof e.addresses[r])throw TypeError(".PeerRecord.addresses: object expected");t.addresses[r]=ub.PeerRecord.AddressInfo.fromObject(e.addresses[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.addresses=[]),t.defaults)if(t.bytes===String?r.peerId="":(r.peerId=[],t.bytes!==Array&&(r.peerId=lb.newBuffer(r.peerId))),lb.Long){var n=new lb.Long(0,0,!0);r.seq=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.seq=t.longs===String?"0":0;if(null!=e.peerId&&e.hasOwnProperty("peerId")&&(r.peerId=t.bytes===String?lb.base64.encode(e.peerId,0,e.peerId.length):t.bytes===Array?Array.prototype.slice.call(e.peerId):e.peerId),null!=e.seq&&e.hasOwnProperty("seq")&&("number"===typeof e.seq?r.seq=t.longs===String?String(e.seq):e.seq:r.seq=t.longs===String?lb.Long.prototype.toString.call(e.seq):t.longs===Number?new lb.LongBits(e.seq.low>>>0,e.seq.high>>>0).toNumber(!0):e.seq),e.addresses&&e.addresses.length){r.addresses=[];for(var i=0;i<e.addresses.length;++i)r.addresses[i]=ub.PeerRecord.AddressInfo.toObject(e.addresses[i],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e.AddressInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.multiaddr=lb.newBuffer([]),e.encode=function(e,t){return t||(t=cb.create()),null!=e.multiaddr&&Object.hasOwnProperty.call(e,"multiaddr")&&t.uint32(10).bytes(e.multiaddr),t},e.decode=function(e,t){e instanceof ab||(e=ab.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new ub.PeerRecord.AddressInfo;e.pos<r;){var i=e.uint32();if(i>>>3===1)n.multiaddr=e.bytes();else e.skipType(7&i)}return n},e.fromObject=function(e){if(e instanceof ub.PeerRecord.AddressInfo)return e;var t=new ub.PeerRecord.AddressInfo;return null!=e.multiaddr&&("string"===typeof e.multiaddr?lb.base64.decode(e.multiaddr,t.multiaddr=lb.newBuffer(lb.base64.length(e.multiaddr)),0):e.multiaddr.length&&(t.multiaddr=e.multiaddr)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.multiaddr="":(r.multiaddr=[],t.bytes!==Array&&(r.multiaddr=lb.newBuffer(r.multiaddr)))),null!=e.multiaddr&&e.hasOwnProperty("multiaddr")&&(r.multiaddr=t.bytes===String?lb.base64.encode(e.multiaddr,0,e.multiaddr.length):t.bytes===Array?Array.prototype.slice.call(e.multiaddr):e.multiaddr),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e}(),e})();var db=__webpack_require__(8719);we.util.Long=void 0,we.configure();const pb={version:12,description:"Store each peerstore peer under a single datastore key",migrate:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};t(0,"Storing each peerstore key under a single datastore key"),await e.datastore.open();const r={},n=[];for await(const{key:i,value:s}of e.datastore.query({prefix:"/peers"})){n.push(i);const e=i.toString(),[t,o,a,c,l]=e.split("/");if("peers"===o&&(["protos","addrs","metadata","keys"].includes(a)&&c))if(r[c]=r[c]||{addresses:[],protocols:[],metadata:[]},"protos"===a){const e=qv.decode(s);r[c].protocols=e.protocols.sort()}else if("addrs"===a){const e=Qv.decode(s);r[c].addresses=e.addrs.sort(((e,t)=>new db.Multiaddr(e.multiaddr).toString().localeCompare(new db.Multiaddr(t.multiaddr).toString()))),e.certifiedRecord&&e.certifiedRecord.raw&&(r[c].peerRecordEnvelope=e.certifiedRecord.raw)}else"metadata"===a?r[c].metadata.push({key:l,value:s}):"keys"===a&&(r[c].pubKey=s)}t(33,"Read peer data from store");for(const i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(const i of Object.keys(r)){const t=r[i];t.metadata=t.metadata.sort(((e,t)=>e.key.localeCompare(t.key)));const n=tb.encode(t).finish();await e.datastore.put(new Gt(`/peers/${i}`),n)}await e.datastore.close(),t(100,"Stored each peerstore key under a single datastore key")},revert:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};t(0,"Storing each peerstore key under a multiple datastore keys"),await e.datastore.open();const r={},n=[];for await(const{key:i,value:s}of e.datastore.query({prefix:"/peers"})){n.push(i);const e=i.toString(),[t,o,a]=e.split("/");r[a]=tb.decode(s)}t(33,"Read peer data from store");for(const i of n)await e.datastore.delete(i);t(66,"Removed existing peer data from store");for(const[i,s]of Object.entries(r)){if(s.protocols&&s.protocols.length>0&&await e.datastore.put(new Gt(`/peers/protos/${i}`),qv.encode({protocols:s.protocols}).finish()),s.addresses&&s.addresses.length>0){const t=s.peerRecordEnvelope;let r;if(t){const e=ob.decode(t);r={raw:t,seq:hb.decode(e.payload).seq}}await e.datastore.put(new Gt(`/peers/addrs/${i}`),Qv.encode({addrs:s.addresses,certifiedRecord:r}).finish())}if(s.metadata&&s.metadata.length>0)for(const{key:t,value:r}of s.metadata)await e.datastore.put(new Gt(`/peers/metadata/${i}/${t}`),r);s.pubKey&&await e.datastore.put(new Gt(`/peers/keys/${i}`),s.pubKey)}await e.datastore.close(),t(100,"Stored each peerstore key under multiple datastore keys")}},fb={description:"Empty migration.",migrate:()=>{},revert:()=>{},empty:!0},yb=[Object.assign({version:1},fb),Object.assign({version:2},fb),Object.assign({version:3},fb),Object.assign({version:4},fb),Object.assign({version:5},fb),Object.assign({version:6},fb),Object.assign({version:7},fb),av,Cv,Mv,Fv,pb];class gb extends Error{constructor(e){super(e),this.name="NonReversibleMigrationError",this.code=gb.code,this.message=e}}gb.code="ERR_NON_REVERSIBLE_MIGRATION";class mb extends Error{constructor(e){super(e),this.name="NotInitializedRepoError",this.code=mb.code,this.message=e}}mb.code="ERR_NOT_INITIALIZED_REPO";class wb extends Error{constructor(e){super(e),this.name="RequiredParameterError",this.code=wb.code,this.message=e}}wb.code="ERR_REQUIRED_PARAMETER";class vb extends Error{constructor(e){super(e),this.name="InvalidValueError",this.code=vb.code,this.message=e}}vb.code="ERR_INVALID_VALUE";class bb extends Error{constructor(e){super(e),this.name="MissingRepoOptionsError",this.code=bb.code,this.message=e}}bb.code="ERR_MISSING_REPO_OPTIONS";const Eb=de("ipfs:repo:migrator:repo:init");async function _b(e){if(!await async function(e){if(!e)throw new bb("Please pass repo options when trying to open a repo");const t=e.root;try{await t.open();const e=await t.has(Tv),r=await t.has(Rv);return!(!e||!r)||(Eb(`Version entry present: ${e}`),Eb(`Config entry present: ${r}`),!1)}catch(r){return Eb("While checking if repo is initialized error was thrown: "+r.message),!1}finally{if(void 0!==t)try{await t.close()}catch{}}}(e))throw new mb("Repo is not initialized!");const t=e.root;await t.open();try{return parseInt((0,$t.toString)(await t.get(Tv)))}finally{await t.close()}}async function Sb(e,t){if(!t)throw new bb("Please pass repo options when trying to open a repo");const r=t.root;await r.open(),await r.put(Tv,(0,zt.fromString)(String(e))),await r.close()}const Ab=de("ipfs:repo:migrator");async function kb(e,t,r,n,i){let{ignoreLock:s=!1,onProgress:o,isDryRun:a=!1,migrations:c}=i;if(c=c||yb,!e)throw new Cb.RequiredParameterError("Path argument is required!");if(!r)throw new Cb.RequiredParameterError("repoOptions argument is required!");if(!n)throw new Cb.RequiredParameterError("toVersion argument is required!");if(!Number.isInteger(n)||n<=0)throw new Cb.InvalidValueError("Version has to be positive integer!");t=Nv(t);const l=await _b(t);if(l===n)return void Ab("Nothing to migrate.");if(l>n)throw new Cb.InvalidValueError(`Current repo's version (${l}) is higher then toVersion (${n}), you probably wanted to revert it?`);let u;Ib(c,l,n),a||s||(u=await r.repoLock.lock(e));try{for(const e of c){if(void 0!==n&&e.version>n)break;if(!(e.version<=l)){Ab(`Migrating version ${e.version}`);try{if(!a){let r=()=>{};o&&(r=(t,r)=>o(e.version,t.toFixed(2),r)),await e.migrate(t,r)}}catch(h){const r=e.version-1;throw Ab(`An exception was raised during execution of migration. Setting the repo's version to last successfully migrated version: ${r}`),await Sb(r,t),new Error(`During migration to version ${e.version} exception was raised: ${h.stack||h.message||h}`)}Ab(`Migrating to version ${e.version} finished`)}}a||await Sb(n||function(e){return e=e||yb,Array.isArray(e)&&0!==e.length?e[e.length-1].version:0}(c),t),Ab("Repo successfully migrated",void 0!==n?`to version ${n}!`:"to latest version!")}finally{a||s||!u||await u.close()}}function Ib(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=0;for(const s of e){if(s.version>r)break;if(s.version>t){if(n&&!s.revert)throw new Cb.NonReversibleMigrationError(`It is not possible to revert to version ${t} because migration version ${s.version} is not reversible. Cancelling reversion.`);i++}}if(i!==r-t)throw new Cb.InvalidValueError(`The ipfs-repo-migrations package does not have all migration to migrate from version ${t} to ${r}`)}const Cb=o;var Rb=__webpack_require__(1438);class Tb extends Error{constructor(e){super(e),this.name="LockExistsError",this.code=Tb.code}}Tb.code="ERR_LOCK_EXISTS";class Db extends Error{constructor(e){super(e),this.name="NotFoundError",this.code=Db.code}}Db.code="ERR_NOT_FOUND";class Pb extends Error{constructor(e){super(e),this.name="InvalidRepoVersionError",this.code=Pb.code}}Pb.code="ERR_INVALID_REPO_VERSION";const Nb="ERR_REPO_NOT_INITIALIZED";async function xb(e,t,r){const n=await t(e);if(n)return n;const i=Bb(r);return!!i&&new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{t(Boolean(n.result))}}))}async function Ob(e,t,r,n){if(await r(e))return t(e);const i=Bb(n);if(!i)throw new Db;return new Promise(((t,r)=>{const n=i.store("readonly").get(e.toString());n.transaction.onabort=()=>{r(n.transaction.error)},n.transaction.oncomplete=()=>{if(n.result)return t(n.result);r(new Db)}}))}function Bb(e){let t=e;for(;t.db||t.child;)if(t=t.db||t.child,"level-js"===t.type||"Level"===t.constructor.name)return t}const Lb=de("ipfs:repo:version"),Mb=new Gt("version");var Ub=__webpack_require__(6662),jb=__webpack_require__(8860);const Fb=Ub.default?Ub.default:Ub,zb=new Gt("config");var Vb=__webpack_require__(4542);const Kb=new Gt("datastore_spec");const $b=new Gt("api");var qb=__webpack_require__(8914);function Hb(e){const t=Ne.CID.asCID(e);if(null==t)throw me(new Error("Not a valid cid"),"ERR_INVALID_CID");return t.multihash.code!==Nt.identity.code?{isIdentity:!1}:{isIdentity:!0,digest:t.multihash.digest}}const Wb=de("ipfs:repo:lock:memory"),Gb="repo.lock",Yb={};const Qb={lock:async function(e){const t=e+"/"+Gb;if(Wb("locking %s",t),!0===Yb[t])throw new Tb(`Lock already being held for file: ${t}`);return Yb[t]=!0,{async close(){Yb[t]&&delete Yb[t]}}},locked:async function(e){const t=e+"/"+Gb;return Wb(`checking lock: ${t}`),Boolean(Yb[t])}},Jb={autoMigrate:!0,onMigrationProgress:()=>{},repoOwner:!0,repoLock:Qb},Xb={Spec:{type:"mount",mounts:[{mountpoint:"/blocks",type:"measure",prefix:"flatfs.datastore",child:{type:"flatfs",path:"blocks",sync:!0,shardFunc:"/repo/flatfs/shard/v1/next-to-last/2"}},{mountpoint:"/",type:"measure",prefix:"leveldb.datastore",child:{type:"levelds",path:"datastore",compression:"none"}}]}};function Zb(e){const t=pt.k0.asCID(e);if(null==t)throw me(new Error("Not a valid cid"),"ERR_INVALID_CID");const r=fe.base32.encode(t.multihash.bytes);return new Gt("/"+r.slice(1).toUpperCase(),!1)}function eE(e){return ln.decode(fe.base32.decode(`b${e.toString().toLowerCase().substring(1)}`))}const tE=de("ipfs:repo:utils:walk-dag");async function*rE(e,t,r,n){try{const i=await t.get(e,n),s=await r(e.code),o=qy({bytes:i,cid:e,codec:s});for(const[,e]of o.links())yield e,yield*rE(e,t,r,n)}catch(Up){throw tE("Could not walk DAG for CID",e.toString(),Up),Up}}class nE{constructor(e){let{pinstore:t,blockstore:r,loadCodec:n}=e;this.pinstore=t,this.blockstore=r,this.loadCodec=n,this.log=de("ipfs:repo:pin"),this.directPins=new Set,this.recursivePins=new Set}async pinDirectly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.blockstore.get(e,t);const r={depth:0};return 0!==e.version&&(r.version=e.version),e.code!==nt&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),this.pinstore.put(Zb(e),ot.cv(r))}unpin(e,t){return this.pinstore.delete(Zb(e),t)}async pinRecursively(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.fetchCompleteDag(e,t);const r={depth:1/0};0!==e.version&&(r.version=e.version),e.code!==nt&&(r.codec=e.code),t.metadata&&(r.metadata=t.metadata),await this.pinstore.put(Zb(e),ot.cv(r))}async*directKeys(e){for await(const t of this.pinstore.query({filters:[e=>0===ot.Jx(e.value).depth]})){const e=ot.Jx(t.value),r=e.version||0,n=null!=e.codec?e.codec:nt,i=eE(t.key);yield{cid:Ne.CID.create(r,n,i),metadata:e.metadata}}}async*recursiveKeys(e){for await(const t of this.pinstore.query({filters:[e=>ot.Jx(e.value).depth===1/0]})){const e=ot.Jx(t.value),r=e.version||0,n=null!=e.codec?e.codec:nt,i=eE(t.key);yield{cid:Ne.CID.create(r,n,i),metadata:e.metadata}}}async*indirectKeys(e){for await(const{cid:t}of this.recursiveKeys())for await(const r of rE(t,this.blockstore,this.loadCodec,e)){const e=[In.recursive];(await this.isPinnedWithType(r,e)).pinned||(yield r)}}async isPinnedWithType(e,t,r){Array.isArray(t)||(t=[t]);const n=t.includes(In.all),i=t.includes(In.direct),s=t.includes(In.recursive),o=t.includes(In.indirect);if(s||i||n){const r=await mg(this.pinstore.query({prefix:Zb(e).toString(),filters:[e=>{if(n)return!0;const r=ot.Jx(e.value);return t.includes(0===r.depth?In.direct:In.recursive)}],limit:1}));if(r){const t=ot.Jx(r.value);return{cid:e,pinned:!0,reason:0===t.depth?In.direct:In.recursive,metadata:t.metadata}}}const a=this;if(n||o){const t=await mg(async function*(e,t){for await(const{cid:r}of t)for await(const t of rE(r,a.blockstore,a.loadCodec))if(t.equals(e))return void(yield r)}(e,this.recursiveKeys()));if(t)return{cid:e,pinned:!0,reason:In.indirect,parent:t}}return{cid:e,pinned:!1}}async fetchCompleteDag(e,t){const r=new Set,n=async(e,t)=>{if(r.has(e.toString()))return;r.add(e.toString());const i=await this.blockstore.get(e,t),s=await this.loadCodec(e.code),o=qy({bytes:i,cid:e,codec:s});await Promise.all([...o.links()].map((e=>{let[,r]=e;return n(r,t)})))};await n(e,t)}static checkPinType(e){if("string"!==typeof e||!Object.keys(In).includes(e))throw function(e){return me(new Error(`Invalid type '${e}', must be one of {direct, indirect, recursive, all}`),"ERR_INVALID_PIN_TYPE")}(e);return!0}}async function iE(e,t){const{pinned:r,reason:n}=await t.isPinnedWithType(e,In.all);if(r)throw me(new Error(`pinned: ${n}`),"ERR_BLOCK_PINNED")}var sE=__webpack_require__(3214),oE=__webpack_require__(7220);const aE=de("ipfs:repo:gc"),cE=On().code,lE=new Gt("/local/filesroot");function uE(e){let{gcLock:t,pins:r,blockstore:n,root:i,loadCodec:s}=e;return async function*(){const e=Date.now();aE("Creating set of marked blocks");const o=await t.writeLock();try{const t=await async function(e){let{pins:t,blockstore:r,loadCodec:n,root:i}=e;const s=async function*(){let e;try{e=await i.get(lE)}catch(Up){if(Up.code===cE)return void aE("No blocks in MFS");throw Up}const t=Ne.CID.decode(e);yield t,yield*rE(t,r,n)}(),o=uc(lc(t.recursiveKeys(),(e=>{let{cid:t}=e;return t})),t.indirectKeys(),lc(t.directKeys(),(e=>{let{cid:t}=e;return t})),s),a=new Set;for await(const c of uc(o,s))a.add(fe.base32.encode(c.multihash.bytes));return a}({pins:r,blockstore:n,root:i,loadCodec:s}),a=n.queryKeys({});yield*async function*(e,t,r){let{blockstore:n}=e,i=0,s=0;const o=async e=>async function(){i++;try{const r=fe.base32.encode(e.multihash.bytes);if(t.has(r))return null;try{await n.delete(e),s++}catch(Up){return{err:new Error(`Could not delete block with CID ${e}: ${Up.message}`)}}return{cid:e}}catch(Up){const r=`Could delete block with CID ${e}`;return aE(r,Up),{err:new Error(r+`: ${Up.message}`)}}};yield*(0,oE.pipe)(Bu(lc(r,o),256),(e=>Za(e,Boolean))),aE(`Marked set has ${t.size} unique blocks. Blockstore has ${i} blocks. Deleted ${s} blocks.`)}({blockstore:n},t,a),aE(`Complete (${Date.now()-e}ms)`)}finally{o()}}}const hE=de("ipfs:repo"),dE=Number.MAX_SAFE_INTEGER;class pE{constructor(e,t,r,n){if("string"!==typeof e)throw new Error("missing repo path");if("function"!==typeof t)throw new Error("missing codec loader");this.options=ue(Jb,n),this.closed=!0,this.path=e,this.root=r.root,this.datastore=r.datastore,this.keys=r.keys;const i=r.blocks,s=r.pins;this.pins=new nE({pinstore:s,blockstore:i,loadCodec:t});const o=(a=this.pins,c=i,{open:()=>c.open(),close:()=>c.close(),query:(e,t)=>c.query(e,t),queryKeys:(e,t)=>c.queryKeys(e,t),get:async(e,t)=>c.get(e,t),async*getMany(e,t){yield*c.getMany(e,t)},async put(e,t,r){await c.put(e,t,r)},async*putMany(e,t){yield*c.putMany(e,t)},has:(e,t)=>c.has(e,t),delete:async(e,t)=>(await iE(e,a),c.delete(e,t)),deleteMany:(e,t)=>c.deleteMany(lc(e,(async e=>(await iE(e,a),e))),t),batch:()=>c.batch()});var a,c;this.blocks=function(e){return{open:()=>e.open(),close:()=>e.close(),query:(t,r)=>e.query(t,r),queryKeys:(t,r)=>e.queryKeys(t,r),async get(t,r){const n=Hb(t);return n.isIdentity?Promise.resolve(n.digest):e.get(t,r)},async*getMany(e,t){for await(const r of e)yield this.get(r,t)},async put(t,r,n){const{isIdentity:i}=Hb(t);i||await e.put(t,r,n)},async*putMany(t,r){const n=qb();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((async()=>{try{await Xa(e.putMany(async function*(){for await(const{key:e,value:r}of t)Hb(e).isIdentity||(yield{key:e,value:r}),n.push({key:e,value:r})}())),n.end()}catch(Up){n.end(Up)}})),yield*n},has(t,r){const{isIdentity:n}=Hb(t);return n?Promise.resolve(!0):e.has(t,r)},delete(t,r){const{isIdentity:n}=Hb(t);return n?Promise.resolve():e.delete(t,r)},deleteMany:(t,r)=>e.deleteMany(Za(t,(e=>!Hb(e).isIdentity)),r),batch(){const t=e.batch();return{put(e,r){const{isIdentity:n}=Hb(e);n||t.put(e,r)},delete(e){const{isIdentity:r}=Hb(e);r||t.delete(e)},commit:e=>t.commit(e)}}}}(o),this.version=function(e){return{exists:async()=>xb(Mb,e.has.bind(e),e),async get(){const t=await Ob(Mb,e.get.bind(e),e.has.bind(e),e);return parseInt((0,$t.toString)(t),10)},set:t=>e.put(Mb,(0,zt.fromString)(String(t))),async check(e){const t=await this.get();return Lb("comparing version: %s and %s",t,e),t===e||6===t&&7===e||6===e&&7===t}}}(this.root),this.config=function(e){const t=new Fb({concurrency:1}),r={async getAll(){const t=await Ob(zb,e.get.bind(e),e.has.bind(e),e);return JSON.parse((0,$t.toString)(t))},async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)throw new Db(`Key ${e} does not exist in config`);const r=await this.getAll(t),n=ev(r,e);if(void 0===n)throw new Db(`Key ${e} does not exist in config`);return n},set(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof e&&!(e instanceof String))throw me(new Error("Invalid key type: "+typeof e),"ERR_INVALID_KEY");if(void 0===r||r instanceof Uint8Array)throw me(new Error("Invalid value type: "+typeof r),"ERR_INVALID_VALUE");return t.add((()=>n({key:e,value:r},i.signal)))},replace(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e instanceof Uint8Array)throw me(new Error("Invalid value type: "+typeof e),"ERR_INVALID_VALUE");return t.add((()=>n({key:void 0,value:e},r.signal)))},exists:async()=>xb(zb,e.has.bind(e),e)};return r;async function n(e,t){if(t&&t.aborted)return;const n=e.key,s=e.value;if(n){const e=await r.getAll();return"object"===typeof e&&null!==e&&jb(e,n,s),i(e)}return i(s)}function i(t){const r=(0,zt.fromString)(JSON.stringify(t,null,2));return e.put(zb,r)}}(this.root),this.spec=function(e){return{exists:()=>e.has(Kb),async get(){const t=await e.get(Kb);return JSON.parse((0,$t.toString)(t))},set:async t=>e.put(Kb,(0,zt.fromString)(JSON.stringify(Vb(t,{deep:!0}))))}}(this.root),this.apiAddr=function(e){return{async get(){const t=await e.get($b);return t&&t.toString()},set:t=>e.put($b,(0,zt.fromString)(t.toString())),delete:()=>e.delete($b)}}(this.root),this.gcLock=sE(e,{singleProcess:!1!==this.options.repoOwner}),this.gc=uE({gcLock:this.gcLock,pins:this.pins,blockstore:this.blocks,root:this.root,loadCodec:t})}async init(e){var t;hE("initializing at: %s",this.path),await this._openRoot(),await this.config.replace((t=e,t.Datastore=Object.assign({},Xb,ev(t,"datastore")),t)),await this.spec.set(function(e){const t={...Xb.Spec,...ev(e,"Datastore.Spec")};return{type:t.type,mounts:t.mounts.map((e=>({mountpoint:e.mountpoint,type:e.child.type,path:e.child.path,shardFunc:e.child.shardFunc})))}}(e)),await this.version.set(12)}async isInitialized(){if(!this.closed)return!0;try{return await this._openRoot(),await this._checkInitialized(),await this.root.close(),!0}catch(Up){return!1}}async open(){if(!this.closed)throw me(new Error("repo is already open"),"ERR_REPO_ALREADY_OPEN");hE("opening at: %s",this.path);try{await this._openRoot(),await this._checkInitialized(),this._lockfile=await this._openLock(),hE("acquired repo.lock");if(!await this.version.check(12)){if(!await this._isAutoMigrationEnabled())throw new Pb("Incompatible repo versions. Automatic migrations disabled. Please migrate the repo manually.");await this._migrate(12,{root:this.root,datastore:this.datastore,pins:this.pins.pinstore,blocks:this.pins.blockstore,keys:this.keys})}hE("creating datastore"),await this.datastore.open(),hE("creating blocks"),await this.blocks.open(),hE("creating keystore"),await this.keys.open(),hE("creating pins"),await this.pins.pinstore.open(),this.closed=!1,hE("all opened")}catch(Up){if(this._lockfile)try{await this._closeLock(),this._lockfile=null}catch(e){hE("error removing lock",e)}throw Up}}async _openRoot(){try{await this.root.open()}catch(Up){if("Already open"!==Up.message)throw Up}}async _openLock(){const e=await this.options.repoLock.lock(this.path);if("function"!==typeof e.close)throw me(new Error("Locks must have a close method"),"ERR_NO_CLOSE_FUNCTION");return e}_closeLock(){return this._lockfile&&this._lockfile.close()}async _checkInitialized(){let e;hE("init check");try{[e]=await Promise.all([this.config.exists(),this.spec.exists(),this.version.exists()])}catch(Up){if("ERR_NOT_FOUND"===Up.code)throw me(new Error("repo is not initialized yet"),Nb,{path:this.path});throw Up}if(!e)throw me(new Error("repo is not initialized yet"),Nb,{path:this.path})}async close(){if(this.closed)throw me(new Error("repo is already closed"),"ERR_REPO_ALREADY_CLOSED");hE("closing at: %s",this.path);try{await this.apiAddr.delete()}catch(Up){if(Up.code!==Nb&&!Up.message.startsWith("ENOENT"))throw Up}await Promise.all([this.root,this.blocks,this.keys,this.datastore,this.pins.pinstore].map((e=>e&&e.close()))),hE("unlocking"),this.closed=!0,await this._closeLock()}exists(){return this.version.exists()}async stat(){if(this.datastore&&this.keys){const[e,t,r,n,i]=await Promise.all([this._storageMaxStat(),this._blockStat(),this.version.get(),fE(this.datastore),fE(this.keys)]),s=t.size+n+i;return{repoPath:this.path,storageMax:e,version:r,numObjects:t.count,repoSize:s}}throw me(new Error("repo is not initialized yet"),Nb,{path:this.path})}async _isAutoMigrationEnabled(){if(void 0!==this.options.autoMigrate)return this.options.autoMigrate;let e;try{e=await this.config.get("repoAutoMigrate")}catch(t){if(t.code!==Db.code)throw t;e=!0}return e}async _migrate(e,t){return await this.version.get()>e?(hE(`reverting to version ${e}`),async function(e,t,r,n,i){let{ignoreLock:s=!1,onProgress:o,isDryRun:a=!1,migrations:c}=i;if(c=c||yb,!e)throw new Cb.RequiredParameterError("Path argument is required!");if(!r)throw new Cb.RequiredParameterError("repoOptions argument is required!");if(!n)throw new Cb.RequiredParameterError("When reverting migrations, you have to specify to which version to revert!");if(!Number.isInteger(n)||n<=0)throw new Cb.InvalidValueError("Version has to be positive integer!");t=Nv(t);const l=await _b(t);if(l===n)return void Ab("Nothing to revert.");if(l<n)throw new Cb.InvalidValueError(`Current repo's version (${l}) is lower then toVersion (${n}), you probably wanted to migrate it?`);let u;Ib(c,n,l,!0),a||s||(u=await r.repoLock.lock(e)),Ab(`Reverting from version ${l} to ${n}`);try{const e=c.slice().reverse();for(const r of e){if(r.version<=n)break;if(!(r.version>l)){Ab(`Reverting migration version ${r.version}`);try{if(!a){let e=()=>{};o&&(e=(e,t)=>o(r.version,e.toFixed(2),t)),await r.revert(t,e)}}catch(h){const e=r.version;throw Ab(`An exception was raised during execution of migration. Setting the repo's version to last successfully reverted version: ${e}`),await Sb(e,t),h.message=`During reversion to version ${r.version} exception was raised: ${h.message}`,h}Ab(`Reverting to version ${r.version} finished`)}}a||await Sb(n,t),Ab(`All migrations successfully reverted to version ${n}!`)}finally{a||s||!u||await u.close()}}(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress})):(hE(`migrating to version ${e}`),kb(this.path,t,this.options,e,{ignoreLock:!0,onProgress:this.options.onMigrationProgress}))}async _storageMaxStat(){try{const e=await this.config.get("Datastore.StorageMax");return BigInt(Rb(e))}catch(Up){return BigInt(dE)}}async _blockStat(){let e=BigInt(0),t=BigInt(0);if(this.blocks)for await(const{key:r,value:n}of this.blocks.query({}))e+=BigInt(1),t+=BigInt(n.byteLength),t+=BigInt(r.bytes.byteLength);return{count:e,size:t}}}async function fE(e){let t=BigInt(0);for await(const r of e.query({}))t+=BigInt(r.value.byteLength),t+=BigInt(r.key.uint8Array().byteLength);return t}var yE=__webpack_require__(2035),gE=__webpack_require__(2164);class mE extends tc{constructor(e,t){super(),this.path=e,this.opts=t,t&&t.db?(this.database=t.db,delete t.db):this.database=gE}_initDb(){return new Promise(((e,t)=>{this.db=this.database(this.path,{...this.opts,valueEncoding:"binary",compression:!1},(r=>{if(r)return t(r);e(this.db)}))}))}async open(){try{this.db?await this.db.open():this.db=await this._initDb()}catch(Up){throw Pn(Up)}}async put(e,t){try{await this.db.put(e.toString(),t)}catch(Up){throw xn(Up)}}async get(e){let t;try{t=await this.db.get(e.toString())}catch(Up){if(Up.notFound)throw On(Up);throw xn(Up)}return t}async has(e){try{await this.db.get(e.toString())}catch(Up){if(Up.notFound)return!1;throw Up}return!0}async delete(e){try{await this.db.del(e.toString())}catch(Up){throw Nn(Up)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(t,r)=>{e.push({type:"put",key:t.toString(),value:r})},delete:t=>{e.push({type:"del",key:t.toString()})},commit:()=>this.db.batch(e)}}query(e){let t=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>Za(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>yE(e,t)),t));const{offset:r,limit:n}=e;if(r){let e=0;t=Za(t,(()=>e++>=r))}return n&&(t=ec(t,n)),t}queryKeys(e){let t=lc(this._query({values:!1,prefix:e.prefix}),(e=>{let{key:t}=e;return t}));Array.isArray(e.filters)&&(t=e.filters.reduce(((e,t)=>Za(e,t)),t)),Array.isArray(e.orders)&&(t=e.orders.reduce(((e,t)=>yE(e,t)),t));const{offset:r,limit:n}=e;if(r){let e=0;t=Za(t,(()=>e++>=r))}return n&&(t=ec(t,n)),t}_query(e){const t={keys:!0,keyAsBuffer:!0,values:e.values};if(null!=e.prefix){const r=e.prefix.toString();t.gte=r,t.lt=r+"\xff"}return r=this.db.iterator(t),{[Symbol.asyncIterator]:()=>({next:()=>new Promise(((e,t)=>{r.next(((n,i,s)=>n?t(n):null==i?r.end((r=>{if(r)return t(r);e({done:!0,value:void 0})})):void e({done:!1,value:{key:new Gt(i,!1),value:s}})))})),return:()=>new Promise(((e,t)=>{r.end((r=>{if(r)return t(r);e({done:!0,value:void 0})}))}))})};var r}}var wE=__webpack_require__(3844);const vE=(e,t)=>async function*(){const r=await Qa(e);yield*r.sort(t)}();class bE{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const{key:r,value:n}of e)await this.put(r,n,t),yield{key:r,value:n}}async*getMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of e)yield this.get(r,t)}async*deleteMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await Xa(this.putMany(e,r)),e=[],await Xa(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix&&(r=Za(r,(t=>t.key.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>Za(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>vE(e,t)),r)),null!=e.offset){let t=0;r=Za(r,(()=>t++>=(e.offset||0)))}return null!=e.limit&&(r=ec(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix&&(r=Za(r,(t=>t.toString().startsWith(e.prefix||"")))),Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>Za(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>vE(e,t)),r)),null!=e.offset){let t=0;r=Za(r,(()=>t++>=e.offset))}return null!=e.limit&&(r=ec(r,e.limit)),r}}function EE(e){const t=Ne.CID.asCID(e);if(!t)throw me(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Gt("/"+fe.base32.encode(t.multihash.bytes).slice(1).toUpperCase(),!1)}function _E(e){return Ne.CID.createV1(Ku.code,ln.decode(fe.base32.decode("b"+e.toString().slice(1).toLowerCase())))}function SE(e){const t=e.substring(0,1);if("/"===t)return SE(e.substring(1));let r,n;r="b"===t.toLowerCase()?e=>fe.base32.decode(e.toLowerCase()).subarray(2):"c"===t.toLowerCase()?e=>fe.base32pad.decode(e.toLowerCase()).subarray(2):"z"===t?e=>pe.base58btc.decode(e).subarray(2):"Q"===t?e=>pe.base58btc.decode("z"+e):e=>fe.base32.decode("b"+e.toLowerCase()).subarray(2);for(let s=1;s<e.length;s++)try{n=r(e.substring(0,s))}catch(Up){if("Unexpected end of data"!==Up.message)throw Up}let i="/C";return n&&(i=`/${fe.base32.encode(n).slice(1,-1).toUpperCase()||"C"}`),i}class AE extends bE{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,t){for await(const{key:r,value:n}of this.child.query(function(e){return{...e,prefix:e.prefix?SE(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e({key:_E(t.key),value:t.value}))):void 0,orders:e.orders?e.orders.map((e=>(t,r)=>e({key:_E(t.key),value:t.value},{key:_E(r.key),value:r.value}))):void 0}}(e),t))yield{key:_E(r),value:n}}async*queryKeys(e,t){for await(const r of this.child.queryKeys(function(e){return{...e,prefix:e.prefix?SE(e.prefix):void 0,filters:e.filters?e.filters.map((e=>t=>e(_E(t)))):void 0,orders:e.orders?e.orders.map((e=>(t,r)=>e(_E(t),_E(r)))):void 0}}(e),t))yield _E(r)}async get(e,t){return this.child.get(EE(e),t)}async*getMany(e,t){for await(const r of e)yield this.get(r,t)}async put(e,t,r){await this.child.put(EE(e),t,r)}async*putMany(e,t){const r=wE();(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)((async()=>{try{const n=this.child;await Xa(this.child.putMany(async function*(){for await(const i of e){const e=EE(i.key);await n.has(e,t)||(yield{key:e,value:i.value}),r.push(i)}}())),r.end()}catch(Up){r.end(Up)}})),yield*r}has(e,t){return this.child.has(EE(e),t)}delete(e,t){return this.child.delete(EE(e),t)}deleteMany(e,t){const r=wE();return Xa(this.child.deleteMany(async function*(){for await(const t of e)yield EE(t),r.push(t);r.end()}(),t)).catch((e=>{r.end(e)})),r}}function kE(e,t,r){const n=r.path||"ipfs";return function(e,t,r,n){return new pE(e,t,r,n)}(n,(e=>t.getCodec(e)),{root:new mE(n,{prefix:"",version:2}),blocks:new AE(new mE(`${n}/blocks`,{prefix:"",version:2})),datastore:new mE(`${n}/datastore`,{prefix:"",version:2}),keys:new mE(`${n}/keys`,{prefix:"",version:2}),pins:new mE(`${n}/pins`,{prefix:"",version:2})},{autoMigrate:r.autoMigrate,onMigrationProgress:r.onMigrationProgress||e,repoLock:Qb})}const IE="ERR_SIGNATURE_NOT_VALID";var CE;!function(e){e.codec=()=>Ei({1:{name:"publicKey",codec:ci},2:{name:"payloadType",codec:ci},3:{name:"payload",codec:ci},5:{name:"signature",codec:ci}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(CE||(CE={}));class RE{constructor(e){const{peerId:t,payloadType:r,payload:n,signature:i}=e;this.peerId=t,this.payloadType=r,this.payload=n,this.signature=i}marshal(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=CE.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload,signature:this.signature})),this.marshaled}equals(e){return(0,un.equals)(this.marshal(),e.marshal())}async validate(e){const t=TE(e,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw new Error("Missing public key");const r=pa(this.peerId.publicKey);return await r.verify(t,this.signature)}}RE.createFromProtobuf=async e=>{const t=CE.decode(e),r=await En(t.publicKey);return new RE({peerId:r,payloadType:t.payloadType,payload:t.payload,signature:t.signature})},RE.seal=async(e,t)=>{const r=e.domain,n=e.codec,i=e.marshal(),s=TE(r,n,i);if(null==t.privateKey)throw new Error("Missing private key");const o=await ya(t.privateKey),a=await o.sign(s);return new RE({peerId:t,payloadType:n,payload:i,signature:a})},RE.openAndCertify=async(e,t)=>{const r=await RE.createFromProtobuf(e);if(!await r.validate(t))throw me(new Error("envelope signature is not valid for the given domain"),IE);return r};const TE=(e,t,r)=>{const n=(0,zt.fromString)(e),i=dl.encode(n.byteLength),s=dl.encode(t.length),o=dl.encode(r.length);return(0,Ln.concat)([new Uint8Array(i),n,new Uint8Array(s),t,new Uint8Array(o),r])};var DE;!function(e){let t;!function(e){e.codec=()=>Ei({1:{name:"multiaddr",codec:ci}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(t=e.AddressInfo||(e.AddressInfo={})),e.codec=()=>Ei({1:{name:"peerId",codec:ci},2:{name:"seq",codec:Ri},3:{name:"addresses",codec:e.AddressInfo.codec(),repeats:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(DE||(DE={}));const PE=Uint8Array.from([3,1]);class NE{constructor(e){this.domain=NE.DOMAIN,this.codec=NE.CODEC;const{peerId:t,multiaddrs:r,seqNumber:n}=e;this.peerId=t,this.multiaddrs=null!==r&&void 0!==r?r:[],this.seqNumber=null!==n&&void 0!==n?n:BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=DE.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((e=>({multiaddr:e.bytes})))})),this.marshaled}equals(e){return e instanceof NE&&(!!this.peerId.equals(e.peerId)&&(this.seqNumber===e.seqNumber&&!!function(e,t){const r=(e,t)=>e.toString().localeCompare(t.toString());return e.length===t.length&&t.sort(r)&&e.sort(r).every(((e,r)=>t[r].equals(e)))}(this.multiaddrs,e.multiaddrs)))}}NE.createFromProtobuf=e=>{var t;const r=DE.decode(e),n=bn(r.peerId),i=(null!==(t=r.addresses)&&void 0!==t?t:[]).map((e=>new Ml(e.multiaddr))),s=r.seq;return new NE({peerId:n,multiaddrs:i,seqNumber:s})},NE.DOMAIN="libp2p-peer-record",NE.CODEC=PE;const xE=Symbol.for("@libp2p/topology");const OE=()=>{};class BE{constructor(e){var t,r,n,i;this.min=null!==(t=e.min)&&void 0!==t?t:0,this.max=null!==(r=e.max)&&void 0!==r?r:1/0,this.peers=new Set,this.onConnect=null!==(n=e.onConnect)&&void 0!==n?n:OE,this.onDisconnect=null!==(i=e.onDisconnect)&&void 0!==i?i:OE}get[Symbol.toStringTag](){return xE.toString()}get[xE](){return!0}async setRegistrar(e){this.registrar=e}disconnect(e){this.onDisconnect(e)}}function LE(e){return new BE(e)}var ME,UE,jE=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class FE extends EventTarget{constructor(){super(...arguments),UE.set(this,new Map)}listenerCount(e){const t=jE(this,UE,"f").get(e);return null==t?0:t.length}addEventListener(e,t,r){var n;super.addEventListener(e,t,r);let i=jE(this,UE,"f").get(e);null==i&&(i=[],jE(this,UE,"f").set(e,i)),i.push({callback:t,once:null!==(n=!0!==r&&!1!==r&&(null===r||void 0===r?void 0:r.once))&&void 0!==n&&n})}removeEventListener(e,t,r){super.removeEventListener(e.toString(),null!==t&&void 0!==t?t:null,r);let n=jE(this,UE,"f").get(e);null!=n&&(n=n.filter((e=>{let{callback:r}=e;return r!==t})),jE(this,UE,"f").set(e,n))}dispatchEvent(e){const t=super.dispatchEvent(e);let r=jE(this,UE,"f").get(e.type);return null==r||(r=r.filter((e=>{let{once:t}=e;return!t})),jE(this,UE,"f").set(e.type,r)),t}}UE=new WeakMap;class zE extends Event{constructor(e,t){super(e,t),this.detail=null===t||void 0===t?void 0:t.detail}}const VE=null!==(ME=globalThis.CustomEvent)&&void 0!==ME?ME:zE,KE=(e,t,r)=>{const n=dl.encode(e,t,r);return KE.bytes=dl.encode.bytes,null!==t&&void 0!==t?t:Uint8Array.from(n)};KE.bytes=0;function $E(e){var t,r,n,i;e=null!==(t=e)&&void 0!==t?t:{};const s=Math.max(null!==(r=e.poolSize)&&void 0!==r?r:10240,null!==(n=e.minPoolSize)&&void 0!==n?n:8),o=null!==(i=e.lengthEncoder)&&void 0!==i?i:KE;return async function*(e){let t=new Uint8Array(s),r=0;for await(const n of e){o(n.length,t,r);const e=t.slice(r,r+o.bytes);r+=o.bytes,t.length-r<8&&(t=new Uint8Array(s),r=0),yield(0,Ln.concat)([e,n.slice()],e.length+n.length)}}}$E.single=(e,t)=>{var r,n;const i=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:KE;return new Fn(i(e.length),e.slice())};const qE=e=>{const t=dl.decode(e);return qE.bytes=dl.decode.bytes,t};qE.bytes=0;const HE=new Fn,WE="readLength",GE="readData",YE={[WE]:(e,t,r,n)=>{var i,s,o;const a=null!==(i=null===n||void 0===n?void 0:n.lengthDecoder)&&void 0!==i?i:qE,c=null!==(s=null===n||void 0===n?void 0:n.maxLengthLength)&&void 0!==s?s:8,l=null!==(o=null===n||void 0===n?void 0:n.maxDataLength)&&void 0!==o?o:4194304;let u;t.append(e);try{u=a(t.slice())}catch(Up){if(t.length>c)throw me(new Error("message length too long"),"ERR_MSG_LENGTH_TOO_LONG");if(Up instanceof RangeError)return{mode:WE,buffer:t,chunk:void 0,state:void 0,data:void 0};throw Up}if(u>l)throw me(new Error("message data too long"),"ERR_MSG_DATA_TOO_LONG");return e=t.subarray(a.bytes),t=new Fn,null!=(null===n||void 0===n?void 0:n.onLength)&&n.onLength(u),u<=0?{mode:WE,chunk:e,buffer:t,data:HE}:{mode:GE,chunk:e,buffer:t,state:{dataLength:u},data:void 0}},[GE]:(e,t,r,n)=>{if(t.append(e),null==r)throw new Error("state is required");if(t.length<r.dataLength)return{mode:GE,buffer:t,state:r,chunk:void 0,data:void 0};const{dataLength:i}=r,s=t.subarray(0,i),o=t.length>i?t.subarray(i):void 0;return t=new Fn,{mode:WE,chunk:o,buffer:t,state:void 0,data:s}}};function QE(e){return async function*(t){let r,n=new Fn,i=WE;for await(const s of t){let t=new Fn(s);for(;null!=t;){const s=YE[i](t,n,r,e);if(i=s.mode,t=s.chunk,n=s.buffer,r=s.state,null!=s.data){const t=s.data.slice();null!=(null===e||void 0===e?void 0:e.onData)&&e.onData(t),yield t}}}if(n.length>0)throw me(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}}QE.fromReader=(e,t)=>{let r=1;const n=async function*(){for(;;)try{const{done:t,value:n}=await e.next(r);if(!0===t)return;null!=n&&(yield n)}catch(Up){if("ERR_UNDER_READ"===Up.code)return{done:!0,value:null};throw Up}finally{r=1}}();return QE({...null!==t&&void 0!==t?t:{},onLength:e=>{r=e}})(n)};((e,t,r)=>{var n;t=null!==(n=t)&&void 0!==n?n:function(e){var t;return null!=(null===globalThis||void 0===globalThis||null===(t=globalThis.Buffer)||void 0===t?void 0:t.allocUnsafe)?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}(4);return new DataView(t.buffer,t.byteOffset,t.byteLength).setInt32(null!==r&&void 0!==r?r:0,e,!1),t}).bytes=4;class JE{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class XE{constructor(e){this.hwm=null!==e&&void 0!==e?e:16,this.head=new JE(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){const t=this.head;this.head=t.next=new JE(2*this.head.buffer.length),this.head.push(e)}}shift(){const e=this.tail.shift();if(void 0===e&&null!=this.tail.next){const e=this.tail.next;return this.tail.next=null,this.tail=e,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}function ZE(e){return e_((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),e)}function e_(e,t){var r;let n,i,s,o=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,a=new XE;const c=e=>null!=i?i(e):(a.push(e),n),l=e=>s?n:c({done:!1,value:e}),u=e=>s?n:(s=!0,null!=e?(e=>(a=new XE,null!=i?i({error:e}):(a.push({error:e}),n)))(e):c({done:!0}));if(n={[Symbol.asyncIterator](){return this},next:async()=>a.isEmpty()?s?{done:!0}:await new Promise(((t,r)=>{i=s=>{i=null,a.push(s);try{t(e(a))}catch(Up){r(Up)}return n}})):e(a),return:()=>(a=new XE,u(),{done:!0}),throw:e=>(u(e),{done:!0}),push:l,end:u},null==o)return n;const h=n;return n={[Symbol.asyncIterator](){return this},next:()=>h.next(),throw:e=>(h.throw(e),null!=o&&(o(e),o=void 0),{done:!0}),return:()=>(h.return(),null!=o&&(o(),o=void 0),{done:!0}),push:l,end:e=>(h.end(e),null!=o&&(o(e),o=void 0),n)},n}class t_ extends Error{constructor(e,t){super(null!==e&&void 0!==e?e:"The operation was aborted"),this.type="aborted",this.code=null!==t&&void 0!==t?t:"ABORT_ERR"}}function r_(e,t,r){const n=null!==r&&void 0!==r?r:{},i=function(e){if(null!=e){if("function"===typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"===typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"===typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}(e);return async function*(){let r;const s=()=>{null!=r&&r()};for(t.addEventListener("abort",s);;){let o;try{if(t.aborted){const{abortMessage:e,abortCode:t}=n;throw new t_(e,t)}const e=new Promise(((e,t)=>{r=()=>{const{abortMessage:e,abortCode:r}=n;t(new t_(e,r))}}));o=await Promise.race([e,i.next()]),r=null}catch(Up){t.removeEventListener("abort",s);const o="aborted"===Up.type&&t.aborted;if(o&&null!=n.onAbort&&await n.onAbort(e),"function"===typeof i.return)try{const e=i.return();e instanceof Promise&&e.catch((e=>{null!=n.onReturnError&&n.onReturnError(e)}))}catch(Up){null!=n.onReturnError&&n.onReturnError(Up)}if(o&&!0===n.returnOnAbort)return;throw Up}if(!0===o.done)break;yield o.value}t.removeEventListener("abort",s)}()}function n_(e,t,r){return n=>e(r_(n,t,r))}function i_(e,t,r){return{sink:n_(e.sink,t,{...r,onAbort:void 0}),source:r_(e.source,t,r)}}const s_=ge("libp2p-pubsub:peer-streams");class o_ extends FE{constructor(e){super(),this.id=e.id,this.protocol=e.protocol,this._inboundAbortController=new AbortController,this.closed=!1}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(null==this.outboundStream){const e=this.id.toString();throw new Error("No writable connection to "+e)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=r_(bu(this._rawInboundStream,QE()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.dispatchEvent(new VE("stream:inbound")),this.inboundStream}async attachOutboundStream(e){const t=this.outboundStream;return null!=this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=ZE({onEnd:e=>{null!=this._rawOutboundStream&&null!=this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=void 0,this.outboundStream=void 0,null!=e&&this.dispatchEvent(new VE("close"))}}),bu(this.outboundStream,$E(),this._rawOutboundStream).catch((e=>{s_.error(e)})),null==t&&this.dispatchEvent(new VE("stream:outbound")),this.outboundStream}close(){this.closed||(this.closed=!0,null!=this.outboundStream&&this.outboundStream.end(),null!=this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=void 0,this.outboundStream=void 0,this._rawInboundStream=void 0,this.inboundStream=void 0,this.dispatchEvent(new VE("close")))}}class a_{constructor(e,t,r){this.gossip=e,this.msgs=new Map,this.history=[],this.msgIdToStrFn=r;for(let n=0;n<t;n++)this.history[n]=[]}get size(){return this.msgs.size}put(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{msgIdStr:n}=e;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),!0)}observeDuplicate(e,t){const r=this.msgs.get(e);r&&!r.validated&&r.originatingPeers.add(t)}get(e){var t;return null===(t=this.msgs.get(this.msgIdToStrFn(e)))||void 0===t?void 0:t.message}getWithIWantCount(e,t){var r;const n=this.msgs.get(e);if(!n)return null;const i=(null!==(r=n.iwantCounts.get(t))&&void 0!==r?r:0)+1;return n.iwantCounts.set(t,i),{msg:n.message,count:i}}getGossipIDs(e){const t=new Map;for(let r=0;r<this.gossip;r++)this.history[r].forEach((r=>{const n=this.msgs.get(r.msgIdStr);if(n&&n.validated&&e.has(r.topic)){let e=t.get(r.topic);e||(e=[],t.set(r.topic,e)),e.push(r.msgId)}}));return t}validate(e){const t=this.msgs.get(e);if(!t)return null;const{message:r,originatingPeers:n}=t;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}shift(){this.history[this.history.length-1].forEach((e=>{this.msgs.delete(e.msgIdStr)})),this.history.pop(),this.history.unshift([])}remove(e){const t=this.msgs.get(e);return t?(this.msgs.delete(e),t):null}}var c_;!function(e){let t,r,n,i,s,o,a,c;!function(e){e.codec=()=>Ei({1:{name:"subscribe",codec:ai,optional:!0},2:{name:"topic",codec:Ii,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(t=e.SubOpts||(e.SubOpts={})),function(e){e.codec=()=>Ei({1:{name:"from",codec:ci,optional:!0},2:{name:"data",codec:ci,optional:!0},3:{name:"seqno",codec:ci,optional:!0},4:{name:"topic",codec:Ii},5:{name:"signature",codec:ci,optional:!0},6:{name:"key",codec:ci,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(r=e.Message||(e.Message={})),function(t){t.codec=()=>Ei({1:{name:"ihave",codec:e.ControlIHave.codec(),repeats:!0},2:{name:"iwant",codec:e.ControlIWant.codec(),repeats:!0},3:{name:"graft",codec:e.ControlGraft.codec(),repeats:!0},4:{name:"prune",codec:e.ControlPrune.codec(),repeats:!0}}),t.encode=e=>ii(e,t.codec()),t.decode=e=>ni(e,t.codec())}(n=e.ControlMessage||(e.ControlMessage={})),function(e){e.codec=()=>Ei({1:{name:"topicID",codec:Ii,optional:!0},2:{name:"messageIDs",codec:ci,repeats:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(i=e.ControlIHave||(e.ControlIHave={})),function(e){e.codec=()=>Ei({1:{name:"messageIDs",codec:ci,repeats:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(s=e.ControlIWant||(e.ControlIWant={})),function(e){e.codec=()=>Ei({1:{name:"topicID",codec:Ii,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(o=e.ControlGraft||(e.ControlGraft={})),function(t){t.codec=()=>Ei({1:{name:"topicID",codec:Ii,optional:!0},2:{name:"peers",codec:e.PeerInfo.codec(),repeats:!0},3:{name:"backoff",codec:Ri,optional:!0}}),t.encode=e=>ii(e,t.codec()),t.decode=e=>ni(e,t.codec())}(a=e.ControlPrune||(e.ControlPrune={})),function(e){e.codec=()=>Ei({1:{name:"peerID",codec:ci,optional:!0},2:{name:"signedPeerRecord",codec:ci,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(c=e.PeerInfo||(e.PeerInfo={})),e.codec=()=>Ei({1:{name:"subscriptions",codec:e.SubOpts.codec(),repeats:!0},2:{name:"messages",codec:e.Message.codec(),repeats:!0},3:{name:"control",codec:e.ControlMessage.codec(),optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(c_||(c_={}));const l_="/floodsub/1.0.0",u_="/meshsub/1.0.0",h_="/meshsub/1.1.0",d_=5e3;function p_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return{subscriptions:[],messages:e,control:t?{graft:t.graft||[],prune:t.prune||[],ihave:t.ihave||[],iwant:t.iwant||[]}:void 0}}function f_(e){if(e.length<=1)return e;for(let t=0;t<e.length;t++){const r=Math.floor(Math.random()*Math.floor(e.length)),n=e[t];e[t]=e[r],e[r]=n}return e}function y_(e){return e===u_||e===h_}function g_(e){return(0,$t.toString)(e,"base64")}const m_="StrictSign",w_="StrictNoSign";var v_,b_,E_,__,S_,A_;function k_(e){switch(e){case E_.Ignore:return __.Ignore;case E_.Reject:return __.Reject}}!function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(v_||(v_={})),function(e){e[e.Signing=0]="Signing",e[e.Author=1]="Author",e[e.Anonymous=2]="Anonymous"}(b_||(b_={})),function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"}(E_||(E_={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(__||(__={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(S_||(S_={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}(A_||(A_={}));const I_="ERR_INVALID_PEER_SCORE_PARAMS",C_={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},R_={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function T_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...C_,...e,topics:e.topics?Object.entries(e.topics).reduce(((e,t)=>{let[r,n]=t;return e[r]=D_(n),e}),{}):{}}}function D_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...R_,...e}}function P_(e){if(e.topicWeight<0)throw me(new Error("invalid topic weight; must be >= 0"),I_);if(0===e.timeInMeshQuantum)throw me(new Error("invalid TimeInMeshQuantum; must be non zero"),I_);if(e.timeInMeshWeight<0)throw me(new Error("invalid TimeInMeshWeight; must be positive (or 0 to disable)"),I_);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw me(new Error("invalid TimeInMeshQuantum; must be positive"),I_);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw me(new Error("invalid TimeInMeshCap; must be positive"),I_);if(e.firstMessageDeliveriesWeight<0)throw me(new Error("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)"),I_);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw me(new Error("invalid FirstMessageDeliveriesDecay; must be between 0 and 1"),I_);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw me(new Error("invalid FirstMessageDeliveriesCap; must be positive"),I_);if(e.meshMessageDeliveriesWeight>0)throw me(new Error("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)"),I_);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw me(new Error("invalid MeshMessageDeliveriesDecay; must be between 0 and 1"),I_);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw me(new Error("invalid MeshMessageDeliveriesCap; must be positive"),I_);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw me(new Error("invalid MeshMessageDeliveriesThreshold; must be positive"),I_);if(e.meshMessageDeliveriesWindow<0)throw me(new Error("invalid MeshMessageDeliveriesWindow; must be non-negative"),I_);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw me(new Error("invalid MeshMessageDeliveriesActivation; must be at least 1s"),I_);if(e.meshFailurePenaltyWeight>0)throw me(new Error("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)"),I_);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw me(new Error("invalid MeshFailurePenaltyDecay; must be between 0 and 1"),I_);if(e.invalidMessageDeliveriesWeight>0)throw me(new Error("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)"),I_);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw me(new Error("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1"),I_)}const N_={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function x_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...N_,...e}}function O_(e,t,r,n){let i=0;Object.entries(t.topics).forEach((e=>{let[t,n]=e;const s=r.topics[t];if(void 0===s)return;let o=0;if(n.inMesh){let e=n.meshTime/s.timeInMeshQuantum;e>s.timeInMeshCap&&(e=s.timeInMeshCap),o+=e*s.timeInMeshWeight}let a=n.firstMessageDeliveries;if(a>s.firstMessageDeliveriesCap&&(a=s.firstMessageDeliveriesCap),o+=a*s.firstMessageDeliveriesWeight,n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<s.meshMessageDeliveriesThreshold){const e=s.meshMessageDeliveriesThreshold-n.meshMessageDeliveries;o+=e*e*s.meshMessageDeliveriesWeight}o+=n.meshFailurePenalty*s.meshFailurePenaltyWeight;o+=n.invalidMessageDeliveries*n.invalidMessageDeliveries*s.invalidMessageDeliveriesWeight,i+=o*s.topicWeight})),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const s=r.appSpecificScore(e);if(i+=s*r.appSpecificWeight,t.ips.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),s=t?t.size:0;if(s>r.IPColocationFactorThreshold){const e=s-r.IPColocationFactorThreshold;i+=e*e*r.IPColocationFactorWeight}})),t.behaviourPenalty>r.behaviourPenaltyThreshold){const e=t.behaviourPenalty-r.behaviourPenaltyThreshold;i+=e*e*r.behaviourPenaltyWeight}return i}var B_,L_=__webpack_require__(8718);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(B_||(B_={}));class M_{constructor(){this.records=new Map,this.queue=new L_}ensureRecord(e){let t=this.records.get(e);if(t)return t;t={status:B_.unknown,firstSeen:Date.now(),validated:0,peers:new Set},this.records.set(e,t);const r={msgId:e,expire:Date.now()+12e4};return this.queue.push(r),t}gc(){const e=Date.now();let t=this.queue.peekFront();for(;t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}function U_(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}function j_(e){return null!=e&&"function"===typeof e.init}class F_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.started=!1,null!=e.peerId&&this.setPeerId(e.peerId),null!=e.addressManager&&this.setAddressManager(e.addressManager),null!=e.peerStore&&this.setPeerStore(e.peerStore),null!=e.upgrader&&this.setUpgrader(e.upgrader),null!=e.metrics&&this.setMetrics(e.metrics),null!=e.registrar&&this.setRegistrar(e.registrar),null!=e.connectionManager&&this.setConnectionManager(e.connectionManager),null!=e.transportManager&&this.setTransportManager(e.transportManager),null!=e.connectionGater&&this.setConnectionGater(e.connectionGater),null!=e.contentRouting&&this.setContentRouting(e.contentRouting),null!=e.peerRouting&&this.setPeerRouting(e.peerRouting),null!=e.datastore&&this.setDatastore(e.datastore),null!=e.connectionProtector&&this.setConnectionProtector(e.connectionProtector),null!=e.dht&&this.setDHT(e.dht),null!=e.pubsub&&this.setPubSub(e.pubsub)}isStarted(){return this.started}async beforeStart(){await Promise.all(Object.values(this).filter((e=>U_(e))).map((async e=>{null!=e.beforeStart&&await e.beforeStart()})))}async start(){await Promise.all(Object.values(this).filter((e=>U_(e))).map((async e=>{await e.start()}))),this.started=!0}async afterStart(){await Promise.all(Object.values(this).filter((e=>U_(e))).map((async e=>{null!=e.afterStart&&await e.afterStart()})))}async beforeStop(){await Promise.all(Object.values(this).filter((e=>U_(e))).map((async e=>{null!=e.beforeStop&&await e.beforeStop()})))}async stop(){await Promise.all(Object.values(this).filter((e=>U_(e))).map((async e=>{await e.stop()}))),this.started=!1}async afterStop(){await Promise.all(Object.values(this).filter((e=>U_(e))).map((async e=>{null!=e.afterStop&&await e.afterStop()})))}setPeerId(e){return this.peerId=e,e}getPeerId(){if(null==this.peerId)throw me(new Error("peerId not set"),"ERR_SERVICE_MISSING");return this.peerId}setMetrics(e){return this.metrics=e,j_(e)&&e.init(this),e}getMetrics(){return this.metrics}setAddressManager(e){return this.addressManager=e,j_(e)&&e.init(this),e}getAddressManager(){if(null==this.addressManager)throw me(new Error("addressManager not set"),"ERR_SERVICE_MISSING");return this.addressManager}setPeerStore(e){return this.peerStore=e,j_(e)&&e.init(this),e}getPeerStore(){if(null==this.peerStore)throw me(new Error("peerStore not set"),"ERR_SERVICE_MISSING");return this.peerStore}setUpgrader(e){return this.upgrader=e,j_(e)&&e.init(this),e}getUpgrader(){if(null==this.upgrader)throw me(new Error("upgrader not set"),"ERR_SERVICE_MISSING");return this.upgrader}setRegistrar(e){return this.registrar=e,j_(e)&&e.init(this),e}getRegistrar(){if(null==this.registrar)throw me(new Error("registrar not set"),"ERR_SERVICE_MISSING");return this.registrar}setConnectionManager(e){return this.connectionManager=e,j_(e)&&e.init(this),e}getConnectionManager(){if(null==this.connectionManager)throw me(new Error("connectionManager not set"),"ERR_SERVICE_MISSING");return this.connectionManager}setTransportManager(e){return this.transportManager=e,j_(e)&&e.init(this),e}getTransportManager(){if(null==this.transportManager)throw me(new Error("transportManager not set"),"ERR_SERVICE_MISSING");return this.transportManager}setConnectionGater(e){return this.connectionGater=e,j_(e)&&e.init(this),e}getConnectionGater(){if(null==this.connectionGater)throw me(new Error("connectionGater not set"),"ERR_SERVICE_MISSING");return this.connectionGater}setContentRouting(e){return this.contentRouting=e,j_(e)&&e.init(this),e}getContentRouting(){if(null==this.contentRouting)throw me(new Error("contentRouting not set"),"ERR_SERVICE_MISSING");return this.contentRouting}setPeerRouting(e){return this.peerRouting=e,j_(e)&&e.init(this),e}getPeerRouting(){if(null==this.peerRouting)throw me(new Error("peerRouting not set"),"ERR_SERVICE_MISSING");return this.peerRouting}setDatastore(e){return this.datastore=e,j_(e)&&e.init(this),e}getDatastore(){if(null==this.datastore)throw me(new Error("datastore not set"),"ERR_SERVICE_MISSING");return this.datastore}setConnectionProtector(e){return this.connectionProtector=e,j_(e)&&e.init(this),e}getConnectionProtector(){return this.connectionProtector}setDHT(e){return this.dht=e,j_(e)&&e.init(this),e}getDHT(){if(null==this.dht)throw me(new Error("dht not set"),"ERR_SERVICE_MISSING");return this.dht}setPubSub(e){return this.pubsub=e,j_(e)&&e.init(this),e}getPubSub(){if(null==this.pubsub)throw me(new Error("pubsub not set"),"ERR_SERVICE_MISSING");return this.pubsub}}const z_=ge("libp2p:gossipsub:score");class V_{constructor(e,t,r){var n;this.params=e,this.metrics=t,this.peerStats=new Map,this.peerIPs=new Map,this.scoreCache=new Map,this.deliveryRecords=new M_,this.components=new F_,function(e){for(const[r,n]of Object.entries(e.topics))try{P_(n)}catch(t){throw me(new Error(`invalid score parameters for topic ${r}: ${t.message}`),I_)}if(e.topicScoreCap<0)throw me(new Error("invalid topic score cap; must be positive (or 0 for no cap)"),I_);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw me(new Error("missing application specific score function"),I_);if(e.IPColocationFactorWeight>0)throw me(new Error("invalid IPColocationFactorWeight; must be negative (or 0 to disable)"),I_);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw me(new Error("invalid IPColocationFactorThreshold; must be at least 1"),I_);if(e.behaviourPenaltyWeight>0)throw me(new Error("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)"),I_);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw me(new Error("invalid BehaviourPenaltyDecay; must be between 0 and 1"),I_);if(e.decayInterval<1e3)throw me(new Error("invalid DecayInterval; must be at least 1s"),I_);if(e.decayToZero<=0||e.decayToZero>=1)throw me(new Error("invalid DecayToZero; must be between 0 and 1"),I_)}(e),this.scoreCacheValidityMs=r.scoreCacheValidityMs,this.computeScore=null!==(n=r.computeScore)&&void 0!==n?n:O_}init(e){this.components=e}get size(){return this.peerStats.size}start(){this._backgroundInterval?z_("Peer score already running"):(this._backgroundInterval=setInterval((()=>this.background()),this.params.decayInterval),z_("started"))}stop(){this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),z_("stopped")):z_("Peer score already stopped")}background(){this.refreshScores(),this.updateIPs(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((e=>{let[t,r]=e;return[t,r]})))}refreshScores(){const e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach(((r,n)=>{r.connected?(Object.entries(r.topics).forEach((r=>{let[n,i]=r;const s=this.params.topics[n];void 0!==s&&(i.firstMessageDeliveries*=s.firstMessageDeliveriesDecay,i.firstMessageDeliveries<t&&(i.firstMessageDeliveries=0),i.meshMessageDeliveries*=s.meshMessageDeliveriesDecay,i.meshMessageDeliveries<t&&(i.meshMessageDeliveries=0),i.meshFailurePenalty*=s.meshFailurePenaltyDecay,i.meshFailurePenalty<t&&(i.meshFailurePenalty=0),i.invalidMessageDeliveries*=s.invalidMessageDeliveriesDecay,i.invalidMessageDeliveries<t&&(i.invalidMessageDeliveries=0),i.inMesh&&(i.meshTime=e-i.graftTime,i.meshTime>s.meshMessageDeliveriesActivation&&(i.meshMessageDeliveriesActive=!0)))})),r.behaviourPenalty*=this.params.behaviourPenaltyDecay,r.behaviourPenalty<t&&(r.behaviourPenalty=0)):e>r.expire&&(this.removeIPs(n,r.ips),this.peerStats.delete(n),this.scoreCache.delete(n))}))}score(e){var t,r;null===(t=this.metrics)||void 0===t||t.scoreFnCalls.inc();const n=this.peerStats.get(e);if(!n)return 0;const i=Date.now(),s=this.scoreCache.get(e);if(s&&s.cacheUntil>i)return s.score;null===(r=this.metrics)||void 0===r||r.scoreFnRuns.inc();const o=this.computeScore(e,n,this.params,this.peerIPs),a=i+this.scoreCacheValidityMs;var c;s?(null===(c=this.metrics)||void 0===c||c.scoreCachedDelta.observe(Math.abs(o-s.score)),s.score=o,s.cacheUntil=a):this.scoreCache.set(e,{score:o,cacheUntil:a});return o}addPenalty(e,t,r){const n=this.peerStats.get(e);var i;n&&(n.behaviourPenalty+=t,null===(i=this.metrics)||void 0===i||i.onScorePenalty(r))}addPeer(e){const t={connected:!0,expire:0,topics:{},ips:[],behaviourPenalty:0};this.peerStats.set(e,t);const r=this.getIPs(e);this.setIPs(e,r,t.ips),t.ips=r}removePeer(e){const t=this.peerStats.get(e);if(t){if(this.score(e)>0)return this.removeIPs(e,t.ips),void this.peerStats.delete(e);Object.entries(t.topics).forEach((e=>{let[t,r]=e;r.firstMessageDeliveries=0;const n=this.params.topics[t].meshMessageDeliveriesThreshold;if(r.inMesh&&r.meshMessageDeliveriesActive&&r.meshMessageDeliveries<n){const e=n-r.meshMessageDeliveries;r.meshFailurePenalty+=e*e}r.inMesh=!1,r.meshMessageDeliveriesActive=!1})),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);e&&(e.inMesh=!0,e.graftTime=Date.now(),e.meshTime=0,e.meshMessageDeliveriesActive=!1)}}prune(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);if(e){const r=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<r){const t=r-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.meshMessageDeliveriesActive=!1,e.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,r){this.markFirstMessageDelivery(e,r);const n=this.deliveryRecords.ensureRecord(t),i=Date.now();n.status===B_.unknown?(n.status=B_.valid,n.validated=i,n.peers.forEach((t=>{t!==e.toString()&&this.markDuplicateMessageDelivery(t,r)}))):z_("unexpected delivery: message from %s was first seen %s ago and has delivery status %d",e,i-n.firstSeen,B_[n.status])}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,r,n){switch(n){case __.Error:return void this.markInvalidMessageDelivery(e,r);case __.Blacklisted:return}const i=this.deliveryRecords.ensureRecord(t);if(i.status===B_.unknown){if(n===__.Ignore)return i.status=B_.ignored,void i.peers.clear();i.status=B_.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach((e=>{this.markInvalidMessageDelivery(e,r)})),i.peers.clear()}else z_("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeen,B_[i.status])}duplicateMessage(e,t,r){const n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case B_.unknown:n.peers.add(e);break;case B_.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case B_.invalid:this.markInvalidMessageDelivery(e,r);case B_.ignored:}}markInvalidMessageDelivery(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);e&&(e.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){const r=this.peerStats.get(e);if(r){const e=this.getPtopicStats(r,t);if(e){let r=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries=Math.min(r,e.firstMessageDeliveries+1),e.inMesh&&(r=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries=Math.min(r,e.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,r){const n=this.peerStats.get(e);if(n){const e=void 0!==r?Date.now():0,s=this.getPtopicStats(n,t);if(s&&s.inMesh){const n=this.params.topics[t];if(void 0!==r){var i;const s=e-r,o=s>n.meshMessageDeliveriesWindow;if(null===(i=this.metrics)||void 0===i||i.onDuplicateMsgDelivery(t,s,o),o)return}const o=n.meshMessageDeliveriesCap;s.meshMessageDeliveries=Math.min(o,s.meshMessageDeliveries+1)}}}getIPs(e){return this.components.getConnectionManager().getConnections(vn(e)).map((e=>e.remoteAddr.toOptions().host))}setIPs(e,t,r){e:for(const n of t){for(const e of r)if(n===e)continue e;let t=this.peerIPs.get(n);t||(t=new Set,this.peerIPs.set(n,t)),t.add(e)}e:for(const n of r){for(const e of t)if(n===e)continue e;const r=this.peerIPs.get(n);r&&(r.delete(e),r.size||this.peerIPs.delete(n))}}removeIPs(e,t){t.forEach((t=>{const r=this.peerIPs.get(t);r&&(r.delete(e),r.size||this.peerIPs.delete(t))}))}updateIPs(){this.peerStats.forEach(((e,t)=>{const r=this.getIPs(t);this.setIPs(t,r,e.ips),e.ips=r}))}getPtopicStats(e,t){let r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}class K_{constructor(e,t,r){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=r,this.promises=new Map,this.requestMsByMsg=new Map,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){const r=t[Math.floor(Math.random()*t.length)],n=this.msgIdToStrFn(r);let i=this.promises.get(n);i||(i=new Map,this.promises.set(n,i));const s=Date.now();i.has(e)||(i.set(e,s+this.gossipsubIWantFollowupMs),this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(n)||this.requestMsByMsg.set(n,s)))}getBrokenPromises(){var e;const t=Date.now(),r=new Map;let n=0;return this.promises.forEach(((e,i)=>{e.forEach(((i,s)=>{var o;i<t&&(r.set(s,(null!==(o=r.get(s))&&void 0!==o?o:0)+1),e.delete(s),n++)})),e.size||this.promises.delete(i)})),null===(e=this.metrics)||void 0===e||e.iwantPromiseBroken.inc(n),r}deliverMessage(e){this.trackMessage(e);const t=this.promises.get(e);t&&(this.promises.delete(e),this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(t.size)))}rejectMessage(e,t){this.trackMessage(e),t!==__.Error&&this.promises.delete(e)}clear(){this.promises.clear()}prune(){const e=Date.now()-this.requestMsByMsgExpire;for(const[t,r]of this.requestMsByMsg.entries()){if(!(r<e))break;this.requestMsByMsg.delete(t)}}trackMessage(e){if(this.metrics){const t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}class $_{constructor(e){this.entries=new Map,this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs})}prune(){const e=Date.now();for(const[t,r]of this.entries.entries()){if(!(r.validUntilMs<e))break;this.entries.delete(t)}}has(e){return this.entries.has(e)}get(e){const t=this.entries.get(e);return t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}var q_,H_,W_,G_,Y_,Q_;!function(e){e.forward="forward",e.publish="publish"}(q_||(q_={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}(H_||(H_={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Unsub="unsubscribed",e.Excess="excess"}(W_||(W_={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(G_||(G_={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}(Y_||(Y_={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}(Q_||(Q_={}));var J_=__webpack_require__(9070);const X_=(0,zt.fromString)("libp2p-pubsub:");function Z_(e){if(null==e.sequenceNumber)throw Error("missing seqno field");return((e,t)=>{const r=(0,zt.fromString)(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n})(e.from.toBytes(),e.sequenceNumber)}async function eS(e){return await hn.sha256.encode(e.data)}function tS(e,t,r,n,i){let s=0;const o=new Map;if(Object.entries(t.topics).forEach((e=>{var t;let[n,a]=e;const c=null!==(t=i.get(n))&&void 0!==t?t:"unknown",l=r.topics[n];if(void 0===l)return;let u=o.get(c);u||(u={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},o.set(c,u));let h=0,d=0,p=0,f=0,y=0;if(a.inMesh){h+=Math.max(a.meshTime/l.timeInMeshQuantum,l.timeInMeshCap)*l.timeInMeshWeight}let g=a.firstMessageDeliveries;if(g>l.firstMessageDeliveriesCap&&(g=l.firstMessageDeliveriesCap),d+=g*l.firstMessageDeliveriesWeight,a.meshMessageDeliveriesActive&&a.meshMessageDeliveries<l.meshMessageDeliveriesThreshold){const e=l.meshMessageDeliveriesThreshold-a.meshMessageDeliveries;p+=e*e*l.meshMessageDeliveriesWeight}f+=a.meshFailurePenalty*l.meshFailurePenaltyWeight;y+=a.invalidMessageDeliveries*a.invalidMessageDeliveries*l.invalidMessageDeliveriesWeight,s+=(h+d+p+f+y)*l.topicWeight,u.p1w+=h,u.p2w+=d,u.p3w+=p,u.p3bw+=f,u.p4w+=y})),r.topicScoreCap>0&&s>r.topicScoreCap){s=r.topicScoreCap;const e=r.topicScoreCap/s;for(const t of o.values())t.p1w*=e,t.p2w*=e,t.p3w*=e,t.p3bw*=e,t.p4w*=e}let a=0,c=0,l=0;a+=r.appSpecificScore(e)*r.appSpecificWeight,t.ips.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),i=t?t.size:0;if(i>r.IPColocationFactorThreshold){const e=i-r.IPColocationFactorThreshold;c+=e*e*r.IPColocationFactorWeight}}));return l+=t.behaviourPenalty*t.behaviourPenalty*r.behaviourPenaltyWeight,s+=a+c+l,{byTopic:o,p5w:a,p6w:c,p7w:l,score:s}}function rS(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const n=new Set;if(t<=0)return n;for(const i of e){if(n.size>=t)break;r(i)&&(n.add(i),e.delete(i))}return n}var nS;!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(nS||(nS={}));class iS extends FE{constructor(){var e,t,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.multicodecs=[h_,u_],this.peers=new Map,this.direct=new Set,this.floodsubPeers=new Set,this.acceptFromWhitelist=new Map,this.topics=new Map,this.subscriptions=new Set,this.mesh=new Map,this.fanout=new Map,this.fanoutLastpub=new Map,this.gossip=new Map,this.control=new Map,this.peerhave=new Map,this.iasked=new Map,this.backoff=new Map,this.outbound=new Map,this.topicValidators=new Map,this.heartbeatTicks=0,this.components=new F_,this.directPeerInitial=null,this.status={code:nS.stopped},this.heartbeatTimer=null,this.runHeartbeat=()=>{var e;const t=null===(e=this.metrics)||void 0===e?void 0:e.heartbeatDuration.startTimer();this.heartbeat().catch((e=>{this.log("Error running heartbeat",e)})).finally((()=>{if(null!=t&&t(),this.status.code===nS.started){clearTimeout(this.status.heartbeatTimeout);let t=(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;var e;if(t<.25*this.opts.heartbeatInterval)t+=this.opts.heartbeatInterval,null===(e=this.metrics)||void 0===e||e.heartbeatSkipped.inc();this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,t)}}))};const i={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:12e4,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300,...n,scoreParams:T_(n.scoreParams),scoreThresholds:x_(n.scoreThresholds)};if(this.globalSignaturePolicy=null!==(e=i.globalSignaturePolicy)&&void 0!==e?e:m_,i.fallbackToFloodsub&&this.multicodecs.push(l_),this.log=ge(null!==(t=i.debugName)&&void 0!==t?t:"libp2p:gossipsub"),this.opts=i,this.direct=new Set(i.directPeers.map((e=>e.id.toString()))),this.seenCache=new $_({validityMs:i.seenTTL}),this.publishedMessageIds=new $_({validityMs:i.seenTTL}),n.msgIdFn)this.msgIdFn=n.msgIdFn;else switch(this.globalSignaturePolicy){case m_:this.msgIdFn=Z_;break;case w_:this.msgIdFn=eS}if(n.fastMsgIdFn&&(this.fastMsgIdFn=n.fastMsgIdFn,this.fastMsgIdCache=new $_({validityMs:i.seenTTL})),this.msgIdToStrFn=null!==(r=n.msgIdToStrFn)&&void 0!==r?r:g_,this.mcache=n.messageCache||new a_(i.mcacheGossip,i.mcacheLength,this.msgIdToStrFn),n.dataTransform&&(this.dataTransform=n.dataTransform),n.metricsRegister){if(!n.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");const e=Math.max(...Object.values(i.scoreParams.topics).map((e=>e.meshMessageDeliveriesWindow)),1e3),t=function(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEvents:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_total",help:"Number of times we include peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),meshPeerChurnEvents:e.gauge({name:"gossipsub_peer_churn_events_total",help:"Number of times we remove peers in a topic mesh for different reasons",labelNames:["topic","reason"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),asyncValidationResult:e.gauge({name:"gossipsub_async_validation_result_total",help:"Message validation result for each topic",labelNames:["topic","acceptance"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeers:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),msgPublishPeersByGroup:e.gauge({name:"gossipsub_msg_publish_peers_by_group",help:"Total count of peers (by group) that we publish a msg to",labelNames:["topic","peerGroup"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedStatus:e.gauge({name:"gossipsub_msg_received_status_total",help:"Tracks distribution of recv msgs by duplicate, invalid, valid",labelNames:["topic","status"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["topic","error"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,1*r.maxMeshMessageDeliveriesWindowSec,2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores",labelNames:["topic","p"]}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,1*r.behaviourPenaltyThreshold,2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,1*r.gossipPromiseExpireSec,2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),topicStrToLabel:t,toTopic(e){var t;return null!==(t=this.topicStrToLabel.get(e))&&void 0!==t?t:e},onJoin(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh(e,t,r){const n=this.toTopic(e);this.meshPeerInclusionEvents.inc({topic:n,reason:t},r)},onRemoveFromMesh(e,t,r){const n=this.toTopic(e);this.meshPeerChurnEvents.inc({topic:n,reason:t},r)},onReportValidationMcacheHit(e){this.asyncValidationMcacheHit.inc({hit:e?"hit":"miss"})},onReportValidation(e,t){const r=this.toTopic(e);this.asyncValidationResult.inc({topic:r,acceptance:t})},onScorePenalty(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv(e,t,r){const n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv(e,t){for(const[r,n]of e){const e=this.toTopic(r);this.iwantRcvMsgids.inc({topic:e},n)}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg(e,t){const r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg(e,t,r,n){const i=this.toTopic(e);this.msgPublishCount.inc({topic:i},1),this.msgPublishBytes.inc({topic:i},r*n),this.msgPublishPeers.inc({topic:i},r),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"direct"},t.direct),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"floodsub"},t.floodsub),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"mesh"},t.mesh),this.msgPublishPeersByGroup.inc({topic:i,peerGroup:"fanout"},t.fanout)},onMsgRecvPreValidation(e){const t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvResult(e,t){const r=this.toTopic(e);this.msgReceivedStatus.inc({topic:r,status:t})},onMsgRecvInvalid(e,t){const r=this.toTopic(e),n=t.reason===__.Error?t.error:t.reason;this.msgReceivedInvalid.inc({topic:r,error:n},1)},onDuplicateMsgDelivery(e,t,r){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),r){const t=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:t},1)}},onRpcRecv(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),this.rpcRecvSubscription.inc(e.subscriptions.length),this.rpcRecvMessage.inc(e.messages.length),e.control&&(this.rpcRecvControl.inc(1),this.rpcRecvIHave.inc(e.control.ihave.length),this.rpcRecvIWant.inc(e.control.iwant.length),this.rpcRecvGraft.inc(e.control.graft.length),this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),this.rpcSentSubscription.inc(e.subscriptions.length),this.rpcSentMessage.inc(e.messages.length),e.control){const t=e.control.ihave.length,r=e.control.iwant.length,n=e.control.graft.length,i=e.control.prune.length;t>0&&this.rpcSentIHave.inc(t),r>0&&this.rpcSentIWant.inc(r),n>0&&this.rpcSentGraft.inc(n),i>0&&this.rpcSentPrune.inc(i),(t>0||r>0||n>0||i>0)&&this.rpcSentControl.inc(1)}},registerScores(e,t){let r=0,n=0,i=0,s=0;for(const o of e)o>=t.graylistThreshold&&r++,o>=t.publishThreshold&&n++,o>=t.gossipThreshold&&i++,o>=0&&s++;this.peersByScoreThreshold.set({threshold:Q_.graylist},r),this.peersByScoreThreshold.set({threshold:Q_.publish},n),this.peersByScoreThreshold.set({threshold:Q_.gossip},i),this.peersByScoreThreshold.set({threshold:Q_.mesh},s),this.score.set(e)},registerScoreWeights(e){for(const[t,r]of e.byTopic)this.scoreWeights.set({topic:t,p:"p1"},r.p1w),this.scoreWeights.set({topic:t,p:"p2"},r.p2w),this.scoreWeights.set({topic:t,p:"p3"},r.p3w),this.scoreWeights.set({topic:t,p:"p3b"},r.p3bw),this.scoreWeights.set({topic:t,p:"p4"},r.p4w);this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh(e,t){const r=new Map;e.forEach(((e,t)=>{var n;const i=null!==(n=this.topicStrToLabel.get(t))&&void 0!==n?n:"unknown";let s=r.get(i);s||(s=new Set,r.set(i,s)),e.forEach((e=>{var t;return null===(t=s)||void 0===t?void 0:t.add(e)}))}));for(const[n,i]of r){const e=[];i.forEach((r=>{var n;e.push(null!==(n=t.get(r))&&void 0!==n?n:0)})),this.scorePerMesh.set({topic:n},e)}}}}(n.metricsRegister,n.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:i.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:e/1e3});t.mcacheSize.addCollect((()=>this.onScrapeMetrics(t)));for(const r of this.multicodecs)t.protocolsEnabled.set({protocol:r},1);this.metrics=t}else this.metrics=null;this.gossipTracer=new K_(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new V_(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:i.heartbeatInterval})}getPeers(){return[...this.peers.keys()].map((e=>vn(e)))}isStarted(){return this.status.code===nS.started}async init(e){this.components=e,this.score.init(e)}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await async function(e,t){switch(e){case m_:{if(!t)throw Error("Must provide PeerId");if(null==t.privateKey)throw Error("Cannot sign message, no private key present");if(null==t.publicKey)throw Error("Cannot sign message, no public key present");const e=await ya(t.privateKey);return{type:b_.Signing,author:t,key:t.publicKey,privateKey:e}}case w_:return{type:b_.Anonymous};default:throw new Error(`Unknown signature policy "${e}"`)}}(this.globalSignaturePolicy,this.components.getPeerId()),await Promise.all(this.opts.directPeers.map((async e=>{await this.components.getPeerStore().addressBook.add(e.id,e.addrs)}))),await this.components.getRegistrar().handle(this.multicodecs,this.onIncomingStream.bind(this));const e=LE({onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)}),t=await this.components.getRegistrar().register(this.multicodecs,e),r=setTimeout(this.runHeartbeat,100);this.status={code:nS.started,registrarTopologyId:t,heartbeatTimeout:r,hearbeatStartMs:Date.now()+100},this.log("started"),this.score.start(),this.directPeerInitial=setTimeout((()=>{Promise.resolve().then((async()=>{await Promise.all(Array.from(this.direct).map((async e=>await this.connect(e))))})).catch((e=>{this.log(e)}))}),1e3)}async stop(){if(this.log("stopping"),this.status.code!==nS.started)return;const{registrarTopologyId:e}=this.status;this.status={code:nS.stopped},this.components.getRegistrar().unregister(e);for(const t of this.peers.values())t.close();this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache&&this.fastMsgIdCache.clear(),this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream(e){let{protocol:t,stream:r,connection:n}=e;if(!this.isStarted())return;const i=n.remotePeer,s=this.addPeer(i,t,n.stat.direction).attachInboundStream(r);this.pipePeerReadStream(i,s).catch((e=>this.log(e)))}onPeerConnected(e,t){this.isStarted()&&(this.log("topology peer connected %p %s",e,t.stat.direction),Promise.resolve().then((async()=>{try{const{stream:r,protocol:n}=await t.newStream(this.multicodecs),i=this.addPeer(e,n,t.stat.direction);await i.attachOutboundStream(r)}catch(Up){this.log(Up)}this.subscriptions.size>0&&this.sendSubscriptions(e.toString(),Array.from(this.subscriptions),!0)})))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}addPeer(e,t,r){var n;const i=e.toString();let s=this.peers.get(i);return void 0===s&&(this.log("new peer %p",e),s=new o_({id:e,protocol:t}),this.peers.set(i,s),s.addEventListener("close",(()=>this.removePeer(e)))),this.score.addPeer(i),t===l_&&this.floodsubPeers.add(i),null===(n=this.metrics)||void 0===n||n.peersPerProtocol.inc({protocol:t},1),this.outbound.get(i)||this.outbound.set(i,"outbound"===r),s}removePeer(e){const t=e.toString(),r=this.peers.get(t);if(null!=r){var n;null===(n=this.metrics)||void 0===n||n.peersPerProtocol.inc({protocol:r.protocol},-1),this.log("delete peer %p",e),this.peers.delete(t),r.close();for(const e of this.topics.values())e.delete(t)}for(const[s,o]of this.mesh){var i;if(!0===o.delete(t))null===(i=this.metrics)||void 0===i||i.onRemoveFromMesh(s,W_.Dc,1)}for(const s of this.fanout.values())s.delete(t);return this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t),r}get started(){return this.status.code===nS.started}getMeshPeers(e){const t=this.mesh.get(e);return t?Array.from(t):[]}getSubscribers(e){const t=this.topics.get(e);return(t?Array.from(t):[]).map((e=>vn(e)))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){try{await bu(t,(async t=>{for await(const i of t)try{var r;const t=i instanceof Uint8Array?i:i.slice(),n=c_.decode(t);null===(r=this.metrics)||void 0===r||r.onRpcRecv(n,t.length),this.opts.awaitRpcHandler?await this.handleReceivedRpc(e,n):this.handleReceivedRpc(e,n).catch((e=>this.log(e)))}catch(n){this.log(n)}}))}catch(Up){this.log.error(Up),this.onPeerDisconnected(e)}}async handleReceivedRpc(e,t){var r;if(!this.acceptFrom(e.toString()))return this.log("received message from unacceptable peer %p",e),void(null===(r=this.metrics)||void 0===r||r.rpcRecvNotAccepted.inc());this.log("rpc from %p",e),t.subscriptions.length>0&&(t.subscriptions.forEach((t=>{this.handleReceivedSubscription(e,t)})),this.dispatchEvent(new VE("subscription-change",{detail:{peerId:e,subscriptions:t.subscriptions.filter((e=>null!==e.topic)).map((e=>{var t;return{topic:null!==(t=e.topic)&&void 0!==t?t:"",subscribe:Boolean(e.subscribe)}}))}})));for(const n of t.messages){const t=this.handleReceivedMessage(e,n).catch((e=>this.log(e)));this.opts.awaitRpcMessageHandler&&await t}t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t){if(null==t.topic)return;this.log("subscription update from %p topic %s",e,t.topic);let r=this.topics.get(t.topic);null==r&&(r=new Set,this.topics.set(t.topic,r)),t.subscribe?r.add(e.toString()):r.delete(e.toString())}async handleReceivedMessage(e,t){var r,n,i;null===(r=this.metrics)||void 0===r||r.onMsgRecvPreValidation(t.topic);const s=await this.validateReceivedMessage(e,t);switch(null===(n=this.metrics)||void 0===n||n.onMsgRecvResult(t.topic,s.code),s.code){case A_.duplicate:return this.score.duplicateMessage(e.toString(),s.msgIdStr,t.topic),void this.mcache.observeDuplicate(s.msgIdStr,e.toString());case A_.invalid:if(s.msgIdStr){const r=s.msgIdStr;this.score.rejectMessage(e.toString(),r,t.topic,s.reason),this.gossipTracer.rejectMessage(r,s.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);return void(null===(i=this.metrics)||void 0===i||i.onMsgRecvInvalid(t.topic,s));case A_.valid:if(this.score.validateMessage(s.messageId.msgIdStr),this.gossipTracer.deliverMessage(s.messageId.msgIdStr),this.mcache.put(s.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)){this.components.getPeerId().equals(e)&&!this.opts.emitSelf||(super.dispatchEvent(new VE("gossipsub:message",{detail:{propagationSource:e,msgId:s.messageId.msgIdStr,msg:s.msg}})),super.dispatchEvent(new VE("message",{detail:s.msg})))}this.opts.asyncValidation||this.forwardMessage(s.messageId.msgIdStr,t,e.toString())}}async validateReceivedMessage(e,t){var r,n,i;const s=null===(r=this.fastMsgIdFn)||void 0===r?void 0:r.call(this,t),o=s?null===(n=this.fastMsgIdCache)||void 0===n?void 0:n.get(s):void 0;if(o)return{code:A_.duplicate,msgIdStr:o};const a=await async function(e,t){switch(e){case w_:return null!=t.signature?{valid:!1,error:S_.SignaturePresent}:null!=t.seqno?{valid:!1,error:S_.SeqnoPresent}:null!=t.key?{valid:!1,error:S_.FromPresent}:{valid:!0,fromPeerId:null};case m_:{if(null==t.seqno)return{valid:!1,error:S_.InvalidSeqno};if(8!==t.seqno.length)return{valid:!1,error:S_.InvalidSeqno};if(null==t.signature)return{valid:!1,error:S_.InvalidSignature};if(null==t.from)return{valid:!1,error:S_.InvalidPeerId};let e,n;try{e=bn(t.from)}catch(r){return{valid:!1,error:S_.InvalidPeerId}}if(t.key){if(n=pa(t.key),void 0!==e.publicKey&&!(0,un.equals)(n.bytes,e.publicKey))return{valid:!1,error:S_.InvalidPeerId}}else{if(null==e.publicKey)return{valid:!1,error:S_.InvalidPeerId};n=pa(e.publicKey)}const i={from:t.from,data:t.data,seqno:t.seqno,topic:t.topic,signature:void 0,key:void 0},s=(0,Ln.concat)([X_,c_.Message.encode(i)]);return await n.verify(s,t.signature)?{valid:!0,fromPeerId:e}:{valid:!1,error:S_.InvalidSignature}}}}(this.globalSignaturePolicy,t);if(!a.valid)return{code:A_.invalid,reason:__.Error,error:a.error};let c;try{var l;const e=null!==(l=t.data)&&void 0!==l?l:new Uint8Array(0);c=this.dataTransform?this.dataTransform.inboundTransform(t.topic,e):e}catch(y){return this.log("Invalid message, transform failed",y),{code:A_.invalid,reason:__.Error,error:S_.TransformFailed}}if(null==t.from)return this.log("Invalid message, transform failed"),{code:A_.invalid,reason:__.Error,error:S_.TransformFailed};const u={from:bn(t.from),data:c,sequenceNumber:null==t.seqno?void 0:BigInt(`0x${(0,$t.toString)(t.seqno,"base16")}`),topic:t.topic},h=await this.msgIdFn(u),d=this.msgIdToStrFn(h),p={msgId:h,msgIdStr:d};if(s&&(null===(i=this.fastMsgIdCache)||void 0===i||i.put(s,d)),this.seenCache.has(d))return{code:A_.duplicate,msgIdStr:d};this.seenCache.put(d);const f=this.topicValidators.get(t.topic);if(null!=f){let t;try{t=await f(u.topic,u,e)}catch(y){const e=y.code;"ERR_TOPIC_VALIDATOR_IGNORE"===e&&(t=E_.Ignore),t="ERR_TOPIC_VALIDATOR_REJECT"===e?E_.Reject:E_.Ignore}if(t!==E_.Accept)return{code:A_.invalid,reason:k_(t),msgIdStr:d}}return{code:A_.valid,messageId:p,msg:u}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,r){this.sendRpc(e,{subscriptions:t.map((e=>({topic:e,subscribe:r}))),messages:[]})}async handleControlMessage(e,t){if(void 0===t)return;const r=this.handleIHave(e,t.ihave),n=this.handleIWant(e,t.iwant),i=await this.handleGraft(e,t.graft);await this.handlePrune(e,t.prune),(r.length||n.length||i.length)&&this.sendRpc(e,p_(n,{iwant:r,prune:i}))}acceptFrom(e){if(this.direct.has(e))return!0;const t=Date.now(),r=this.acceptFromWhitelist.get(e);if(r&&r.messagesAccepted<128&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;const n=this.score.score(e);return n>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){var r,n;if(!t.length)return[];const i=this.score.score(e);var s;if(i<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),null===(s=this.metrics)||void 0===s||s.ihaveRcvIgnored.inc({reason:Y_.LowScore}),[];const o=(null!==(r=this.peerhave.get(e))&&void 0!==r?r:0)+1;var a;if(this.peerhave.set(e,o),o>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,o),null===(a=this.metrics)||void 0===a||a.ihaveRcvIgnored.inc({reason:Y_.MaxIhave}),[];const c=null!==(n=this.iasked.get(e))&&void 0!==n?n:0;var l;if(c>=d_)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,c),null===(l=this.metrics)||void 0===l||l.ihaveRcvIgnored.inc({reason:Y_.MaxIasked}),[];const u=new Map;if(t.forEach((e=>{var t;let{topicID:r,messageIDs:n}=e;if(!r||!this.mesh.has(r))return;let i=0;n.forEach((e=>{const t=this.msgIdToStrFn(e);this.seenCache.has(t)||(u.set(t,e),i++)})),null===(t=this.metrics)||void 0===t||t.onIhaveRcv(r,n.length,i)})),!u.size)return[];let h=u.size;h+c>d_&&(h=d_-c),this.log("IHAVE: Asking for %d out of %d messages from %s",h,u.size,e);let d=Array.from(u.values());return f_(d),d=d.slice(0,h),this.iasked.set(e,c+h),this.gossipTracer.addPromise(e,d),[{messageIDs:d}]}handleIWant(e,t){var r;if(!t.length)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,n),[];const i=new Map,s=new Map;let o=0;return t.forEach((t=>{let{messageIDs:r}=t;r.forEach((t=>{var r;const n=this.msgIdToStrFn(t),a=this.mcache.getWithIWantCount(n,e);null!=a?(s.set(a.msg.topic,1+(null!==(r=s.get(a.msg.topic))&&void 0!==r?r:0)),a.count>3?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):i.set(n,a.msg)):o++}))})),null===(r=this.metrics)||void 0===r||r.onIwantRcv(s,o),i.size?(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values())):(this.log("IWANT: Could not provide any wanted messages to %s",e),[])}async handleGraft(e,t){const r=[],n=this.score.score(e),i=Date.now();let s=this.opts.doPX;return t.forEach((t=>{var o,a;let{topicID:c}=t;if(!c)return;const l=this.mesh.get(c);if(!l)return void(s=!1);if(l.has(e))return;if(this.direct.has(e))return this.log("GRAFT: ignoring request from direct peer %s",e),r.push(c),void(s=!1);const u=null===(o=this.backoff.get(c))||void 0===o?void 0:o.get(e);if("number"===typeof u&&i<u){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,G_.GraftBackoff),s=!1;const t=u+this.opts.graftFloodThreshold-this.opts.pruneBackoff;return i<t&&this.score.addPenalty(e,1,G_.GraftBackoff),this.addBackoff(e,c),void r.push(c)}return n<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,c),r.push(c),s=!1,void this.addBackoff(e,c)):l.size>=this.opts.Dhi&&!this.outbound.get(e)?(r.push(c),void this.addBackoff(e,c)):(this.log("GRAFT: Add mesh link from %s in %s",e,c),this.score.graft(e,c),l.add(e),void(null===(a=this.metrics)||void 0===a||a.onAddToMesh(c,H_.Subscribed,1)))})),r.length?await Promise.all(r.map((t=>this.makePrune(e,t,s)))):[]}async handlePrune(e,t){const r=this.score.score(e);for(const{topicID:i,backoff:s,peers:o}of t){if(null==i)continue;const t=this.mesh.get(i);if(!t)return;var n;if(this.log("PRUNE: Remove mesh link to %s in %s",e,i),this.score.prune(e,i),t.has(e))t.delete(e),null===(n=this.metrics)||void 0===n||n.onRemoveFromMesh(i,W_.Unsub,1);if("number"===typeof s&&s>0?this.doAddBackoff(e,i,1e3*s):this.addBackoff(e,i),o.length){if(r<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,r,i);continue}await this.pxConnect(o)}}}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,r){var n;let i=this.backoff.get(t);i||(i=new Map,this.backoff.set(t,i));const s=Date.now()+r;(null!==(n=i.get(e))&&void 0!==n?n:0)<s&&i.set(e,s)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,G_.BrokenPromise)}))}clearBackoff(){if(this.heartbeatTicks%15!==0)return;const e=Date.now();this.backoff.forEach(((t,r)=>{t.forEach(((r,n)=>{r<e&&t.delete(n)})),0===t.size&&this.backoff.delete(r)}))}async directConnect(){const e=[];this.direct.forEach((t=>{const r=this.peers.get(t);r&&r.isWritable||e.push(t)})),await Promise.all(e.map((async e=>await this.connect(e))))}async pxConnect(e){e.length>this.opts.prunePeers&&(f_(e),e=e.slice(0,this.opts.prunePeers));const t=[];await Promise.all(e.map((async e=>{if(!e.peerID)return;const r=bn(e.peerID).toString();if(!this.peers.has(r))if(e.signedPeerRecord)try{const n=await RE.openAndCertify(e.signedPeerRecord,"libp2p-peer-record"),i=n.peerId;if(!n.peerId.equals(r))return void this.log("bogus peer record obtained through px: peer ID %p doesn't match expected peer %p",i,r);if(!await this.components.getPeerStore().addressBook.consumePeerRecord(n))return void this.log("bogus peer record obtained through px: could not add peer record to address book");t.push(r)}catch(n){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else t.push(r)}))),t.length&&await Promise.all(t.map((async e=>await this.connect(e))))}async connect(e){this.log("Initiating connection with %s",e);const t=await this.components.getConnectionManager().openConnection(vn(e));await t.newStream(this.multicodecs)}subscribe(e){if(this.status.code!==nS.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==nS.started)throw new Error("Pubsub is not started");const t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(const r of this.peers.keys())this.sendSubscriptions(r,[e],!1);this.leave(e).catch((e=>{this.log(e)}))}join(e){var t;if(this.status.code!==nS.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),null===(t=this.metrics)||void 0===t||t.onJoin(e);const r=new Set,n=this.fanout.get(e);var i;n&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),n.forEach((e=>{!this.direct.has(e)&&this.score.score(e)>=0&&r.add(e)})),null===(i=this.metrics)||void 0===i||i.onAddToMesh(e,H_.Fanout,r.size));if(r.size<this.opts.D){var s;const t=r.size;this.getRandomGossipPeers(e,this.opts.D,(e=>!r.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0)).forEach((e=>{r.add(e)})),null===(s=this.metrics)||void 0===s||s.onAddToMesh(e,H_.Random,r.size-t)}this.mesh.set(e,r),r.forEach((t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this.sendGraft(t,e)}))}async leave(e){var t;if(this.status.code!==nS.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),null===(t=this.metrics)||void 0===t||t.onLeave(e);const r=this.mesh.get(e);r&&(await Promise.all(Array.from(r).map((async t=>(this.log("LEAVE: Remove mesh link to %s in %s",t,e),await this.sendPrune(t,e))))),this.mesh.delete(e))}selectPeersToForward(e,t,r){const n=new Set,i=this.topics.get(e);i&&(this.direct.forEach((e=>{!i.has(e)||t===e||null!==r&&void 0!==r&&r.has(e)||n.add(e)})),this.floodsubPeers.forEach((e=>{i.has(e)&&t!==e&&(null===r||void 0===r||!r.has(e))&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&n.add(e)})));const s=this.mesh.get(e);return s&&s.size>0&&s.forEach((e=>{t===e||null!==r&&void 0!==r&&r.has(e)||n.add(e)})),n}selectPeersToPublish(e){const t=new Set,r={direct:0,floodsub:0,mesh:0,fanout:0},n=this.topics.get(e);if(n)if(this.opts.floodPublish)n.forEach((e=>{this.direct.has(e)?(t.add(e),r.direct++):this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));else{this.direct.forEach((e=>{n.has(e)&&(t.add(e),r.direct++)})),this.floodsubPeers.forEach((e=>{n.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));const i=this.mesh.get(e);if(i&&i.size>0)i.forEach((e=>{t.add(e),r.mesh++}));else{const n=this.fanout.get(e);if(n&&n.size>0)n.forEach((e=>{t.add(e),r.fanout++}));else{const n=this.getRandomGossipPeers(e,this.opts.D,(e=>this.score.score(e)>=this.opts.scoreThresholds.publishThreshold));n.size>0&&(this.fanout.set(e,n),n.forEach((e=>{t.add(e),r.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:t,tosendCount:r}}forwardMessage(e,t,r,n){var i;r&&this.score.deliverMessage(r,e,t.topic);const s=this.selectPeersToForward(t.topic,r,n),o=p_([t]);s.forEach((e=>{this.sendRpc(e,o)})),null===(i=this.metrics)||void 0===i||i.onForwardMsg(t.topic,s.size)}async publish(e,t){var r;const n=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");const i=await async function(e,t,r){switch(e.type){case b_.Signing:{const n={from:e.author.toBytes(),data:r,seqno:(0,J_.randomBytes)(8),topic:t,signature:void 0,key:void 0},i=(0,Ln.concat)([X_,c_.Message.encode(n)]);return n.signature=await e.privateKey.sign(i),n.key=e.key,n}case b_.Author:return{from:e.author.toBytes(),data:r,seqno:(0,J_.randomBytes)(8),topic:t,signature:void 0,key:void 0};case b_.Anonymous:return{from:void 0,data:r,seqno:void 0,topic:t,signature:void 0,key:void 0}}}(this.publishConfig,e,n);if(null==i.from)throw Error("PublishError.InvalidMessage");const s={from:bn(i.from),data:t,sequenceNumber:null==i.seqno?void 0:BigInt(`0x${(0,$t.toString)(i.seqno,"base16")}`),topic:e,signature:i.signature,key:i.key},o=await this.msgIdFn(s),a=this.msgIdToStrFn(o);if(this.seenCache.has(a))throw Error("PublishError.Duplicate");const{tosend:c,tosendCount:l}=this.selectPeersToPublish(i.topic),u=!0===this.opts.emitSelf&&this.subscriptions.has(e);if(0===c.size&&!this.opts.allowPublishToZeroPeers&&!u)throw Error("PublishError.InsufficientPeers");this.seenCache.put(a),this.mcache.put({msgId:o,msgIdStr:a},i,!0),this.publishedMessageIds.put(a);const h=p_([i]);for(const d of c){this.sendRpc(d,h)||c.delete(d)}return null===(r=this.metrics)||void 0===r||r.onPublishMsg(e,l,c.size,null!=i.data?i.data.length:0),u&&(c.add(this.components.getPeerId().toString()),super.dispatchEvent(new VE("gossipsub:message",{detail:{propagationSource:this.components.getPeerId(),msgId:a,msg:s}})),super.dispatchEvent(new VE("message",{detail:s}))),{recipients:Array.from(c.values()).map((e=>vn(e)))}}reportMessageValidationResult(e,t,r){if(r===E_.Accept){var n;const s=this.mcache.validate(e);if(null===(n=this.metrics)||void 0===n||n.onReportValidationMcacheHit(null!==s),null!=s){var i;const{message:n,originatingPeers:o}=s;this.score.deliverMessage(t.toString(),e,n.topic),this.forwardMessage(e,s.message,t.toString(),o),null===(i=this.metrics)||void 0===i||i.onReportValidation(n.topic,r)}}else{var s;const n=this.mcache.remove(e);if(null===(s=this.metrics)||void 0===s||s.onReportValidationMcacheHit(null!==n),n){var o;const i=k_(r),{message:s,originatingPeers:a}=n;this.score.rejectMessage(t.toString(),e,s.topic,i);for(const t of a)this.score.rejectMessage(t,e,s.topic,i);null===(o=this.metrics)||void 0===o||o.onReportValidation(s.topic,r)}}}sendGraft(e,t){const r=p_([],{graft:[{topicID:t}]});this.sendRpc(e,r)}async sendPrune(e,t){const r=p_([],{prune:[await this.makePrune(e,t,this.opts.doPX)]});this.sendRpc(e,r)}sendRpc(e,t){var r;const n=this.peers.get(e);if(!n||!n.isWritable)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;const i=this.control.get(e);i&&(this.piggybackControl(e,t,i),this.control.delete(e));const s=this.gossip.get(e);s&&(this.piggybackGossip(e,t,s),this.gossip.delete(e));const o=c_.encode(t);return n.write(o),null===(r=this.metrics)||void 0===r||r.onRpcSent(t,o.length),!0}piggybackControl(e,t,r){const n=r.graft.filter((t=>{let{topicID:r}=t;return(r&&this.mesh.get(r)||new Set).has(e)})),i=r.prune.filter((t=>{let{topicID:r}=t;return!(r&&this.mesh.get(r)||new Set).has(e)}));(n.length||i.length)&&(t.control?(t.control.graft=t.control.graft.concat(n),t.control.prune=t.control.prune.concat(i)):t.control={graft:n,prune:i,ihave:[],iwant:[]})}piggybackGossip(e,t,r){t.control||(t.control={ihave:[],iwant:[],graft:[],prune:[]}),t.control.ihave=r}async sendGraftPrune(e,t,r){const n=this.opts.doPX;for(const[i,s]of e){const e=s.map((e=>({topicID:e})));let o=[];const a=t.get(i);a&&(o=await Promise.all(a.map((async e=>{var t;return await this.makePrune(i,e,n&&!(null!==(t=r.get(i))&&void 0!==t&&t))}))),t.delete(i));const c=p_([],{graft:e,prune:o});this.sendRpc(i,c)}for(const[i,s]of t){const e=p_([],{prune:await Promise.all(s.map((async e=>{var t;return await this.makePrune(i,e,n&&!(null!==(t=r.get(i))&&void 0!==t&&t))})))});this.sendRpc(i,e)}}emitGossip(e){const t=this.mcache.getGossipIDs(new Set(e.keys()));for(const[n,i]of e){var r;this.doEmitGossip(n,i,null!==(r=t.get(n))&&void 0!==r?r:[])}}doEmitGossip(e,t,r){if(!r.length)return;if(f_(r),r.length>d_&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),!t.size)return;let n=this.opts.Dlazy;const i=.25*t.size;let s=t;i>n&&(n=i),n>s.size?n=s.size:s=f_(Array.from(s)).slice(0,n),s.forEach((t=>{let n=r;r.length>d_&&(n=f_(n.slice()).slice(0,d_)),this.pushGossip(t,{topicID:e,messageIDs:n})}))}flush(){for(const[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,p_([],{ihave:t}));for(const[e,t]of this.control.entries())this.control.delete(e),this.sendRpc(e,p_([],{graft:t.graft,prune:t.prune}))}pushGossip(e,t){this.log("Add gossip to %s",e);const r=this.gossip.get(e)||[];this.gossip.set(e,r.concat(t))}async makePrune(e,t,r){if(this.score.prune(e,t),this.peers.get(e).protocol===u_)return{topicID:t,peers:[]};const n=BigInt(this.opts.pruneBackoff/1e3);if(!r)return{topicID:t,peers:[],backoff:n};const i=this.getRandomGossipPeers(t,this.opts.prunePeers,(t=>t!==e&&this.score.score(t)>=0)),s=await Promise.all(Array.from(i).map((async e=>{const t=vn(e);return{peerID:t.toBytes(),signedPeerRecord:await this.components.getPeerStore().addressBook.getRawEnvelope(t)}})));return{topicID:t,peers:s,backoff:n}}async heartbeat(){var e,t;const{D:r,Dlo:n,Dhi:i,Dscore:s,Dout:o,fanoutTTL:a}=this.opts;this.heartbeatTicks++;const c=new Map,l=e=>{let t=c.get(e);return void 0===t&&(t=this.score.score(e),c.set(e,t)),t},u=new Map,h=new Map,d=new Map;this.clearBackoff(),this.peerhave.clear(),null===(e=this.metrics)||void 0===e||e.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),null===(t=this.fastMsgIdCache)||void 0===t||t.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const p=new Map;this.mesh.forEach(((e,t)=>{const a=this.topics.get(t),c=new Set,f=new Set;if(p.set(t,f),a){const r=f_(Array.from(a)),n=this.backoff.get(t);for(const t of r){const r=this.peers.get(t);if(r&&y_(r.protocol)&&!e.has(t)&&!this.direct.has(t)){const e=l(t);n&&n.has(t)||!(e>=0)||c.add(t),e>=this.opts.scoreThresholds.gossipThreshold&&f.add(t)}}}const y=(r,n)=>{var i;this.log("HEARTBEAT: Remove mesh link to %s in %s",r,t),this.addBackoff(r,t),e.delete(r),l(r)>=this.opts.scoreThresholds.gossipThreshold&&f.add(r),null===(i=this.metrics)||void 0===i||i.onRemoveFromMesh(t,n,1);const s=h.get(r);s?s.push(t):h.set(r,[t])},g=(r,n)=>{var i;this.log("HEARTBEAT: Add mesh link to %s in %s",r,t),this.score.graft(r,t),e.add(r),f.delete(r),null===(i=this.metrics)||void 0===i||i.onAddToMesh(t,n,1);const s=u.get(r);s?s.push(t):u.set(r,[t])};if(e.forEach((e=>{const r=l(e);r<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,r,t),y(e,W_.BadScore),d.set(e,!0))})),e.size<n){const t=function(e,t){return rS(e,t,(()=>!0))}(c,r-e.size);t.forEach((e=>{g(e,H_.NotEnough)}))}if(e.size>i){let t=Array.from(e);t.sort(((e,t)=>l(t)-l(e))),t=t.slice(0,s).concat(f_(t.slice(s)));let n=0;if(t.slice(0,r).forEach((e=>{this.outbound.get(e)&&n++})),n<o){const e=e=>{const r=t[e];for(let n=e;n>0;n--)t[n]=t[n-1];t[0]=r};if(n>0){let i=n;for(let n=1;n<r&&i>0;n++)this.outbound.get(t[n])&&(e(n),i--)}let i=r-n;for(let n=r;n<t.length&&i>0;n++)this.outbound.get(t[n])&&(e(n),i--)}t.slice(r).forEach((e=>{y(e,W_.Excess)}))}if(e.size>=n){let t=0;if(e.forEach((e=>{this.outbound.get(e)&&t++})),t<o){rS(c,o-t,(e=>!0===this.outbound.get(e))).forEach((e=>{g(e,H_.Outbound)}))}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&e.size>1){const r=Array.from(e).sort(((e,t)=>l(e)-l(t))),n=Math.floor(e.size/2),i=l(r[n]);if(i<this.opts.scoreThresholds.opportunisticGraftThreshold){const e=rS(c,this.opts.opportunisticGraftPeers,(e=>l(e)>i));for(const r of e)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",r,t),g(r,H_.Opportunistic)}}}));const f=Date.now();this.fanoutLastpub.forEach(((e,t)=>{e+a<f&&(this.fanout.delete(t),this.fanoutLastpub.delete(t))})),this.fanout.forEach(((e,t)=>{const n=this.topics.get(t);e.forEach((t=>{(!n.has(t)||l(t)<this.opts.scoreThresholds.publishThreshold)&&e.delete(t)}));const i=this.topics.get(t),s=[],o=new Set;if(p.set(t,o),i){const t=f_(Array.from(i));for(const r of t){const t=this.peers.get(r);if(t&&y_(t.protocol)&&!e.has(r)&&!this.direct.has(r)){const e=l(r);e>=this.opts.scoreThresholds.publishThreshold&&s.push(r),e>=this.opts.scoreThresholds.gossipThreshold&&o.add(r)}}}if(e.size<r){const t=r-e.size;s.slice(0,t).forEach((t=>{e.add(t),null===o||void 0===o||o.delete(t)}))}})),this.emitGossip(p),await this.sendGraftPrune(u,h,d),this.flush(),this.mcache.shift(),this.dispatchEvent(new VE("gossipsub:heartbeat"))}getRandomGossipPeers(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const n=this.topics.get(e);if(!n)return new Set;let i=[];return n.forEach((e=>{const t=this.peers.get(e);t&&y_(t.protocol)&&r(e)&&i.push(e)})),i=f_(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}onScrapeMetrics(e){var t,r;e.mcacheSize.set(this.mcache.size),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},null!==(t=null===(r=this.fastMsgIdCache)||void 0===r?void 0:r.size)&&void 0!==t?t:0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let n=0;for(const l of this.backoff.values())n+=l.size;e.cacheSize.set({cache:"backoff"},n);for(const[l,u]of this.topics)e.topicPeersCount.set({topicStr:l},u.size);for(const[l,u]of this.mesh)e.meshPeerCounts.set({topicStr:l},u.size);const i=[],s=new Map;e.behaviourPenalty.reset();for(const l of this.peers.keys()){var o,a;const t=this.score.score(l);i.push(t),s.set(l,t),e.behaviourPenalty.observe(null!==(o=null===(a=this.score.peerStats.get(l))||void 0===a?void 0:a.behaviourPenalty)&&void 0!==o?o:0)}e.registerScores(i,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,s);const c=function(e,t,r,n,i){const s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const o of e){const e=t.get(o);if(e){const t=tS(o,e,r,n,i);for(const[e,r]of t.byTopic){let t=s.byTopic.get(e);t||(t={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(e,t)),t.p1w.push(r.p1w),t.p2w.push(r.p2w),t.p3w.push(r.p3w),t.p3bw.push(r.p3bw),t.p4w.push(r.p4w)}s.p5w.push(t.p5w),s.p6w.push(t.p6w),s.p7w.push(t.p7w),s.score.push(t.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}return s}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(c)}}iS.multicodec=h_;function sS(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}const oS=ge("libp2p-delegated-peer-routing");class aS{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new tn({concurrency:4});const{protocol:t,host:r,port:n}=e.getEndpointConfig();oS(`enabled DelegatedPeerRouting via ${t}://${r}:${n}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async findPeer(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};oS("findPeer starts: %p",e),r.timeout=null!==(t=r.timeout)&&void 0!==t?t:3e4,r.signal=Qt([this.abortController.signal].concat(null!=r.signal?[r.signal]:[]));const n=sS(),i=sS();this.httpQueue.add((async()=>(n.resolve(),await i.promise)));try{await n.promise;for await(const t of this.client.dht.findPeer(e,r))if("FINAL_PEER"===t.name){return{id:t.peer.id,multiaddrs:t.peer.multiaddrs.map((e=>new Ml(e.toString()))),protocols:[]}}}catch(Up){throw oS.error("findPeer errored: %o",Up),Up}finally{i.resolve(),oS("findPeer finished: %p",e)}throw me(new Error("Not found"),"ERR_NOT_FOUND")}async*getClosestPeers(e){var t;let r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Ne.CID.asCID(e);r=null!=i?i:bn(e),oS("getClosestPeers starts: %s",r),n.timeout=null!==(t=n.timeout)&&void 0!==t?t:3e4,n.signal=Qt([this.abortController.signal].concat(null!=n.signal?[n.signal]:[]));const s=sS(),o=sS();this.httpQueue.add((async()=>(s.resolve(),await o.promise)));try{await s.promise;for await(const e of this.client.dht.query(r,n))"PEER_RESPONSE"===e.name&&(yield*e.closer.map((e=>({id:e.id,multiaddrs:e.multiaddrs.map((e=>new Ml(e.toString()))),protocols:[]}))))}catch(Up){throw oS.error("getClosestPeers errored:",Up),Up}finally{o.resolve(),oS("getClosestPeers finished: %b",e)}}}const cS=ge("libp2p:delegated-content-routing"),lS=3e4;class uS{constructor(e){if(null==e)throw new Error("missing ipfs http client");this.client=e,this.started=!1,this.abortController=new AbortController,this.httpQueue=new tn({concurrency:4}),this.httpQueueRefs=new tn({concurrency:2});const{protocol:t,host:r,port:n}=e.getEndpointConfig();cS(`enabled DelegatedContentRouting via ${t}://${r}:${n}`)}isStarted(){return this.started}start(){this.started=!0}stop(){this.httpQueue.clear(),this.httpQueueRefs.clear(),this.abortController.abort(),this.abortController=new AbortController,this.started=!1}async*findProviders(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cS("findProviders starts: %c",e),r.timeout=null!==(t=r.timeout)&&void 0!==t?t:lS,r.signal=Qt([this.abortController.signal].concat(null!=r.signal?[r.signal]:[]));const n=sS(),i=sS();this.httpQueue.add((async()=>(n.resolve(),await i.promise)));try{await n.promise;for await(const t of this.client.dht.findProvs(e,r))"PROVIDER"===t.name&&(yield*t.providers.map((e=>({id:e.id,protocols:[],multiaddrs:e.multiaddrs.map((e=>new Ml(e.toString())))}))))}catch(Up){throw cS.error("findProviders errored:",Up),Up}finally{i.resolve(),cS("findProviders finished: %c",e)}}async provide(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};cS("provide starts: %c",e),r.timeout=null!==(t=r.timeout)&&void 0!==t?t:lS,r.signal=Qt([this.abortController.signal].concat(null!=r.signal?[r.signal]:[])),await this.httpQueueRefs.add((async()=>{await this.client.block.stat(e,r),await Xa(this.client.dht.provide(e,r))})),cS("provide finished: %c",e)}async put(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};cS("put value start: %b",e),n.timeout=null!==(r=n.timeout)&&void 0!==r?r:lS,n.signal=Qt([this.abortController.signal].concat(null!=n.signal?[n.signal]:[])),await this.httpQueue.add((async()=>{await Xa(this.client.dht.put(e,t,n))})),cS("put value finished: %b",e)}async get(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return cS("get value start: %b",e),r.timeout=null!==(t=r.timeout)&&void 0!==t?t:lS,r.signal=Qt([this.abortController.signal].concat(null!=r.signal?[r.signal]:[])),await this.httpQueue.add((async()=>{for await(const t of this.client.dht.get(e,r))if("VALUE"===t.name)return cS("get value finished: %b",e),t.value;throw me(new Error("Not found"),"ERR_NOT_FOUND")}))}}const hS=e=>Promise.reject(new Error(`No base found for "${e}"`));class dS{constructor(e){this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||hS;for(const t of e.bases)this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw new Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];const t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}const pS=e=>Promise.reject(new Error(`No codec found for "${e}"`));class fS{constructor(e){this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||pS;for(const t of e.codecs)this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){const t="string"===typeof e?this._codecsByName:this._codecsByCode;if(t[e])return t[e];const r=await this._loadCodec(e);return null==t[e]&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}}const yS=e=>Promise.reject(new Error(`No hasher found for "${e}"`));class gS{constructor(e){this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||yS;for(const t of e.hashers)this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw new Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){const t="string"===typeof e?this._hashersByName:this._hashersByCode;if(t[e])return t[e];const r=await this._loadHasher(e);return null==t[e]&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}}function mS(e){try{e=Rg(new Ml(e))}catch(Up){}return e=e.toString()}const wS=ge("ipfs-http-client:lib:error-handler"),vS=ue.bind({ignoreUndefined:!0}),bS=he.isBrowser||he.isWebWorker?location.protocol:"http",ES=he.isBrowser||he.isWebWorker?location.hostname:"localhost",_S=he.isBrowser||he.isWebWorker?location.port:"5001",SS=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){const r=await e.json();wS(r),t=r.Message||r.message}else t=await e.text()}catch(Up){wS("Failed to parse error response",Up),t=Up.message}let r=new rn.HTTPError(e);throw t&&(t.includes("deadline has elapsed")&&(r=new rn.TimeoutError),t&&t.includes("context deadline exceeded")&&(r=new rn.TimeoutError)),t&&t.includes("request timed out")&&(r=new rn.TimeoutError),t&&(r.message=t),r},AS=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,kS=e=>e.replace(AS,(function(e){return"-"+e.toLowerCase()})),IS=e=>"string"===typeof e?er(e):e;class CS extends rn{constructor(){var e;const t=function(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};if("string"===typeof r||Ml.isMultiaddr(r))e=new URL(mS(r));else if(r instanceof URL)e=r;else if("string"===typeof r.url||Ml.isMultiaddr(r.url))e=new URL(mS(r.url)),n=r;else if(r.url instanceof URL)e=r.url,n=r;else{n=r||{};const t=(n.protocol||bS).replace(":",""),i=(n.host||ES).split(":")[0],s=n.port||_S;e=new URL(`${t}://${i}:${s}`)}if(n.apiPath?e.pathname=n.apiPath:"/"!==e.pathname&&void 0!==e.pathname||(e.pathname="api/v0"),he.isNode){const e=void 0;t=n.agent||new e({keepAlive:!0,maxSockets:6})}return{...n,host:e.host,protocol:e.protocol.replace(":",""),port:Number(e.port),apiPath:e.pathname,url:e,agent:t}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});super({timeout:IS(t.timeout||0)||void 0,headers:t.headers,base:`${t.url}`,handleError:SS,transformSearchParams:e=>{const t=new URLSearchParams;for(const[r,n]of e)"undefined"!==n&&"null"!==n&&"signal"!==r&&t.append(kS(r),n),"timeout"!==r||isNaN(n)||t.append(kS(r),n);return t},agent:t.agent}),e=this,delete this.get,delete this.put,delete this.delete,delete this.options;const r=this.fetch;this.fetch=function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"!==typeof n||n.startsWith("/")||(n=`${t.url}/${n}`),r.call(e,n,vS(i,{method:"POST"}))}}}rn.HTTPError;const RS=e=>t=>e(new CS(t),t);function TS(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}function DS(e){if(null==e)return;let t;if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:1e3*(r-1e3*n)}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw me(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}function PS(){let{arg:e,searchParams:t,hashAlg:r,mtime:n,mode:i,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(s={...s,...t}),r&&(s.hash=r),null!=n&&(n=DS(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),null!=i&&(s.mode=TS(i)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),void 0===e||null===e?e=[]:Array.isArray(e)||(e=[e]);const o=new URLSearchParams(s);return e.forEach((e=>o.append("arg",e))),o}const NS=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await(await e.post("bitswap/wantlist",{signal:t.signal,searchParams:PS(t),headers:t.headers})).json();return(r.Keys||[]).map((e=>Ne.CID.parse(e["/"])))})),xS=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:PS({...r,peer:t.toString()}),headers:r.headers})).json();return(n.Keys||[]).map((e=>Ne.CID.parse(e["/"])))})),OS=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("bitswap/stat",{searchParams:PS(t),signal:t.signal,headers:t.headers});return BS(await r.json())}));function BS(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map((e=>Ne.CID.parse(e["/"]))),peers:(e.Peers||[]).map((e=>vn(e))),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}const LS=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("bitswap/unwant",{signal:r.signal,searchParams:PS({arg:t.toString(),...r}),headers:r.headers});return n.json()}));function MS(e){return{wantlist:NS(e),wantlistForPeer:xS(e),unwant:LS(e),stat:OS(e)}}const US=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("block/get",{signal:r.signal,searchParams:PS({arg:t.toString(),...r}),headers:r.headers});return new Uint8Array(await n.arrayBuffer())}));async function jS(e){if(Iu(e))return new Blob([e]);if("string"===typeof e||e instanceof String)return new Blob([e.toString()]);if(Cu(e))return e;if(Tu(e)&&(e=Su(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=ku(e),{value:r,done:n}=await t.peek();if(n)return FS(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Qa(t))]);if(Iu(r)||"string"===typeof r||r instanceof String)return FS(t)}throw me(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function FS(e){const t=[];for await(const r of e)t.push(r);return new Blob(t)}function zS(e){return wh(e,jS)}function VS(e){if(null!=e)return"string"===typeof e?e:e.toString(8).padStart(4,"0")}async function KS(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=[],i=new FormData;let s=0,o=0;for await(const{content:a,path:c,mode:l,mtime:u}of zS(e)){let e="";s>0&&(e=`-${s}`);let t=(a?"file":"dir")+e;const r=[];if(null!==l&&void 0!==l&&r.push(`mode=${VS(l)}`),null!=u){const{secs:e,nsecs:t}=u;r.push(`mtime=${e}`),null!=t&&r.push(`mtime-nsecs=${t}`)}if(r.length&&(t=`${t}?${r.join("&")}`),a){i.set(t,a,null!=c?encodeURIComponent(c):void 0);const e=o+a.size;n.push({name:c,start:o,end:e}),o=e}else{if(null==c)throw new Error("path or content or both must be set");i.set(t,new File([""],encodeURIComponent(c),{type:"application/x-directory"}))}s++}return{total:o,parts:n,headers:r,body:i}}function $S(e){return e.filter(Boolean)}function qS(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,Qt.anySignal)($S(t))}const HS=RS((e=>async function t(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new AbortController,s=qS(i.signal,n.signal);let o;try{const t=await e.post("block/put",{signal:s,searchParams:PS(n),...await KS([r],i,n.headers)});o=await t.json()}catch(Up){if("dag-pb"===n.format)return t(r,{...n,format:"protobuf"});if("dag-cbor"===n.format)return t(r,{...n,format:"cbor"});throw Up}return Ne.CID.parse(o.Key)})),WS=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Array.isArray(t)||(t=[t]);const n=await e.post("block/rm",{signal:r.signal,searchParams:PS({arg:t.map((e=>e.toString())),"stream-channels":!0,...r}),headers:r.headers});for await(const e of n.ndjson())yield GS(e)}));function GS(e){const t={cid:Ne.CID.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}const YS=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("block/stat",{signal:r.signal,searchParams:PS({arg:t.toString(),...r}),headers:r.headers}),i=await n.json();return{cid:Ne.CID.parse(i.Key),size:i.Size}}));function QS(e){return{get:US(e),put:HS(e),rm:WS(e),stat:YS(e)}}const JS=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("bootstrap/add",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map((e=>new Ml(e)))}})),XS=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("bootstrap/rm",{signal:t.signal,searchParams:PS({...t,all:!0}),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map((e=>new Ml(e)))}})),ZS=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("bootstrap/list",{signal:t.signal,searchParams:PS(t),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map((e=>new Ml(e)))}})),eA=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("bootstrap/add",{signal:t.signal,searchParams:PS({...t,default:!0}),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map((e=>new Ml(e)))}})),tA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("bootstrap/rm",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map((e=>new Ml(e)))}}));function rA(e){return{add:JS(e),clear:XS(e),list:ZS(e),reset:eA(e),rm:tA(e)}}const nA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("config/profile/apply",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.json();return{original:i.OldCfg,updated:i.NewCfg}}));function iA(e){if(null==e)return e;const t=/^[A-Z]+$/;return Object.keys(e).reduce(((r,n)=>(t.test(n)?r[n.toLowerCase()]=e[n]:t.test(n[0])?r[n[0].toLowerCase()+n.slice(1)]=e[n]:r[n]=e[n],r)),{})}const sA=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("config/profile/list",{signal:t.signal,searchParams:PS(t),headers:t.headers}),n=await r.json();return n.map((e=>iA(e)))}));function oA(e){return{apply:nA(e),list:sA(e)}}const aA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("key argument is required");const n=await e.post("config",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.json();return i.Value})),cA=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("config/show",{signal:t.signal,searchParams:PS({...t}),headers:t.headers}),n=await r.json();return n})),lA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new AbortController,i=qS(n.signal,r.signal),s=await e.post("config/replace",{signal:i,searchParams:PS(r),...await KS([(0,zt.fromString)(JSON.stringify(t))],n,r.headers)});await s.text()})),uA=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"!==typeof t)throw new Error("Invalid key type");const i={...n,...hA(t,r)},s=await e.post("config",{signal:n.signal,searchParams:PS(i),headers:n.headers});await s.text()})),hA=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function dA(e){return{getAll:cA(e),get:aA(e),set:uA(e),replace:lA(e),profiles:oA(e)}}const pA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("dag/export",{signal:r.signal,searchParams:PS({arg:t.toString()}),headers:r.headers});yield*n.iterator()}));async function*fA(e,t,r,n,i){const s=async e=>{const t=await r.getCodec(e.code),s=await n(e,i);return t.decode(s)},o=t.split("/").filter(Boolean);let a=await s(e),c=e;for(;o.length;){const e=o.shift();if(!e)throw me(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(!Object.prototype.hasOwnProperty.call(a,e))throw me(new Error(`no link named "${e}" under ${c}`),"ERR_NO_LINK");a=a[e],yield{value:a,remainderPath:o.join("/")};const r=Ne.CID.asCID(a);r&&(c=r,a=await s(a))}yield{value:a,remainderPath:""}}const yA=(e,t)=>{const r=RS(((t,r)=>{const n=US(r);return async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.path){const i=r.localResolve?await mg(fA(t,r.path,e,n,r)):await Sn(fA(t,r.path,e,n,r));if(!i)throw me(new Error("Not found"),"ERR_NOT_FOUND");return i}const i=await e.getCodec(t.code),s=await n(t,r),o=i.decode(s);return{value:o,remainderPath:""}}}));return r(t)},gA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new AbortController,i=qS(n.signal,r.signal),{headers:s,body:o}=await KS(t,n,r.headers),a=await e.post("dag/import",{signal:i,headers:s,body:o,searchParams:PS({"pin-roots":r.pinRoots})});for await(const{Root:e}of a.ndjson())if(void 0!==e){const{Cid:{"/":t},PinErrorMsg:r}=e;yield{root:{cid:Ne.CID.parse(t),pinErrorMsg:r}}}})),mA=(e,t)=>{const r=RS((t=>async function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...n};let s;if(i.inputCodec){if(!(r instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");s=r}else{s=(await e.getCodec(i.storeCodec)).encode(r),i.inputCodec=i.storeCodec}const o=new AbortController,a=qS(o.signal,i.signal),c=await t.post("dag/put",{timeout:i.timeout,signal:a,searchParams:PS(i),...await KS([s],o,i.headers)}),l=await c.json();return Ne.CID.parse(l.Cid["/"])}));return r(t)},wA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("dag/resolve",{signal:r.signal,searchParams:PS({arg:`${t}${r.path?`/${r.path}`.replace(/\/[/]+/g,"/"):""}`,...r}),headers:r.headers}),i=await n.json();return{cid:Ne.CID.parse(i.Cid["/"]),remainderPath:i.RemPath}}));function vA(e,t){return{export:pA(t),get:yA(e,t),import:gA(t),put:mA(e,t),resolve:wA(t)}}const bA=e=>{if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:vn(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map((e=>{let{ID:t,Addrs:r}=e;return{id:vn(t),multiaddrs:r.map((e=>new Ml(e))),protocols:[]}})),providers:(e.Responses||[]).map((e=>{let{ID:t,Addrs:r}=e;return{id:vn(t),multiaddrs:r.map((e=>new Ml(e))),protocols:[]}}))};if(2===e.Type){var t;let r={id:null!==(t=e.ID)&&void 0!==t?t:vn(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(r={id:vn(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map((e=>new Ml(e))),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:r}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map((e=>{let{ID:t,Addrs:r}=e;return{id:vn(t),multiaddrs:r.map((e=>new Ml(e))),protocols:[]}}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:(0,zt.fromString)(e.Extra,"base64pad")};if(6===e.Type){const t=e.Responses.map((e=>{let{ID:t}=e;return vn(t)}));if(!t.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:vn(e.ID)};throw new Error("Unknown DHT event type")},EA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("dht/findpeer",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers});for await(const e of n.ndjson())yield bA(e)})),_A=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("dht/findprovs",{signal:r.signal,searchParams:PS({arg:t.toString(),...r}),headers:r.headers});for await(const e of n.ndjson())yield bA(e)})),SA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("dht/get",{signal:r.signal,searchParams:PS({arg:t instanceof Uint8Array?(0,$t.toString)(t):t.toString(),...r}),headers:r.headers});for await(const e of n.ndjson())yield bA(e)})),AA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};const n=Array.isArray(t)?t:[t],i=await e.post("dht/provide",{signal:r.signal,searchParams:PS({arg:n.map((e=>e.toString())),...r}),headers:r.headers});for await(const e of i.ndjson())yield bA(e)})),kA=RS((e=>async function*(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new AbortController,s=qS(i.signal,n.signal),o=await e.post("dht/put",{signal:s,searchParams:PS({arg:t instanceof Uint8Array?(0,$t.toString)(t):t.toString(),...n}),...await KS([r],i,n.headers)});for await(const e of o.ndjson())yield bA(e)})),IA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("dht/query",{signal:r.signal,searchParams:PS({arg:t.toString(),...r}),headers:r.headers});for await(const e of n.ndjson())yield bA(e)}));function CA(e){return{findPeer:EA(e),findProvs:_A(e),get:SA(e),provide:AA(e),put:kA(e),query:IA(e)}}const RA=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("diag/cmds",{signal:t.signal,searchParams:PS(t),headers:t.headers});return r.json()})),TA=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("diag/net",{signal:t.signal,searchParams:PS(t),headers:t.headers});return r.json()})),DA=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("diag/sys",{signal:t.signal,searchParams:PS(t),headers:t.headers});return r.json()}));function PA(e){return{cmds:RA(e),net:TA(e),sys:DA(e)}}const NA=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await e.post("files/chmod",{signal:n.signal,searchParams:PS({arg:t,mode:r,...n}),headers:n.headers});await i.text()})),xA=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Array.isArray(t)?t:[t],s=await e.post("files/cp",{signal:n.signal,searchParams:PS({arg:i.concat(r).map((e=>Ne.CID.asCID(e)?`/ipfs/${e}`:e)),...n}),headers:n.headers});await s.text()})),OA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"string"!==typeof t)throw new Error("ipfs.files.flush requires a path");const n=await e.post("files/flush",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.json();return Ne.CID.parse(i.Cid)}));function BA(e){const t=iA(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}const LA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("ipfs.files.ls requires a path");const n=await e.post("files/ls",{signal:r.signal,searchParams:PS({arg:Ne.CID.asCID(t)?`/ipfs/${t}`:t,long:!0,...r,stream:!0}),headers:r.headers});for await(const e of n.ndjson())if("Entries"in e)for(const t of e.Entries||[])yield MA(BA(t));else yield MA(BA(e))}));function MA(e){return e.hash&&(e.cid=Ne.CID.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}const UA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("files/mkdir",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers});await n.text()})),jA=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);const i=await e.post("files/mv",{signal:n.signal,searchParams:PS({arg:t.concat(r),...n}),headers:n.headers});await i.text()}));var FA=__webpack_require__(9210);const zA=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("files/read",{signal:r.signal,searchParams:PS({arg:t,count:r.length,...r}),headers:r.headers});yield*FA(n.body)})),VA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("files/rm",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.text();if(""!==i){const e=new rn.HTTPError(n);throw e.message=i,e}})),KA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("files/stat",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.json();return i.WithLocality=i.WithLocality||!1,$A(BA(i))}));function $A(e){return e.cid=Ne.CID.parse(e.hash),delete e.hash,e}const qA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("files/touch",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers});await n.text()})),HA=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new AbortController,s=qS(i.signal,n.signal),o=await e.post("files/write",{signal:s,searchParams:PS({arg:t,streamChannels:!0,count:n.length,...n}),...await KS([{content:r,path:"arg",mode:TS(n.mode),mtime:DS(n.mtime)}],i,n.headers)});await o.text()}));function WA(e){return{chmod:NA(e),cp:xA(e),flush:OA(e),ls:LA(e),mkdir:UA(e),mv:jA(e),read:zA(e),rm:VA(e),stat:KA(e),touch:qA(e),write:HA(e)}}const GA=RS((e=>async function(e,t){throw me(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),YA=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"Ed25519"};const n=await e.post("key/gen",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.json();return iA(i)})),QA=RS((e=>async function(t,r,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=await e.post("key/import",{signal:i.signal,searchParams:PS({arg:t,pem:r,password:n,...i}),headers:i.headers}),o=await s.json();return iA(o)})),JA=RS((e=>async function(e){throw me(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),XA=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("key/list",{signal:t.signal,searchParams:PS(t),headers:t.headers}),n=await r.json();return(n.Keys||[]).map((e=>iA(e)))})),ZA=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await e.post("key/rename",{signal:n.signal,searchParams:PS({arg:[t,r],...n}),headers:n.headers});return iA(await i.json())})),ek=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("key/rm",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.json();return iA(i.Keys[0])}));function tk(e){return{export:GA(e),gen:YA(e),import:QA(e),info:JA(e),list:XA(e),rename:ZA(e),rm:ek(e)}}const rk=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await e.post("log/level",{signal:n.signal,searchParams:PS({arg:[t,r],...n}),headers:n.headers});return iA(await i.json())})),nk=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("log/ls",{signal:t.signal,searchParams:PS(t),headers:t.headers}),n=await r.json();return n.Strings})),ik=RS((e=>async function*(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("log/tail",{signal:t.signal,searchParams:PS(t),headers:t.headers});yield*r.ndjson()}));function sk(e){return{level:rk(e),ls:nk(e),tail:ik(e)}}const ok=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("name/publish",{signal:r.signal,searchParams:PS({arg:`${t}`,...r}),headers:r.headers});return iA(await n.json())})),ak=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("name/resolve",{signal:r.signal,searchParams:PS({arg:t,stream:!0,...r}),headers:r.headers});for await(const e of n.ndjson())yield e.Path})),ck=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("name/pubsub/cancel",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers});return iA(await n.json())})),lk=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("name/pubsub/state",{signal:t.signal,searchParams:PS(t),headers:t.headers});return iA(await r.json())})),uk=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:PS(t),headers:t.headers}),n=await r.json();return n.Strings||[]}));function hk(e){return{cancel:ck(e),state:lk(e),subs:uk(e)}}function dk(e){return{publish:ok(e),resolve:ak(e),pubsub:hk(e)}}const pk=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("object/data",{signal:r.signal,searchParams:PS({arg:`${t instanceof Uint8Array?Ne.CID.decode(t):t}`,...r}),headers:r.headers}),i=await n.arrayBuffer();return new Uint8Array(i,0,i.byteLength)})),fk=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("object/get",{signal:r.signal,searchParams:PS({arg:`${t instanceof Uint8Array?Ne.CID.decode(t):t}`,dataEncoding:"base64",...r}),headers:r.headers}),i=await n.json();return{Data:(0,zt.fromString)(i.Data,"base64pad"),Links:(i.Links||[]).map((e=>({Name:e.Name,Hash:Ne.CID.parse(e.Hash),Tsize:e.Size})))}})),yk=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("object/links",{signal:r.signal,searchParams:PS({arg:`${t instanceof Uint8Array?Ne.CID.decode(t):t}`,...r}),headers:r.headers}),i=await n.json();return(i.Links||[]).map((e=>({Name:e.Name,Tsize:e.Size,Hash:Ne.CID.parse(e.Hash)})))})),gk=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("object/new",{signal:t.signal,searchParams:PS({arg:t.template,...t}),headers:t.headers}),{Hash:n}=await r.json();return Ne.CID.parse(n)})),mk=(e,t)=>{const r=RS((r=>{const n=mA(e,t);return async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(e,{...t,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}}));return r(t)},wk=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("object/stat",{signal:r.signal,searchParams:PS({arg:`${t}`,...r}),headers:r.headers}),i=await n.json();return{...i,Hash:Ne.CID.parse(i.Hash)}})),vk=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await e.post("object/patch/add-link",{signal:n.signal,searchParams:PS({arg:[`${t}`,r.Name||r.name||"",(r.Hash||r.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return Ne.CID.parse(s)})),bk=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new AbortController,s=qS(i.signal,n.signal),o=await e.post("object/patch/append-data",{signal:s,searchParams:PS({arg:`${t}`,...n}),...await KS([r],i,n.headers)}),{Hash:a}=await o.json();return Ne.CID.parse(a)})),Ek=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=await e.post("object/patch/rm-link",{signal:n.signal,searchParams:PS({arg:[`${t}`,r.Name||r.name||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return Ne.CID.parse(s)})),_k=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new AbortController,s=qS(i.signal,n.signal),o=await e.post("object/patch/set-data",{signal:s,searchParams:PS({arg:[`${t}`],...n}),...await KS([r],i,n.headers)}),{Hash:a}=await o.json();return Ne.CID.parse(a)}));function Sk(e){return{addLink:vk(e),appendData:bk(e),rmLink:Ek(e),setData:_k(e)}}function Ak(e,t){return{data:pk(t),get:fk(t),links:yk(t),new:gk(t),put:mk(e,t),stat:wk(t),patch:Sk(t)}}const kk=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const{path:n,recursive:i,metadata:s}of An(t)){const t=await e.post("pin/add",{signal:r.signal,searchParams:PS({...r,arg:n,recursive:i,metadata:s?JSON.stringify(s):void 0,stream:!0}),headers:r.headers});for await(const e of t.ndjson())if(e.Pins)for(const t of e.Pins)yield Ne.CID.parse(t);else yield Ne.CID.parse(e)}}));function Ik(e){const t=kk(e);return RS((()=>async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sn(t([{path:e,...r}],r))}))(e)}function Ck(e,t,r){const n={type:e,cid:Ne.CID.parse(t)};return r&&(n.metadata=r),n}const Rk=RS((e=>async function*(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=[];t.paths&&(r=Array.isArray(t.paths)?t.paths:[t.paths]);const n=await e.post("pin/ls",{signal:t.signal,searchParams:PS({...t,arg:r.map((e=>`${e}`)),stream:!0}),headers:t.headers});for await(const e of n.ndjson()){if(e.Keys){for(const t of Object.keys(e.Keys))yield Ck(e.Keys[t].Type,t,e.Keys[t].Metadata);return}yield Ck(e.Type,e.Cid,e.Metadata)}})),Tk=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const{path:n,recursive:i}of An(t)){const t=new URLSearchParams(r.searchParams);t.append("arg",`${n}`),null!=i&&t.set("recursive",String(i));const s=await e.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:PS({...r,arg:`${n}`,recursive:i})});for await(const e of s.ndjson())e.Pins?yield*e.Pins.map((e=>Ne.CID.parse(e))):yield Ne.CID.parse(e)}})),Dk=e=>{const t=Tk(e);return RS((()=>async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sn(t([{path:e,...r}],r))}))(e)},Pk=e=>{let{Name:t,Status:r,Cid:n}=e;return{cid:Ne.CID.parse(n),name:t,status:r}},Nk=e=>{if("string"===typeof e&&""!==e)return e;throw new TypeError("service name must be passed")},xk=e=>{if(Ne.CID.asCID(e))return e.toString();throw new TypeError("CID instance expected instead of "+typeof e)},Ok=e=>{let{service:t,cid:r,name:n,status:i,all:s}=e;const o=PS({service:Nk(t),name:n,force:!!s||void 0});if(r)for(const a of r)o.append("cid",xk(a));if(i)for(const a of i)o.append("status",a);return o},Bk=e=>{let{cid:t,service:r,background:n,name:i,origins:s}=e;const o=PS({arg:xk(t),service:Nk(r),name:i,background:!!n||void 0});if(s)for(const a of s)o.append("origin",a.toString());return o};function Lk(e){return async function(t,r){let{timeout:n,signal:i,headers:s,...o}=r;const a=await e.post("pin/remote/add",{timeout:n,signal:i,headers:s,searchParams:Bk({cid:t,...o})});return Pk(await a.json())}}function Mk(e){return async function*(t){let{timeout:r,signal:n,headers:i,...s}=t;const o=await e.post("pin/remote/ls",{timeout:r,signal:n,headers:i,searchParams:Ok(s)});for await(const e of o.ndjson())yield Pk(e)}}function Uk(e){return async function(t){let{timeout:r,signal:n,headers:i,...s}=t;await e.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:Ok({...s,all:!1})})}}function jk(e){return async function(t){let{timeout:r,signal:n,headers:i,...s}=t;await e.post("pin/remote/rm",{timeout:r,signal:n,headers:i,searchParams:Ok({...s,all:!0})})}}function Fk(e){const t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}function zk(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:Vk(e.Stat)}}}function Vk(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:r,Queued:n,Failed:i}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function Kk(e){return async function(t,r){const{endpoint:n,key:i,headers:s,timeout:o,signal:a}=r;await e.post("pin/remote/service/add",{timeout:o,signal:a,searchParams:PS({arg:[t,Fk(n),i]}),headers:s})}}function $k(e){return async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stat:r,headers:n,timeout:i,signal:s}=t,o=await e.post("pin/remote/service/ls",{timeout:i,signal:s,headers:n,searchParams:!0===r?PS({stat:r}):void 0}),{RemoteServices:a}=await o.json();return a.map(zk)}}function qk(e){return async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await e.post("pin/remote/service/rm",{signal:r.signal,headers:r.headers,searchParams:PS({arg:t})})}}function Hk(e){const t=new CS(e);return{add:Kk(t),ls:$k(t),rm:qk(t)}}function Wk(e){const t=new CS(e);return{add:Lk(t),ls:Mk(t),rm:Uk(t),rmAll:jk(t),service:Hk(e)}}function Gk(e){return{addAll:kk(e),add:Ik(e),ls:Rk(e),rmAll:Tk(e),rm:Dk(e),remote:Wk(e)}}const Yk=e=>Array.isArray(e)?e.map(Qk):e,Qk=e=>(0,$t.toString)(Jk(e)),Jk=e=>ye.base64url.decode(e),Xk=e=>ye.base64url.encode((0,zt.fromString)(e)),Zk=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{Strings:r}=await(await e.post("pubsub/ls",{signal:t.signal,searchParams:PS(t),headers:t.headers})).json();return Yk(r)||[]})),eI=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("pubsub/peers",{signal:r.signal,searchParams:PS({arg:Xk(t),...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]})),tI=RS((e=>async function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=PS({arg:Xk(t),...n}),s=new AbortController,o=qS(s.signal,n.signal),a=await e.post("pubsub/pub",{signal:o,searchParams:i,...await KS([r],s,n.headers)});await a.text()})),rI=ge("ipfs-http-client:pubsub:subscribe");async function nI(e,t){let{onMessage:r,onEnd:n,onError:i}=t;i=i||rI;try{for await(const t of e.ndjson())try{if(!t.from)continue;r({from:vn(t.from),data:Jk(t.data),sequenceNumber:(s=t.seqno,BigInt(`0x${(0,$t.toString)(ye.base64url.decode(s),"base16")}`)),topic:Qk(t.topicIDs[0])})}catch(Up){Up.message=`Failed to parse pubsub message: ${Up.message}`,i(Up,!1,t)}}catch(Up){iI(Up)||i(Up,!0)}finally{n()}var s}const iI=e=>{switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}},sI=(e,t)=>async function(e,r){t.unsubscribe(e,r)};class oI{constructor(){this._subs=new Map}subscribe(e,t,r){const n=this._subs.get(e)||[];if(n.find((e=>e.handler===t)))throw new Error(`Already subscribed to ${e} with this handler`);const i=new AbortController;return this._subs.set(e,[{handler:t,controller:i}].concat(n)),r&&r.addEventListener("abort",(()=>this.unsubscribe(e,t))),i.signal}unsubscribe(e,t){const r=this._subs.get(e)||[];let n;t?(this._subs.set(e,r.filter((e=>e.handler!==t))),n=r.filter((e=>e.handler===t))):(this._subs.set(e,[]),n=r),(this._subs.get(e)||[]).length||this._subs.delete(e),n.forEach((e=>e.controller.abort()))}}function aI(e){const t=new oI;return{ls:Zk(e),peers:eI(e),publish:tI(e),subscribe:(r=e,n=t,RS((e=>async function(t,r){let i,s,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o.signal=n.subscribe(t,r,o.signal);const a=new Promise(((e,t)=>{i=e,s=t})),c=setTimeout((()=>i()),1e3);return e.post("pubsub/sub",{signal:o.signal,searchParams:PS({arg:Xk(t),...o}),headers:o.headers}).catch((e=>{n.unsubscribe(t,r),s(e)})).then((e=>{clearTimeout(c),e&&(nI(e,{onMessage:e=>{r&&("function"!==typeof r?"function"===typeof r.handleEvent&&r.handleEvent(e):r(e))},onEnd:()=>n.unsubscribe(t,r),onError:o.onError}),i())})),a}))(r)),unsubscribe:sI(0,t)};var r,n}const cI=RS((e=>async function*(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("refs/local",{signal:t.signal,transform:iA,searchParams:PS(t),headers:t.headers});yield*r.ndjson()})),lI=RS(((e,t)=>Object.assign((async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(t)?t:[t],i=await e.post("refs",{signal:r.signal,searchParams:PS({arg:n.map((e=>`${e instanceof Uint8Array?Ne.CID.decode(e):e}`)),...r}),headers:r.headers,transform:iA});yield*i.ndjson()}),{local:cI(t)}))),uI=RS((e=>async function*(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("repo/gc",{signal:t.signal,searchParams:PS(t),headers:t.headers,transform:e=>({err:e.Error?new Error(e.Error):null,cid:(e.Key||{})["/"]?Ne.CID.parse(e.Key["/"]):null})});yield*r.ndjson()})),hI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("repo/stat",{signal:t.signal,searchParams:PS(t),headers:t.headers}),n=await r.json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}})),dI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await(await e.post("repo/version",{signal:t.signal,searchParams:PS(t),headers:t.headers})).json();return r.Version}));function pI(e){return{gc:uI(e),stat:hI(e),version:dI(e)}}const fI=RS((e=>async function*(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("stats/bw",{signal:t.signal,searchParams:PS(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*r.ndjson()}));function yI(e){return{bitswap:OS(e),repo:hI(e),bw:fI(e)}}const gI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("swarm/addrs",{signal:t.signal,searchParams:PS(t),headers:t.headers}),{Addrs:n}=await r.json();return Object.keys(n).map((e=>({id:vn(e),addrs:(n[e]||[]).map((e=>new Ml(e)))})))})),mI=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("swarm/connect",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]})),wI=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("swarm/disconnect",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]})),vI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:PS(t),headers:t.headers}),{Strings:n}=await r.json();return(n||[]).map((e=>new Ml(e)))})),bI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("swarm/peers",{signal:t.signal,searchParams:PS(t),headers:t.headers}),{Peers:n}=await r.json();return(n||[]).map((e=>({addr:new Ml(e.Addr),peer:vn(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"})))}));function EI(e){return{addrs:gI(e),connect:mI(e),disconnect:wI(e),localAddrs:vI(e),peers:bI(e)}}const _I=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new AbortController,i=qS(n.signal,r.signal),{headers:s,body:o,total:a,parts:c}=await KS(t,n,r.headers),[l,u]="function"===typeof r.progress?SI(a,c,r.progress):[void 0,void 0],h=await e.post("add",{searchParams:PS({"stream-channels":!0,...r,progress:Boolean(l)}),onUploadProgress:u,signal:i,headers:s,body:o});for await(let e of h.ndjson())e=iA(e),void 0!==e.hash?yield kI(e):l&&l(e.bytes||0,e.name)})),SI=(e,t,r)=>t?[void 0,AI(e,t,r)]:[r,void 0],AI=(e,t,r)=>{let n=0;const i=t.length;return s=>{let{loaded:o,total:a}=s;const c=Math.floor(o/a*e);for(;n<i;){const{start:e,end:i,name:s}=t[n];if(c<i){r(c-e,s);break}r(i-e,s),n+=1}}};function kI(e){let{name:t,hash:r,size:n,mode:i,mtime:s,mtimeNsecs:o}=e;const a={path:t,cid:Ne.CID.parse(r),size:parseInt(n)};return null!=i&&(a.mode=parseInt(i,8)),null!=s&&(a.mtime={secs:s,nsecs:o||0}),a}function II(e){const t=_I(e);return RS((()=>async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await Sn(t(Ou(e),r))}))(e)}const CI=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("cat",{signal:r.signal,searchParams:PS({arg:t.toString(),...r}),headers:r.headers});yield*n.iterator()})),RI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("commands",{signal:t.signal,searchParams:PS(t),headers:t.headers});return r.json()})),TI=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("dns",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),i=await n.json();return i.Path})),DI=RS((e=>()=>{const t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}})),PI=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={arg:`${t instanceof Uint8Array?Ne.CID.decode(t):t}`,...r};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel);const i=await e.post("get",{signal:r.signal,searchParams:PS(n),headers:r.headers});yield*i.iterator()})),NI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("id",{signal:t.signal,searchParams:PS({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),n=await r.json(),i={...iA(n)};return i.id=vn(i.id),i.addresses&&(i.addresses=i.addresses.map((e=>new Ml(e)))),i})),xI=e=>{const t=NI(e);return async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await t(e);return Boolean(r&&r.addresses&&r.addresses.length)}},OI=RS(((e,t)=>async function*(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=`${r instanceof Uint8Array?Ne.CID.decode(r):r}`;async function s(e){let r=e.Hash;if(r.includes("/")){const e=r.startsWith("/ipfs/")?r:`/ipfs/${r}`;r=(await KA(t)(e)).cid}else r=Ne.CID.parse(r);const n={name:e.Name,path:i+(e.Name?`/${e.Name}`:""),size:e.Size,cid:r,type:BI(e)};return e.Mode&&(n.mode=parseInt(e.Mode,8)),void 0!==e.Mtime&&null!==e.Mtime&&(n.mtime={secs:e.Mtime},void 0!==e.MtimeNsecs&&null!==e.MtimeNsecs&&(n.mtime.nsecs=e.MtimeNsecs)),n}const o=await e.post("ls",{signal:n.signal,searchParams:PS({arg:i,...n}),headers:n.headers});for await(let e of o.ndjson()){if(e=e.Objects,!e)throw new Error("expected .Objects in results");if(e=e[0],!e)throw new Error("expected one array in results.Objects");const t=e.Links;if(!Array.isArray(t))throw new Error("expected one array in results.Objects[0].Links");if(!t.length)return void(yield s(e));yield*t.map(s)}}));function BI(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}const LI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("dns",{signal:t.signal,searchParams:PS(t),headers:t.headers});return iA(await r.json())})),MI=RS((e=>async function*(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("ping",{signal:r.signal,searchParams:PS({arg:`${t}`,...r}),headers:r.headers,transform:iA});yield*n.ndjson()})),UI=RS((e=>async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await e.post("resolve",{signal:r.signal,searchParams:PS({arg:t,...r}),headers:r.headers}),{Path:i}=await n.json();return i})),jI=RS((e=>async function(){throw me(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")})),FI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("shutdown",{signal:t.signal,searchParams:PS(t),headers:t.headers});await r.text()})),zI=RS((e=>async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=await e.post("version",{signal:t.signal,searchParams:PS(t),headers:t.headers});return{...iA(await r.json()),"ipfs-http-client":"1.0.0"}}));__webpack_require__(3897),__webpack_require__(5014);const VI=Object.create(null);VI.open="0",VI.close="1",VI.ping="2",VI.pong="3",VI.message="4",VI.upgrade="5",VI.noop="6";const KI=Object.create(null);Object.keys(VI).forEach((e=>{KI[VI[e]]=e}));const $I={type:"error",data:"parser error"},qI="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),HI="function"===typeof ArrayBuffer,WI=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+e)},r.readAsDataURL(e)},GI=(e,t,r)=>{let{type:n,data:i}=e;return qI&&i instanceof Blob?t?r(i):WI(i,r):HI&&(i instanceof ArrayBuffer||(s=i,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer))?t?r(i):WI(new Blob([i]),r):r(VI[n]+(i||""));var s},YI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",QI="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let OM=0;OM<YI.length;OM++)QI[YI.charCodeAt(OM)]=OM;const JI="function"===typeof ArrayBuffer,XI=(e,t)=>{if(JI){const r=(e=>{let t,r,n,i,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const l=new ArrayBuffer(o),u=new Uint8Array(l);for(t=0;t<a;t+=4)r=QI[e.charCodeAt(t)],n=QI[e.charCodeAt(t+1)],i=QI[e.charCodeAt(t+2)],s=QI[e.charCodeAt(t+3)],u[c++]=r<<2|n>>4,u[c++]=(15&n)<<4|i>>2,u[c++]=(3&i)<<6|63&s;return l})(e);return ZI(r,t)}return{base64:!0,data:e}},ZI=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e,eC=(e,t)=>{if("string"!==typeof e)return{type:"message",data:ZI(e,t)};const r=e.charAt(0);if("b"===r)return{type:"message",data:XI(e.substring(1),t)};return KI[r]?e.length>1?{type:KI[r],data:e.substring(1)}:{type:KI[r]}:$I},tC=String.fromCharCode(30);function rC(e){if(e)return function(e){for(var t in rC.prototype)e[t]=rC.prototype[t];return e}(e)}rC.prototype.on=rC.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},rC.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},rC.prototype.off=rC.prototype.removeListener=rC.prototype.removeAllListeners=rC.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},rC.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,t)}return this},rC.prototype.emitReserved=rC.prototype.emit,rC.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},rC.prototype.hasListeners=function(e){return!!this.listeners(e).length};const nC="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function iC(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{})}const sC=setTimeout,oC=clearTimeout;function aC(e,t){t.useNativeTimers?(e.setTimeoutFn=sC.bind(nC),e.clearTimeoutFn=oC.bind(nC)):(e.setTimeoutFn=setTimeout.bind(nC),e.clearTimeoutFn=clearTimeout.bind(nC))}class cC extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class lC extends rC{constructor(e){super(),this.writable=!1,aC(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new cC(e,t,r)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=eC(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const uC="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),hC={};let dC,pC=0,fC=0;function yC(e){let t="";do{t=uC[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function gC(){const e=yC(+new Date);return e!==dC?(pC=0,dC=e):e+"."+yC(pC++)}for(;fC<64;fC++)hC[uC[fC]]=fC;function mC(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}let wC=!1;try{wC="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Up){}const vC=wC;function bC(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||vC))return new XMLHttpRequest}catch(r){}if(!t)try{return new(nC[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}function EC(){}const _C=null!=new bC({xdomain:!1}).responseType;class SC extends rC{constructor(e,t){super(),aC(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=iC(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new bC(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(r){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{t.setRequestHeader("Accept","*/*")}catch(r){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"===typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(r){return void this.setTimeoutFn((()=>{this.onError(r)}),0)}"undefined"!==typeof document&&(this.index=SC.requestsCount++,SC.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=EC,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete SC.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(SC.requestsCount=0,SC.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",AC);else if("function"===typeof addEventListener){addEventListener("onpagehide"in nC?"pagehide":"unload",AC,!1)}function AC(){for(let e in SC.requests)SC.requests.hasOwnProperty(e)&&SC.requests[e].abort()}const kC="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),IC=nC.WebSocket||nC.MozWebSocket,CC="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const RC={websocket:class extends lC{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=CC?{}:iC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=CC?new IC(e,t,r):t?new IC(e,t):new IC(e)}catch(Up){return this.emitReserved("error",Up)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;GI(r,this.supportsBinary,(e=>{try{this.ws.send(e)}catch(t){}n&&kC((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=gC()),this.supportsBinary||(e.b64=1);const n=mC(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!IC}},polling:class extends lC{constructor(e){if(super(e),this.polling=!1,"undefined"!==typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=_C&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const r=e.split(tC),n=[];for(let i=0;i<r.length;i++){const e=eC(r[i],t);if(n.push(e),"error"===e.type)break}return n})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach(((e,s)=>{GI(e,!1,(e=>{n[s]=e,++i===r&&t(n.join(tC))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=gC()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const n=mC(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new SC(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},TC=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,DC=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function PC(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=TC.exec(e||""),s={},o=14;for(;o--;)s[DC[o]]=i[o]||"";return-1!=r&&-1!=n&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,s.path),s.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,s.query),s}class NC extends rC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),e&&"object"===typeof e&&(t=e,e=null),e?(e=PC(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=PC(t.host).host),aC(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let e=r[n].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"===typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new RC[e](r)}open(){let e;if(this.opts.rememberUpgrade&&NC.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(t){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),r=!1;NC.priorWebsocketSuccess=!1;const n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;NC.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{r||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function i(){r||(r=!0,l(),t.close(),t=null)}const s=e=>{const r=new Error("probe error: "+e);r.transport=t.name,i(),this.emitReserved("upgradeError",r)};function o(){s("transport closed")}function a(){s("socket closed")}function c(e){t&&e.name!==t.name&&i()}const l=()=>{t.removeListener("open",n),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};t.once("open",n),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",c),t.open()}onOpen(){if(this.readyState="open",NC.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(e+="string"===typeof(t=n)?function(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(t):Math.ceil(1.33*(t.byteLength||t.size))),r>0&&e>this.maxPayload)return this.writeBuffer.slice(0,r);e+=2}var t;return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"===typeof t&&(n=t,t=void 0),"function"===typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?r():e()})):this.upgrading?r():e()),this}onError(e){NC.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}NC.protocol=4;NC.protocol;const xC="function"===typeof ArrayBuffer,OC=Object.prototype.toString,BC="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===OC.call(Blob),LC="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===OC.call(File);function MC(e){return xC&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||BC&&e instanceof Blob||LC&&e instanceof File}function UC(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(UC(e[t]))return!0;return!1}if(MC(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return UC(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&UC(e[r]))return!0;return!1}function jC(e){const t=[],r=e.data,n=e;return n.data=FC(r,t),n.attachments=t.length,{packet:n,buffers:t}}function FC(e,t){if(!e)return e;if(MC(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=FC(e[n],t);return r}if("object"===typeof e&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=FC(e[n],t));return r}return e}function zC(e,t){return e.data=VC(e.data,t),e.attachments=void 0,e}function VC(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=VC(e[r],t);else if("object"===typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=VC(e[r],t));return e}const KC=5;var $C;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}($C||($C={}));class qC{constructor(e){this.replacer=e}encode(e){return e.type!==$C.EVENT&&e.type!==$C.ACK||!UC(e)?[this.encodeAsString(e)]:(e.type=e.type===$C.EVENT?$C.BINARY_EVENT:$C.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return e.type!==$C.BINARY_EVENT&&e.type!==$C.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=jC(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}class HC extends rC{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e),t.type===$C.BINARY_EVENT||t.type===$C.BINARY_ACK?(this.reconstructor=new WC(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!MC(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===$C[r.type])throw new Error("unknown packet type "+r.type);if(r.type===$C.BINARY_EVENT||r.type===$C.BINARY_ACK){const n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(n,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){const n=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(n,t)}else r.nsp="/";const n=e.charAt(t+1);if(""!==n&&Number(n)==n){const n=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=this.tryParse(e.substr(t));if(!HC.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case $C.CONNECT:return"object"===typeof t;case $C.DISCONNECT:return void 0===t;case $C.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case $C.EVENT:case $C.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case $C.ACK:case $C.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class WC{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=zC(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function GC(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const YC=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class QC extends rC{constructor(e,t,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[GC(e,"open",this.onopen.bind(this)),GC(e,"packet",this.onpacket.bind(this)),GC(e,"error",this.onerror.bind(this)),GC(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){if(YC.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.unshift(e);const i={type:$C.EVENT,data:r,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof r[r.length-1]){const e=this.ids++,t=r.pop();this._registerAckCallback(e,t),i.id=e}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var r=this;const n=this.flags.timeout;if(void 0===n)return void(this.acks[e]=t);const i=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),n);this.acks[e]=function(){r.io.clearTimeoutFn(i);for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.apply(r,[null,...n])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this.packet({type:$C.CONNECT,data:e})})):this.packet({type:$C.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case $C.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $C.EVENT:case $C.BINARY_EVENT:this.onevent(e);break;case $C.ACK:case $C.BINARY_ACK:this.onack(e);break;case $C.DISCONNECT:this.ondisconnect();break;case $C.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let r=!1;return function(){if(!r){r=!0;for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];t.packet({type:$C.ACK,id:e,data:i})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:$C.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function JC(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}JC.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},JC.prototype.reset=function(){this.attempts=0},JC.prototype.setMin=function(e){this.ms=e},JC.prototype.setMax=function(e){this.max=e},JC.prototype.setJitter=function(e){this.jitter=e};class XC extends rC{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,aC(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new JC({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||a;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new NC(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=GC(t,"open",(function(){r.onopen(),e&&e()})),i=GC(t,"error",(t=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",t),e?e(t):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;0===e&&n();const r=this.setTimeoutFn((()=>{n(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(n),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(GC(e,"ping",this.onping.bind(this)),GC(e,"data",this.ondata.bind(this)),GC(e,"error",this.onerror.bind(this)),GC(e,"close",this.onclose.bind(this)),GC(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r||(r=new QC(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t){if(this.nsps[r].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ZC={};function eR(e,t){"object"===typeof e&&(t=e,e=void 0);const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=e;r=r||"undefined"!==typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof r?r.protocol+"//"+e:"https://"+e),n=PC(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),n=r.source,i=r.id,s=r.path,o=ZC[i]&&s in ZC[i].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new XC(n,t):(ZC[i]||(ZC[i]=new XC(n,t)),a=ZC[i]),r.query&&!t.query&&(t.query=r.queryKey),a.socket(r.path,t)}Object.assign(eR,{Manager:XC,Socket:QC,io:eR,connect:eR});class tR{constructor(e,t){this.label=e.label,this.open=sS(),this.channel=e,this.channel.binaryType="arraybuffer",this.log=t.log,"number"===typeof this.channel.bufferedAmountLowThreshold&&(this.channel.bufferedAmountLowThreshold=65536),e.addEventListener("message",(e=>{t.onMessage(e)})),e.addEventListener("bufferedamountlow",(()=>{this.log("stop backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open.resolve()})),e.addEventListener("open",(()=>{this.open.resolve(),t.onOpen()})),e.addEventListener("close",(()=>{t.onClose()})),e.addEventListener("error",(r=>{var n,i,s,o,a;if("Transport channel closed"===(null===(n=r.error)||void 0===n?void 0:n.message))return this.close();t.log.error('channel encounter an error in state "%s" message: "%s" detail: "%s',e.readyState,null===(i=r.error)||void 0===i?void 0:i.message,null===(s=r.error)||void 0===s?void 0:s.errorDetail);const c=r.error instanceof Error?r.error:new Error(`datachannel error: ${null===(o=r.error)||void 0===o?void 0:o.message} ${null===(a=r.error)||void 0===a?void 0:a.errorDetail}`);t.onError(me(c,"ERR_DATA_CHANNEL"))}));let r=!1;this.closingInterval=setInterval((()=>{"closing"===e.readyState?(r&&t.onClose(),r=!0):r=!1}),5e3)}async send(e){await this.open.promise,this.channel.send(e),this.channel.bufferedAmount>65536&&(this.log("start backpressure: bufferedAmount %d",this.channel.bufferedAmount),this.open=sS())}close(){clearInterval(this.closingInterval),this.channel.close()}get bufferedAmount(){return this.channel.bufferedAmount}}var rR=__webpack_require__(2096);const nR={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}]};class iR extends FE{constructor(e){var t,r;super(),this.id=null!==(t=e.id)&&void 0!==t?t:(0,$t.toString)(zi(4),"hex").slice(0,7),this.log=ge(`libp2p:webrtc-peer:${e.logPrefix}:${this.id}`),this.wrtc=null!==(r=e.wrtc)&&void 0!==r?r:function(){var e,t,r,n,i,s;if("undefined"===typeof globalThis)throw me(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");const o={RTCPeerConnection:null!==(e=null!==(t=globalThis.RTCPeerConnection)&&void 0!==t?t:globalThis.mozRTCPeerConnection)&&void 0!==e?e:globalThis.webkitRTCPeerConnection,RTCSessionDescription:null!==(r=null!==(n=globalThis.RTCSessionDescription)&&void 0!==n?n:globalThis.mozRTCSessionDescription)&&void 0!==r?r:globalThis.webkitRTCSessionDescription,RTCIceCandidate:null!==(i=null!==(s=globalThis.RTCIceCandidate)&&void 0!==s?s:globalThis.mozRTCIceCandidate)&&void 0!==i?i:globalThis.webkitRTCIceCandidate};if(null==o.RTCPeerConnection)throw me(new Error("No WebRTC support detected"),"ERR_WEBRTC_SUPPORT");return o}(),this.peerConnection=new this.wrtc.RTCPeerConnection(Object.assign({},nR,e.peerConnectionConfig)),this.closed=!1,this.connected=sS(),this.source=ZE(),this.sink=async e=>{if(await this.connected.promise,null==this.channel)throw me(new Error("Connected but no channel?!"),"ERR_DATA_CHANNEL");for await(const t of e)await this.channel.send(t);await this.close()}}handleDataChannelEvent(e){const t=e.channel;null!=t?this.channel=new tR(t,{log:this.log,onMessage:e=>{this.source.push(new Uint8Array(e.data))},onOpen:()=>{this.connected.resolve(),this.dispatchEvent(new VE("ready"))},onClose:()=>{this.close().catch((e=>{this.log("error closing connection after channel close",e)}))},onError:e=>{this.close(e).catch((e=>{this.log("error closing connection after channel error",e)}))}}):this.close(me(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL")).catch((e=>{this.log("Error closing after event channel was found to be null",e)}))}async close(e){var t;if(this.closed=!0,null==e&&null!=this.channel)for(;this.channel.bufferedAmount>0;)await rR(100);null===(t=this.channel)||void 0===t||t.close(),this.peerConnection.close(),this.source.end(e),this.dispatchEvent(new VE("close"))}}class sR extends FE{constructor(e){super(),this.log=e.log,this.peerConnection=e.peerConnection,this.wrtc=e.wrtc,this.status="idle",this.peerConnection.addEventListener("negotiationneeded",(()=>{this.log("peer connection negotiation needed"),this.handleRenegotiate({type:"renegotiate"}).catch((e=>{this.log.error("could not renegotiate %o",e)}))}))}async handleSignal(e){return this.log('incoming signal "%s"',e.type),"offer"===e.type?await this.handleOffer(e):"answer"===e.type?await this.handleAnswer(e):"candidate"===e.type?await this.handleCandidate(e):"renegotiate"===e.type?await this.handleRenegotiate(e):"goodbye"===e.type?await this.handleGoodye(e):void this.log(`Unknown signal type ${e.type}`)}async handleOffer(e){}async handleAnswer(e){}async handleRenegotiate(e){}async handleGoodye(e){this.peerConnection.close()}async handleCandidate(e){const t=new this.wrtc.RTCIceCandidate(e.candidate);try{await this.peerConnection.addIceCandidate(t)}catch(Up){if(null!=t.address&&!t.address.endsWith(".local"))throw me(Up,"ERR_ADD_ICE_CANDIDATE");this.log("ignoring unsupported ICE candidate.")}}}const oR=ge("libp2p:webrtc-peer:receiver");class aR extends iR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({...e,logPrefix:"receiver"}),this.handshake=new cR({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,answerOptions:e.answerOptions}),this.handshake.addEventListener("signal",(e=>this.dispatchEvent(new VE("signal",{detail:e.detail})))),this.peerConnection.addEventListener("datachannel",(e=>{this.handleDataChannelEvent(e)}))}handleSignal(e){this.handshake.handleSignal(e).catch((t=>{this.log("error handling signal %o %o",e,t)}))}}class cR extends sR{constructor(e){super(e),this.options=e,this.status="idle",this.iceCandidates=[]}async handleRenegotiate(){oR.trace("renegotiate"),this.dispatchEvent(new VE("signal",{detail:{type:"renegotiate"}}))}async handleOffer(e){var t;await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(e));for(const n of this.iceCandidates)await this.handleCandidate(n);this.iceCandidates=[];const r=await this.peerConnection.createAnswer(this.options.answerOptions);await this.peerConnection.setLocalDescription(r),oR.trace("handle offer",this.peerConnection.localDescription),this.dispatchEvent(new VE("signal",{detail:null!==(t=this.peerConnection.localDescription)&&void 0!==t?t:r}))}async handleCandidate(e){null!=this.peerConnection.remoteDescription&&null!=this.peerConnection.remoteDescription.type?await super.handleCandidate(e):this.iceCandidates.push(e)}}const lR=e=>{const t=e.on||e.addListener||e.addEventListener,r=e.off||e.removeListener||e.removeEventListener;if(!t||!r)throw new TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:r.bind(e)}};function uR(e,t,r){"function"===typeof r&&(r={filter:r});const n=function(e,t,r){let n;const i=new Promise(((i,s)=>{if(!((r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r}).count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");const o=[t].flat(),a=[],{addListener:c,removeListener:l}=lR(e),u=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const o=r.multiArgs?t:t[0];r.filter&&!r.filter(o)||(a.push(o),r.count===a.length&&(n(),i(a)))},h=e=>{n(),s(e)};n=()=>{for(const e of o)l(e,u);for(const e of r.rejectionEvents)l(e,h)};for(const e of o)c(e,u);for(const e of r.rejectionEvents)c(e,h);r.resolveImmediately&&i(a)}));if(i.cancel=n,"number"===typeof r.timeout){const e=Er(i,r.timeout);return e.cancel=n,e}return i}(e,t,r={...r,count:1,resolveImmediately:!1}),i=n.then((e=>e[0]));return i.cancel=n.cancel,i}const hR=ge("libp2p:webrtc-peer:initator");class dR extends iR{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({...t,logPrefix:"initiator"}),this.handleDataChannelEvent({channel:this.peerConnection.createDataChannel(null!==(e=t.dataChannelLabel)&&void 0!==e?e:(0,$t.toString)(zi(20),"hex").slice(0,7),t.dataChannelInit)}),this.handshake=new pR({log:this.log,peerConnection:this.peerConnection,wrtc:this.wrtc,offerOptions:t.offerOptions}),this.handshake.addEventListener("signal",(e=>{this.dispatchEvent(new VE("signal",{detail:e.detail}))}))}handleSignal(e){this.handshake.handleSignal(e).catch((t=>{this.log("error handling signal %o %o",e,t)}))}}class pR extends sR{constructor(e){super(e),this.options=e,this.status="idle",this.peerConnection.addEventListener("icecandidate",(e=>{if(null==e.candidate)return;const t={type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}};hR.trace("create candidate",t),this.dispatchEvent(new VE("signal",{detail:t})),this.dispatchEvent(new VE("ice-candidate"))}))}async handleRenegotiate(){var e;if("negotiating"===this.status)return void this.log("already negotiating, queueing");this.status="negotiating";const t=await this.peerConnection.createOffer(this.options.offerOptions);await this.peerConnection.setLocalDescription(t),await uR(this,"ice-candidate"),await rR(1e3),hR.trace("renegotiate",this.peerConnection.localDescription),this.dispatchEvent(new VE("signal",{detail:null!==(e=this.peerConnection.localDescription)&&void 0!==e?e:t}))}async handleAnswer(e){hR.trace("handle answer",e),await this.peerConnection.setRemoteDescription(new this.wrtc.RTCSessionDescription(e)),this.status="idle"}}const fR=ge("libp2p:webrtc-star:socket");function yR(e,t){const{sink:r,source:n}=e,i={remoteAddr:t.remoteAddr,async sink(e){null!=t.signal&&(e=r_(e,t.signal));try{await r(e)}catch(Up){"aborted"!==Up.type&&fR.error(Up)}},source:null!=t.signal?r_(n,t.signal):n,timeline:{open:Date.now()},async close(){if(e.closed)return;const t=Date.now(),r=setTimeout((()=>{if(null!=i.remoteAddr){const{host:e,port:r}=i.remoteAddr.toOptions();fR("timeout closing socket to %s:%s after %dms, destroying it manually",e,r,Date.now()-t)}e.closed||e.close().catch((e=>{fR.error("could not close socket",e)}))}),2e3);try{await e.close()}finally{clearTimeout(r)}}};return e.addEventListener("close",(()=>{null==i.timeline.close&&(i.timeline.close=Date.now())}),{once:!0}),i}function gR(e){const t=e.toString().split("/"),r=e.protos()[1].name,n=e.protos()[2].name,i=e.stringTuples()[1][1];if("tcp"!==r||"ws"!==n&&"wss"!==n)throw new Error(`invalid multiaddr: ${e.toString()}`);if(!Ml.isName(e))return`http://${t[2]}:${t[4]}`;if("ws"===n)return`http://${t[2]}${null==i||"80"===i?"":`:${i}`}`;if("wss"===n)return`https://${t[2]}${null==i||"443"===i?"":`:${i}`}`;throw new Error("invalid multiaddr: "+e.toString())}const mR=ge("libp2p:webrtc-star:listener"),wR={transports:["websocket"],"force new connection":!0,path:"/socket.io-next/"};class vR extends FE{constructor(e,t,r,n,i){super(),this.signallingAddr=t,this.socket=eR(e,wR),this.connections=[],this.channels=new Map,this.pendingSignals=new Map,this.upgrader=r,this.handler=n,this.channelOptions=i,this.handleWsHandshake=this.handleWsHandshake.bind(this),this.socket.once("connect_error",(e=>{this.dispatchEvent(new VE("error",{detail:e}))})),this.socket.once("error",(e=>{this.dispatchEvent(new VE("error",{detail:e}))})),this.socket.on("ws-handshake",this.handleWsHandshake),this.socket.on("ws-peer",(e=>{this.dispatchEvent(new VE("peer",{detail:e}))})),this.socket.on("connect",(()=>this.socket.emit("ss-join",t.toString()))),this.socket.once("connect",(()=>{this.dispatchEvent(new VE("listening"))}))}_createChannel(e,t,r){const n={...this.channelOptions},i=new aR(n),s=e=>{const t=e.detail;mR.error("incoming connection errored",t)};return i.addEventListener("error",s),i.addEventListener("close",(()=>{i.removeEventListener("error",s)}),{once:!0}),i.addEventListener("signal",(n=>{const i=n.detail;this.socket.emit("ss-handshake",{intentId:e,srcMultiaddr:t,dstMultiaddr:r,answer:!0,signal:i})})),i.addEventListener("ready",(()=>{const t=yR(i,{remoteAddr:this.signallingAddr});mR("new inbound connection %s",t.remoteAddr);try{this.upgrader.upgradeInbound(t).then((r=>{mR("inbound connection %s upgraded",t.remoteAddr),this.connections.push(t);i.addEventListener("close",(()=>{this.connections=this.connections.filter((e=>e!==t)),this.channels.delete(e),this.pendingSignals.delete(e)}),{once:!0}),this.dispatchEvent(new VE("connection",{detail:r})),this.handler(r)})).catch((e=>{mR.error("inbound connection failed to upgrade",e),t.close().catch((e=>{mR.error("inbound connection failed to close after failing to upgrade",e)}))}))}catch(Up){mR.error("inbound connection failed to upgrade",Up),t.close().catch((e=>{mR.error("inbound connection failed to close after failing to upgrade",e)}))}}),{once:!0}),i}handleWsHandshake(e){if(mR('incoming handshake. signal type "%s" is answer %s',e.signal.type,e.answer),!0===e.answer||null!=e.err||null==e.intentId)return;const t=e.intentId;let r=this.pendingSignals.get(t);null==r&&(r=[],this.pendingSignals.set(t,r)),r.push(e);let n=this.channels.get(t);if(null==n){if("offer"!==e.signal.type)return void mR("handshake is not an offer and channel does not exist, buffering until we receive an offer");mR("creating new channel to handle offer handshake"),n=this._createChannel(e.intentId,e.srcMultiaddr,e.dstMultiaddr),this.channels.set(t,n)}else mR("channel already exists, using it to handle handshake");for(;r.length>0;){const e=r.shift();null!=(null===e||void 0===e?void 0:e.signal)&&n.handleSignal(e.signal)}}async close(){this.socket.emit("ss-leave",this.signallingAddr.toString()),this.socket.removeAllListeners(),this.socket.close(),await Promise.all([...this.connections.map((async e=>await e.close())),...Array.from(this.channels.values()).map((async e=>await e.close()))]),this.dispatchEvent(new VE("close"))}}class bR extends FE{constructor(e,t,r,n,i){super(),this.upgrader=e,this.handler=t,this.peerId=r,this.transport=n,this.options=i}async listen(e){if(null!=this.listeningAddr)throw me(new Error("listener already in use"),"ERR_ALREADY_LISTENING");const t=sS();let r;this.listeningAddr=e,r=e.protoCodes().includes(421)?e:e.encapsulate(`/p2p/${this.peerId.toString()}`),this.signallingUrl=gR(e),mR("connecting to signalling server on: %s",this.signallingUrl);const n=new vR(this.signallingUrl,r,this.upgrader,this.handler,this.options.channelOptions);return n.addEventListener("error",(e=>{const r=e.detail;mR("error connecting to signalling server %o",r),n.close().catch((e=>{mR.error("error closing server after error",e)})),t.reject(r)})),n.addEventListener("listening",(()=>{mR("connected to signalling server"),this.dispatchEvent(new VE("listening")),t.resolve()})),n.addEventListener("peer",(e=>{this.transport.peerDiscovered(e.detail)})),n.addEventListener("connection",(t=>{const r=t.detail;if(null==r.remoteAddr)try{r.remoteAddr=e.decapsulateCode(421).encapsulate(`/p2p/${r.remotePeer.toString()}`)}catch(Up){mR.error("could not determine remote address",Up)}this.dispatchEvent(new VE("connection",{detail:r}))})),this.transport.sigServers.set(this.signallingUrl,n),await t.promise}async close(){if(null!=this.signallingUrl){const e=this.transport.sigServers.get(this.signallingUrl);null!=e&&(await e.close(),this.transport.sigServers.delete(this.signallingUrl))}this.dispatchEvent(new VE("close")),this.listeningAddr=void 0}getAddrs(){return null!=this.listeningAddr?[this.listeningAddr]:[]}}const ER=Symbol.for("@libp2p/transport");const _R=Symbol.for("@libp2p/peer-discovery");const SR="RTCPeerConnection"in globalThis,AR=ge("libp2p:webrtc-star"),kR=()=>{};class IR extends FE{constructor(){super(...arguments),this.started=!1}get[_R](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star-discovery"}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}dispatchEvent(e){return!!this.isStarted()&&super.dispatchEvent(e)}}class CR{constructor(e){this.components=new F_,null!=(null===e||void 0===e?void 0:e.wrtc)&&(this.wrtc=e.wrtc),this.sigServers=new Map,this.discovery=new IR,this.peerDiscovered=this.peerDiscovered.bind(this)}get[ER](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-star"}init(e){this.components=e}async dial(e,t){const r=yR(await this._connect(e,t),{remoteAddr:e,signal:t.signal});AR("new outbound connection %s",r.remoteAddr);const n=await t.upgrader.upgradeOutbound(r);return AR("outbound connection %s upgraded",r.remoteAddr),n}async _connect(e,t){var r,n;if(!0===(null===(r=t.signal)||void 0===r?void 0:r.aborted))throw new t_;const i={...null!==(n=t.channelOptions)&&void 0!==n?n:{}};null!=this.wrtc&&(i.wrtc=this.wrtc);const s=e.toOptions(),o=(0,$t.toString)(zi(36),"hex");return await new Promise(((r,n)=>{var a;const c=this.sigServers.get(gR(e));if(null==(null===c||void 0===c?void 0:c.socket))return n(me(new Error("unknown signal server to use"),"ERR_UNKNOWN_SIGNAL_SERVER"));let l=!1;AR("dialing %s:%s",s.host,s.port);const u=new dR(i),h=e=>{const t=e.detail;if(!l){const e=`connection error ${s.host}:${s.port}: ${t.message}`;AR.error(e),f(t)}},d=()=>{l=!0,AR("connection opened %s:%s",s.host,s.port),f()},p=()=>{AR.error("connection aborted %s:%s",s.host,s.port),u.close().finally((()=>{f(new t_)}))},f=e=>{var i;u.removeEventListener("ready",d),null===(i=t.signal)||void 0===i||i.removeEventListener("abort",p),null==e?r(u):n(e)};u.addEventListener("ready",d,{once:!0}),u.addEventListener("close",(()=>{u.removeEventListener("error",h)})),null===(a=t.signal)||void 0===a||a.addEventListener("abort",p),u.addEventListener("signal",(t=>{const r=t.detail;c.socket.emit("ss-handshake",{intentId:o,srcMultiaddr:c.signallingAddr.toString(),dstMultiaddr:e.toString(),signal:r})})),c.socket.on("ws-handshake",(e=>{e.intentId===o&&null!=e.err&&u.close().finally((()=>{n(me(new Error(e.err),"ERR_SIGNALLING_FAILED"))})),e.intentId!==o||null==e.answer||u.closed||u.handleSignal(e.signal)}))}))}createListener(e){var t,r;if(!SR&&null==this.wrtc)throw me(new Error("no WebRTC support"),"ERR_NO_WEBRTC_SUPPORT");return e.channelOptions=null!==(t=e.channelOptions)&&void 0!==t?t:{},null!=this.wrtc&&(e.channelOptions.wrtc=this.wrtc),function(e,t,r,n,i){return new bR(e,t,r,n,i)}(e.upgrader,null!==(r=e.handler)&&void 0!==r?r:kR,this.components.getPeerId(),this,e)}filter(e){return(e=Array.isArray(e)?e:[e]).filter((e=>!e.protoCodes().includes(290)&&Jl.matches(e)))}peerDiscovered(e){AR("peer discovered: %s",e),e=function(e){const t="/libp2p-webrtc-star";if(e.startsWith(t)){e=e.substring(t.length,e.length);let r=new Ml(e);const n=r.stringTuples().filter((e=>421===e[0]))[0];if(null==n[1])throw new Error("invalid multiaddr: "+e);r=r.decapsulate("p2p"),r=r.encapsulate("/p2p-webrtc-star"),r=r.encapsulate(`/p2p/${n[1]}`),e=r.toString()}return e}(e);const t=new Ml(e),r=t.getPeerId();if(null==r)return;const n=vn(r);this.discovery.dispatchEvent(new VE("peer",{detail:{id:n,multiaddrs:[t],protocols:[]}}))}}var RR,TR;async function*DR(e,t){yield*lc(e,(async e=>(await t.addressBook.add(e.id,e.multiaddrs),e)))}function PR(e){const t=new Set;return Za(e,(e=>!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)))}async function*NR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=0;for await(const n of e)r++,yield n;if(r<t)throw me(new Error("not found"),"NOT_FOUND")}!function(e){e.NOT_STARTED_YET="The libp2p node is not started yet",e.DHT_DISABLED="DHT is not available",e.PUBSUB_DISABLED="PubSub is not available",e.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",e.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",e.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",e.NOT_FOUND="Not found"}(RR||(RR={})),function(e){e.DHT_DISABLED="ERR_DHT_DISABLED",e.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",e.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",e.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",e.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",e.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",e.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",e.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",e.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",e.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",e.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",e.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",e.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",e.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",e.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",e.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",e.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",e.ERR_DIALED_SELF="ERR_DIALED_SELF",e.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",e.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",e.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",e.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",e.ERR_INVALID_KEY="ERR_INVALID_KEY",e.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",e.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",e.ERR_INVALID_PEER="ERR_INVALID_PEER",e.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_TIMEOUT="ERR_TIMEOUT",e.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",e.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",e.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",e.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",e.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",e.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",e.ERR_FIND_SELF="ERR_FIND_SELF",e.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",e.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",e.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",e.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",e.ERR_INVALID_CMS="ERR_INVALID_CMS",e.ERR_MISSING_KEYS="ERR_MISSING_KEYS",e.ERR_NO_KEY="ERR_NO_KEY",e.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",e.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",e.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",e.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",e.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",e.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",e.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",e.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",e.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",e.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",e.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",e.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",e.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",e.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",e.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",e.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",e.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",e.ERR_INVALID_RECORD="ERR_INVALID_RECORD",e.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED"}(TR||(TR={}));var xR=__webpack_require__(8928),OR=__webpack_require__(7465);const BR=ge("libp2p:peer-routing");class LR{constructor(e,t){var r;this.components=e,this.routers=t.routers,this.refreshManagerInit=null!==(r=t.refreshManager)&&void 0!==r?r:{},this.started=!1,this._findClosestPeersTask=this._findClosestPeersTask.bind(this)}isStarted(){return this.started}async start(){this.started||0===this.routers.length||null!=this.timeoutId||!1===this.refreshManagerInit.enabled||(this.timeoutId=(0,xR.setDelayedInterval)(this._findClosestPeersTask,this.refreshManagerInit.interval,this.refreshManagerInit.bootDelay),this.started=!0)}async _findClosestPeersTask(){if(null==this.abortController)try{var e;this.abortController=new Yt.TimeoutController(null!==(e=this.refreshManagerInit.timeout)&&void 0!==e?e:1e4);try{null===OR.setMaxListeners||void 0===OR.setMaxListeners||(0,OR.setMaxListeners)(1/0,this.abortController.signal)}catch{}await Xa(this.getClosestPeers(this.components.getPeerId().toBytes(),{signal:this.abortController.signal}))}catch(Up){BR.error(Up)}finally{var t;null===(t=this.abortController)||void 0===t||t.clear(),this.abortController=void 0}}async stop(){var e;(0,xR.clearDelayedInterval)(this.timeoutId),null===(e=this.abortController)||void 0===e||e.abort(),this.started=!1}async findPeer(e,t){if(0===this.routers.length)throw me(new Error("No peer routers available"),TR.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.components.getPeerId().toString())throw me(new Error("Should not try to find self"),TR.ERR_FIND_SELF);const r=await bu(uc(...this.routers.map((r=>async function*(){try{yield await r.findPeer(e,t)}catch(Up){BR.error(Up)}}()))),(e=>Za(e,Boolean)),(e=>DR(e,this.components.getPeerStore())),(async e=>await mg(e)));if(null!=r)return r;throw me(new Error(RR.NOT_FOUND),TR.ERR_NOT_FOUND)}async*getClosestPeers(e,t){if(0===this.routers.length)throw me(new Error("No peer routers available"),TR.ERR_NO_ROUTERS_AVAILABLE);yield*bu(uc(...this.routers.map((r=>r.getClosestPeers(e,t)))),(e=>DR(e,this.components.getPeerStore())),(e=>PR(e)),(e=>NR(e)))}}class MR{constructor(e,t){var r;this.routers=null!==(r=t.routers)&&void 0!==r?r:[],this.started=!1,this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.routers.length)throw me(new Error("No content this.routers available"),TR.ERR_NO_ROUTERS_AVAILABLE);yield*bu(uc(...this.routers.map((r=>r.findProviders(e,t)))),(e=>DR(e,this.components.getPeerStore())),(e=>PR(e)),(e=>NR(e)))}async provide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.routers.length)throw me(new Error("No content routers available"),TR.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async r=>await r.provide(e,t))))}async put(e,t,r){if(!this.isStarted())throw me(new Error(RR.NOT_STARTED_YET),TR.DHT_NOT_STARTED);const n=this.components.getDHT();null!=n&&await Xa(n.put(e,t,r))}async get(e,t){if(!this.isStarted())throw me(new Error(RR.NOT_STARTED_YET),TR.DHT_NOT_STARTED);const r=this.components.getDHT();if(null!=r)for await(const n of r.get(e,t))if("VALUE"===n.name)return n.value;throw me(new Error(RR.NOT_FOUND),TR.ERR_NOT_FOUND)}async*getMany(e,t,r){if(!this.isStarted())throw me(new Error(RR.NOT_STARTED_YET),TR.DHT_NOT_STARTED);if(null==t||0===t)return;let n=0;const i=this.components.getDHT();if(null!=i)for await(const s of i.get(e,r))if("VALUE"===s.name&&(yield{from:s.from,val:s.value},n++,n===t))break;if(0===n)throw me(new Error(RR.NOT_FOUND),TR.ERR_NOT_FOUND)}}function UR(e){if(Dn(e))return{id:e,multiaddrs:[],protocols:[]};let t;return"string"===typeof e&&(e=new Ml(e)),Ml.isMultiaddr(e)&&(t=e,e=function(e){const t=e.getPeerId();if(null==t)throw me(new Error(`${e.toString()} does not have a valid peer type`),TR.ERR_INVALID_MULTIADDR);try{return vn(t)}catch(Up){throw me(new Error(`${e.toString()} is not a valid peer type`),TR.ERR_INVALID_MULTIADDR)}}(e)),{id:e,multiaddrs:null!=t?[t]:[],protocols:[]}}const jR=e=>e;class FR extends FE{constructor(e,t){var r;super();const{listen:n=[],announce:i=[]}=t;this.components=e,this.listen=new Set(n.map((e=>e.toString()))),this.announce=new Set(i.map((e=>e.toString()))),this.observed=new Set,this.announceFilter=null!==(r=t.announceFilter)&&void 0!==r?r:jR}getListenAddrs(){return Array.from(this.listen).map((e=>new Ml(e)))}getAnnounceAddrs(){return Array.from(this.announce).map((e=>new Ml(e)))}getObservedAddrs(){return Array.from(this.observed).map((e=>new Ml(e)))}addObservedAddr(e){let t=new Ml(e);const r=t.getPeerId();if(null!=r){vn(r).equals(this.components.getPeerId())&&(t=t.decapsulate(new Ml(`/p2p/${this.components.getPeerId().toString()}`)))}const n=t.toString();this.observed.has(n)||(this.observed.add(n),this.dispatchEvent(new VE("change:addresses")))}getAddresses(){let e=this.getAnnounceAddrs().map((e=>e.toString()));0===e.length&&(e=this.components.getTransportManager().getAddrs().map((e=>e.toString()))),e=e.concat(this.getObservedAddrs().map((e=>e.toString())));const t=new Set(e);return this.announceFilter(Array.from(t).map((e=>new Ml(e)))).map((e=>e.getPeerId()===this.components.getPeerId().toString()?e:e.encapsulate(`/p2p/${this.components.getPeerId().toString()}`)))}}const zR=ge("libp2p:connection-manager:latency-monitor:visibility-change-emitter");class VR extends FE{constructor(){super(),this.hidden="hidden",this.visibilityChange="visibilityChange",null!=globalThis.document&&(this._initializeVisibilityVarNames(),this._addVisibilityChangeListener())}_initializeVisibilityVarNames(){let e="hidden",t="visibilitychange";"undefined"!==typeof globalThis.document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==typeof globalThis.document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):"undefined"!==typeof globalThis.document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==typeof globalThis.document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),this.hidden=e,this.visibilityChange=t}_addVisibilityChangeListener(){"undefined"===typeof globalThis.document.addEventListener||"undefined"===typeof document[this.hidden]?zR("Checking page visibility requires a browser that supports the Page Visibility API."):globalThis.document.addEventListener(this.visibilityChange,this._handleVisibilityChange.bind(this),!1)}isVisible(){if(void 0!==this.hidden&&void 0!==document[this.hidden])return null==document[this.hidden]}_handleVisibilityChange(){const e=!1===globalThis.document[this.hidden];zR(e?"Page Visible":"Page Hidden"),this.dispatchEvent(new VE("visibilityChange",{detail:e}))}}const KR=ge("libp2p:connection-manager:latency-monitor");class $R extends FE{constructor(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();const{latencyCheckIntervalMs:n,dataEmitIntervalMs:i,asyncTestFn:s,latencyRandomPercentage:o}=r;this.latencyCheckIntervalMs=null!==n&&void 0!==n?n:500,this.latencyRandomPercentage=null!==o&&void 0!==o?o:10,this.latencyCheckMultiply=this.latencyRandomPercentage/100*2*this.latencyCheckIntervalMs,this.latencyCheckSubtract=this.latencyCheckMultiply/2,this.dataEmitIntervalMs=null===i||0===i?void 0:null!==i&&void 0!==i?i:5e3,KR("latencyCheckIntervalMs: %s dataEmitIntervalMs: %s",this.latencyCheckIntervalMs,this.dataEmitIntervalMs),null!=this.dataEmitIntervalMs?KR("Expecting ~%s events per summary",this.latencyCheckIntervalMs/this.dataEmitIntervalMs):KR("Not emitting summaries"),this.asyncTestFn=s,null!=(null===(e=globalThis.process)||void 0===e?void 0:e.hrtime)?(KR("Using process.hrtime for timing"),this.now=globalThis.process.hrtime,this.getDeltaMS=e=>{const t=this.now(e);return 1e3*t[0]+t[1]/1e6}):"undefined"!==typeof window&&null!=(null===(t=window.performance)||void 0===t?void 0:t.now)?(KR("Using performance.now for timing"),this.now=window.performance.now.bind(window.performance),this.getDeltaMS=e=>Math.round(this.now()-e)):(KR("Using Date.now for timing"),this.now=Date.now,this.getDeltaMS=e=>this.now()-e),this.latencyData=this.initLatencyData()}start(){var e;"undefined"!==typeof globalThis.window&&(this.visibilityChangeEmitter=new VR,this.visibilityChangeEmitter.addEventListener("visibilityChange",(e=>{const{detail:t}=e;t?this._startTimers():(this._emitSummary(),this._stopTimers())}))),!0===(null===(e=this.visibilityChangeEmitter)||void 0===e?void 0:e.isVisible())&&this._startTimers()}stop(){this._stopTimers()}_startTimers(){null==this.checkLatencyID&&(this.checkLatency(),null!=this.dataEmitIntervalMs&&(this.emitIntervalID=setInterval((()=>this._emitSummary()),this.dataEmitIntervalMs),"function"===typeof this.emitIntervalID.unref&&this.emitIntervalID.unref()))}_stopTimers(){null!=this.checkLatencyID&&(clearTimeout(this.checkLatencyID),this.checkLatencyID=void 0),null!=this.emitIntervalID&&(clearInterval(this.emitIntervalID),this.emitIntervalID=void 0)}_emitSummary(){const e=this.getSummary();e.events>0&&this.dispatchEvent(new VE("data",{detail:e}))}getSummary(){const e={events:this.latencyData.events,minMs:this.latencyData.minMs,maxMs:this.latencyData.maxMs,avgMs:this.latencyData.events>0?this.latencyData.totalMs/this.latencyData.events:Number.POSITIVE_INFINITY,lengthMs:this.getDeltaMS(this.latencyData.startTime)};return this.latencyData=this.initLatencyData(),KR.trace("Summary: %O",e),e}checkLatency(){const e=Math.random()*this.latencyCheckMultiply-this.latencyCheckSubtract,t={deltaOffset:Math.ceil(this.latencyCheckIntervalMs+e),startTime:this.now()},r=()=>{if(null==this.checkLatencyID)return;const e=this.getDeltaMS(t.startTime)-t.deltaOffset;this.checkLatency(),this.latencyData.events++,this.latencyData.minMs=Math.min(this.latencyData.minMs,e),this.latencyData.maxMs=Math.max(this.latencyData.maxMs,e),this.latencyData.totalMs+=e,KR.trace("MS: %s Data: %O",e,this.latencyData)};KR.trace("localData: %O",t),this.checkLatencyID=setTimeout((()=>{null!=this.asyncTestFn?(t.deltaOffset=0,t.startTime=this.now(),this.asyncTestFn(r)):(t.deltaOffset-=1,r())}),t.deltaOffset),"function"===typeof this.checkLatencyID.unref&&this.checkLatencyID.unref()}initLatencyData(){return{startTime:this.now(),minMs:Number.POSITIVE_INFINITY,maxMs:Number.NEGATIVE_INFINITY,events:0,totalMs:0}}}var qR=__webpack_require__(1779);class HR extends Map{constructor(e){super();const{system:t,component:r,metric:n,metrics:i}=e;this.system=null!==t&&void 0!==t?t:"libp2p",this.component=r,this.metric=n,this.metrics=i,this.updateComponentMetric()}set(e,t){return super.set(e,t),this.updateComponentMetric(),this}delete(e){const t=super.delete(e);return this.updateComponentMetric(),t}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metrics.updateComponentMetric({system:this.system,component:this.component,metric:this.metric,value:this.size})}}function WR(e){const{system:t,component:r,metric:n,metrics:i}=e;let s;return s=null!=i?new HR({system:t,component:r,metric:n,metrics:i}):new Map,s}const GR="OPEN",YR="CLOSING",QR="CLOSED";class JR extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted"),this.code=JR.code,this.type=JR.type}static get code(){return"ABORT_ERR"}static get type(){return"aborted"}}var XR=__webpack_require__(9879);const ZR=ge("libp2p:dialer:dial-request");class eT{constructor(e){const{addrs:t,dialAction:r,dialer:n}=e;this.addrs=t,this.dialer=n,this.dialAction=r}async run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.dialer.getTokens(this.addrs.length);if(t.length<1)throw me(new Error("No dial tokens available"),TR.ERR_NO_DIAL_TOKENS);const r=new XR;for(const o of t)r.push(o).catch((e=>{ZR.error(e)}));const n=this.addrs.map((()=>{const e=new AbortController;try{null===OR.setMaxListeners||void 0===OR.setMaxListeners||(0,OR.setMaxListeners)(1/0,e.signal)}catch{}return e}));if(null!=e.signal)try{null===OR.setMaxListeners||void 0===OR.setMaxListeners||(0,OR.setMaxListeners)(1/0,e.signal)}catch{}let i=0,s=!1;try{return await Promise.any(this.addrs.map((async(o,a)=>{const c=await r.shift();if(s)throw this.dialer.releaseToken(t.splice(t.indexOf(c),1)[0]),me(new Error("dialAction already succeeded"),TR.ERR_ALREADY_SUCCEEDED);const l=n[a];if(null==l)throw me(new Error("dialAction did not come with an AbortController"),TR.ERR_INVALID_PARAMETERS);let u;try{const s=l.signal;u=await this.dialAction(o,{...e,signal:null!=e.signal?(0,Qt.anySignal)([s,e.signal]):s}),n[a]=void 0}finally{i++,this.addrs.length-i>=t.length?r.push(c).catch((e=>{ZR.error(e)})):this.dialer.releaseToken(t.splice(t.indexOf(c),1)[0])}if(null==u)throw me(new Error("dialAction led to empty object"),TR.ERR_TRANSPORT_DIAL_FAILED);return s=!0,u})))}finally{n.forEach((e=>{void 0!==e&&e.abort()})),t.forEach((e=>this.dialer.releaseToken(e)))}}}var tT=__webpack_require__(3931);function rT(e){const{address:t}=e.nodeAddress();return Boolean(tT(t))}function nT(e,t){const r=rT(e.multiaddr),n=rT(t.multiaddr);return r&&!n?1:!r&&n||e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}const iT=50,sT=ge("libp2p:dialer"),oT="dialler";class aT{constructor(){var e,t,r,n,i;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.components=new F_,this.started=!1,this.addressSorter=null!==(e=s.addressSorter)&&void 0!==e?e:nT,this.maxAddrsToDial=null!==(t=s.maxAddrsToDial)&&void 0!==t?t:25,this.timeout=null!==(r=s.dialTimeout)&&void 0!==r?r:3e4,this.maxDialsPerPeer=null!==(n=s.maxDialsPerPeer)&&void 0!==n?n:4,this.tokens=[...new Array(null!==(i=s.maxParallelDials)&&void 0!==i?i:100)].map(((e,t)=>t)),this.pendingDials=WR({component:oT,metric:"pending-dials",metrics:s.metrics}),this.pendingDialTargets=WR({component:oT,metric:"pending-dial-targets",metrics:s.metrics});for(const[a,c]of Object.entries(null!==(o=s.resolvers)&&void 0!==o?o:{})){var o;Ml.resolvers.set(a,c)}}init(e){this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1;for(const e of this.pendingDials.values())try{e.controller.abort()}catch(Up){sT.error(Up)}this.pendingDials.clear();for(const e of this.pendingDialTargets.values())e.reject(new JR("Dialer was destroyed"));this.pendingDialTargets.clear()}async dial(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:n,multiaddrs:i}=UR(e);if(this.components.getPeerId().equals(n))throw me(new Error("Tried to dial self"),TR.ERR_DIALED_SELF);if(sT("check multiaddrs %p",n),null!=i&&i.length>0&&(sT("storing multiaddrs %p",n,i),await this.components.getPeerStore().addressBook.add(n,i)),await this.components.getConnectionGater().denyDialPeer(n))throw me(new Error("The dial request is blocked by gater.allowDialPeer"),TR.ERR_PEER_DIAL_INTERCEPTED);sT("creating dial target for %p",n);const s=await this._createCancellableDialTarget(n);if(0===s.addrs.length)throw me(new Error("The dial request has no valid addresses"),TR.ERR_NO_VALID_ADDRESSES);const o=null!==(t=this.pendingDials.get(s.id))&&void 0!==t?t:this._createPendingDial(s,r);try{const e=await o.promise;return sT("dial succeeded to %s",s.id),e}catch(Up){throw sT("dial failed to %s",s.id,Up),o.controller.signal.aborted&&(Up.code=TR.ERR_TIMEOUT),sT.error(Up),Up}finally{o.destroy()}}async _createCancellableDialTarget(e){const t=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,r=new Promise(((e,r)=>{this.pendingDialTargets.set(t,{resolve:e,reject:r})}));try{return await Promise.race([this._createDialTarget(e),r])}finally{this.pendingDialTargets.delete(t)}}async _createDialTarget(e){const t=await bu(await this.components.getPeerStore().addressBook.get(e),(t=>Za(t,(async t=>!await this.components.getConnectionGater().denyDialMultiaddr(e,t.multiaddr)))),(e=>yE(e,this.addressSorter)),(t=>lc(t,(t=>{const r=t.multiaddr;return e.toString()===r.getPeerId()?r:r.encapsulate(`/p2p/${e.toString()}`)}))),(async e=>await Qa(e))),r=[];for(const i of t){(await this._resolve(i)).forEach((e=>r.push(e)))}const n=r.filter((e=>this.components.getTransportManager().transportForMultiaddr(e)));if(n.length>this.maxAddrsToDial)throw await this.components.getPeerStore().delete(e),me(new Error("dial with more addresses than allowed"),TR.ERR_TOO_MANY_ADDRESSES);return{id:e.toString(),addrs:n}}_createPendingDial(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new eT({addrs:e.addrs,dialAction:async function(e){var r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0===(null===(r=n.signal)||void 0===r?void 0:r.aborted))throw me(new Error("already aborted"),TR.ERR_ALREADY_ABORTED);return await t.components.getTransportManager().dial(e,n)},dialer:this}),i=new Yt.TimeoutController(this.timeout),s=[i.signal];null!=r.signal&&s.push(r.signal);const o=(0,Qt.anySignal)(s);try{null===OR.setMaxListeners||void 0===OR.setMaxListeners||(0,OR.setMaxListeners)(1/0,o)}catch{}const a={dialRequest:n,controller:i,promise:n.run({...r,signal:o}),destroy:()=>{i.clear(),this.pendingDials.delete(e.id)}};return this.pendingDials.set(e.id,a),a}getTokens(e){const t=Math.min(e,this.maxDialsPerPeer,this.tokens.length),r=this.tokens.splice(0,t);return sT("%d tokens request, returning %d, %d remaining",e,t,this.tokens.length),r}releaseToken(e){this.tokens.includes(e)||(sT("token %d released",e),this.tokens.push(e))}async _resolve(e){if(!e.protoNames().includes("dnsaddr"))return[e];const t=await this._resolveRecord(e);return(await Promise.all(t.map((async e=>await this._resolve(e))))).flat().reduce(((e,t)=>(null==e.find((e=>e.equals(t)))&&e.push(t),e)),[])}async _resolveRecord(e){try{e=new Ml(e.toString());return await e.resolve()}catch(Up){return sT.error(`multiaddr ${e.toString()} could not be resolved`,Up),[]}}}const cT=ge("libp2p:connection-manager"),lT={maxConnections:1/0,minConnections:0,maxData:1/0,maxSentData:1/0,maxReceivedData:1/0,maxEventLoopDelay:1/0,pollInterval:2e3,autoDialInterval:1e4,movingAverageInterval:6e4,defaultPeerValue:.5},uT="connection-manager";class hT extends FE{constructor(e){if(super(),this.components=new F_,this.opts=ue.call({ignoreUndefined:!0},lT,e),this.opts.maxConnections<this.opts.minConnections)throw me(new Error("Connection Manager maxConnections must be greater than minConnections"),TR.ERR_INVALID_PARAMETERS);cT("options: %o",this.opts),this.peerValues=WR({component:uT,metric:"peer-values",metrics:this.components.getMetrics()}),this.connections=WR({component:uT,metric:"peer-connections",metrics:this.components.getMetrics()}),this.started=!1,this._checkMetrics=this._checkMetrics.bind(this),this.latencyMonitor=new $R({latencyCheckIntervalMs:e.pollInterval,dataEmitIntervalMs:e.pollInterval});try{null===OR.setMaxListeners||void 0===OR.setMaxListeners||(0,OR.setMaxListeners)(1/0,this)}catch{}this.dialer=new aT(this.opts),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this)}init(e){this.components=e,this.dialer.init(e)}isStarted(){return this.started}async start(){var e;null!=this.components.getMetrics()&&(this.timer=null!==(e=this.timer)&&void 0!==e?e:qR(this._checkMetrics,this.opts.pollInterval));this.latencyMonitor.start(),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this.latencyMonitor.addEventListener("data",this._onLatencyMeasure),await this.dialer.start(),this.started=!0,cT("started")}async afterStart(){this.components.getUpgrader().addEventListener("connection",this.onConnect),this.components.getUpgrader().addEventListener("connectionEnd",this.onDisconnect)}async beforeStop(){this.components.getUpgrader().removeEventListener("connection",this.onConnect),this.components.getUpgrader().removeEventListener("connectionEnd",this.onDisconnect)}async stop(){var e;null===(e=this.timer)||void 0===e||e.clear(),this.latencyMonitor.removeEventListener("data",this._onLatencyMeasure),this.latencyMonitor.stop(),await this.dialer.stop(),this.started=!1,await this._close(),cT("stopped")}async _close(){const e=[];for(const t of this.connections.values())for(const r of t)e.push((async()=>{try{await r.close()}catch(Up){cT.error(Up)}})());cT("closing %d connections",e.length),await Promise.all(e),this.connections.clear()}setPeerValue(e,t){if(t<0||t>1)throw new Error("value should be a number between 0 and 1");this.peerValues.set(e.toString(),t)}async _checkMetrics(){const e=this.components.getMetrics();if(null!=e)try{const t=e.getGlobal().getMovingAverages(),r=t.dataReceived[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxReceivedData",r);const n=t.dataSent[this.opts.movingAverageInterval].movingAverage;await this._checkMaxLimit("maxSentData",n);const i=r+n;await this._checkMaxLimit("maxData",i),cT.trace("metrics update",i)}finally{this.timer=qR(this._checkMetrics,this.opts.pollInterval)}}onConnect(e){this._onConnect(e).catch((e=>{cT.error(e)}))}async _onConnect(e){const{detail:t}=e;if(!this.started)return void await t.close();const r=t.remotePeer,n=r.toString(),i=this.connections.get(n);null!=i?i.push(t):this.connections.set(n,[t]),null!=r.publicKey&&await this.components.getPeerStore().keyBook.set(r,r.publicKey),this.peerValues.has(n)||this.peerValues.set(n,this.opts.defaultPeerValue);const s=this.getConnections().length,o=s-this.opts.maxConnections;await this._checkMaxLimit("maxConnections",s,o),this.dispatchEvent(new VE("peer:connect",{detail:t}))}onDisconnect(e){const{detail:t}=e;if(!this.started)return;const r=t.remotePeer.toString();let n=this.connections.get(r);if(null!=n&&n.length>1)n=n.filter((e=>e.id!==t.id)),this.connections.set(r,n);else if(null!=n){var i;this.connections.delete(r),this.peerValues.delete(t.remotePeer.toString()),this.dispatchEvent(new VE("peer:disconnect",{detail:t})),null===(i=this.components.getMetrics())||void 0===i||i.onPeerDisconnected(t.remotePeer)}}getConnections(e){var t;if(null!=e)return null!==(t=this.connections.get(e.toString()))&&void 0!==t?t:[];let r=[];for(const n of this.connections.values())r=r.concat(n);return r}async openConnection(e,t){cT("dial to %p",e);const r=this.getConnections(e);if(r.length>0)return cT("had an existing connection to %p",e),r[0];const n=await this.dialer.dial(e,t);let i=this.connections.get(e.toString());null==i&&(i=[],this.connections.set(e.toString(),i));let s=!1;for(const o of i)o.id===n.id&&(s=!0);return s||i.push(n),n}async closeConnections(e){var t;const r=null!==(t=this.connections.get(e.toString()))&&void 0!==t?t:[];await Promise.all(r.map((async e=>await e.close())))}getAll(e){if(!Dn(e))throw me(new Error("peerId must be an instance of peer-id"),TR.ERR_INVALID_PARAMETERS);const t=e.toString(),r=this.connections.get(t);return null!=r?r.filter((e=>e.stat.status===GR)):[]}_onLatencyMeasure(e){const{detail:t}=e;this._checkMaxLimit("maxEventLoopDelay",t.avgMs,1).catch((e=>{cT.error(e)}))}async _checkMaxLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=this.opts[e];cT.trace("checking limit of %s. current value: %d of %d",e,t,n),t>n&&(cT("%s: limit exceeded: %p, %d, pruning %d connection(s)",this.components.getPeerId(),e,t,r),await this._maybePruneConnections(r))}async _maybePruneConnections(e){const t=this.getConnections();if(t.length<=this.opts.minConnections||e<1)return;const r=Array.from(new Map([...this.peerValues.entries()].sort(((e,t)=>e[1]-t[1]))));cT.trace("sorted peer values: %j",r);const n=[];for(const[i]of r){cT("too many connections open - closing a connection to %p",i);for(const r of t)if(r.remotePeer.toString()===i&&n.push(r),n.length===e)break}await Promise.all(n.map((async e=>{try{await e.close()}catch(Up){cT.error(Up)}this.onDisconnect(new VE("connectionEnd",{detail:e}))})))}}const dT=ge("libp2p:connection-manager:auto-dialler"),pT={enabled:!0,minConnections:0,autoDialInterval:1e4};class fT{constructor(e,t){this.components=e,this.options=ue.call({ignoreUndefined:!0},pT,t),this.running=!1,this._autoDial=this._autoDial.bind(this),dT("options: %j",this.options)}isStarted(){return this.running}async start(){this.options.enabled?(this.running=!0,this._autoDial().catch((e=>{dT.error("could start autodial",e)})),dT("started")):dT("not enabled")}async stop(){this.options.enabled?(this.running=!1,null!=this.autoDialTimeout&&this.autoDialTimeout.clear(),dT("stopped")):dT("not enabled")}async _autoDial(){null!=this.autoDialTimeout&&this.autoDialTimeout.clear();const e=this.options.minConnections;if(this.components.getConnectionManager().getConnections().length>=e)return void(this.autoDialTimeout=qR(this._autoDial,this.options.autoDialInterval));const t=await this.components.getPeerStore().all(),r=await bu(t.sort((()=>Math.random()>.5?1:-1)),(e=>Za(e,(e=>!e.id.equals(this.components.getPeerId())))),(e=>yE(e,((e,t)=>t.protocols.length>e.protocols.length||null!=t.id.publicKey&&null==e.id.publicKey?1:-1))),(async e=>await Qa(e)));for(let n=0;this.running&&n<r.length&&this.components.getConnectionManager().getConnections().length<e;n++){if(!this.running)return;const e=r[n];if(0===this.components.getConnectionManager().getConnections(e.id).length){dT("connecting to a peerStore stored peer %p",e.id);try{await this.components.getConnectionManager().openConnection(e.id)}catch(Up){dT.error("could not connect to peerStore stored peer",Up)}}}this.running&&(this.autoDialTimeout=qR(this._autoDial,this.options.autoDialInterval))}}var yT;!function(e){let t,r,n,i,s;!function(e){e.SUCCESS="SUCCESS",e.HOP_SRC_ADDR_TOO_LONG="HOP_SRC_ADDR_TOO_LONG",e.HOP_DST_ADDR_TOO_LONG="HOP_DST_ADDR_TOO_LONG",e.HOP_SRC_MULTIADDR_INVALID="HOP_SRC_MULTIADDR_INVALID",e.HOP_DST_MULTIADDR_INVALID="HOP_DST_MULTIADDR_INVALID",e.HOP_NO_CONN_TO_DST="HOP_NO_CONN_TO_DST",e.HOP_CANT_DIAL_DST="HOP_CANT_DIAL_DST",e.HOP_CANT_OPEN_DST_STREAM="HOP_CANT_OPEN_DST_STREAM",e.HOP_CANT_SPEAK_RELAY="HOP_CANT_SPEAK_RELAY",e.HOP_CANT_RELAY_TO_SELF="HOP_CANT_RELAY_TO_SELF",e.STOP_SRC_ADDR_TOO_LONG="STOP_SRC_ADDR_TOO_LONG",e.STOP_DST_ADDR_TOO_LONG="STOP_DST_ADDR_TOO_LONG",e.STOP_SRC_MULTIADDR_INVALID="STOP_SRC_MULTIADDR_INVALID",e.STOP_DST_MULTIADDR_INVALID="STOP_DST_MULTIADDR_INVALID",e.STOP_RELAY_REFUSED="STOP_RELAY_REFUSED",e.MALFORMED_MESSAGE="MALFORMED_MESSAGE"}(t=e.Status||(e.Status={})),function(e){e[e.SUCCESS=100]="SUCCESS",e[e.HOP_SRC_ADDR_TOO_LONG=220]="HOP_SRC_ADDR_TOO_LONG",e[e.HOP_DST_ADDR_TOO_LONG=221]="HOP_DST_ADDR_TOO_LONG",e[e.HOP_SRC_MULTIADDR_INVALID=250]="HOP_SRC_MULTIADDR_INVALID",e[e.HOP_DST_MULTIADDR_INVALID=251]="HOP_DST_MULTIADDR_INVALID",e[e.HOP_NO_CONN_TO_DST=260]="HOP_NO_CONN_TO_DST",e[e.HOP_CANT_DIAL_DST=261]="HOP_CANT_DIAL_DST",e[e.HOP_CANT_OPEN_DST_STREAM=262]="HOP_CANT_OPEN_DST_STREAM",e[e.HOP_CANT_SPEAK_RELAY=270]="HOP_CANT_SPEAK_RELAY",e[e.HOP_CANT_RELAY_TO_SELF=280]="HOP_CANT_RELAY_TO_SELF",e[e.STOP_SRC_ADDR_TOO_LONG=320]="STOP_SRC_ADDR_TOO_LONG",e[e.STOP_DST_ADDR_TOO_LONG=321]="STOP_DST_ADDR_TOO_LONG",e[e.STOP_SRC_MULTIADDR_INVALID=350]="STOP_SRC_MULTIADDR_INVALID",e[e.STOP_DST_MULTIADDR_INVALID=351]="STOP_DST_MULTIADDR_INVALID",e[e.STOP_RELAY_REFUSED=390]="STOP_RELAY_REFUSED",e[e.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE"}(r||(r={})),function(e){e.codec=()=>ui(r)}(t=e.Status||(e.Status={})),function(e){e.HOP="HOP",e.STOP="STOP",e.STATUS="STATUS",e.CAN_HOP="CAN_HOP"}(n=e.Type||(e.Type={})),function(e){e[e.HOP=1]="HOP",e[e.STOP=2]="STOP",e[e.STATUS=3]="STATUS",e[e.CAN_HOP=4]="CAN_HOP"}(i||(i={})),function(e){e.codec=()=>ui(i)}(n=e.Type||(e.Type={})),function(e){e.codec=()=>Ei({1:{name:"id",codec:ci},2:{name:"addrs",codec:ci,repeats:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(s=e.Peer||(e.Peer={})),e.codec=()=>Ei({1:{name:"type",codec:e.Type.codec(),optional:!0},2:{name:"srcPeer",codec:e.Peer.codec(),optional:!0},3:{name:"dstPeer",codec:e.Peer.codec(),optional:!0},4:{name:"code",codec:e.Status.codec(),optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(yT||(yT={}));const gT=ge("libp2p:stream:converter");function mT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{stream:r,remoteAddr:n}=e,{sink:i,source:s}=r,o={async sink(e){null!=t.signal&&(e=r_(e,t.signal));try{await i(e),await a()}catch(Up){"aborted"!==Up.type&&gT(Up)}},source:null!=t.signal?r_(s,t.signal):s,remoteAddr:n,timeline:{open:Date.now(),close:void 0},async close(){await i(async function*(){yield new Uint8Array(0)}()),await a()}};async function a(){return null==o.timeline.close&&(o.timeline.close=Date.now()),await Promise.resolve()}return o}const wT="/libp2p/circuit/relay/0.1.0";function vT(e,t){e.write({type:yT.Type.STATUS,code:t})}function bT(e,t){try{var r;null!=(null===(r=e.dstPeer)||void 0===r?void 0:r.addrs)&&e.dstPeer.addrs.forEach((e=>new Ml(e)))}catch(Up){throw vT(t,e.type===yT.Type.HOP?yT.Status.HOP_DST_MULTIADDR_INVALID:yT.Status.STOP_DST_MULTIADDR_INVALID),Up}try{var n;null!=(null===(n=e.srcPeer)||void 0===n?void 0:n.addrs)&&e.srcPeer.addrs.forEach((e=>new Ml(e)))}catch(Up){throw vT(t,e.type===yT.Type.HOP?yT.Status.HOP_SRC_MULTIADDR_INVALID:yT.Status.STOP_SRC_MULTIADDR_INVALID),Up}}function ET(e){const t=ZE(),r=Qh(e.source),n=sS();let i;const s=e.sink(async function*(){yield*t;const e=await n.promise;yield*e}());s.catch((e=>{i=e}));const o={sink:async e=>null!=i?await Promise.reject(i):(n.resolve(e),await s),source:lc(r,(e=>e.slice()))};return{reader:r,writer:t,stream:o,rest:()=>t.end(),write:t.push,read:async()=>{const e=await r.next();if(null!=e.value)return e.value.slice()}}}const _T=ge("libp2p:circuit:stream-handler");class ST{constructor(e){const{stream:t,maxLength:r=4096}=e;this.stream=t,this.shake=ET(this.stream),this.decoder=QE.fromReader(this.shake.reader,{maxDataLength:r})}async read(){const e=await this.decoder.next();if(null!=e.value){const t=yT.decode(e.value.slice());return _T("read message type",t.type),t}_T("read received no value, closing stream"),this.close()}write(e){_T("write message type %s",e.type),this.shake.write($E.single(yT.encode(e)).slice())}rest(){return this.shake.rest(),this.shake.stream}end(e){this.write(e),this.close()}close(){_T("closing the stream"),this.rest().sink([]).catch((e=>{_T.error(e)}))}}const AT=ge("libp2p:circuit:stop");const kT=ge("libp2p:circuit:hop");async function IT(e){const{connection:t,request:r,streamHandler:n,circuit:i,connectionManager:s}=e;if(!i.hopEnabled())return kT("HOP request received but we are not acting as a relay"),n.end({type:yT.Type.STATUS,code:yT.Status.HOP_CANT_SPEAK_RELAY});try{bT(r,n)}catch(Up){return void kT.error("invalid hop request via peer %p %o",t.remotePeer,Up)}if(null==r.dstPeer)return void kT("HOP request received but we do not receive a dstPeer");const o=bn(r.dstPeer.id),a=s.getConnections(o);if(0===a.length&&!i.hopActive())return kT("HOP request received but we are not connected to the destination peer"),n.end({type:yT.Type.STATUS,code:yT.Status.HOP_NO_CONN_TO_DST});if(0===a.length)return kT("did not have connection to remote peer"),n.end({type:yT.Type.STATUS,code:yT.Status.HOP_NO_CONN_TO_DST});const c={type:yT.Type.STOP,dstPeer:r.dstPeer,srcPeer:r.srcPeer};let l;try{kT("performing STOP request");const e=await async function(e){const{connection:t,request:r}=e,{stream:n}=await t.newStream([wT]);AT("starting stop request to %p",t.remotePeer);const i=new ST({stream:n});i.write(r);const s=await i.read();if(null!=s){if(s.code===yT.Status.SUCCESS)return AT("stop request to %p was successful",t.remotePeer),i.rest();AT("stop request failed with code %d",s.code),i.close()}else i.close()}({connection:a[0],request:c});if(null==e)throw new Error("Could not stop");l=e}catch(Up){return void kT.error(Up)}kT("hop request from %p is valid",t.remotePeer),n.write({type:yT.Type.STATUS,code:yT.Status.SUCCESS});const u=n.rest();return kT("creating related connections"),await bu(u,l,u)}const CT=ge("libp2p:circuit");class RT{constructor(){this.components=new F_}init(e){this.components=e,this.components.getRegistrar().handle(wT,(e=>{this._onProtocol(e).catch((e=>{CT.error(e)}))})).catch((e=>{CT.error(e)}))}hopEnabled(){return!0}hopActive(){return!0}get[ER](){return!0}get[Symbol.toStringTag](){return"libp2p/circuit-relay-v1"}async _onProtocol(e){const{connection:t,stream:r}=e,n=new ST({stream:r}),i=await n.read();if(null==i)return CT("request was invalid, could not read from stream"),n.write({type:yT.Type.STATUS,code:yT.Status.MALFORMED_MESSAGE}),void n.close();let s;switch(i.type){case yT.Type.CAN_HOP:CT("received CAN_HOP request from %p",t.remotePeer),await function(e){const{connection:t,streamHandler:r,circuit:n}=e,i=n.hopEnabled();kT("can hop (%s) request from %p",i,t.remotePeer),r.end({type:yT.Type.STATUS,code:i?yT.Status.SUCCESS:yT.Status.HOP_CANT_SPEAK_RELAY})}({circuit:this,connection:t,streamHandler:n});break;case yT.Type.HOP:CT("received HOP request from %p",t.remotePeer),s=await IT({connection:t,request:i,streamHandler:n,circuit:this,connectionManager:this.components.getConnectionManager()});break;case yT.Type.STOP:CT("received STOP request from %p",t.remotePeer),s=await function(e){const{connection:t,request:r,streamHandler:n}=e;try{bT(r,n)}catch(Up){return void AT.error("invalid stop request via peer %p %o",t.remotePeer,Up)}return AT("stop request is valid"),n.write({type:yT.Type.STATUS,code:yT.Status.SUCCESS}),n.rest()}({connection:t,request:i,streamHandler:n});break;default:return CT("Request of type %s not supported",i.type),n.write({type:yT.Type.STATUS,code:yT.Status.MALFORMED_MESSAGE}),void n.close()}if(null!=s){const e=mT({stream:s,remoteAddr:new Ml(i.dstPeer.addrs[0]),localAddr:new Ml(i.srcPeer.addrs[0])}),t=i.type===yT.Type.HOP?"relay":"inbound";CT("new %s connection %s",t,e.remoteAddr);const r=await this.components.getUpgrader().upgradeInbound(e);CT("%s connection %s upgraded",t,e.remoteAddr),null!=this.handler&&this.handler(r)}}async dial(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.toString().split("/p2p-circuit"),n=new Ml(r[0]),i=new Ml(r[r.length-1]),s=n.getPeerId(),o=i.getPeerId();if(null==s||null==o){const e="Circuit relay dial failed as addresses did not have peer id";throw CT.error(e),me(new Error(e),TR.ERR_RELAYED_DIAL)}const a=vn(s),c=vn(o);let l=!1;let u=this.components.getConnectionManager().getConnections(a)[0];null==u&&(await this.components.getPeerStore().addressBook.add(a,[n]),u=await this.components.getConnectionManager().openConnection(a,t),l=!0);try{const t=await async function(e){var t;const{connection:r,request:n}=e,{stream:i}=await r.newStream(wT),s=new ST({stream:i});s.write(n);const o=await s.read();if(null==o)throw me(new Error("HOP request had no response"),TR.ERR_HOP_REQUEST_FAILED);if(o.code===yT.Status.SUCCESS)return kT("hop request was successful"),s.rest();throw kT("hop request failed with code %d, closing stream",o.code),s.close(),me(new Error(`HOP request failed with code "${null!==(t=o.code)&&void 0!==t?t:"unknown"}"`),TR.ERR_HOP_REQUEST_FAILED)}({connection:u,request:{type:yT.Type.HOP,srcPeer:{id:this.components.getPeerId().toBytes(),addrs:this.components.getAddressManager().getAddresses().map((e=>e.bytes))},dstPeer:{id:c.toBytes(),addrs:[new Ml(i).bytes]}}}),r=mT({stream:t,remoteAddr:e,localAddr:n.encapsulate(`/p2p-circuit/p2p/${this.components.getPeerId().toString()}`)});return CT("new outbound connection %s",r.remoteAddr),await this.components.getUpgrader().upgradeOutbound(r)}catch(Up){throw CT.error("Circuit relay dial failed",Up),l&&await u.close(),Up}}createListener(e){return this.handler=e.handler,function(e){const t=new Map,r=Object.assign(new FE,{close:async()=>await Promise.resolve(),listen:async function(n){const i=n.toString().split("/p2p-circuit").find((e=>""!==e)),s=new Ml(i),o=s.getPeerId();if(null==o)throw new Error("Could not determine relay peer from multiaddr");const a=vn(o);await e.peerStore.addressBook.add(a,[s]);const c=await e.connectionManager.openConnection(a),l=c.remoteAddr.encapsulate("/p2p-circuit");t.set(c.remotePeer.toString(),l),r.dispatchEvent(new VE("listening"))},getAddrs:function(){const e=[];for(const r of t.values())e.push(r);return e}});return e.connectionManager.addEventListener("peer:disconnect",(e=>{const{detail:n}=e;t.delete(n.remotePeer.toString())&&r.dispatchEvent(new VE("close"))})),r}({connectionManager:this.components.getConnectionManager(),peerStore:this.components.getPeerStore()})}filter(e){return(e=Array.isArray(e)?e:[e]).filter((e=>nu.matches(e)))}}async function TT(e){const t=(new TextEncoder).encode(e),r=await hn.sha256.digest(t);return Ne.CID.createV0(r)}const DT="hop_relay",PT="true",NT="/libp2p/relay",xT=ge("libp2p:auto-relay"),OT=()=>{};class BT{constructor(e,t){var r,n,i;this.components=e,this.addressSorter=null!==(r=t.addressSorter)&&void 0!==r?r:nT,this.maxListeners=null!==(n=t.maxListeners)&&void 0!==n?n:1,this.listenRelays=new Set,this.onError=null!==(i=t.onError)&&void 0!==i?i:OT,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this),this.components.getPeerStore().addEventListener("change:protocols",(e=>{this._onProtocolChange(e).catch((e=>{xT.error(e)}))})),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onPeerDisconnected)}async _onProtocolChange(e){const{peerId:t,protocols:r}=e.detail,n=t.toString(),i=r.find((e=>e===wT));if(null!=i){if(!this.listenRelays.has(n))try{const e=this.components.getConnectionManager().getConnections(t);if(0===e.length)return;const r=e[0];if(r.remoteAddr.protoCodes().includes(290))return void xT(`relayed connection to ${n} will not be used to hop on`);const i=await async function(e){const{connection:t}=e,{stream:r}=await t.newStream(wT),n=new ST({stream:r});n.write({type:yT.Type.CAN_HOP});const i=await n.read();return await n.close(),null!=i&&i.code===yT.Status.SUCCESS}({connection:r});i&&(await this.components.getPeerStore().metadataBook.setValue(t,DT,(0,zt.fromString)(PT)),await this._addListenRelay(r,n))}catch(Up){this.onError(Up)}}else this.listenRelays.has(n)&&await this._removeListenRelay(n)}_onPeerDisconnected(e){const t=e.detail.remotePeer.toString();this.listenRelays.has(t)&&this._removeListenRelay(t).catch((e=>{xT.error(e)}))}async _addListenRelay(e,t){try{if(this.listenRelays.size>=this.maxListeners)return;const r=await bu(await this.components.getPeerStore().addressBook.get(e.remotePeer),(e=>yE(e,this.addressSorter)),(async e=>await Qa(e))),n=await Promise.all(r.map((async t=>{try{let r=t.multiaddr;return null==r.getPeerId()&&(r=r.encapsulate(`/p2p/${e.remotePeer.toString()}`)),r=r.encapsulate("/p2p-circuit"),await this.components.getTransportManager().listen([r]),!0}catch(Up){xT.error("error listening on circuit address",Up),this.onError(Up)}return!1})));n.includes(!0)&&this.listenRelays.add(t)}catch(Up){this.onError(Up),this.listenRelays.delete(t)}}async _removeListenRelay(e){this.listenRelays.delete(e)&&await this._listenOnAvailableHopRelays([e])}async _listenOnAvailableHopRelays(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.listenRelays.size>=this.maxListeners)return;const t=[],r=await this.components.getPeerStore().all();for(const{id:n,metadata:i}of r){const r=n.toString();if(this.listenRelays.has(r))continue;if(e.includes(r))continue;const s=i.get(DT);if(null==s||(0,$t.toString)(s)!==PT)continue;const o=this.components.getConnectionManager().getConnections(n);if(0!==o.length){if(await this._addListenRelay(o[0],r),this.listenRelays.size>=this.maxListeners)return}else t.push(n)}for(const n of t)if(await this._tryToListenOnRelay(n),this.listenRelays.size>=this.maxListeners)return;try{const e=await TT(NT);for await(const t of this.components.getContentRouting().findProviders(e)){if(0===t.multiaddrs.length)continue;const e=t.id;if(await this.components.getPeerStore().addressBook.add(e,t.multiaddrs),await this._tryToListenOnRelay(e),this.listenRelays.size>=this.maxListeners)return}}catch(Up){this.onError(Up)}}async _tryToListenOnRelay(e){try{const t=await this.components.getConnectionManager().openConnection(e);await this._addListenRelay(t,e.toString())}catch(Up){xT.error("Could not use %p as relay",e,Up),this.onError(Up,`could not connect and listen on known hop relay ${e.toString()}`)}}}const LT=ge("libp2p:relay");class MT{constructor(e,t){var r;this.components=e,this.autoRelay=!1!==(null===(r=t.autoRelay)||void 0===r?void 0:r.enabled)?new BT(e,{addressSorter:t.addressSorter,...t.autoRelay}):void 0,this.started=!1,this.init=t,this._advertiseService=this._advertiseService.bind(this)}isStarted(){return this.started}async start(){!1!==this.init.hop.enabled&&!1!==this.init.advertise.enabled&&(this.timeout=(0,xR.setDelayedInterval)(this._advertiseService,this.init.advertise.ttl,this.init.advertise.bootDelay)),this.started=!0}async stop(){null!=this.timeout&&(0,xR.clearDelayedInterval)(this.timeout),this.started=!1}async _advertiseService(){try{const e=await TT(NT);await this.components.getContentRouting().provide(e)}catch(Up){Up.code===TR.ERR_NO_ROUTERS_AVAILABLE?(LT.error("a content router, such as a DHT, must be provided in order to advertise the relay service",Up),await this.stop()):LT.error(Up)}}}var UT=__webpack_require__(6327);__webpack_require__(4660),__webpack_require__(3391);const jT=xi.pki;const FT=ge("libp2p:keychain:cms"),zT=new WeakMap;class VT{constructor(e,t){if(null==e)throw me(new Error("keychain is required"),TR.ERR_KEYCHAIN_REQUIRED);this.keychain=e,zT.set(this,{dek:t})}async encrypt(e,t){if(!(t instanceof Uint8Array))throw me(new Error("Plain data must be a Uint8Array"),TR.ERR_INVALID_PARAMETERS);const r=await this.keychain.findKeyByName(e),n=await this.keychain.getPrivateKey(e),i=zT.get(this);if(null==i)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const s=i.dek,o=xi.pki.decryptRsaPrivateKey(n,s),a=await((e,t)=>{const r=jT.rsa.setPublicKey(t.n,t.e),n=jT.createCertificate();n.publicKey=r,n.serialNumber="01",n.validity.notBefore=new Date,n.validity.notAfter=new Date,n.validity.notAfter.setFullYear(n.validity.notBefore.getFullYear()+10);const i=[{name:"organizationName",value:"ipfs"},{shortName:"OU",value:"keystore"},{name:"commonName",value:e.id}];return n.setSubject(i),n.setIssuer(i),n.setExtensions([{name:"basicConstraints",cA:!0},{name:"keyUsage",keyCertSign:!0,digitalSignature:!0,nonRepudiation:!0,keyEncipherment:!0,dataEncipherment:!0},{name:"extKeyUsage",serverAuth:!0,clientAuth:!0,codeSigning:!0,emailProtection:!0,timeStamping:!0},{name:"nsCertType",client:!0,server:!0,email:!0,objsign:!0,sslCA:!0,emailCA:!0,objCA:!0}]),n.sign(t),n})(r,o),c=xi.pkcs7.createEnvelopedData();c.addRecipient(a),c.content=xi.util.createBuffer(t),c.encrypt();const l=xi.asn1.toDer(c.toAsn1()).getBytes();return(0,zt.fromString)(l,"ascii")}async decrypt(e){if(!(e instanceof Uint8Array))throw me(new Error("CMS data is required"),TR.ERR_INVALID_PARAMETERS);let t;try{const r=xi.util.createBuffer((0,$t.toString)(e,"ascii")),n=xi.asn1.fromDer(r);t=xi.pkcs7.messageFromAsn1(n)}catch(Up){throw FT.error(Up),me(new Error("Invalid CMS"),TR.ERR_INVALID_CMS)}const r=t.recipients.filter((e=>e.issuer.find((e=>"O"===e.shortName&&"ipfs"===e.value)))).filter((e=>e.issuer.find((e=>"CN"===e.shortName)))).map((e=>({recipient:e,keyId:e.issuer.find((e=>"CN"===e.shortName)).value}))),n=await async function(e,t){const r=e.map(t);return e[(await Promise.all(r)).findIndex((e=>e))]}(r,(async e=>{try{if(null!=await this.keychain.findKeyById(e.keyId))return!0}catch(Up){return!1}return!1}));if(null==n){const e=r.map((e=>e.keyId));throw me(new Error(`Decryption needs one of the key(s): ${e.join(", ")}`),TR.ERR_MISSING_KEYS,{missingKeys:e})}const i=await this.keychain.findKeyById(n.keyId);if(null==i)throw me(new Error("No key available to decrypto"),TR.ERR_NO_KEY);const s=await this.keychain.getPrivateKey(i.name),o=zT.get(this);if(null==o)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const a=o.dek,c=xi.pki.decryptRsaPrivateKey(s,a);return t.decrypt(n.recipient,c),(0,zt.fromString)(t.content.getBytes(),"ascii")}}__webpack_require__(8605);var KT=__webpack_require__(6019);const $T={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function qT(e,t,r,n,i){if("sha1"!==i&&"sha2-256"!==i&&"sha2-512"!==i){const e=Object.keys($T).join(" / ");throw me(new Error(`Hash '${i}' is unknown or not supported. Must be ${e}`),"ERR_UNSUPPORTED_HASH_TYPE")}const s=KT(e,t,r,n,$T[i]);return Bi.encode64(s,null)}const HT=ge("libp2p:keychain"),WT="/info/",GT=new WeakMap,YT=14,QT=16,JT=1e3,XT={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function ZT(e){return null!=e&&("string"===typeof e&&(e===UT(e.trim())&&e.length>0))}async function eD(){const e=800*Math.random()+200;await new Promise((t=>setTimeout(t,e)))}function tD(e){return new Gt("/pkcs8/"+e)}function rD(e){return new Gt(WT+e)}class nD{constructor(e,t){var r,n,i,s,o,a,c,l,u,h;if(this.components=e,this.init=ue(XT,t),null!=this.init.pass&&(null===(r=this.init.pass)||void 0===r?void 0:r.length)<20)throw new Error("pass must be least 20 characters");if(null!=(null===(n=this.init.dek)||void 0===n?void 0:n.keyLength)&&this.init.dek.keyLength<YT)throw new Error(`dek.keyLength must be least ${YT} bytes`);if(null!=(null===(i=this.init.dek)||void 0===i||null===(s=i.salt)||void 0===s?void 0:s.length)&&this.init.dek.salt.length<QT)throw new Error(`dek.saltLength must be least ${QT} bytes`);if(null!=(null===(o=this.init.dek)||void 0===o?void 0:o.iterationCount)&&this.init.dek.iterationCount<JT)throw new Error(`dek.iterationCount must be least ${JT}`);const d=null!=this.init.pass&&null!=(null===(a=this.init.dek)||void 0===a?void 0:a.salt)?qT(this.init.pass,null===(c=this.init.dek)||void 0===c?void 0:c.salt,null===(l=this.init.dek)||void 0===l?void 0:l.iterationCount,null===(u=this.init.dek)||void 0===u?void 0:u.keyLength,null===(h=this.init.dek)||void 0===h?void 0:h.hash):"";GT.set(this,{dek:d})}get cms(){const e=GT.get(this);if(null==e)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const t=e.dek;return new VT(this,t)}static generateOptions(){const e=Object.assign({},XT),t=3*Math.ceil(QT/3);return e.dek.salt=(0,$t.toString)(Vi(t),"base64"),e}static get options(){return XT}async createKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2048;if(!ZT(e)||"self"===e)throw await eD(),me(new Error("Invalid key name"),TR.ERR_INVALID_KEY_NAME);if("string"!==typeof t)throw await eD(),me(new Error("Invalid key type"),TR.ERR_INVALID_KEY_TYPE);const n=tD(e);if(await this.components.getDatastore().has(n))throw await eD(),me(new Error("Key name already exists"),TR.ERR_KEY_ALREADY_EXISTS);if("rsa"===t.toLowerCase())if(!Number.isSafeInteger(r)||r<2048)throw await eD(),me(new Error("Invalid RSA key size"),TR.ERR_INVALID_KEY_SIZE);let i;try{const s=await async function(e,t){return await da(e).generateKeyPair(null!==t&&void 0!==t?t:2048)}(t,r),o=await s.id(),a=GT.get(this);if(null==a)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const c=a.dek,l=await s.export(c);i={name:e,id:o};const u=this.components.getDatastore().batch();u.put(n,(0,zt.fromString)(l)),u.put(rD(e),(0,zt.fromString)(JSON.stringify(i))),await u.commit()}catch(Up){throw await eD(),Up}return i}async listKeys(){const e={prefix:WT},t=[];for await(const r of this.components.getDatastore().query(e))t.push(JSON.parse((0,$t.toString)(r.value)));return t}async findKeyById(e){try{return(await this.listKeys()).find((t=>t.id===e))}catch(Up){throw await eD(),Up}}async findKeyByName(e){if(!ZT(e))throw await eD(),me(new Error(`Invalid key name '${e}'`),TR.ERR_INVALID_KEY_NAME);const t=rD(e);try{const e=await this.components.getDatastore().get(t);return JSON.parse((0,$t.toString)(e))}catch(Up){throw await eD(),HT.error(Up),me(new Error(`Key '${e}' does not exist.`),TR.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!ZT(e)||"self"===e)throw await eD(),me(new Error(`Invalid key name '${e}'`),TR.ERR_INVALID_KEY_NAME);const t=tD(e),r=await this.findKeyByName(e),n=this.components.getDatastore().batch();return n.delete(t),n.delete(rD(e)),await n.commit(),r}async renameKey(e,t){if(!ZT(e)||"self"===e)throw await eD(),me(new Error(`Invalid old key name '${e}'`),TR.ERR_OLD_KEY_NAME_INVALID);if(!ZT(t)||"self"===t)throw await eD(),me(new Error(`Invalid new key name '${t}'`),TR.ERR_NEW_KEY_NAME_INVALID);const r=tD(e),n=tD(t),i=rD(e),s=rD(t);if(await this.components.getDatastore().has(n))throw await eD(),me(new Error(`Key '${t}' already exists`),TR.ERR_KEY_ALREADY_EXISTS);try{const e=await this.components.getDatastore().get(r),o=await this.components.getDatastore().get(i),a=JSON.parse((0,$t.toString)(o));a.name=t;const c=this.components.getDatastore().batch();return c.put(n,e),c.put(s,(0,zt.fromString)(JSON.stringify(a))),c.delete(r),c.delete(i),await c.commit(),a}catch(Up){throw await eD(),Up}}async exportKey(e,t){if(!ZT(e))throw await eD(),me(new Error(`Invalid key name '${e}'`),TR.ERR_INVALID_KEY_NAME);if(null==t)throw await eD(),me(new Error("Password is required"),TR.ERR_PASSWORD_REQUIRED);const r=tD(e);try{const e=await this.components.getDatastore().get(r),n=(0,$t.toString)(e),i=GT.get(this);if(null==i)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const s=i.dek,o=await ga(n,s);return await o.export(t)}catch(Up){throw await eD(),Up}}async importKey(e,t,r){if(!ZT(e)||"self"===e)throw await eD(),me(new Error(`Invalid key name '${e}'`),TR.ERR_INVALID_KEY_NAME);if(null==t)throw await eD(),me(new Error("PEM encoded key is required"),TR.ERR_PEM_REQUIRED);const n=tD(e);if(await this.components.getDatastore().has(n))throw await eD(),me(new Error(`Key '${e}' already exists`),TR.ERR_KEY_ALREADY_EXISTS);let i,s;try{i=await ga(t,r)}catch(Up){throw await eD(),me(new Error("Cannot read the key, most likely the password is wrong"),TR.ERR_CANNOT_READ_KEY)}try{s=await i.id();const e=GT.get(this);if(null==e)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const r=e.dek;t=await i.export(r)}catch(Up){throw await eD(),Up}const o={name:e,id:s},a=this.components.getDatastore().batch();return a.put(n,(0,zt.fromString)(t)),a.put(rD(e),(0,zt.fromString)(JSON.stringify(o))),await a.commit(),o}async importPeer(e,t){try{if(!ZT(e))throw me(new Error(`Invalid key name '${e}'`),TR.ERR_INVALID_KEY_NAME);if(null==t||null==t.privateKey)throw me(new Error("Peer.privKey is required"),TR.ERR_MISSING_PRIVATE_KEY);const r=await ya(t.privateKey),n=tD(e);if(await this.components.getDatastore().has(n))throw await eD(),me(new Error(`Key '${e}' already exists`),TR.ERR_KEY_ALREADY_EXISTS);const i=GT.get(this);if(null==i)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const s=i.dek,o=await r.export(s),a={name:e,id:t.toString()},c=this.components.getDatastore().batch();return c.put(n,(0,zt.fromString)(o)),c.put(rD(e),(0,zt.fromString)(JSON.stringify(a))),await c.commit(),a}catch(Up){throw await eD(),Up}}async getPrivateKey(e){if(!ZT(e))throw await eD(),me(new Error(`Invalid key name '${e}'`),TR.ERR_INVALID_KEY_NAME);try{const t=tD(e),r=await this.components.getDatastore().get(t);return(0,$t.toString)(r)}catch(Up){throw await eD(),HT.error(Up),me(new Error(`Key '${e}' does not exist.`),TR.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,t){var r,n,i,s;if("string"!==typeof e)throw await eD(),me(new Error(`Invalid old pass type '${typeof e}'`),TR.ERR_INVALID_OLD_PASS_TYPE);if("string"!==typeof t)throw await eD(),me(new Error(`Invalid new pass type '${typeof t}'`),TR.ERR_INVALID_NEW_PASS_TYPE);if(t.length<20)throw await eD(),me(new Error(`Invalid pass length ${t.length}`),TR.ERR_INVALID_PASS_LENGTH);HT("recreating keychain");const o=GT.get(this);if(null==o)throw me(new Error("dek missing"),TR.ERR_INVALID_PARAMETERS);const a=o.dek;this.init.pass=t;const c=null!=t&&null!=(null===(r=this.init.dek)||void 0===r?void 0:r.salt)?qT(t,this.init.dek.salt,null===(n=this.init.dek)||void 0===n?void 0:n.iterationCount,null===(i=this.init.dek)||void 0===i?void 0:i.keyLength,null===(s=this.init.dek)||void 0===s?void 0:s.hash):"";GT.set(this,{dek:c});const l=await this.listKeys();for(const u of l){const e=await this.components.getDatastore().get(tD(u.name)),t=(0,$t.toString)(e),r=await ga(t,a),n=c.toString(),i=await r.export(n),s=this.components.getDatastore().batch(),o={name:u.name,id:u.id};s.put(tD(u.name),(0,zt.fromString)(i)),s.put(rD(u.name),(0,zt.fromString)(JSON.stringify(o))),await s.commit()}HT("keychain reconstructed")}}var iD=__webpack_require__(1309);class sD{constructor(e){if("number"!==typeof e)throw new Error("must provide a timespan to the moving average constructor");if(e<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");this.timespan=e,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(e,t){return 1-Math.exp(-(e-t)/this.timespan)}push(e,t){if(null!=this.previousTime){const r=this.alpha(e,this.previousTime),n=t-this.movingAverage,i=r*n;this.movingAverage=r*t+(1-r)*this.movingAverage,this.variance=(1-r)*(this.variance+n*i),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+r*n}else this.movingAverage=t;this.previousTime=e}}function oD(e){return new sD(e)}class aD extends FE{constructor(e){super(),this.enabled=e.enabled,this.queue=[],this.stats={dataReceived:0n,dataSent:0n},this.frequencyLastTime=Date.now(),this.frequencyAccumulators={},this.movingAverages={dataReceived:[],dataSent:[]},this.computeThrottleMaxQueueSize=e.computeThrottleMaxQueueSize,this.computeThrottleTimeout=e.computeThrottleTimeout,this._update=this._update.bind(this),this.movingAverageIntervals=e.movingAverageIntervals;for(let t=0;t<e.initialCounters.length;t++){const r=e.initialCounters[t];this.stats[r]=0n,this.movingAverages[r]=[];for(let e=0;e<this.movingAverageIntervals.length;e++){const t=this.movingAverageIntervals[e];(this.movingAverages[r][t]=oD(t)).push(this.frequencyLastTime,0)}}}start(){this.enabled&&this.queue.length>0&&this._resetComputeTimeout()}stop(){null!=this.timeout&&(this.timeout.clear(),this.timeout=null)}getSnapshot(){return Object.assign({},this.stats)}getMovingAverages(){return Object.assign({},this.movingAverages)}push(e,t){this.queue.push([e,t,Date.now()]),this._resetComputeTimeout()}_resetComputeTimeout(){this.timeout=qR(this._update,this._nextTimeout())}_nextTimeout(){const e=this.queue.length/this.computeThrottleMaxQueueSize;return Math.max(this.computeThrottleTimeout*(1-e),0)}_update(){if(this.timeout=null,this.queue.length>0){let e=["",0,0];for(e of this.queue)this._applyOp(e);this.queue=[],e.length>2&&""!==e[0]&&this._updateFrequency(e[2]),this.dispatchEvent(new VE("update",{detail:this.stats}))}}_updateFrequency(e){const t=e-this.frequencyLastTime;this._updateFrequencyFor("dataReceived",t,e),this._updateFrequencyFor("dataSent",t,e),this.frequencyLastTime=e}_updateFrequencyFor(e,t,r){var n;const i=null!==(n=this.frequencyAccumulators[e])&&void 0!==n?n:0;this.frequencyAccumulators[e]=0;const s=i/(null!==t&&void 0!==t?t:1)*1e3;let o=this.movingAverages[e];null==o&&(o=this.movingAverages[e]=[]);const a=this.movingAverageIntervals;for(let c=0;c<a.length;c++){const e=a[c];let t=o[e];null==t&&(t=o[e]=oD(e)),t.push(r,s)}}_applyOp(e){const t=e[0],r=e[1];if("number"!==typeof r)throw new Error("invalid increment number");let n;n=Object.prototype.hasOwnProperty.call(this.stats,t)?this.stats[t]:this.stats[t]=0n,this.stats[t]=n+BigInt(r),null==this.frequencyAccumulators[t]&&(this.frequencyAccumulators[t]=0),this.frequencyAccumulators[t]+=r}}const cD=["dataReceived","dataSent"],lD={in:"dataReceived",out:"dataSent"};class uD{constructor(e){var t;this.enabled=e.enabled,this.statsInit={...e,initialCounters:cD},this.globalStats=new aD(this.statsInit),this.peerStats=new Map,this.protocolStats=new Map,this.oldPeers=yr(null!==(t=e.maxOldPeersRetention)&&void 0!==t?t:iT),this.running=!1,this._onMessage=this._onMessage.bind(this),this.systems=new Map}isStarted(){return this.running}async start(){this.enabled&&(this.running=!0)}async stop(){if(this.running){this.running=!1,this.globalStats.stop();for(const e of this.peerStats.values())e.stop();for(const e of this.protocolStats.values())e.stop()}}getGlobal(){return this.globalStats}getPeers(){return Array.from(this.peerStats.keys())}getComponentMetrics(){return this.systems}updateComponentMetric(e){const{system:t="libp2p",component:r,metric:n,value:i}=e;this.systems.has(t)||this.systems.set(t,new Map);const s=this.systems.get(t);if(null==s)throw new Error("Unknown metric system");s.has(r)||s.set(r,new Map);const o=s.get(r);if(null==o)throw new Error("Unknown metric component");o.set(n,i)}forPeer(e){var t;const r=e.toString();return null!==(t=this.peerStats.get(r))&&void 0!==t?t:this.oldPeers.get(r)}getProtocols(){return Array.from(this.protocolStats.keys())}forProtocol(e){return this.protocolStats.get(e)}onPeerDisconnected(e){const t=e.toString(),r=this.peerStats.get(t);null!=r&&(r.stop(),this.peerStats.delete(t),this.oldPeers.set(t,r))}_onMessage(e){if(!this.running)return;const{remotePeer:t,protocol:r,direction:n,dataLength:i}=e,s=lD[n];let o=this.forPeer(t);if(null==o){const e=new aD(this.statsInit);this.peerStats.set(t.toString(),e),o=e}if(o.push(s,i),this.globalStats.push(s,i),null!=r){let e=this.forProtocol(r);if(null==e){const t=new aD(this.statsInit);this.protocolStats.set(r,t),e=t}e.push(s,i)}}updatePlaceholder(e,t){var r,n;if(!this.running)return;const i=e.toString(),s=null!==(r=this.peerStats.get(i))&&void 0!==r?r:this.oldPeers.get(i),o=t.toString(),a=null!==(n=this.peerStats.get(o))&&void 0!==n?n:this.oldPeers.get(o);let c=s;var l,u;null!=a&&(u=c,(l=a).stop(),u.stop(),l.queue=[...l.queue,...u.queue],c=l,this.oldPeers.remove(o)),this.peerStats.delete(e.toString()),this.peerStats.set(o,c),c.start()}trackStream(e){const{stream:t,remotePeer:r,protocol:n}=e;if(!this.running)return t;const i=t.source;t.source=iD(i,(e=>this._onMessage({remotePeer:r,protocol:n,direction:"in",dataLength:e.length})));const s=t.sink;return t.sink=async e=>await bu(e,(e=>iD(e,(e=>{this._onMessage({remotePeer:r,protocol:n,direction:"out",dataLength:e.length})}))),s),t}}async function hD(e){try{return{status:"fulfilled",value:await e,isFulfilled:!0,isRejected:!1}}catch(t){return{status:"rejected",reason:t,isFulfilled:!1,isRejected:!0}}}function dD(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function pD(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function fD(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,pD(e,t,"set"),r),r}function yD(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,pD(e,t,"get"))}function gD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let mD;class wD{constructor(e){gD(this,"value",void 0),gD(this,"next",void 0),this.value=e}}var vD=new WeakMap,bD=new WeakMap,ED=new WeakMap;mD=Symbol.iterator;class _D{constructor(){dD(this,vD,{writable:!0,value:void 0}),dD(this,bD,{writable:!0,value:void 0}),dD(this,ED,{writable:!0,value:void 0}),this.clear()}enqueue(e){var t;const r=new wD(e);yD(this,vD)?(yD(this,bD).next=r,fD(this,bD,r)):(fD(this,vD,r),fD(this,bD,r)),fD(this,ED,(t=yD(this,ED),t++,t))}dequeue(){var e;const t=yD(this,vD);if(t)return fD(this,vD,yD(this,vD).next),fD(this,ED,(e=yD(this,ED),e--,e)),t.value}clear(){fD(this,vD,void 0),fD(this,bD,void 0),fD(this,ED,0)}get size(){return yD(this,ED)}*[mD](){let e=yD(this,vD);for(;e;)yield e.value,e=e.next}}function SD(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const t=new _D;let r=0;const n=async(e,n,i)=>{r++;const s=(async()=>e(...i))();n(s);try{await s}catch{}r--,t.size>0&&t.dequeue()()},i=(i,s,o)=>{t.enqueue(n.bind(void 0,i,s,o)),(async()=>{await Promise.resolve(),r<e&&t.size>0&&t.dequeue()()})()},s=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return new Promise((t=>{i(e,t,r)}))};return Object.defineProperties(s,{activeCount:{get:()=>r},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),s}async function AD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{concurrency:r=Number.POSITIVE_INFINITY}=t,n=SD(r);return Promise.all(e.map((e=>e&&"function"===typeof e.then?hD(e):hD("function"===typeof e?n((()=>e())):Promise.resolve(e)))))}const kD=ge("libp2p:transports");class ID extends FE{constructor(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.components=e,this.started=!1,this.transports=new Map,this.listeners=WR({component:"transport-manager",metric:"listeners",metrics:this.components.getMetrics()}),this.faultTolerance=null!==(t=r.faultTolerance)&&void 0!==t?t:CD.FATAL_ALL}add(e){const t=e[Symbol.toStringTag];if(null==t)throw me(new Error("Transport must have a valid tag"),TR.ERR_INVALID_KEY);if(this.transports.has(t))throw me(new Error("There is already a transport with this tag"),TR.ERR_DUPLICATE_TRANSPORT);kD("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}async start(){const e=this.components.getAddressManager().getListenAddrs();await this.listen(e),this.started=!0}async stop(){const e=[];for(const[t,r]of this.listeners)for(kD("closing listeners for %s",t);r.length>0;){const t=r.pop();null!=t&&e.push(t.close())}await Promise.all(e),kD("all listeners closed");for(const t of this.listeners.keys())this.listeners.set(t,[]);this.started=!1}async dial(e,t){const r=this.transportForMultiaddr(e);if(null==r)throw me(new Error(`No transport available for address ${String(e)}`),TR.ERR_TRANSPORT_UNAVAILABLE);try{return await r.dial(e,{...t,upgrader:this.components.getUpgrader()})}catch(Up){throw null==Up.code&&(Up.code=TR.ERR_TRANSPORT_DIAL_FAILED),Up}}getAddrs(){let e=[];for(const t of this.listeners.values())for(const r of t)e=[...e,...r.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}transportForMultiaddr(e){for(const t of this.transports.values()){if(t.filter([e]).length>0)return t}}async listen(e){if(null==e||0===e.length)return void kD("no addresses were provided for listening, this node is dial only");const t=[];for(const[r,n]of this.transports.entries()){const i=n.filter(e),s=[];for(const e of i){kD("creating listener for %s on %s",r,e);const t=n.createListener({upgrader:this.components.getUpgrader()});let i=this.listeners.get(r);null==i&&(i=[],this.listeners.set(r,i)),i.push(t),t.addEventListener("listening",(()=>{this.dispatchEvent(new VE("listener:listening",{detail:t}))})),t.addEventListener("close",(()=>{this.dispatchEvent(new VE("listener:close",{detail:t}))})),s.push(t.listen(e))}if(0===s.length){t.push(r);continue}if(null==(await AD(s)).find((e=>e.isFulfilled))&&this.faultTolerance!==CD.NO_FATAL)throw me(new Error(`Transport (${r}) could not listen on any available address`),TR.ERR_NO_VALID_ADDRESSES)}if(t.length===this.transports.size){const e=`no valid addresses were provided for transports [${t.join(", ")}]`;if(this.faultTolerance===CD.FATAL_ALL)throw me(new Error(e),TR.ERR_NO_VALID_ADDRESSES);kD(`libp2p in dial mode only: ${e}`)}}async remove(e){kD("removing %s",e);for(const r of null!==(t=this.listeners.get(e))&&void 0!==t?t:[]){var t;await r.close()}this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}}var CD;!function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"}(CD||(CD={}));const RD=(0,zt.fromString)("\n");function TD(e){const t=new Fn(e,RD);return $E.single(t).slice()}function DD(e,t){e.push(TD(t).slice())}async function PD(e,t){let r=1;const n={[Symbol.asyncIterator]:()=>n,next:async()=>await e.next(r)};let i=n;null!=(null===t||void 0===t?void 0:t.signal)&&(i=r_(n,t.signal));const s=await bu(i,QE({onLength:e=>{r=e}}),(async e=>await mg(e)));if(null==s)throw me(new Error("no buffer returned"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(s[s.length-1]!==RD[0])throw me(new Error("missing newline"),"ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return s.slice(0,-1)}async function ND(e,t){const r=await PD(e,t);return(0,$t.toString)(r)}const xD=ge("libp2p:mss:select");async function OD(e,t,r,n){t=Array.isArray(t)?[...t]:[t];const{reader:i,writer:s,rest:o,stream:a}=ET(e),c=t.shift();if(null==c)throw new Error("At least one protocol must be specified");null!=r?(xD('select: write ["%s", "%s"]',r,c),function(e,t){const r=new Fn;for(const n of t)r.append(TD(n));e.push(r.slice())}(s,[(0,zt.fromString)(r),(0,zt.fromString)(c)])):(xD('select: write "%s"',c),DD(s,(0,zt.fromString)(c)));let l=await ND(i,n);if(xD('select: read "%s"',l),l===r&&(l=await ND(i,n),xD('select: read "%s"',l)),l===c)return o(),{stream:a,protocol:c};for(const u of t){xD('select: write "%s"',u),DD(s,(0,zt.fromString)(u));const e=await ND(i,n);if(xD('select: read "%s" for "%s"',e,u),e===u)return o(),{stream:a,protocol:u}}throw o(),me(new Error("protocol selection failed"),"ERR_UNSUPPORTED_PROTOCOL")}const BD="/multistream/1.0.0",LD=ge("libp2p:mss:handle");const MD=ge("libp2p:mss:ls");class UD{constructor(e){this.stream=e,this.shaken=!1}async _handshake(e){if(this.shaken)return;const{stream:t}=await OD(this.stream,BD,void 0,e);this.stream=t,this.shaken=!0}}class jD extends UD{async select(e,t){return await OD(this.stream,e,this.shaken?void 0:BD,t)}async ls(e){await this._handshake(e);const t=await async function(e,t){const{reader:r,writer:n,rest:i,stream:s}=ET(e);MD('write "ls"'),DD(n,(0,zt.fromString)("ls")),i();const o=Qh([await PD(r,t)]),a=[];return await bu(o,QE(),(async e=>{for await(const t of e)a.push((0,$t.toString)(t.slice(0,-1)))})),{stream:s,protocols:a}}(this.stream,e),{stream:r,protocols:n}=t;return this.stream=r,n}}class FD extends UD{async handle(e,t){return await async function(e,t,r){t=Array.isArray(t)?t:[t];const{writer:n,reader:i,rest:s,stream:o}=ET(e);for(;;){const e=await ND(i,r);if(LD('read "%s"',e),e!==BD){if(t.includes(e))return DD(n,(0,zt.fromString)(e)),LD('respond with "%s" for "%s"',e,e),s(),{stream:o,protocol:e};"ls"!==e?(DD(n,(0,zt.fromString)("na")),LD('respond with "na" for "%s"',e)):(DD(n,new Fn(...t.map((e=>TD((0,zt.fromString)(e)))))),LD('respond with "%s" for %s',t,e))}else LD('respond with "%s" for "%s"',BD,e),DD(n,(0,zt.fromString)(BD))}}(this.stream,e,t)}}var zD=__webpack_require__(486);const VD=Symbol.for("@libp2p/connection");const KD=ge("libp2p:connection");class $D{constructor(e){const{remoteAddr:t,remotePeer:r,newStream:n,close:i,getStreams:s,stat:o}=e;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=t,this.remotePeer=r,this.stat={...o,status:GR},this._newStream=n,this._close=i,this._getStreams=s,this.registry=new Map,this.tags=[],this._closing=!1}get[Symbol.toStringTag](){return"Connection"}get[VD](){return!0}get streams(){return this._getStreams()}async newStream(e,t){if(this.stat.status===YR)throw me(new Error("the connection is being closed"),"ERR_CONNECTION_BEING_CLOSED");if(this.stat.status===QR)throw me(new Error("the connection is closed"),"ERR_CONNECTION_CLOSED");Array.isArray(e)||(e=[e]);const{stream:r,protocol:n}=await this._newStream(e,t);return this.addStream(r,{protocol:n,metadata:{}}),{stream:r,protocol:n}}addStream(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.registry.set(e.id,{protocol:null!==(t=n.protocol)&&void 0!==t?t:"",metadata:null!==(r=n.metadata)&&void 0!==r?r:{}})}removeStream(e){this.registry.delete(e)}async close(){if(this.stat.status!==QR&&!this._closing){this.stat.status=YR;try{this.streams.forEach((e=>e.close()))}catch(Up){KD.error(Up)}this._closing=!0,await this._close(),this._closing=!1,this.stat.timeline.close=Date.now(),this.stat.status=QR}}}const qD=ge("libp2p:upgrader");class HD extends FE{constructor(e,t){super(),this.components=e,this.connectionEncryption=new Map,t.connectionEncryption.forEach((e=>{this.connectionEncryption.set(e.protocol,e)})),this.muxers=new Map,t.muxers.forEach((e=>{this.muxers.set(e.protocol,e)}))}async upgradeInbound(e){let t,r,n,i,s,o,a;const c=this.components.getMetrics();if(await this.components.getConnectionGater().denyInboundConnection(e))throw me(new Error("The multiaddr connection is blocked by gater.acceptConnection"),TR.ERR_CONNECTION_INTERCEPTED);if(null!=c){({setTarget:o,proxy:a}=zD());const t=`${(1e9*Math.random()).toString(36)}${Date.now()}`;o({toString:()=>t}),e=c.trackStream({stream:e,remotePeer:a})}qD("starting the inbound connection upgrade");let l=e;const u=this.components.getConnectionProtector();null!=u&&(qD("protecting the inbound connection"),l=await u.protect(e));try{if(({conn:t,remotePeer:r,protocol:s}=await this._encryptInbound(l)),await this.components.getConnectionGater().denyInboundEncryptedConnection(r,{...l,...t}))throw me(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),TR.ERR_CONNECTION_INTERCEPTED);if(this.muxers.size>0){const e=await this._multiplexInbound({...l,...t},this.muxers);i=e.muxerFactory,n=e.stream}else n=t}catch(Up){throw qD.error("Failed to upgrade inbound connection",Up),await e.close(Up),Up}if(await this.components.getConnectionGater().denyInboundUpgradedConnection(r,{...l,...t}))throw me(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),TR.ERR_CONNECTION_INTERCEPTED);return null!=c&&(c.updatePlaceholder(a,r),o(r)),qD("Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:s,direction:"inbound",maConn:e,upgradedConn:n,muxerFactory:i,remotePeer:r})}async upgradeOutbound(e){const t=e.remoteAddr.getPeerId();if(null==t)throw me(new Error("outbound connection must have a peer id"),TR.ERR_INVALID_MULTIADDR);const r=vn(t);if(await this.components.getConnectionGater().denyOutboundConnection(r,e))throw me(new Error("The multiaddr connection is blocked by connectionGater.denyOutboundConnection"),TR.ERR_CONNECTION_INTERCEPTED);let n,i,s,o,a,c,l;const u=this.components.getMetrics();if(null!=u){({setTarget:c,proxy:l}=zD());const t=`${(1e9*Math.random()).toString(36)}${Date.now()}`;c({toB58String:()=>t}),e=u.trackStream({stream:e,remotePeer:l})}qD("Starting the outbound connection upgrade");let h=e;const d=this.components.getConnectionProtector();null!=d&&(h=await d.protect(e));try{if(({conn:n,remotePeer:i,protocol:o}=await this._encryptOutbound(h,r)),await this.components.getConnectionGater().denyOutboundEncryptedConnection(i,{...h,...n}))throw me(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),TR.ERR_CONNECTION_INTERCEPTED);if(this.muxers.size>0){const e=await this._multiplexOutbound({...h,...n},this.muxers);a=e.muxerFactory,s=e.stream}else s=n}catch(Up){throw qD.error("Failed to upgrade outbound connection",Up),await e.close(Up),Up}if(await this.components.getConnectionGater().denyOutboundUpgradedConnection(i,{...h,...n}))throw me(new Error("The multiaddr connection is blocked by gater.acceptEncryptedConnection"),TR.ERR_CONNECTION_INTERCEPTED);return null!=u&&(u.updatePlaceholder(l,i),c(i)),qD("Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:o,direction:"outbound",maConn:e,upgradedConn:s,muxerFactory:a,remotePeer:i})}_createConnection(e){var t,r,n=this;const{cryptoProtocol:i,direction:s,maConn:o,upgradedConn:a,remotePeer:c,muxerFactory:l}=e;let u,h,d;null!=l&&(u=l.createStreamMuxer(this.components,{onIncomingStream:e=>{null!=d&&Promise.resolve().then((async()=>{const t=new FD(e),r=this.components.getRegistrar().getProtocols(),{stream:n,protocol:i}=await t.handle(r);qD("%s: incoming stream opened on %s",s,i);const o=this.components.getMetrics();null!=o&&o.trackStream({stream:n,remotePeer:c,protocol:i}),null!=d&&(d.addStream(e,{protocol:i}),this._onStream({connection:d,stream:{...e,...n},protocol:i}))})).catch((t=>{qD.error(t),null==e.timeline.close&&e.close()}))},onStreamEnd:e=>{var t;null===(t=d)||void 0===t||t.removeStream(e.id)}}),h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==u)throw me(new Error("Stream is not multiplexed"),TR.ERR_MUXER_UNAVAILABLE);qD("%s: starting new stream on %s",s,e);const r=u.newStream(),i=new jD(r),o=n.components.getMetrics();try{let{stream:n,protocol:s}=await i.select(e,t);return null!=o&&(n=o.trackStream({stream:n,remotePeer:c,protocol:s})),{stream:{...r,...n},protocol:s}}catch(Up){if(qD.error("could not create new stream",Up),null==r.timeline.close&&r.close(),null!=Up.code)throw Up;throw me(Up,TR.ERR_UNSUPPORTED_PROTOCOL)}},bu(a,u,a).catch(qD.error));const p=o.timeline;o.timeline=new Proxy(p,{set:function(){return null!=d&&"close"===(arguments.length<=1?void 0:arguments[1])&&null!=(arguments.length<=2?void 0:arguments[2])&&null==p.close&&(async()=>{try{"OPEN"===d.stat.status&&await d.close()}catch(Up){qD.error(Up)}finally{n.dispatchEvent(new VE("connectionEnd",{detail:d}))}})().catch((e=>{qD.error(e)})),Reflect.set(...arguments)}}),o.timeline.upgraded=Date.now();const f=()=>{throw me(new Error("connection is not multiplexed"),TR.ERR_CONNECTION_NOT_MULTIPLEXED)};var y;return y={remoteAddr:o.remoteAddr,remotePeer:c,stat:{status:"OPEN",direction:s,timeline:o.timeline,multiplexer:null===(t=u)||void 0===t?void 0:t.protocol,encryption:i},newStream:null!==(r=h)&&void 0!==r?r:f,getStreams:()=>null!=u?u.streams:f(),close:async()=>{await o.close(),null!=u&&await Promise.all(u.streams.map((async e=>{await e.close()})))}},d=new $D(y),this.dispatchEvent(new VE("connection",{detail:d})),d}_onStream(e){const{connection:t,stream:r,protocol:n}=e;this.components.getRegistrar().getHandler(n)({connection:t,stream:r,protocol:n})}async _encryptInbound(e){const t=new FD(e),r=Array.from(this.connectionEncryption.keys());qD("handling inbound crypto protocol selection",r);try{const{stream:e,protocol:n}=await t.handle(r),i=this.connectionEncryption.get(n);if(null==i)throw new Error(`no crypto module found for ${n}`);return qD("encrypting inbound connection..."),{...await i.secureInbound(this.components.getPeerId(),e),protocol:n}}catch(Up){throw me(Up,TR.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,t){const r=new jD(e),n=Array.from(this.connectionEncryption.keys());qD("selecting outbound crypto protocol",n);try{const{stream:e,protocol:i}=await r.select(n),s=this.connectionEncryption.get(i);if(null==s)throw new Error(`no crypto module found for ${i}`);return qD("encrypting outbound connection to %p",t),{...await s.secureOutbound(this.components.getPeerId(),e,t),protocol:i}}catch(Up){throw me(Up,TR.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,t){const r=new jD(e),n=Array.from(t.keys());qD("outbound selecting muxer %s",n);try{const{stream:e,protocol:i}=await r.select(n);qD("%s selected as muxer protocol",i);return{stream:e,muxerFactory:t.get(i)}}catch(Up){throw qD.error("error multiplexing outbound stream",Up),me(Up,TR.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,t){const r=new FD(e),n=Array.from(t.keys());qD("inbound handling muxers %s",n);try{const{stream:e,protocol:i}=await r.handle(n);return{stream:e,muxerFactory:t.get(i)}}catch(Up){throw qD.error("error multiplexing inbound stream",Up),me(Up,TR.ERR_MUXER_UNAVAILABLE)}}}const WD=ge("libp2p:registrar");function GD(e,t){for(const r of e)if(t.includes(r))return!0;return!1}class YD{constructor(e){this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onProtocolChange=this._onProtocolChange.bind(this),this.components.getConnectionManager().addEventListener("peer:disconnect",this._onDisconnect),this.components.getPeerStore().addEventListener("change:protocols",this._onProtocolChange)}getProtocols(){const e=new Set;for(const t of this.topologies.values())t.protocols.forEach((t=>e.add(t)));for(const t of this.handlers.keys())e.add(t);return Array.from(e).sort()}getHandler(e){const t=this.handlers.get(e);if(null==t)throw new Error(`No handler registered for protocol ${e}`);return t}getTopologies(e){const t=[];for(const{topology:r,protocols:n}of this.topologies.values())n.includes(e)&&t.push(r);return t}async handle(e,t){const r=Array.isArray(e)?e:[e];for(const n of r){if(this.handlers.has(n))throw me(new Error(`Handler already registered for protocol ${n}`),TR.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);this.handlers.set(n,t)}await this.components.getPeerStore().protoBook.add(this.components.getPeerId(),r)}async unhandle(e){const t=Array.isArray(e)?e:[e];t.forEach((e=>{this.handlers.delete(e)})),await this.components.getPeerStore().protoBook.remove(this.components.getPeerId(),t)}async register(e,t){if(null==(r=t)||!Boolean(r[xE]))throw WD.error("topology must be an instance of interfaces/topology"),me(new Error("topology must be an instance of interfaces/topology"),TR.ERR_INVALID_PARAMETERS);var r;const n=`${(1e9*Math.random()).toString(36)}${Date.now()}`;return this.topologies.set(n,{topology:t,protocols:Array.isArray(e)?e:[e]}),await t.setRegistrar(this),n}unregister(e){this.topologies.delete(e)}_onDisconnect(e){const t=e.detail;this.components.getPeerStore().protoBook.get(t.remotePeer).then((e=>{for(const{topology:r,protocols:n}of this.topologies.values())GD(e,n)&&r.onDisconnect(t.remotePeer)})).catch((e=>{WD.error(e)}))}_onProtocolChange(e){const{peerId:t,protocols:r,oldProtocols:n}=e.detail,i=n.filter((e=>!r.includes(e))),s=r.filter((e=>!n.includes(e)));for(const{topology:o,protocols:a}of this.topologies.values())GD(i,a)&&o.onDisconnect(t);for(const{topology:o,protocols:a}of this.topologies.values())if(GD(s,a)){const e=this.components.getConnectionManager().getConnections(t)[0];if(null==e)continue;o.onConnect(t,e)}}}var QD;!function(e){e.codec=()=>Ei({5:{name:"protocolVersion",codec:Ii,optional:!0},6:{name:"agentVersion",codec:Ii,optional:!0},1:{name:"publicKey",codec:ci,optional:!0},2:{name:"listenAddrs",codec:ci,repeats:!0},4:{name:"observedAddr",codec:ci,optional:!0},3:{name:"protocols",codec:Ii,repeats:!0},8:{name:"signedPeerRecord",codec:ci,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(QD||(QD={}));const JD=ge("libp2p:identify"),XD=6e4;class ZD{constructor(e,t){this.components=e,this.started=!1,this.init=t,this.handleMessage=this.handleMessage.bind(this),this.identifyProtocolStr=`/${t.protocolPrefix}/id/1.0.0`,this.identifyPushProtocolStr=`/${t.protocolPrefix}/id/push/1.0.0`,this.host={protocolVersion:`${t.protocolPrefix}/0.1.0`,...t.host},this.components.getConnectionManager().addEventListener("peer:connect",(e=>{const t=e.detail;this.identify(t).catch(JD.error)})),this.components.getPeerStore().addEventListener("change:multiaddrs",(e=>{const{peerId:t}=e.detail;this.components.getPeerId().equals(t)&&this.pushToPeerStore().catch((e=>JD.error(e)))})),this.components.getPeerStore().addEventListener("change:protocols",(e=>{const{peerId:t}=e.detail;this.components.getPeerId().equals(t)&&this.pushToPeerStore().catch((e=>JD.error(e)))}))}isStarted(){return this.started}async start(){this.started||(await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"AgentVersion",(0,zt.fromString)(this.host.agentVersion)),await this.components.getPeerStore().metadataBook.setValue(this.components.getPeerId(),"ProtocolVersion",(0,zt.fromString)(this.host.protocolVersion)),await this.components.getRegistrar().handle([this.identifyProtocolStr,this.identifyPushProtocolStr],(e=>{var t;null===(t=this.handleMessage(e))||void 0===t||t.catch((e=>{JD.error(e)}))})),this.started=!0)}async stop(){await this.components.getRegistrar().unhandle(this.identifyProtocolStr),await this.components.getRegistrar().unhandle(this.identifyPushProtocolStr),this.started=!1}async push(e){const t=await this.components.getPeerStore().addressBook.getRawEnvelope(this.components.getPeerId()),r=this.components.getAddressManager().getAddresses().map((e=>e.bytes)),n=await this.components.getPeerStore().protoBook.get(this.components.getPeerId()),i=e.map((async e=>{var i;const s=new Yt.TimeoutController(null!==(i=this.init.timeout)&&void 0!==i?i:XD);let o;try{o=(await e.newStream([this.identifyPushProtocolStr],{signal:s.signal})).stream;const i=i_(o,s.signal);await bu([QD.encode({listenAddrs:r,signedPeerRecord:t,protocols:n})],$E(),i,Xa)}catch(Up){JD.error("could not push identify update to peer",Up)}finally{null!=o&&o.close(),s.clear()}}));await Promise.all(i)}async pushToPeerStore(){if(!this.isStarted())return;const e=[];for(const t of this.components.getConnectionManager().getConnections()){const r=t.remotePeer;(await this.components.getPeerStore().get(r)).protocols.includes(this.identifyPushProtocolStr)&&e.push(t)}await this.push(e)}async _identify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{stream:r}=await e.newStream([this.identifyProtocolStr],t);let n,i=r,s=t.signal;var o;null==s&&(n=new Yt.TimeoutController(null!==(o=this.init.timeout)&&void 0!==o?o:XD),s=n.signal);i=i_(r,s);try{var a;const e=await bu([],i,QE({maxDataLength:null!==(a=this.init.maxIdentifyMessageSize)&&void 0!==a?a:8192}),(async e=>await mg(e)));if(null==e)throw me(new Error("No data could be retrieved"),TR.ERR_CONNECTION_ENDED);try{return QD.decode(e)}catch(Up){throw me(Up,TR.ERR_INVALID_MESSAGE)}}finally{null!=n&&n.clear(),r.close()}}async identify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await this._identify(e,t),{publicKey:n,listenAddrs:i,protocols:s,observedAddr:o,signedPeerRecord:a,agentVersion:c,protocolVersion:l}=r;if(null==n)throw me(new Error("public key was missing from identify message"),TR.ERR_MISSING_PUBLIC_KEY);const u=await En(n);if(!e.remotePeer.equals(u))throw me(new Error("identified peer does not match the expected peer"),TR.ERR_INVALID_PEER);if(this.components.getPeerId().equals(u))throw me(new Error("identified peer is our own peer id?"),TR.ERR_INVALID_PEER);const h=ZD.getCleanMultiaddr(o);if(null!=a){JD("received signed peer record from %p",u);try{const e=await RE.openAndCertify(a,NE.DOMAIN);if(!e.peerId.equals(u))throw me(new Error("identified peer does not match the expected peer"),TR.ERR_INVALID_PEER);if(await this.components.getPeerStore().addressBook.consumePeerRecord(e))return await this.components.getPeerStore().protoBook.set(u,s),null!=c&&await this.components.getPeerStore().metadataBook.setValue(u,"AgentVersion",(0,zt.fromString)(c)),null!=l&&await this.components.getPeerStore().metadataBook.setValue(u,"ProtocolVersion",(0,zt.fromString)(l)),void JD("identify completed for peer %p and protocols %o",u,s)}catch(Up){JD("received invalid envelope, discard it and fallback to listenAddrs is available",Up)}}else JD("no signed peer record received from %p",u);JD("falling back to legacy addresses from %p",u);try{await this.components.getPeerStore().addressBook.set(u,i.map((e=>new Ml(e))))}catch(Up){JD.error("received invalid addrs",Up)}await this.components.getPeerStore().protoBook.set(u,s),null!=c&&await this.components.getPeerStore().metadataBook.setValue(u,"AgentVersion",(0,zt.fromString)(c)),null!=l&&await this.components.getPeerStore().metadataBook.setValue(u,"ProtocolVersion",(0,zt.fromString)(l)),JD("identify completed for peer %p and protocols %o",u,s),JD("received observed address of %s",null===h||void 0===h?void 0:h.toString())}handleMessage(e){const{protocol:t}=e;switch(t){case this.identifyProtocolStr:return this._handleIdentify(e);case this.identifyPushProtocolStr:return this._handlePush(e);default:JD.error("cannot handle unknown protocol %s",t)}}async _handleIdentify(e){var t;const{connection:r,stream:n}=e,i=new Yt.TimeoutController(null!==(t=this.init.timeout)&&void 0!==t?t:XD);try{var s;const e=null!==(s=this.components.getPeerId().publicKey)&&void 0!==s?s:new Uint8Array(0),t=await this.components.getPeerStore().get(this.components.getPeerId()),o=this.components.getAddressManager().getAddresses().map((e=>e.decapsulateCode(hl("p2p").code)));let a=t.peerRecordEnvelope;if(o.length>0&&null==a){const e=new NE({peerId:this.components.getPeerId(),multiaddrs:o}),t=await RE.seal(e,this.components.getPeerId());await this.components.getPeerStore().addressBook.consumePeerRecord(t),a=t.marshal()}const c=QD.encode({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:e,listenAddrs:o.map((e=>e.bytes)),signedPeerRecord:a,observedAddr:r.remoteAddr.bytes,protocols:t.protocols}),l=i_(n,i.signal);await bu([c],$E(),l,Xa)}catch(Up){JD.error("could not respond to identify request",Up)}finally{n.close(),i.clear()}}async _handlePush(e){var t;const{connection:r,stream:n}=e,i=new Yt.TimeoutController(null!==(t=this.init.timeout)&&void 0!==t?t:XD);let s;try{var o;const e=i_(n,i.signal),t=await bu([],e,QE({maxDataLength:null!==(o=this.init.maxIdentifyMessageSize)&&void 0!==o?o:8192}),(async e=>await mg(e)));null!=t&&(s=QD.decode(t))}catch(Up){return JD.error("received invalid message",Up)}finally{n.close(),i.clear()}if(null==s)return JD.error("received invalid message");const a=r.remotePeer;if(this.components.getPeerId().equals(a))JD("received push from ourselves?");else{if(JD("received push from %p",a),null!=s.signedPeerRecord){JD("received signedPeerRecord in push");try{const e=await RE.openAndCertify(s.signedPeerRecord,NE.DOMAIN);if(await this.components.getPeerStore().addressBook.consumePeerRecord(e))return JD("consumed signedPeerRecord sent in push"),void await this.components.getPeerStore().protoBook.set(a,s.protocols);JD("failed to consume signedPeerRecord sent in push")}catch(Up){JD("received invalid envelope, discard it and fallback to listenAddrs is available",Up)}}else JD("did not receive signedPeerRecord in push");try{await this.components.getPeerStore().addressBook.set(a,s.listenAddrs.map((e=>new Ml(e))))}catch(Up){JD.error("received invalid addrs",Up)}try{await this.components.getPeerStore().protoBook.set(a,s.protocols)}catch(Up){JD.error("received invalid protocols",Up)}JD("handled push from %p",a)}}static getCleanMultiaddr(e){if(null!=e&&e.length>0)try{return new Ml(e)}catch{}}}var eP,tP;!function(e){e.codec=()=>Ei({1:{name:"identifier",codec:Ii}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(eP||(eP={})),function(e){let t,r;!function(e){e.OK="OK",e.NOT_FOUND="NOT_FOUND",e.ERROR="ERROR"}(t=e.StatusCode||(e.StatusCode={})),function(e){e[e.OK=0]="OK",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.ERROR=2]="ERROR"}(r||(r={})),function(e){e.codec=()=>ui(r)}(t=e.StatusCode||(e.StatusCode={})),e.codec=()=>Ei({1:{name:"status",codec:e.StatusCode.codec()},2:{name:"data",codec:ci}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(tP||(tP={}));const rP=ge("libp2p:fetch");class nP{constructor(e,t){var r;this.started=!1,this.components=e,this.protocol=`/${null!==(r=t.protocolPrefix)&&void 0!==r?r:"libp2p"}/fetch/0.0.1`,this.lookupFunctions=new Map,this.handleMessage=this.handleMessage.bind(this)}async start(){await this.components.getRegistrar().handle(this.protocol,(e=>{this.handleMessage(e).catch((e=>{rP.error(e)}))})),this.started=!0}async stop(){await this.components.getRegistrar().unhandle(this.protocol),this.started=!1}isStarted(){return this.started}async fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rP("dialing %s to %p",this.protocol,e);const n=await this.components.getConnectionManager().openConnection(e,r),{stream:i}=await n.newStream([this.protocol],r);let s=i;null!=r.signal&&(s=i_(i,r.signal));const o=ET(s);o.write($E.single(eP.encode({identifier:t})).slice());const a=tP.decode((await QE.fromReader(o.reader).next()).value.slice());switch(a.status){case tP.StatusCode.OK:return a.data;case tP.StatusCode.NOT_FOUND:return null;case tP.StatusCode.ERROR:{const e=(new TextDecoder).decode(a.data);throw me(new Error("Error in fetch protocol response: "+e),TR.ERR_INVALID_PARAMETERS)}default:throw me(new Error("Unknown response status"),TR.ERR_INVALID_MESSAGE)}}async handleMessage(e){const{stream:t}=e,r=ET(t),n=eP.decode((await QE.fromReader(r.reader).next()).value.slice());let i;const s=this._getLookupFunction(n.identifier);if(null!=s){const e=await s(n.identifier);i=null!=e?{status:tP.StatusCode.OK,data:e}:{status:tP.StatusCode.NOT_FOUND,data:new Uint8Array(0)}}else{const e=(new TextEncoder).encode("No lookup function registered for key: "+n.identifier);i={status:tP.StatusCode.ERROR,data:e}}r.write($E.single(tP.encode(i)).slice())}_getLookupFunction(e){for(const t of this.lookupFunctions.keys())if(e.startsWith(t))return this.lookupFunctions.get(t)}registerLookupFunction(e,t){if(this.lookupFunctions.has(e))throw me(new Error("Fetch protocol handler for key prefix '"+e+"' already registered"),TR.ERR_KEY_ALREADY_EXISTS);this.lookupFunctions.set(e,t)}unregisterLookupFunction(e,t){if(null!=t){if(this.lookupFunctions.get(e)!==t)return}this.lookupFunctions.delete(e)}}const iP=ge("libp2p:ping");class sP{constructor(e,t){this.components=e,this.started=!1,this.protocol=`/${t.protocolPrefix}/ping/1.0.0`}async start(){await this.components.getRegistrar().handle(this.protocol,this.handleMessage),this.started=!0}async stop(){await this.components.getRegistrar().unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){const{stream:t}=e;bu(t,t).catch((e=>{iP.error(e)}))}async ping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};iP("dialing %s to %p",this.protocol,e);const r=await this.components.getConnectionManager().openConnection(e,t),{stream:n}=await r.newStream([this.protocol],t),i=Date.now(),s=Vi(32);let o=n;null!=t.signal&&(o=i_(n,t.signal));try{const e=await bu([s],o,(async e=>await mg(e))),t=Date.now();if(null==e||!(0,un.equals)(s,e))throw me(new Error("Received wrong ping ack"),TR.ERR_WRONG_PING_ACK);return t-i}finally{n.close()}}}var oP=__webpack_require__(3227);function aP(e){const{address:t}=e.nodeAddress();return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(r=t)||/^::1$/.test(r);var r}const cP=ge("libp2p:nat"),lP=7200;function uP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:65535;return Math.floor(Math.random()*(t-e+1)+e)}class hP{constructor(e,t){var r,n,i;if(this.components=e,this.started=!1,this.enabled=t.enabled,this.externalAddress=t.externalAddress,this.localAddress=t.localAddress,this.description=null!==(r=t.description)&&void 0!==r?r:`libp2p@0.0.0 ${this.components.getPeerId().toString()}`,this.ttl=null!==(n=t.ttl)&&void 0!==n?n:lP,this.keepAlive=null===(i=t.keepAlive)||void 0===i||i,this.gateway=t.gateway,this.ttl<lP)throw me(new Error("NatManager ttl should be at least 7200 seconds"),TR.ERR_INVALID_PARAMETERS)}isStarted(){return this.started}start(){}afterStart(){oP.isBrowser||!this.enabled||this.started||(this.started=!0,this._start().catch((e=>{cP.error(e)})))}async _start(){const e=this.components.getTransportManager().getAddrs();for(const r of e){var t;const{family:e,host:n,port:i,transport:s}=r.toOptions();if(!r.isThinWaistAddress()||"tcp"!==s)continue;if(aP(r))continue;if(4!==e)continue;const o=await this._getClient(),a=null!==(t=this.externalAddress)&&void 0!==t?t:await o.externalIp();if(tT(a))throw new Error(`${a} is private - please set config.nat.externalIp to an externally routable IP or ensure you are not behind a double NAT`);const c=uP();cP(`opening uPnP connection from ${a}:${c} to ${n}:${i}`),await o.map({publicPort:c,localPort:i,localAddress:this.localAddress,protocol:"TCP"===s.toUpperCase()?"TCP":"UDP"}),this.components.getAddressManager().addObservedAddr(Ml.fromNodeAddress({family:4,address:a,port:c},s))}}async _getClient(){return null!=this.client||(this.client=await async function(){throw new Error("Not supported in browsers")}((this.description,this.ttl,this.keepAlive,this.gateway))),this.client}async stop(){if(!oP.isBrowser&&null!=this.client)try{await this.client.close(),this.client=void 0}catch(Up){cP.error(Up)}}}const dP=ge("libp2p:peer-record-updater");class pP{constructor(e){this.components=e,this.started=!1,this.update=this.update.bind(this)}isStarted(){return this.started}async start(){this.started=!0,this.components.getTransportManager().addEventListener("listener:listening",this.update),this.components.getTransportManager().addEventListener("listener:close",this.update),this.components.getAddressManager().addEventListener("change:addresses",this.update)}async stop(){this.started=!1,this.components.getTransportManager().removeEventListener("listener:listening",this.update),this.components.getTransportManager().removeEventListener("listener:close",this.update),this.components.getAddressManager().removeEventListener("change:addresses",this.update)}update(){Promise.resolve().then((async()=>{const e=new NE({peerId:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((e=>e.decapsulateCode(hl("p2p").code)))}),t=await RE.seal(e,this.components.getPeerId());await this.components.getPeerStore().addressBook.consumePeerRecord(t)})).catch((e=>{dP.error("Could not update self peer record: %o",e)}))}}class fP{constructor(e){this.dht=e}async findPeer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of this.dht.findPeer(e,t))if("FINAL_PEER"===r.name)return r.peer;throw me(new Error(RR.NOT_FOUND),TR.ERR_NOT_FOUND)}async*getClosestPeers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of this.dht.getClosestPeers(e,t))"PEER_RESPONSE"===r.name&&(yield*r.closer)}}const yP="ERR_INVALID_PARAMETERS",gP="ERR_NOT_FOUND",mP=ge("libp2p:peer-store:address-book"),wP="change:multiaddrs";async function vP(){return!0}class bP{constructor(e,t,r){this.dispatchEvent=e,this.store=t,this.addressFilter=null!==r&&void 0!==r?r:vP}async consumePeerRecord(e){mP.trace("consumePeerRecord await write lock");const t=await this.store.lock.writeLock();let r,n,i;mP.trace("consumePeerRecord got write lock");try{let s;try{s=NE.createFromProtobuf(e.payload)}catch(Up){return mP.error("invalid peer record received"),!1}r=s.peerId;const o=s.multiaddrs;if(!r.equals(e.peerId))return mP("signing key does not match PeerId in the PeerRecord"),!1;if(null==o||0===o.length)return!1;if(await this.store.has(r)&&(n=await this.store.load(r),null!=n.peerRecordEnvelope)){const e=await RE.createFromProtobuf(n.peerRecordEnvelope),t=NE.createFromProtobuf(e.payload);if(t.seqNumber>=s.seqNumber)return mP("sequence number was lower or equal to existing sequence number - stored: %d received: %d",t.seqNumber,s.seqNumber),!1}const a=await EP(r,o,this.addressFilter,!0);i=await this.store.patchOrCreate(r,{addresses:a,peerRecordEnvelope:e.marshal()}),mP("stored provided peer record for %p",s.peerId)}finally{mP.trace("consumePeerRecord release write lock"),t()}return this.dispatchEvent(new VE(wP,{detail:{peerId:r,multiaddrs:i.addresses.map((e=>{let{multiaddr:t}=e;return t})),oldMultiaddrs:null==n?[]:n.addresses.map((e=>{let{multiaddr:t}=e;return t}))}})),!0}async getRawEnvelope(e){mP.trace("getRawEnvelope await read lock");const t=await this.store.lock.readLock();mP.trace("getRawEnvelope got read lock");try{return(await this.store.load(e)).peerRecordEnvelope}catch(Up){if(Up.code!==gP)throw Up}finally{mP.trace("getRawEnvelope release read lock"),t()}}async getPeerRecord(e){const t=await this.getRawEnvelope(e);if(null!=t)return await RE.createFromProtobuf(t)}async get(e){e=wn(e),mP.trace("get wait for read lock");const t=await this.store.lock.readLock();mP.trace("get got read lock");try{return(await this.store.load(e)).addresses}catch(Up){if(Up.code!==gP)throw Up}finally{mP.trace("get release read lock"),t()}return[]}async set(e,t){if(e=wn(e),!Array.isArray(t))throw mP.error("multiaddrs must be an array of Multiaddrs"),me(new Error("multiaddrs must be an array of Multiaddrs"),yP);mP.trace("set await write lock");const r=await this.store.lock.writeLock();mP.trace("set got write lock");let n,i,s=!1;try{const o=await EP(e,t,this.addressFilter);if(0===o.length)return;try{if(n=await this.store.load(e),s=!0,new Set([...o.map((e=>{let{multiaddr:t}=e;return t.toString()})),...n.addresses.map((e=>{let{multiaddr:t}=e;return t.toString()}))]).size===n.addresses.length&&o.length===n.addresses.length)return}catch(Up){if(Up.code!==gP)throw Up}i=await this.store.patchOrCreate(e,{addresses:o}),mP("set multiaddrs for %p",e)}finally{mP.trace("set multiaddrs for %p",e),mP("set release write lock"),r()}this.dispatchEvent(new VE(wP,{detail:{peerId:e,multiaddrs:i.addresses.map((e=>e.multiaddr)),oldMultiaddrs:null==n?[]:n.addresses.map((e=>{let{multiaddr:t}=e;return t}))}})),s||this.dispatchEvent(new VE("peer",{detail:{id:e,multiaddrs:i.addresses.map((e=>e.multiaddr)),protocols:i.protocols}}))}async add(e,t){if(e=wn(e),!Array.isArray(t))throw mP.error("multiaddrs must be an array of Multiaddrs"),me(new Error("multiaddrs must be an array of Multiaddrs"),yP);mP.trace("add await write lock");const r=await this.store.lock.writeLock();let n,i,s;mP.trace("add got write lock");try{const o=await EP(e,t,this.addressFilter);if(0===o.length)return;try{if(i=await this.store.load(e),n=!0,new Set([...o.map((e=>{let{multiaddr:t}=e;return t.toString()})),...i.addresses.map((e=>{let{multiaddr:t}=e;return t.toString()}))]).size===i.addresses.length)return}catch(Up){if(Up.code!==gP)throw Up}s=await this.store.mergeOrCreate(e,{addresses:o}),mP("added multiaddrs for %p",e)}finally{mP.trace("set release write lock"),r()}this.dispatchEvent(new VE(wP,{detail:{peerId:e,multiaddrs:s.addresses.map((e=>e.multiaddr)),oldMultiaddrs:null==i?[]:i.addresses.map((e=>{let{multiaddr:t}=e;return t}))}})),!0===n&&this.dispatchEvent(new VE("peer",{detail:{id:e,multiaddrs:s.addresses.map((e=>e.multiaddr)),protocols:s.protocols}}))}async delete(e){e=wn(e),mP.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;mP.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(Up){if(Up.code!==gP)throw Up}await this.store.patchOrCreate(e,{addresses:[]})}finally{mP.trace("delete release write lock"),t()}null!=r&&this.dispatchEvent(new VE(wP,{detail:{peerId:e,multiaddrs:[],oldMultiaddrs:null==r?[]:r.addresses.map((e=>{let{multiaddr:t}=e;return t}))}}))}}async function EP(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return await bu(t,(e=>iD(e,(e=>{if(!Ml.isMultiaddr(e))throw mP.error("multiaddr must be an instance of Multiaddr"),me(new Error("multiaddr must be an instance of Multiaddr"),yP)}))),(t=>Za(t,(async t=>await r(e,t)))),(e=>lc(e,(e=>({multiaddr:new Ml(e.toString()),isCertified:n})))),(async e=>await Qa(e)))}const _P=ge("libp2p:peer-store:key-book"),SP="change:pubkey";class AP{constructor(e,t){this.dispatchEvent=e,this.store=t}async set(e,t){if(e=wn(e),!(t instanceof Uint8Array))throw _P.error("publicKey must be an instance of Uint8Array to store data"),me(new Error("publicKey must be an instance of PublicKey"),yP);_P.trace("set await write lock");const r=await this.store.lock.writeLock();_P.trace("set got write lock");let n,i=!1;try{try{if(n=await this.store.load(e),null!=n.pubKey&&(0,un.equals)(n.pubKey,t))return}catch(Up){if(Up.code!==gP)throw Up}await this.store.patchOrCreate(e,{pubKey:t}),i=!0}finally{_P.trace("set release write lock"),r()}i&&this.dispatchEvent(new VE(SP,{detail:{peerId:e,publicKey:t,oldPublicKey:null==n?void 0:n.pubKey}}))}async get(e){e=wn(e),_P.trace("get await write lock");const t=await this.store.lock.readLock();_P.trace("get got write lock");try{return(await this.store.load(e)).pubKey}catch(Up){if(Up.code!==gP)throw Up}finally{_P("get release write lock"),t()}}async delete(e){e=wn(e),_P.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;_P.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(Up){if(Up.code!==gP)throw Up}await this.store.patchOrCreate(e,{pubKey:void 0})}catch(Up){if(Up.code!==gP)throw Up}finally{_P.trace("delete release write lock"),t()}this.dispatchEvent(new VE(SP,{detail:{peerId:e,publicKey:void 0,oldPublicKey:null==r?void 0:r.pubKey}}))}}const kP=ge("libp2p:peer-store:metadata-book"),IP="change:metadata";class CP{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){e=wn(e),kP.trace("get await read lock");const t=await this.store.lock.readLock();kP.trace("get got read lock");try{return(await this.store.load(e)).metadata}catch(Up){if(Up.code!==gP)throw Up}finally{kP.trace("get release read lock"),t()}return new Map}async getValue(e,t){e=wn(e),kP.trace("getValue await read lock");const r=await this.store.lock.readLock();kP.trace("getValue got read lock");try{return(await this.store.load(e)).metadata.get(t)}catch(Up){if(Up.code!==gP)throw Up}finally{kP.trace("getValue release write lock"),r()}}async set(e,t){if(e=wn(e),!(t instanceof Map))throw kP.error("valid metadata must be provided to store data"),me(new Error("valid metadata must be provided"),yP);kP.trace("set await write lock");const r=await this.store.lock.writeLock();let n;kP.trace("set got write lock");try{try{n=await this.store.load(e)}catch(Up){if(Up.code!==gP)throw Up}await this.store.mergeOrCreate(e,{metadata:t})}finally{kP.trace("set release write lock"),r()}this.dispatchEvent(new VE(IP,{detail:{peerId:e,metadata:t,oldMetadata:null==n?new Map:n.metadata}}))}async setValue(e,t,r){if(e=wn(e),"string"!==typeof t||!(r instanceof Uint8Array))throw kP.error("valid key and value must be provided to store data"),me(new Error("valid key and value must be provided"),yP);kP.trace("setValue await write lock");const n=await this.store.lock.writeLock();let i,s;kP.trace("setValue got write lock");try{try{i=await this.store.load(e);const n=i.metadata.get(t);if(null!=n&&(0,un.equals)(r,n))return}catch(Up){if(Up.code!==gP)throw Up}s=await this.store.mergeOrCreate(e,{metadata:new Map([[t,r]])})}finally{kP.trace("setValue release write lock"),n()}this.dispatchEvent(new VE(IP,{detail:{peerId:e,metadata:s.metadata,oldMetadata:null==i?new Map:i.metadata}}))}async delete(e){e=wn(e),kP.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;kP.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(Up){if(Up.code!==gP)throw Up}null!=r&&await this.store.patch(e,{metadata:new Map})}finally{kP.trace("delete release write lock"),t()}null!=r&&this.dispatchEvent(new VE(IP,{detail:{peerId:e,metadata:new Map,oldMetadata:r.metadata}}))}async deleteValue(e,t){e=wn(e),kP.trace("deleteValue await write lock");const r=await this.store.lock.writeLock();let n,i;kP.trace("deleteValue got write lock");try{i=await this.store.load(e),n=i.metadata,n.delete(t),await this.store.patch(e,{metadata:n})}catch(Up){if(Up.code!==gP)throw Up}finally{kP.trace("deleteValue release write lock"),r()}null!=n&&this.dispatchEvent(new VE(IP,{detail:{peerId:e,metadata:n,oldMetadata:null==i?new Map:i.metadata}}))}}const RP=ge("libp2p:peer-store:proto-book"),TP="change:protocols";class DP{constructor(e,t){this.dispatchEvent=e,this.store=t}async get(e){RP.trace("get wait for read lock");const t=await this.store.lock.readLock();RP.trace("get got read lock");try{return(await this.store.load(e)).protocols}catch(Up){if(Up.code!==gP)throw Up}finally{RP.trace("get release read lock"),t()}return[]}async set(e,t){if(e=wn(e),!Array.isArray(t))throw RP.error("protocols must be provided to store data"),me(new Error("protocols must be provided"),yP);RP.trace("set await write lock");const r=await this.store.lock.writeLock();let n,i;RP.trace("set got write lock");try{try{if(n=await this.store.load(e),new Set([...t]).size===n.protocols.length)return}catch(Up){if(Up.code!==gP)throw Up}i=await this.store.patchOrCreate(e,{protocols:t}),RP("stored provided protocols for %p",e)}finally{RP.trace("set release write lock"),r()}this.dispatchEvent(new VE(TP,{detail:{peerId:e,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async add(e,t){if(e=wn(e),!Array.isArray(t))throw RP.error("protocols must be provided to store data"),me(new Error("protocols must be provided"),yP);RP.trace("add await write lock");const r=await this.store.lock.writeLock();let n,i;RP.trace("add got write lock");try{try{if(n=await this.store.load(e),new Set([...n.protocols,...t]).size===n.protocols.length)return}catch(Up){if(Up.code!==gP)throw Up}i=await this.store.mergeOrCreate(e,{protocols:t}),RP("added provided protocols for %p",e)}finally{RP.trace("add release write lock"),r()}this.dispatchEvent(new VE(TP,{detail:{peerId:e,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async remove(e,t){if(e=wn(e),!Array.isArray(t))throw RP.error("protocols must be provided to store data"),me(new Error("protocols must be provided"),yP);RP.trace("remove await write lock");const r=await this.store.lock.writeLock();let n,i;RP.trace("remove got write lock");try{try{n=await this.store.load(e);const r=new Set(n.protocols);for(const e of t)r.delete(e);if(n.protocols.length===r.size)return;t=Array.from(r)}catch(Up){if(Up.code!==gP)throw Up}i=await this.store.patchOrCreate(e,{protocols:t})}finally{RP.trace("remove release write lock"),r()}this.dispatchEvent(new VE(TP,{detail:{peerId:e,protocols:i.protocols,oldProtocols:null==n?[]:n.protocols}}))}async delete(e){e=wn(e),RP.trace("delete await write lock");const t=await this.store.lock.writeLock();let r;RP.trace("delete got write lock");try{try{r=await this.store.load(e)}catch(Up){if(Up.code!==gP)throw Up}await this.store.patchOrCreate(e,{protocols:[]})}finally{RP.trace("delete release write lock"),t()}null!=r&&this.dispatchEvent(new VE(TP,{detail:{peerId:e,protocols:[],oldProtocols:r.protocols}}))}}var PP,NP,xP;!function(e){e.codec=()=>Ei({1:{name:"addresses",codec:NP.codec(),repeats:!0},2:{name:"protocols",codec:Ii,repeats:!0},3:{name:"metadata",codec:xP.codec(),repeats:!0},4:{name:"pubKey",codec:ci,optional:!0},5:{name:"peerRecordEnvelope",codec:ci,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(PP||(PP={})),function(e){e.codec=()=>Ei({1:{name:"multiaddr",codec:ci},2:{name:"isCertified",codec:ai,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(NP||(NP={})),function(e){e.codec=()=>Ei({1:{name:"key",codec:Ii},2:{name:"value",codec:ci}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(xP||(xP={}));const OP=ge("libp2p:peer-store:store"),BP="/peers/";class LP{constructor(){this.components=new F_,this.lock=rm({name:"peer-store",singleProcess:!0})}init(e){this.components=e}_peerIdToDatastoreKey(e){if(null==e.type)throw OP.error("peerId must be an instance of peer-id to store data"),me(new Error("peerId must be an instance of peer-id"),yP);const t=e.toCID().toString();return new Gt(`/peers/${t}`)}async has(e){return await this.components.getDatastore().has(this._peerIdToDatastoreKey(e))}async delete(e){await this.components.getDatastore().delete(this._peerIdToDatastoreKey(e))}async load(e){var t,r;const n=await this.components.getDatastore().get(this._peerIdToDatastoreKey(e)),i=PP.decode(n),s=new Map;for(const o of i.metadata)s.set(o.key,o.value);return{...i,id:e,addresses:i.addresses.map((e=>{let{multiaddr:t,isCertified:r}=e;return{multiaddr:new Ml(t),isCertified:null!==r&&void 0!==r&&r}})),metadata:s,pubKey:null!==(t=i.pubKey)&&void 0!==t?t:void 0,peerRecordEnvelope:null!==(r=i.peerRecordEnvelope)&&void 0!==r?r:void 0}}async save(e){if(null!=e.pubKey&&null!=e.id.publicKey&&!(0,un.equals)(e.pubKey,e.id.publicKey))throw OP.error("peer publicKey bytes do not match peer id publicKey bytes"),me(new Error("publicKey bytes do not match peer id publicKey bytes"),yP);const t=new Set,r=e.addresses.filter((e=>!t.has(e.multiaddr.toString())&&(t.add(e.multiaddr.toString()),!0))).sort(((e,t)=>e.multiaddr.toString().localeCompare(t.multiaddr.toString()))).map((e=>{let{multiaddr:t,isCertified:r}=e;return{multiaddr:t.bytes,isCertified:r}})),n=[];[...e.metadata.keys()].sort().forEach((t=>{const r=e.metadata.get(t);null!=r&&n.push({key:t,value:r})}));const i=PP.encode({addresses:r,protocols:e.protocols.sort(),pubKey:e.pubKey,metadata:n,peerRecordEnvelope:e.peerRecordEnvelope});return await this.components.getDatastore().put(this._peerIdToDatastoreKey(e.id),i),await this.load(e.id)}async patch(e,t){const r=await this.load(e);return await this._patch(e,t,r)}async patchOrCreate(e,t){let r;try{r=await this.load(e)}catch(Up){if(Up.code!==gP)throw Up;r={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._patch(e,t,r)}async _patch(e,t,r){return await this.save({...r,...t,id:e})}async merge(e,t){const r=await this.load(e);return await this._merge(e,t,r)}async mergeOrCreate(e,t){let r;try{r=await this.load(e)}catch(Up){if(Up.code!==gP)throw Up;r={id:e,addresses:[],protocols:[],metadata:new Map}}return await this._merge(e,t,r)}async _merge(e,t,r){var n,i,s,o,a,c,l,u,h;const d=new Map;return r.addresses.forEach((e=>{d.set(e.multiaddr.toString(),e.isCertified)})),(null!==(n=t.addresses)&&void 0!==n?n:[]).forEach((e=>{const t=e.multiaddr.toString(),r=Boolean(d.get(t))||e.isCertified;d.set(t,r)})),await this.save({id:e,addresses:Array.from(d.entries()).map((e=>{let[t,r]=e;return{multiaddr:new Ml(t),isCertified:r}})),protocols:Array.from(new Set([...null!==(i=r.protocols)&&void 0!==i?i:[],...null!==(s=t.protocols)&&void 0!==s?s:[]])),metadata:new Map([...null!==(o=null===(a=r.metadata)||void 0===a?void 0:a.entries())&&void 0!==o?o:[],...null!==(c=null===(l=t.metadata)||void 0===l?void 0:l.entries())&&void 0!==c?c:[]]),pubKey:null!==(u=t.pubKey)&&void 0!==u?u:null!=r?r.pubKey:void 0,peerRecordEnvelope:null!==(h=t.peerRecordEnvelope)&&void 0!==h?h:null!=r?r.peerRecordEnvelope:void 0})}async*all(){for await(const e of this.components.getDatastore().queryKeys({prefix:BP})){const t=e.toString().split("/")[2],r=fe.base32.decode(t);yield this.load(bn(r))}}}const MP=ge("libp2p:peer-store");class UP extends FE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.components=new F_,this.store=new LP,this.addressBook=new bP(this.dispatchEvent.bind(this),this.store,e.addressFilter),this.keyBook=new AP(this.dispatchEvent.bind(this),this.store),this.metadataBook=new CP(this.dispatchEvent.bind(this),this.store),this.protoBook=new DP(this.dispatchEvent.bind(this),this.store)}init(e){this.components=e,this.store.init(e)}async forEach(e){MP.trace("getPeers await read lock");const t=await this.store.lock.readLock();MP.trace("getPeers got read lock");try{for await(const t of this.store.all())t.id.equals(this.components.getPeerId())||e(t)}finally{MP.trace("getPeers release read lock"),t()}}async all(){const e=[];return await this.forEach((t=>{e.push(t)})),e}async delete(e){MP.trace("delete await write lock");const t=await this.store.lock.writeLock();MP.trace("delete got write lock");try{await this.store.delete(e)}finally{MP.trace("delete release write lock"),t()}}async get(e){MP.trace("get await read lock");const t=await this.store.lock.readLock();MP.trace("get got read lock");try{return await this.store.load(e)}finally{MP.trace("get release read lock"),t()}}async has(e){MP.trace("has await read lock");const t=await this.store.lock.readLock();MP.trace("has got read lock");try{return await this.store.has(e)}finally{MP.trace("has release read lock"),t()}}}class jP{constructor(e){this.dht=e}async provide(e){await Xa(this.dht.provide(e))}async*findProviders(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of this.dht.findProviders(e,t))"PROVIDER"===r.name&&(yield*r.providers)}async put(e,t,r){await Xa(this.dht.put(e,t,r))}async get(e,t){for await(const r of this.dht.get(e,t))if("VALUE"===r.name)return r.value;throw me(new Error("Not found"),"ERR_NOT_FOUND")}}const FP=ge("libp2p:dialer:auto-dialer");class zP{constructor(e,t){this.components=e,this.enabled=t.enabled,this.minConnections=t.minConnections,this.dialTimeout=t.dialTimeout}handle(e){const{detail:t}=e;if(!this.enabled)return;if(0===this.components.getConnectionManager().getConnections(t.id).length){var r;if((null!==(r=this.minConnections)&&void 0!==r?r:0)>this.components.getConnectionManager().getConnections().length){FP("auto-dialing discovered peer %p with timeout %d",t.id,this.dialTimeout);const e=new Yt.TimeoutController(this.dialTimeout);this.components.getConnectionManager().openConnection(t.id,{signal:e.signal}).catch((e=>{FP.error("could not connect to discovered peer %p with %o",t.id,e)})).finally((()=>{e.clear()}))}}}}var VP=__webpack_require__(449);const KP=globalThis.fetch,$P=globalThis.Headers;globalThis.Request,globalThis.Response;function qP(e,t,r){return`${e}?name=${t}&type=${r}`}async function HP(e,t){const r=await KP(e,{headers:new $P({accept:"application/dns-json"}),signal:t});return await r.json()}function WP(e,t){return`${t}_${e}`}const GP=Object.assign(de("dns-over-http-resolver"),{error:de("dns-over-http-resolver:error")});const YP=class{constructor(){var e,t,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._cache=new VP({max:null!==(e=null===n||void 0===n?void 0:n.maxCache)&&void 0!==e?e:100}),this._TXTcache=new VP({max:null!==(t=null===n||void 0===n?void 0:n.maxCache)&&void 0!==t?t:100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=null!==(r=n.request)&&void 0!==r?r:HP,this._abortControllers=[]}cancel(){this._abortControllers.forEach((e=>e.abort()))}getServers(){return this._servers}_getShuffledServers(){const e=[...this._servers];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*t),n=e[t];e[t]=e[r],e[r]=n}return e}setServers(e){this._servers=e}async resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A";switch(t){case"A":return await this.resolve4(e);case"AAAA":return await this.resolve6(e);case"TXT":return await this.resolveTxt(e);default:throw new Error(`${t} is not supported`)}}async resolve4(e){const t="A",r=this._cache.get(WP(e,t));if(null!=r)return r;let n=!1;for(const i of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(qP(i,e,t),r.signal),s=n.Answer.map((e=>e.data)),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(WP(e,t),s,{ttl:o}),s}catch(Up){r.signal.aborted&&(n=!0),GP.error(`${i} could not resolve ${e} record A`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record A`)}async resolve6(e){const t="AAAA",r=this._cache.get(WP(e,t));if(null!=r)return r;let n=!1;for(const i of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(qP(i,e,t),r.signal),s=n.Answer.map((e=>e.data)),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(WP(e,t),s,{ttl:o}),s}catch(Up){r.signal.aborted&&(n=!0),GP.error(`${i} could not resolve ${e} record AAAA`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record AAAA`)}async resolveTxt(e){const t="TXT",r=this._TXTcache.get(WP(e,t));if(null!=r)return r;let n=!1;for(const i of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(qP(i,e,t),r.signal),s=n.Answer.map((e=>[e.data.replace(/['"]+/g,"")])),o=Math.min(...n.Answer.map((e=>e.TTL)));return this._TXTcache.set(WP(e,t),s,{ttl:o}),s}catch(Up){r.signal.aborted&&(n=!0),GP.error(`${i} could not resolve ${e} record TXT`)}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});throw new Error(`Could not resolve ${e} record TXT`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}},QP=YP,{code:JP}=hl("dnsaddr");const XP={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:e=>e},connectionManager:{maxConnections:300,minConnections:50,autoDial:!0,autoDialInterval:1e4,maxParallelDials:100,maxDialsPerPeer:4,dialTimeout:3e4,resolvers:{dnsaddr:async function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new QP;null!=r.signal&&r.signal.addEventListener("abort",(()=>{n.cancel()}));const i=e.getPeerId(),[,s]=null!==(t=e.stringTuples().find((e=>{let[t]=e;return t===JP})))&&void 0!==t?t:[];if(null==s)throw new Error("No hostname found in multiaddr");const o=await n.resolveTxt(`_dnsaddr.${s}`);let a=o.flat().map((e=>e.split("=")[1]));return null!=i&&(a=a.filter((e=>e.includes(i)))),a}},addressSorter:nT},connectionGater:{},transportManager:{faultTolerance:CD.FATAL_ALL},metrics:{enabled:!1,computeThrottleMaxQueueSize:1e3,computeThrottleTimeout:2e3,movingAverageIntervals:[6e4,3e5,9e5],maxOldPeersRetention:50},peerRouting:{refreshManager:{enabled:!0,interval:6e5,bootDelay:1e4}},nat:{enabled:!0,ttl:7200,keepAlive:!0},relay:{enabled:!0,advertise:{bootDelay:9e5,enabled:!1,ttl:18e5},hop:{enabled:!1,active:!1},autoRelay:{enabled:!1,maxListeners:2}},identify:{protocolPrefix:"ipfs",host:{agentVersion:"js-libp2p/0.0.0"},timeout:3e4},ping:{protocolPrefix:"ipfs"},fetch:{protocolPrefix:"libp2p"}};var ZP=__webpack_require__(9018);const eN=ZP.Reader;function tN(e,t){const r=eN.create(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}["uint64","int64","sint64","fixed64","sfixed64"].forEach((e=>{const t=eN.prototype[e];eN.prototype[e]=function(){return BigInt(t.call(this).toString())}}));const rN=ZP.Writer;function nN(e,t){const r=rN.create();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var iN,sN,oN,aN,cN;function lN(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function uN(e,t){return lN("message",iN.LENGTH_DELIMITED,e,t)}["uint64","int64","sint64","fixed64","sfixed64"].forEach((e=>{const t=rN.prototype[e];rN.prototype[e]=function(e){return t.call(this,e.toString())}})),function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(iN||(iN={})),function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(sN||(sN={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(oN||(oN={})),function(e){e.codec=()=>function(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return lN("enum",iN.VARINT,(function(e,r){const n=t(e);r.int32(n)}),(function(e){return t(e.uint32())}))}(oN)}(sN||(sN={})),function(e){let t;e.codec=()=>(null==t&&(t=uN((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.Type)throw new Error('Protocol error: required field "Type" was not found in object');if(t.uint32(8),sN.codec().encode(e.Type,t),null==e.Data)throw new Error('Protocol error: required field "Data" was not found in object');t.uint32(18),t.bytes(e.Data),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={Type:sN.RSA,Data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=sN.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}if(null==r.Type)throw new Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==r.Data)throw new Error('Protocol error: value for required field "Data" was not found in protobuf');return r}))),t),e.encode=t=>nN(t,e.codec()),e.decode=t=>tN(t,e.codec())}(aN||(aN={})),function(e){let t;e.codec=()=>(null==t&&(t=uN((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.Type)throw new Error('Protocol error: required field "Type" was not found in object');if(t.uint32(8),sN.codec().encode(e.Type,t),null==e.Data)throw new Error('Protocol error: required field "Data" was not found in object');t.uint32(18),t.bytes(e.Data),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={Type:sN.RSA,Data:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=sN.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}if(null==r.Type)throw new Error('Protocol error: value for required field "Type" was not found in protobuf');if(null==r.Data)throw new Error('Protocol error: value for required field "Data" was not found in protobuf');return r}))),t),e.encode=t=>nN(t,e.codec()),e.decode=t=>tN(t,e.codec())}(cN||(cN={}));const hN={get(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis).crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};function dN(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.slice(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,Ln.concat)([new Uint8Array(t-r.length),r])}return(0,$t.toString)(r,"base64url")}function pN(e){const t=function(e,t){let r=(0,zt.fromString)(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=(0,Ln.concat)([new Uint8Array(t-r.length),r])}return r}(e);return new xi.jsbn.BigInteger((0,$t.toString)(t,"base16"),16)}const fN={"P-256":256,"P-384":384,"P-521":521};Object.keys(fN).join(" / ");function yN(e,t){return t.map((t=>pN(e[t])))}async function gN(e){const t=[await hN.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await wN(e)],r=await mN({privateKey:t[0],publicKey:t[1]});return{privateKey:r[0],publicKey:r[1]}}async function mN(e){if(null==e.privateKey||null==e.publicKey)throw me(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([hN.get().subtle.exportKey("jwk",e.privateKey),hN.get().subtle.exportKey("jwk",e.publicKey)])}async function wN(e){return await hN.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function vN(e,t,r,n){const i=t?function(e){return xi.pki.setRsaPublicKey(...yN(e,["n","e"]))}(e):function(e){return xi.pki.setRsaPrivateKey(...yN(e,["n","e","d","p","q","dp","dq","qi"]))}(e),s=n((0,$t.toString)(Uint8Array.from(r),"ascii"),i);return(0,zt.fromString)(s,"ascii")}async function bN(e,t){const r=function(e){var t,r,n,i,s,o;const a=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM";let c=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16;const l=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,u=null!==(i=null===e||void 0===e?void 0:e.digest)&&void 0!==i?i:"SHA-256",h=null!==(s=null===e||void 0===e?void 0:e.saltLength)&&void 0!==s?s:16,d=null!==(o=null===e||void 0===e?void 0:e.iterations)&&void 0!==o?o:32767,p=hN.get();return c*=8,{encrypt:async function(e,t){const r=p.getRandomValues(new Uint8Array(h)),n=p.getRandomValues(new Uint8Array(l)),i={name:a,iv:n};"string"===typeof t&&(t=(0,zt.fromString)(t));const s={name:"PBKDF2",salt:r,iterations:d,hash:{name:u}},o=await p.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),f=await p.subtle.deriveKey(s,o,{name:a,length:c},!0,["encrypt"]),y=await p.subtle.encrypt(i,f,e);return(0,Ln.concat)([r,i.iv,new Uint8Array(y)])},decrypt:async function(e,t){const r=e.slice(0,h),n=e.slice(h,h+l),i=e.slice(h+l),s={name:a,iv:n};"string"===typeof t&&(t=(0,zt.fromString)(t));const o={name:"PBKDF2",salt:r,iterations:d,hash:{name:u}},f=await p.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),y=await p.subtle.deriveKey(o,f,{name:a,length:c},!0,["decrypt"]),g=await p.subtle.decrypt(s,y,i);return new Uint8Array(g)}}}(),n=await r.encrypt(e,t);return ye.base64.encode(n)}class EN{constructor(e){this._key=e}async verify(e,t){return await async function(e,t,r){const n=await hN.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await hN.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}(this._key,t,e)}marshal(){return function(e){if(null==e.n||null==e.e)throw me(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const t=xi.pki.publicKeyToAsn1({n:pN(e.n),e:pN(e.e)});return(0,zt.fromString)(xi.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return aN.encode({Type:sN.RSA,Data:this.marshal()}).subarray()}encrypt(e){return vN(this._key,!0,e,((e,t)=>t.encrypt(e)))}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}}class _N{constructor(e,t){this._key=e,this._publicKey=t}genSecret(){return function(e){if(isNaN(e)||e<=0)throw me(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return na.randomBytes(e)}(16)}async sign(e){return await async function(e,t){const r=await hN.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await hN.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}(this._key,e)}get public(){if(null==this._publicKey)throw me(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new EN(this._publicKey)}decrypt(e){return vN(this._key,!1,e,((e,t)=>t.decrypt(e)))}marshal(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw me(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const t=xi.pki.privateKeyToAsn1({n:pN(e.n),e:pN(e.e),d:pN(e.d),p:pN(e.p),q:pN(e.q),dP:pN(e.dp),dQ:pN(e.dq),qInv:pN(e.qi)});return(0,zt.fromString)(xi.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return cN.encode({Type:sN.RSA,Data:this.marshal()}).subarray()}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}async id(){const e=await this.public.hash();return(0,$t.toString)(e,"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pkcs-8";if("pkcs-8"===t){const t=new xi.util.ByteBuffer(this.marshal()),r=xi.asn1.fromDer(t),n=xi.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return xi.pki.encryptRsaPrivateKey(n,e,i)}if("libp2p-key"===t)return await bN(this.bytes,e);throw me(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}async function SN(e){const t=function(e){const t=xi.asn1.fromDer((0,$t.toString)(e,"ascii")),r=xi.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:dN(r.n),e:dN(r.e),d:dN(r.d),p:dN(r.p),q:dN(r.q),dp:dN(r.dP),dq:dN(r.dQ),qi:dN(r.qInv),alg:"RS256"}}(e),r=await gN(t);return new _N(r.privateKey,r.publicKey)}function AN(e){const t=function(e){const t=xi.asn1.fromDer((0,$t.toString)(e,"ascii")),r=xi.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:dN(r.n),e:dN(r.e)}}(e);return new EN(t)}async function kN(e){const t=await gN(e);return new _N(t.privateKey,t.publicKey)}async function IN(e){const t=await async function(e){const t=await hN.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await mN(t);return{privateKey:r[0],publicKey:r[1]}}(e);return new _N(t.privateKey,t.publicKey)}const CN=64;function RN(e,t){const r=new Uint8Array(CN);for(let n=0;n<32;n++)r[n]=e[n],r[32+n]=t[n];return r}class TN{constructor(e){this._key=BN(e,32)}async verify(e,t){return await async function(e,t,r){return await $s(t,r,e)}(this._key,t,e)}marshal(){return this._key}get bytes(){return aN.encode({Type:sN.Ed25519,Data:this.marshal()}).subarray()}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}}class DN{constructor(e,t){this._key=BN(e,CN),this._publicKey=BN(t,32)}async sign(e){return await async function(e,t){const r=e.slice(0,32);return await Ks(t,r)}(this._key,e)}get public(){return new TN(this._publicKey)}marshal(){return this._key}get bytes(){return cN.encode({Type:sN.Ed25519,Data:this.marshal()}).subarray()}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}async id(){const e=await Nt.identity.digest(this.public.bytes);return pe.base58btc.encode(e.bytes).substring(1)}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return await bN(this.bytes,e);throw me(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function PN(e){if(e.length>CN){const t=(e=BN(e,96)).slice(0,CN),r=e.slice(CN,e.length);return new DN(t,r)}const t=(e=BN(e,CN)).slice(0,CN),r=e.slice(32);return new DN(t,r)}function NN(e){return e=BN(e,32),new TN(e)}async function xN(){const{privateKey:e,publicKey:t}=await async function(){const e=Hs.randomPrivateKey(),t=await Vs(e);return{privateKey:RN(e,t),publicKey:t}}();return new DN(e,t)}async function ON(e){const{privateKey:t,publicKey:r}=await async function(e){if(32!==e.length)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,r=await Vs(t);return{privateKey:RN(t,r),publicKey:r}}(e);return new DN(t,r)}function BN(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw me(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}function LN(e){try{go.fromHex(e)}catch(Up){throw me(Up,"ERR_INVALID_PUBLIC_KEY")}}class MN{constructor(e){LN(e),this._key=e}async verify(e,t){return await async function(e,t,r){try{const{digest:n}=await hn.sha256.digest(r);return ea(t,n,e)}catch(Up){throw me(Up,"ERR_INVALID_INPUT")}}(this._key,t,e)}marshal(){return e=this._key,go.fromHex(e).toRawBytes(!0);var e}get bytes(){return aN.encode({Type:sN.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}}class UN{constructor(e,t){this._key=e,this._publicKey=null!==t&&void 0!==t?t:function(e){try{return Ho(e,!0)}catch(Up){throw me(Up,"ERR_INVALID_PRIVATE_KEY")}}(e),function(e){try{Ho(e,!0)}catch(Up){throw me(Up,"ERR_INVALID_PRIVATE_KEY")}}(this._key),LN(this._publicKey)}async sign(e){return await async function(e,t){const{digest:r}=await hn.sha256.digest(t);try{return await Xo(r,e)}catch(Up){throw me(Up,"ERR_INVALID_INPUT")}}(this._key,e)}get public(){return new MN(this._publicKey)}marshal(){return this._key}get bytes(){return cN.encode({Type:sN.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return(0,un.equals)(this.bytes,e.bytes)}async hash(){const{bytes:e}=await hn.sha256.digest(this.bytes);return e}async id(){const e=await this.public.hash();return(0,$t.toString)(e,"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return await bN(this.bytes,e);throw me(new Error(`export format '${t}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function jN(e){return new UN(e)}function FN(e){return new MN(e)}async function zN(){const e=await na.randomPrivateKey();return new UN(e)}const VN={rsa:c,ed25519:l,secp256k1:u};function KN(e){const t=Object.keys(VN).join(" / ");return me(new Error(`invalid or unsupported key type ${e}. Must be ${t}`),"ERR_UNSUPPORTED_KEY_TYPE")}function $N(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return VN[e];throw KN(e)}async function qN(e,t){return await $N(e).generateKeyPair(null!==t&&void 0!==t?t:2048)}var HN;!function(e){let t;e.codec=()=>(null==t&&(t=uN((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null==e.id)throw new Error('Protocol error: required field "id" was not found in object');t.uint32(10),t.bytes(e.id),null!=e.pubKey&&(t.uint32(18),t.bytes(e.pubKey)),null!=e.privKey&&(t.uint32(26),t.bytes(e.privKey)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={id:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.id=e.bytes();break;case 2:r.pubKey=e.bytes();break;case 3:r.privKey=e.bytes();break;default:e.skipType(7&t)}}if(null==r.id)throw new Error('Protocol error: value for required field "id" was not found in protobuf');return r}))),t),e.encode=t=>nN(t,e.codec()),e.decode=t=>tN(t,e.codec())}(HN||(HN={}));const WN=async()=>{const e=await qN("Ed25519"),t=await GN(e);if("Ed25519"===t.type)return t;throw new Error(`Generated unexpected PeerId type "${t.type}"`)};async function GN(e){return await En(function(e,t){var r;return $N(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}(e.public),function(e,t){var r;return $N(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}(e))}class YN extends FE{get[_R](){return!0}get[Symbol.toStringTag](){return"@libp2p/dummy-dht"}get wan(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}get lan(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}get(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}findProviders(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}findPeer(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}getClosestPeers(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}provide(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}put(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}async getMode(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}async setMode(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}async refreshRoutingTable(){throw me(new Error(RR.DHT_DISABLED),TR.DHT_DISABLED)}}class QN extends FE{isStarted(){return!1}start(){}stop(){}get globalSignaturePolicy(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}get multicodecs(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}getPeers(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}getTopics(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}subscribe(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}unsubscribe(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}getSubscribers(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}async publish(){throw me(new Error(RR.PUBSUB_DISABLED),TR.ERR_PUBSUB_DISABLED)}}function JN(e,t){const r={[Symbol.iterator]:()=>r,next:()=>{const r=e.next(),n=r.value;if(!0===r.done||null==n){return{done:!0,value:void 0}}return{done:!1,value:t(n)}}};return r}class XN{constructor(e){if(this.map=new Map,null!=e)for(const[t,r]of e.entries())this.map.set(t.toString(),r)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){this.map.delete(e.toString())}entries(){return JN(this.map.entries(),(e=>[vn(e[0]),e[1]]))}forEach(e){this.map.forEach(((t,r)=>{e(t,vn(r),this)}))}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,t){this.map.set(e.toString(),t)}keys(){return JN(this.map.keys(),(e=>vn(e)))}values(){return this.map.values()}get size(){return this.map.size}}class ZN{constructor(e){if(this.set=new Set,null!=e)for(const t of e)this.set.add(t.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return JN(this.set.entries(),(e=>{const t=vn(e[0]);return[t,t]}))}forEach(e){this.set.forEach((t=>{const r=vn(t);e(r,r,this)}))}has(e){return this.set.has(e.toString())}values(){return JN(this.set.values(),(e=>vn(e)))}}Symbol.iterator;const ex=ge("libp2p");class tx extends FE{constructor(e){var t,r,n,i,s,o;super(),this.initializables=[],this.started=!1,this.peerId=e.peerId,this.components=new F_({peerId:e.peerId,datastore:null!==(t=e.datastore)&&void 0!==t?t:new cc,connectionGater:{denyDialPeer:async()=>await Promise.resolve(!1),denyDialMultiaddr:async()=>await Promise.resolve(!1),denyInboundConnection:async()=>await Promise.resolve(!1),denyOutboundConnection:async()=>await Promise.resolve(!1),denyInboundEncryptedConnection:async()=>await Promise.resolve(!1),denyOutboundEncryptedConnection:async()=>await Promise.resolve(!1),denyInboundUpgradedConnection:async()=>await Promise.resolve(!1),denyOutboundUpgradedConnection:async()=>await Promise.resolve(!1),filterMultiaddrForPeer:async()=>await Promise.resolve(!0),...e.connectionGater}}),this.components.setPeerStore(new UP({addressFilter:this.components.getConnectionGater().filterMultiaddrForPeer,...e.peerStore})),this.services=[this.components],e.metrics.enabled&&(this.metrics=this.components.setMetrics(new uD(e.metrics))),this.peerStore=this.components.getPeerStore(),this.peerStore.addEventListener("peer",(e=>{const{detail:t}=e;this.dispatchEvent(new VE("peer:discovery",{detail:t}))})),null!=e.connectionProtector&&this.components.setConnectionProtector(e.connectionProtector),this.components.setUpgrader(new HD(this.components,{connectionEncryption:(null!==(r=e.connectionEncryption)&&void 0!==r?r:[]).map((e=>this.configureComponent(e))),muxers:(null!==(n=e.streamMuxers)&&void 0!==n?n:[]).map((e=>this.configureComponent(e)))})),this.connectionManager=this.components.setConnectionManager(new hT(e.connectionManager)),this.registrar=this.components.setRegistrar(new YD(this.components)),this.components.setTransportManager(new ID(this.components,e.transportManager)),this.components.setAddressManager(new FR(this.components,e.addresses)),this.configureComponent(new pP(this.components)),this.configureComponent(new fT(this.components,{enabled:e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,autoDialInterval:e.connectionManager.autoDialInterval}));const a=nD.generateOptions();this.keychain=this.configureComponent(new nD(this.components,{...a,...e.keychain})),this.services.push(new hP(this.components,e.nat)),e.transports.forEach((e=>{this.components.getTransportManager().add(this.configureComponent(e))})),null!=e.streamMuxers&&e.streamMuxers.length>0&&(this.identifyService=new ZD(this.components,{...e.identify}),this.configureComponent(this.identifyService)),null!=e.dht?this.dht=this.components.setDHT(e.dht):this.dht=new YN,null!=e.pubsub?this.pubsub=this.components.setPubSub(e.pubsub):this.pubsub=new QN;const c=(null!==(i=e.peerRouters)&&void 0!==i?i:[]).map((e=>this.configureComponent(e)));null!=e.dht&&(c.push(this.configureComponent(new fP(this.dht))),this.dht.addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))),this.peerRouting=this.components.setPeerRouting(this.configureComponent(new LR(this.components,{...e.peerRouting,routers:c})));const l=(null!==(s=e.contentRouters)&&void 0!==s?s:[]).map((e=>this.configureComponent(e)));null!=e.dht&&l.push(this.configureComponent(new jP(this.dht))),this.contentRouting=this.components.setContentRouting(this.configureComponent(new MR(this.components,{routers:l}))),e.relay.enabled&&(this.components.getTransportManager().add(this.configureComponent(new RT)),this.configureComponent(new MT(this.components,{addressSorter:e.connectionManager.addressSorter,...e.relay}))),this.fetchService=this.configureComponent(new nP(this.components,{...e.fetch})),this.pingService=this.configureComponent(new sP(this.components,{...e.ping}));const u=this.configureComponent(new zP(this.components,{enabled:!1!==e.connectionManager.autoDial,minConnections:e.connectionManager.minConnections,dialTimeout:null!==(o=e.connectionManager.dialTimeout)&&void 0!==o?o:3e4}));this.addEventListener("peer:discovery",(e=>{this.isStarted()&&u.handle(e)}));for(const d of null!==(h=e.peerDiscovery)&&void 0!==h?h:[]){var h;this.configureComponent(d),d.addEventListener("peer",(e=>{this.onDiscoveryPeer(e)}))}}configureComponent(e){return U_(e)&&this.services.push(e),j_(e)&&this.initializables.push(e),e}async start(){if(!this.started){this.started=!0,ex("libp2p is starting");try{this.initializables.forEach((e=>{e.init(this.components)})),await Promise.all(this.services.map((async e=>{null!=e.beforeStart&&await e.beforeStart()}))),await Promise.all(this.services.map((e=>e.start()))),await Promise.all(this.services.map((async e=>{null!=e.afterStart&&await e.afterStart()}))),ex("libp2p has started"),await this.components.getPeerStore().forEach((e=>{this.dispatchEvent(new VE("peer:discovery",{detail:{id:e.id,multiaddrs:e.addresses.map((e=>e.multiaddr)),protocols:e.protocols}}))}))}catch(Up){throw ex.error("An error occurred starting libp2p",Up),await this.stop(),Up}}}async stop(){this.started&&(ex("libp2p is stopping"),this.started=!1,await Promise.all(this.services.map((async e=>{null!=e.beforeStop&&await e.beforeStop()}))),await Promise.all(this.services.map((e=>e.stop()))),await Promise.all(this.services.map((async e=>{null!=e.afterStop&&await e.afterStop()}))),ex("libp2p has stopped"))}async loadKeychain(){if(null!=this.keychain)try{await this.keychain.findKeyByName("self")}catch(Up){await this.keychain.importPeer("self",this.peerId)}}isStarted(){return this.started}getConnections(e){return this.components.getConnectionManager().getConnections(e)}getPeers(){const e=new ZN;for(const t of this.components.getConnectionManager().getConnections())e.add(t.remotePeer);return Array.from(e)}async dial(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:r,multiaddrs:n}=UR(e);return await this.components.getPeerStore().addressBook.add(r,n),await this.components.getConnectionManager().openConnection(r,t)}async dialProtocol(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)throw me(new Error("no protocols were provided to open a stream"),TR.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(0===(t=Array.isArray(t)?t:[t]).length)throw me(new Error("no protocols were provided to open a stream"),TR.ERR_INVALID_PROTOCOLS_FOR_STREAM);const n=await this.dial(e,r);return await n.newStream(t,r)}getMultiaddrs(){return this.components.getAddressManager().getAddresses()}async hangUp(e){const{id:t}=UR(e);await this.components.getConnectionManager().closeConnections(t)}async getPublicKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ex("getPublicKey %p",e),null!=e.publicKey)return e.publicKey;const r=await this.peerStore.get(e);if(null!=r.pubKey)return r.pubKey;if(null==this.dht)throw me(new Error("Public key was not in the peer store and the DHT is not enabled"),TR.ERR_NO_ROUTERS_AVAILABLE);const n=(0,Ln.concat)([(0,zt.fromString)("/pk/"),e.multihash.digest]);for await(const i of this.dht.get(n,t))if("VALUE"===i.name){const t=pa(i.value);return await this.peerStore.keyBook.set(e,i.value),t.bytes}throw me(new Error(`Node not responding with its public key: ${e.toString()}`),TR.ERR_INVALID_RECORD)}async fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{id:n,multiaddrs:i}=UR(e);return null!=i&&await this.components.getPeerStore().addressBook.add(n,i),await this.fetchService.fetch(n,t,r)}async ping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:r,multiaddrs:n}=UR(e);return n.length>0&&await this.components.getPeerStore().addressBook.add(r,n),await this.pingService.ping(r,t)}async handle(e,t){return await this.components.getRegistrar().handle(e,t)}async unhandle(e){return await this.components.getRegistrar().unhandle(e)}onDiscoveryPeer(e){const{detail:t}=e;t.id.toString()!==this.peerId.toString()?(t.multiaddrs.length>0&&this.components.getPeerStore().addressBook.add(t.id,t.multiaddrs).catch((e=>ex.error(e))),t.protocols.length>0&&this.components.getPeerStore().protoBook.set(t.id,t.protocols).catch((e=>ex.error(e))),this.dispatchEvent(new VE("peer:discovery",{detail:t}))):ex.error(new Error(TR.ERR_DISCOVERED_SELF))}}async function rx(e){return null==e.peerId&&(e.peerId=await WN()),new tx(function(e){var t,r;const n=ue(XP,e);if(null==n.transports||n.transports.length<1)throw me(new Error(RR.ERR_TRANSPORTS_REQUIRED),TR.ERR_TRANSPORTS_REQUIRED);if(null==n.connectionEncryption||0===n.connectionEncryption.length)throw me(new Error(RR.CONN_ENCRYPTION_REQUIRED),TR.CONN_ENCRYPTION_REQUIRED);if(null===n.connectionProtector&&null!=(null===(t=globalThis.process)||void 0===t||null===(r=t.env)||void 0===r?void 0:r.LIBP2P_FORCE_PNET))throw me(new Error(RR.ERR_PROTECTOR_REQUIRED),TR.ERR_PROTECTOR_REQUIRED);return n}(e))}var nx=__webpack_require__(3137);const ix="/dht/provider",sx=20,ox=3,ax=Number(3e5),cx=Number(3e4),lx=Number(3e5),ux=Number(3e4),hx=Number(3e4),dx=(0,zt.fromString)("/pk/");function px(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,r]]=e.stringTuples();return(4===t||6===t)&&(null!=r&&!tT(r))}))}}function fx(e){return{...e,multiaddrs:e.multiaddrs.filter((e=>{const[[t,r]]=e.stringTuples();return(4===t||6===t)&&(null!=r&&tT(r))}))}}async function yx(e){return(await hn.sha256.digest(e)).digest}async function gx(e){return await yx(e.toBytes())}function mx(e){return new Gt(`/dht/record/${(0,$t.toString)(e,"base32")}`,!1)}function wx(e,t){const r=new Date;return new bc(e,t,r).serialize()}const vx="routing-table-size";class bx{constructor(e){this.components=new F_;const{kBucketSize:t,pingTimeout:r,lan:n,pingConcurrency:i,protocol:s}=e;this.log=ge(`libp2p:kad-dht:${n?"lan":"wan"}:routing-table`),this.kBucketSize=null!==t&&void 0!==t?t:20,this.pingTimeout=null!==r&&void 0!==r?r:1e4,this.pingConcurrency=null!==i&&void 0!==i?i:10,this.lan=n,this.running=!1,this.protocol=s;const o=()=>{var e,t;null===(e=this.components.getMetrics())||void 0===e||e.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:"ping-queue-size",value:this.pingQueue.size}),null===(t=this.components.getMetrics())||void 0===t||t.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:"ping-running",value:this.pingQueue.pending})};this.pingQueue=new tn({concurrency:this.pingConcurrency}),this.pingQueue.addListener("add",o),this.pingQueue.addListener("next",o),this._onPing=this._onPing.bind(this)}init(e){this.components=e}isStarted(){return this.running}async start(){this.running=!0;const e=new nx({localNodeId:await gx(this.components.getPeerId()),numberOfNodesPerKBucket:this.kBucketSize,numberOfNodesToPing:1});e.on("ping",this._onPing),this.kb=e}async stop(){this.running=!1,this.pingQueue.clear(),this.kb=void 0}_onPing(e,t){this.pingQueue.add((async()=>{if(!this.running)return;let r=0;try{await Promise.all(e.map((async e=>{let t;try{t=new Yt.TimeoutController(this.pingTimeout);const i={signal:t.signal};this.log("pinging old contact %p",e.peer);const s=await this.components.getConnectionManager().openConnection(e.peer,i),{stream:o}=await s.newStream(this.protocol,i);o.close(),r++}catch(Up){this.running&&null!=this.kb&&(this.log.error("could not ping peer %p",e.peer,Up),this.log("evicting old contact after ping failed %p",e),this.kb.remove(e.id))}finally{var n;null!=t&&t.clear(),null===(n=this.components.getMetrics())||void 0===n||n.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:vx,value:this.size})}}))),this.running&&r<e.length&&null!=this.kb&&(this.log("adding new contact %p",t.peer),this.kb.add(t))}catch(Up){this.log.error("could not process k-bucket ping event",Up)}})).catch((e=>{this.log.error("could not process k-bucket ping event",e)}))}get size(){return null==this.kb?0:this.kb.count()}async find(e){const t=await gx(e),r=this.closestPeer(t);if(null!=r&&e.equals(r))return r}closestPeer(e){const t=this.closestPeers(e,1);if(t.length>0)return t[0]}closestPeers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.kBucketSize;if(null==this.kb)return[];return this.kb.closest(e,t).map((e=>e.peer))}async add(e){var t;if(null==this.kb)throw new Error("RoutingTable is not started");const r=await gx(e);this.kb.add({id:r,peer:e}),this.log("added %p with kad id %b",e,r),null===(t=this.components.getMetrics())||void 0===t||t.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:vx,value:this.size})}async remove(e){var t;if(null==this.kb)throw new Error("RoutingTable is not started");const r=await gx(e);this.kb.remove(r),null===(t=this.components.getMetrics())||void 0===t||t.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:vx,value:this.size})}}var Ex=__webpack_require__(3089);function _x(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");const r=(0,Ex.E)(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}const Sx=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782];class Ax{constructor(e){const{peerRouting:t,routingTable:r,refreshInterval:n,refreshQueryTimeout:i,lan:s}=e;this.log=ge(`libp2p:kad-dht:${s?"lan":"wan"}:routing-table:refresh`),this.peerRouting=t,this.routingTable=r,this.refreshInterval=null!==n&&void 0!==n?n:lx,this.refreshQueryTimeout=null!==i&&void 0!==i?i:ux,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}init(e){}async start(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}refreshTable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.log("refreshing routing table");const t=this._maxCommonPrefix(),r=this._getTrackedCommonPrefixLengthsForRefresh(t);this.log(`max common prefix length ${t}`),this.log(`tracked CPLs [ ${r.map((e=>e.toISOString())).join(", ")} ]`),Promise.all(r.map((async(n,i)=>{try{if(await this._refreshCommonPrefixLength(i,n,e),0===this._numPeersForCpl(t)){const t=Math.min(2*(i+1),r.length-1);for(let r=i+1;r<t+1;r++)try{await this._refreshCommonPrefixLength(r,n,e)}catch(Up){this.log.error(Up)}}}catch(Up){this.log.error(Up)}}))).catch((e=>{this.log.error(e)})).then((()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),null!=this.refreshTimeoutId.unref&&this.refreshTimeoutId.unref()})).catch((e=>{this.log.error(e)}))}async _refreshCommonPrefixLength(e,t,r){if(!r&&t.getTime()>Date.now()-this.refreshInterval)return void this.log("not running refresh for cpl %s as time since last refresh not above interval",e);const n=await this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,n,this.routingTable.size);const i=new Yt.TimeoutController(this.refreshQueryTimeout);try{const t=await tv(this.peerRouting.getClosestPeers(n.toBytes(),{signal:i.signal}));this.log(`found ${t} peers that were close to imaginary peer %p`,n),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,n,this.routingTable.size)}finally{i.clear()}}_getTrackedCommonPrefixLengthsForRefresh(e){e>15&&(e=15);const t=[];for(let n=0;n<=e;n++){var r;t[n]=null!==(r=this.commonPrefixLengthRefreshedAt[n])&&void 0!==r?r:new Date}return t}async _generateRandomPeerId(e){if(null==this.routingTable.kb)throw new Error("Routing table not started");const t=Vi(2),r=(t[1]<<8)+t[0];return bn(await this._makePeerId(this.routingTable.kb.localNodeId,r,e))}async _makePeerId(e,t,r){if(r>15)throw new Error("Cannot generate peer ID for common prefix length greater than 15");const n=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1),i=65535<<16-(r+1),s=Sx[(n^32768>>r)&i|t&~i],o=new ArrayBuffer(34),a=new DataView(o,0,o.byteLength);return a.setUint8(0,hn.sha256.code),a.setUint8(1,32),a.setUint32(2,s,!1),new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}_maxCommonPrefix(){let e=0;for(const t of this._prefixLengths())t>e&&(e=t);return e}_numPeersForCpl(e){let t=0;for(const r of this._prefixLengths())r===e&&t++;return t}*_prefixLengths(){if(null!=this.routingTable.kb)for(const{id:e}of this.routingTable.kb.toIterable()){const t=_x(this.routingTable.kb.localNodeId,e);let r=0;for(const e of t){if(0!==e)break;r++}yield r}}}var kx,Ix;!function(e){e.codec=()=>Ei({1:{name:"key",codec:ci,optional:!0},2:{name:"value",codec:ci,optional:!0},3:{name:"author",codec:ci,optional:!0},4:{name:"signature",codec:ci,optional:!0},5:{name:"timeReceived",codec:Ii,optional:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(kx||(kx={})),function(e){let t,r,n,i,s;!function(e){e.PUT_VALUE="PUT_VALUE",e.GET_VALUE="GET_VALUE",e.ADD_PROVIDER="ADD_PROVIDER",e.GET_PROVIDERS="GET_PROVIDERS",e.FIND_NODE="FIND_NODE",e.PING="PING"}(t=e.MessageType||(e.MessageType={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(r||(r={})),function(e){e.codec=()=>ui(r)}(t=e.MessageType||(e.MessageType={})),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTED="CONNECTED",e.CAN_CONNECT="CAN_CONNECT",e.CANNOT_CONNECT="CANNOT_CONNECT"}(n=e.ConnectionType||(e.ConnectionType={})),function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTED=1]="CONNECTED",e[e.CAN_CONNECT=2]="CAN_CONNECT",e[e.CANNOT_CONNECT=3]="CANNOT_CONNECT"}(i||(i={})),function(e){e.codec=()=>ui(i)}(n=e.ConnectionType||(e.ConnectionType={})),function(t){t.codec=()=>Ei({1:{name:"id",codec:ci,optional:!0},2:{name:"addrs",codec:ci,repeats:!0},3:{name:"connection",codec:e.ConnectionType.codec(),optional:!0}}),t.encode=e=>ii(e,t.codec()),t.decode=e=>ni(e,t.codec())}(s=e.Peer||(e.Peer={})),e.codec=()=>Ei({1:{name:"type",codec:e.MessageType.codec(),optional:!0},10:{name:"clusterLevelRaw",codec:yi,optional:!0},2:{name:"key",codec:ci,optional:!0},3:{name:"record",codec:ci,optional:!0},8:{name:"closerPeers",codec:e.Peer.codec(),repeats:!0},9:{name:"providerPeers",codec:e.Peer.codec(),repeats:!0}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(Ix||(Ix={}));const Cx=Ix.MessageType,Rx=Ix.ConnectionType,Tx=Object.keys(Cx);class Dx{constructor(e,t,r){if(!(t instanceof Uint8Array))throw new Error("Key must be a Uint8Array");this.type=e,this.key=t,this.clusterLevelRaw=r,this.closerPeers=[],this.providerPeers=[],this.record=void 0}get clusterLevel(){const e=this.clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this.clusterLevelRaw=e}serialize(){return Ix.encode({key:this.key,type:this.type,clusterLevelRaw:this.clusterLevelRaw,closerPeers:this.closerPeers.map(Px),providerPeers:this.providerPeers.map(Px),record:null==this.record?void 0:this.record.serialize()})}static deserialize(e){var t,r,n,i;const s=Ix.decode(e),o=new Dx(null!==(t=s.type)&&void 0!==t?t:Ix.MessageType.PUT_VALUE,null!==(r=s.key)&&void 0!==r?r:Uint8Array.from([]),null!==(n=s.clusterLevelRaw)&&void 0!==n?n:0);return o.closerPeers=s.closerPeers.map(Nx),o.providerPeers=s.providerPeers.map(Nx),null!=(null===(i=s.record)||void 0===i?void 0:i.length)&&(o.record=bc.deserialize(s.record)),o}}function Px(e){var t;return{id:e.id.toBytes(),addrs:(null!==(t=e.multiaddrs)&&void 0!==t?t:[]).map((e=>e.bytes)),connection:Rx.CONNECTED}}function Nx(e){var t;if(null==e.id)throw new Error("Invalid peer in message");return{id:bn(e.id),multiaddrs:(null!==(t=e.addrs)&&void 0!==t?t:[]).map((e=>new Ml(e))),protocols:[]}}function xx(e){return{...e,name:"SENDING_QUERY",type:0,messageName:e.type,messageType:Tx.indexOf(e.type.toString())}}function Ox(e){return{...e,name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:null!=e.closer?e.closer:[],providers:null!=e.providers?e.providers:[]}}function Bx(e){return{...e,name:"FINAL_PEER",type:2}}function Lx(e){return{...e,name:"QUERY_ERROR",type:3}}function Mx(e){return{...e,name:"PROVIDER",type:4}}function Ux(e){return{...e,name:"VALUE",type:5}}function jx(e){return{...e,name:"DIALING_PEER",type:7}}class Fx extends FE{constructor(e){super(),this.components=new F_;const{protocol:t,lan:r}=e;this.log=ge(`libp2p:kad-dht:${r?"lan":"wan"}:network`),this.running=!1,this.protocol=t}init(e){this.components=e}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.running){this.log("sending %s to %p",t.type,e),yield jx({peer:e}),yield xx({to:e,type:t.type});try{const i=await this.components.getConnectionManager().openConnection(e,n);r=(await i.newStream(this.protocol,n)).stream;const s=await this._writeReadMessage(r,t.serialize(),n);yield Ox({from:e,messageType:s.type,closer:s.closerPeers,providers:s.providerPeers,record:s.record})}catch(Up){yield Lx({from:e,error:Up})}finally{null!=r&&r.close()}}}async*sendMessage(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.running){this.log("sending %s to %p",t.type,e),yield jx({peer:e}),yield xx({to:e,type:t.type});try{const i=await this.components.getConnectionManager().openConnection(e,n);r=(await i.newStream(this.protocol,n)).stream,await this._writeMessage(r,t.serialize(),n),yield Ox({from:e,messageType:t.type})}catch(Up){yield Lx({from:e,error:Up})}finally{null!=r&&r.close()}}}async _writeMessage(e,t,r){null!=r.signal&&(e=i_(e,r.signal)),await bu([t],$E(),e,Xa)}async _writeReadMessage(e,t,r){null!=r.signal&&(e=i_(e,r.signal));const n=await bu([t],$E(),e,QE(),(async e=>{const t=await mg(e);if(null!=t)return t;throw me(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED")})),i=Dx.deserialize(n);return i.closerPeers.forEach((e=>{this.dispatchEvent(new VE("peer",{detail:e}))})),i.providerPeers.forEach((e=>{this.dispatchEvent(new VE("peer",{detail:e}))})),i}}function zx(e,t){const r=t.key,n=(0,$t.toString)(r).split("/");if(n.length<3)return;const i=e[n[1].toString()];if(null==i){throw me(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE")}return i(r,t.value)}const Vx={pk:async(e,t)=>{if(!(e instanceof Uint8Array))throw me(new Error('"key" must be a Uint8Array'),"ERR_INVALID_RECORD_KEY_NOT_BUFFER");if(e.byteLength<5)throw me(new Error("invalid public key record"),"ERR_INVALID_RECORD_KEY_TOO_SHORT");if("/pk/"!==(0,$t.toString)(e.subarray(0,4)))throw me(new Error("key was not prefixed with /pk/"),"ERR_INVALID_RECORD_KEY_BAD_PREFIX");const r=e.slice(4),n=await hn.sha256.digest(t);if(!(0,un.equals)(r,n.bytes))throw me(new Error("public key does not match passed in key"),"ERR_INVALID_RECORD_HASH_MISMATCH")}};const Kx={pk:function(e,t){return 0}};class $x{constructor(e){this.components=new F_;const{validators:t,selectors:r,peerRouting:n,queryManager:i,routingTable:s,network:o,lan:a}=e;this.log=ge(`libp2p:kad-dht:${a?"lan":"wan"}:content-fetching`),this.validators=t,this.selectors=r,this.peerRouting=n,this.queryManager=i,this.routingTable=s,this.network=o}init(e){this.components=e}async putLocal(e,t){const r=mx(e);await this.components.getDatastore().put(r,t)}async getLocal(e){this.log("getLocal %b",e);const t=mx(e);this.log("fetching record for key %k",t);const r=await this.components.getDatastore().get(t);this.log("found %k in local datastore",t);const n=bc.deserialize(r);return await zx(this.validators,n),n}async*sendCorrectionRecord(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.log("sendCorrection for %b",e);const i=await wx(e,r);for(const{value:s,from:o}of t){if((0,un.equals)(s,r)){this.log("record was ok");continue}if(this.components.getPeerId().equals(o)){try{const t=mx(e);this.log(`Storing corrected record for key ${t.toString()}`),await this.components.getDatastore().put(t,i)}catch(Up){this.log.error("Failed error correcting self",Up)}continue}let t=!1;const a=new Dx(Cx.PUT_VALUE,e,0);a.record=bc.deserialize(i);for await(const e of this.network.sendRequest(o,a,n))"PEER_RESPONSE"===e.name&&null!=e.record&&(0,un.equals)(e.record.value,bc.deserialize(i).value)&&(t=!0),yield e;t||(yield Lx({from:o,error:me(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})),this.log.error("Failed error correcting entry")}}async*put(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.log("put key %b value %b",e,t);const n=await wx(e,t),i=mx(e);this.log(`storing record for key ${i.toString()}`),await this.components.getDatastore().put(i,n),yield*bu(this.peerRouting.getClosestPeers(e,{signal:r.signal}),(t=>lc(t,(t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const i=[],s=new Dx(Cx.PUT_VALUE,e,0);s.record=bc.deserialize(n),this.log("send put to %p",t.peer.id);for await(const e of this.network.sendRequest(t.peer.id,s,r))i.push(e),"PEER_RESPONSE"===e.name&&(null!=e.record&&(0,un.equals)(e.record.value,bc.deserialize(n).value)||i.push(Lx({from:t.peer.id,error:me(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")})));return i}))),(e=>du(e,{ordered:!1,concurrency:ox})),(async function*(e){for await(const t of e)yield*t}))}async*get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.log("get %b",e);const r=[];for await(const o of this.getMany(e,t))"VALUE"===o.name&&r.push(o),yield o;if(0===r.length)return;const n=r.map((e=>e.value));let i=0;try{i=function(e,t,r){if(0===r.length)throw me(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED");const n=(0,$t.toString)(t).split("/");if(n.length<3)throw me(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY");const i=e[n[1].toString()];if(null==i){const e=`Unrecognized key prefix: ${n[1]}`;throw me(new Error(e),"ERR_UNRECOGNIZED_KEY_PREFIX")}return 1===r.length?0:i(t,r)}(this.selectors,e,n)}catch(Up){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==Up.code)throw Up}const s=n[i];if(this.log("GetValue %b %b",e,s),null==s)throw me(new Error("best value was not found"),"ERR_NOT_FOUND");yield*this.sendCorrectionRecord(e,r,s,t),yield r[i]}async*getMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.log("getMany values for %b",e);try{const t=await this.getLocal(e);yield Ux({value:t.value,from:this.components.getPeerId()})}catch(Up){this.log("error getting local value for %b",e,Up)}const r=await yx(e),n=this.routingTable.closestPeers(r);this.log("found %d peers in routing table",n.length);const i=this;yield*this.queryManager.run(e,n,(async function*(t){let{peer:r,signal:n}=t;for await(const s of i.peerRouting.getValueOrPeers(r,e,{signal:n}))yield s,"PEER_RESPONSE"===s.name&&null!=s.record&&(yield Ux({from:r,value:s.record.value}))}),t)}}class qx{constructor(e){this.components=new F_;const{network:t,peerRouting:r,queryManager:n,routingTable:i,providers:s,lan:o}=e;this.log=ge(`libp2p:kad-dht:${o?"lan":"wan"}:content-routing`),this.network=t,this.peerRouting=r,this.queryManager=n,this.routingTable=i,this.providers=s}init(e){this.components=e}async*provide(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.log("provide %s",e),await this.providers.addProvider(e,this.components.getPeerId());const n=new Dx(Cx.ADD_PROVIDER,e.bytes,0);n.providerPeers=[{id:this.components.getPeerId(),multiaddrs:t,protocols:[]}];let i=0;const s=t=>async()=>{if("FINAL_PEER"!==t.name)return[t];const s=[];this.log("putProvider %s to %p",e,t.peer.id);try{this.log("sending provider record for %s to %p",e,t.peer.id);for await(const o of this.network.sendMessage(t.peer.id,n,r))"PEER_RESPONSE"===o.name&&(this.log("sent provider record for %s to %p",e,t.peer.id),i++),s.push(o)}catch(Up){this.log.error("error sending provide record to peer %p",t.peer.id,Up),s.push(Lx({from:t.peer.id,error:Up}))}return s};yield*bu(this.peerRouting.getClosestPeers(e.multihash.bytes,r),(e=>lc(e,(e=>s(e)))),(e=>du(e,{ordered:!1,concurrency:ox})),(async function*(e){for await(const t of e)yield*t})),this.log("sent provider records to %d peers",i)}async*findProviders(e,t){const r=this.routingTable.kBucketSize,n=e.multihash.bytes,i=await yx(n),s=this;this.log("findProviders %c",e);const o=await this.providers.getProviders(e);if(o.length>0){const e=[];for(const t of o.slice(0,r)){var a;e.push({id:t,multiaddrs:(null!==(a=await this.components.getPeerStore().addressBook.get(t))&&void 0!==a?a:[]).map((e=>e.multiaddr)),protocols:[]})}yield Ox({from:this.components.getPeerId(),messageType:Cx.GET_PROVIDERS,providers:e}),yield Mx({from:this.components.getPeerId(),providers:e})}if(o.length>=r)return;const c=async function*(e){let{peer:t,signal:r}=e;const i=new Dx(Cx.GET_PROVIDERS,n,0);yield*s.network.sendRequest(t,i,{signal:r})},l=new Set(o.map((e=>e.toString())));for await(const u of this.queryManager.run(n,this.routingTable.closestPeers(i),c,t))if(yield u,"PEER_RESPONSE"===u.name){this.log("Found %d provider entries for %c and %d closer peers",u.providers.length,e,u.closer.length);const t=[];for(const e of u.providers)l.has(e.id.toString())||(l.add(e.id.toString()),t.push(e));if(t.length>0&&(yield Mx({from:u.from,providers:t})),l.size===r)return}}}class Hx{constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map((e=>e.peerId))}async add(e){if(null!=this.peerDistances.find((t=>t.peerId.equals(e))))return;const t=await gx(e),r={peerId:e,distance:_x(this.originDhtKey,t)};this.peerDistances.push(r),this.peerDistances.sort(((e,t)=>wv(e.distance,t.distance))),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async anyCloser(e){if(0===e.length)return!1;if(0===this.length)return!0;const t=await Promise.all(e.map(gx)),r=this.peerDistances[this.peerDistances.length-1].distance;for(const n of t){if(wv(_x(this.originDhtKey,n),r)<0)return!0}return!1}}class Wx{constructor(e){this.components=new F_;const{routingTable:t,network:r,validators:n,queryManager:i,lan:s}=e;this.routingTable=t,this.network=r,this.validators=n,this.queryManager=i,this.log=ge(`libp2p:kad-dht:${s?"lan":"wan"}:peer-routing`)}init(e){this.components=e}async findPeerLocal(e){let t;const r=await this.routingTable.find(e);if(null!=r){this.log("findPeerLocal found %p in routing table",e);try{t=await this.components.getPeerStore().get(r)}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}}if(null==t)try{t=await this.components.getPeerStore().get(e)}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}if(null!=t)return this.log("findPeerLocal found %p in peer store",e),{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}async*_getValueSingle(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new Dx(Cx.GET_VALUE,t,0);yield*this.network.sendRequest(e,n,r)}async*getPublicKeyFromNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=function(e){return(0,Ln.concat)([dx,e.toBytes()])}(e);for await(const n of this._getValueSingle(e,r,t))if(yield n,"PEER_RESPONSE"===n.name&&null!=n.record){const t=await En(fa({bytes:n.record.value}));if(!t.equals(e))throw me(new Error("public key does not match id"),"ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");if(null==t.publicKey)throw me(new Error("public key missing"),"ERR_PUBLIC_KEY_MISSING");yield Ux({from:e,value:t.publicKey})}throw me(new Error(`Node not responding with its public key: ${e.toString()}`),"ERR_INVALID_RECORD")}async*findPeer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.log("findPeer %p",e);const r=await this.findPeerLocal(e);if(null!=r)return this.log("found local"),void(yield Bx({from:this.components.getPeerId(),peer:r}));const n=await gx(e),i=this.routingTable.closestPeers(n);if(null!=i.find((t=>t.equals(e))))try{const t=await this.components.getPeerStore().get(e);return this.log("found in peerStore"),void(yield Bx({from:this.components.getPeerId(),peer:{id:t.id,multiaddrs:t.addresses.map((e=>e.multiaddr)),protocols:[]}}))}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}const s=this,o=async function*(t){let{peer:r,signal:n}=t;const i=new Dx(Cx.FIND_NODE,e.toBytes(),0);for await(const o of s.network.sendRequest(r,i,{signal:n}))if(yield o,"PEER_RESPONSE"===o.name){const t=o.closer.find((t=>t.id.equals(e)));null!=t&&(yield Bx({from:o.from,peer:t}))}};let a=!1;for await(const c of this.queryManager.run(e.toBytes(),i,o,t))"FINAL_PEER"===c.name&&(a=!0),yield c;a||(yield Lx({from:this.components.getPeerId(),error:me(new Error("Not found"),"ERR_NOT_FOUND")}))}async*getClosestPeers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.log("getClosestPeers to %b",e);const r=await yx(e),n=this.routingTable.closestPeers(r),i=this,s=new Hx(r,this.routingTable.kBucketSize);await Promise.all(n.map((async e=>await s.add(e))));const o=async function*(t){let{peer:r,signal:n}=t;i.log("closerPeersSingle %s from %p",(0,$t.toString)(e,"base32"),r);const s=new Dx(Cx.FIND_NODE,e,0);yield*i.network.sendRequest(r,s,{signal:n})};for await(const c of this.queryManager.run(e,n,o,t))yield c,"PEER_RESPONSE"===c.name&&await Promise.all(c.closer.map((async e=>await s.add(e.id))));this.log("found %d peers close to %b",s.length,e);for(const c of s.peers){var a;yield Bx({from:this.components.getPeerId(),peer:{id:c,multiaddrs:(null!==(a=await this.components.getPeerStore().addressBook.get(c))&&void 0!==a?a:[]).map((e=>e.multiaddr)),protocols:[]}})}}async*getValueOrPeers(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for await(const n of this._getValueSingle(e,t,r)){if("PEER_RESPONSE"===n.name&&null!=n.record)try{await this._verifyRecordOnline(n.record)}catch(Up){const t="invalid record received, discarded";this.log(t),yield Lx({from:n.from,error:me(new Error(t),"ERR_INVALID_RECORD")});continue}yield n}}async _verifyRecordOnline(e){if(null==e.timeReceived)throw me(new Error("invalid record received"),"ERR_INVALID_RECORD");await zx(this.validators,new bc(e.key,e.value,e.timeReceived))}async getCloserPeersOffline(e,t){const r=await yx(e),n=this.routingTable.closestPeers(r),i=[];for(const s of n)if(!s.equals(t))try{const e=await this.components.getPeerStore().addressBook.get(s),t=await this.components.getPeerStore().protoBook.get(s);i.push({id:s,multiaddrs:e.map((e=>e.multiaddr)),protocols:t})}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}return i.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",i.length,e,t):this.log("getCloserPeersOffline could not find peer closer to %b than %p",e,t),i}}const Gx=ge("libp2p:kad-dht:providers");class Yx{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.components=new F_;const{cacheSize:t,cleanupInterval:r,provideValidity:n}=e;this.cleanupInterval=null!==r&&void 0!==r?r:36e5,this.provideValidity=null!==n&&void 0!==n?n:864e5,this.cache=yr(null!==t&&void 0!==t?t:256),this.syncQueue=new tn({concurrency:1}),this.started=!1}init(e){this.components=e}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cleaner=setInterval((()=>{this._cleanup().catch((e=>{Gx.error(e)}))}),this.cleanupInterval))}async stop(){this.started=!1,null!=this.cleaner&&(clearInterval(this.cleaner),this.cleaner=void 0)}async _cleanup(){return await this.syncQueue.add((async()=>{const e=Date.now();let t=0,r=0;const n=new Map,i=this.components.getDatastore().batch(),s=this.components.getDatastore().query({prefix:ix});for await(const a of s)try{const{cid:e,peerId:s}=Jx(a.key),c=Xx(a.value).getTime(),l=Date.now(),u=l-c,h=u>this.provideValidity;if(Gx("comparing: %d - %d = %d > %d %s",l,c,u,this.provideValidity,h?"(expired)":""),h){var o;r++,i.delete(a.key);const t=null!==(o=n.get(e))&&void 0!==o?o:new Set;t.add(s),n.set(e,t)}t++}catch(Up){Gx.error(Up.message)}n.size>0?(Gx("deleting %d / %d entries",r,t),await i.commit()):Gx("nothing to delete");for(const[a,c]of n){const e=Qx(a),t=this.cache.get(e);if(null!=t){for(const e of c)t.delete(e);0===t.size?this.cache.remove(e):this.cache.set(e,t)}}Gx("Cleanup successful (%dms)",Date.now()-e)}))}async _getProvidersMap(e){const t=Qx(e);let r=this.cache.get(t);return null==r&&(r=await async function(e,t){const r=new Map,n=e.query({prefix:Qx(t)});for await(const i of n){const{peerId:e}=Jx(i.key);r.set(e,Xx(i.value))}return r}(this.components.getDatastore(),e),this.cache.set(t,r)),r}async addProvider(e,t){return await this.syncQueue.add((async()=>{Gx("%p provides %s",t,e);const r=await this._getProvidersMap(e);Gx("loaded %s provs",r.size);const n=new Date;r.set(t.toString(),n);const i=Qx(e);this.cache.set(i,r),await async function(e,t,r,n){const i=[Qx(t),"/",r.toString()].join(""),s=new Gt(i),o=Uint8Array.from(dl.encode(n.getTime()));return await e.put(s,o)}(this.components.getDatastore(),e,t,n)}))}async getProviders(e){return await this.syncQueue.add((async()=>{Gx("get providers for %s",e);return[...(await this._getProvidersMap(e)).keys()].map((e=>vn(e)))}))}}function Qx(e){return`/dht/provider/${"string"===typeof e?e:(0,$t.toString)(e.multihash.bytes,"base32")}`}function Jx(e){const t=e.toString().split("/");if(5!==t.length)throw new Error(`incorrectly formatted provider entry key in datastore: ${e.toString()}`);return{cid:t[3],peerId:t[4]}}function Xx(e){return new Date(dl.decode(e))}const Zx=BigInt("0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF");async function*eO(e){const{key:t,startingPeer:r,ourPeerId:n,signal:i,query:s,alpha:o,pathIndex:a,numPaths:c,cleanUp:l,queryFuncTimeout:u,log:h}=e,d=new tn({concurrency:o}),p=await yx(t),f=new Set;!function e(r,o){if(null==r)return;f.add(r.toString());const l=BigInt("0x"+(0,$t.toString)(_x(o,p),"base16"));d.add((async()=>{let o;const y=[i];null!=u&&(o=new Yt.TimeoutController(u),y.push(o.signal));const g=(0,Qt.anySignal)(y);try{var m;for await(const i of s({key:t,peer:r,signal:g,pathIndex:a,numPaths:c})){if(g.aborted)return;if("PEER_RESPONSE"===i.name)for(const s of i.closer){if(f.has(s.id.toString())){h("already seen %p in query",s.id);continue}if(n.equals(s.id)){h("not querying ourselves");continue}const i=await gx(s.id);BigInt("0x"+(0,$t.toString)(_x(i,p),"base16"))>l?h("skipping %p as they are not closer to %b than %p",s.id,t,r):(h("querying closer peer %p",s.id),e(s.id,i))}d.emit("completed",i)}null===(m=o)||void 0===m||m.clear()}catch(Up){i.aborted?d.emit("error",Up):d.emit("completed",Lx({from:r,error:Up}))}finally{var w;null===(w=o)||void 0===w||w.clear()}}),{priority:Zx-l}).catch((e=>{h.error(e)}))}(r,await gx(r)),yield*async function*(e,t,r,n){let i=sS(),s=!0;const o=[],a=()=>{s&&(n("clean up queue, results %d, queue size %d, pending tasks %d",o.length,e.size,e.pending),s=!1,e.clear(),o.splice(0,o.length))};e.on("completed",(e=>{o.push(e),i.resolve()})),e.on("error",(e=>{n("queue error",e),a(),i.reject(e)})),e.on("idle",(()=>{n("queue idle"),s=!1,i.resolve()})),t.addEventListener("abort",(()=>{n("abort queue");const e=s;a(),e&&i.reject(me(new Error("Query aborted"),"ERR_QUERY_ABORTED"))})),r.addEventListener("cleanup",(()=>{a(),i.resolve()}));for(;s;)for(await i.promise,i=sS();o.length>0;){const e=o.shift();null!=e&&(yield e)}yield*o}(d,i,l,h)}const tO="running-queries";class rO{constructor(e){this.components=new F_;const{lan:t=!1,disjointPaths:r=sx,alpha:n=ox}=e;this.disjointPaths=null!==r&&void 0!==r?r:sx,this.controllers=new Set,this.running=!1,this.alpha=null!==n&&void 0!==n?n:ox,this.lan=t,this.queries=0}init(e){this.components=e}isStarted(){return this.running}async start(){this.running=!0}async stop(){this.running=!1;for(const e of this.controllers)e.abort();this.controllers.clear()}async*run(e,t,r){let n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.running)throw new Error("QueryManager not started");if(null==i.signal){n=new Yt.TimeoutController(hx),i.signal=n.signal;try{null!=OR.setMaxListeners&&(0,OR.setMaxListeners)(1/0,n.signal)}catch{}}const s=new AbortController;this.controllers.add(s);const o=[s.signal];null!=i.signal&&o.push(i.signal);const a=(0,Qt.anySignal)(o);try{null!=OR.setMaxListeners&&(0,OR.setMaxListeners)(1/0,a)}catch{}const c=ge(`libp2p:kad-dht:${this.lan?"lan":"wan"}:query:`+(0,$t.toString)(e,"base58btc")),l=t.slice(0,Math.min(this.disjointPaths,t.length)),u=Date.now(),h=new FE;try{var d;if(c("query:start"),this.queries++,null===(d=this.components.getMetrics())||void 0===d||d.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:tO,value:this.queries}),0===t.length)return void c.error("Running query with no peers");const o=l.map(((t,n)=>eO({key:e,startingPeer:t,ourPeerId:this.components.getPeerId(),signal:a,query:r,pathIndex:n,numPaths:l.length,alpha:this.alpha,cleanUp:h,queryFuncTimeout:i.queryFuncTimeout,log:c})));for await(const e of uc(...o))yield e,"QUERY_ERROR"===e.name&&c("error",e.error)}catch(Up){if(this.running||"ERR_QUERY_ABORTED"!==Up.code)throw Up}finally{var p;this.controllers.delete(s),null!=n&&n.clear(),this.queries--,null===(p=this.components.getMetrics())||void 0===p||p.updateComponentMetric({system:"libp2p",component:"kad-dht-"+(this.lan?"lan":"wan"),metric:tO,value:this.queries}),h.dispatchEvent(new VE("cleanup")),c("query:done in %dms",Date.now()-u)}}}const nO=ge("libp2p:kad-dht:rpc:handlers:add-provider");class iO{constructor(e){const{providers:t}=e;this.providers=t}init(){}async handle(e,t){if(nO("start"),null==t.key||0===t.key.length)throw me(new Error("Missing key"),"ERR_MISSING_KEY");let r;try{r=Ne.CID.decode(t.key)}catch(Up){throw me(new Error("Invalid CID"),"ERR_INVALID_CID")}null!=t.providerPeers&&0!==t.providerPeers.length||nO.error("no providers found in message"),await Promise.all(t.providerPeers.map((async t=>{t.id.equals(e)?t.multiaddrs.length<1?nO("no valid addresses for provider %p. Ignore",e):(nO("received provider %p for %s (addrs %s)",e,r,t.multiaddrs.map((e=>e.toString()))),await this.providers.addProvider(r,t.id)):nO("invalid provider peer %p from %p",t.id,e)})))}}const sO=ge("libp2p:kad-dht:rpc:handlers:find-node");class oO{constructor(e){this.components=new F_;const{peerRouting:t,lan:r}=e;this.peerRouting=t,this.lan=Boolean(r)}init(e){this.components=e}async handle(e,t){sO("incoming request from %p for peers closer to %b",e,t.key);let r=[];r=(0,un.equals)(this.components.getPeerId().toBytes(),t.key)?[{id:this.components.getPeerId(),multiaddrs:this.components.getAddressManager().getAddresses().map((e=>e.decapsulateCode(hl("p2p").code))),protocols:[]}]:await this.peerRouting.getCloserPeersOffline(t.key,e),r=r.map(this.lan?fx:px).filter((e=>{let{multiaddrs:t}=e;return t.length}));const n=new Dx(t.type,new Uint8Array(0),t.clusterLevel);return r.length>0?n.closerPeers=r:sO("could not find any peers closer to %b than %p",t.key,e),n}}const aO=ge("libp2p:kad-dht:rpc:handlers:get-providers");class cO{constructor(e){this.components=new F_;const{peerRouting:t,providers:r,lan:n}=e;this.peerRouting=t,this.providers=r,this.lan=Boolean(n)}init(e){this.components=e}async handle(e,t){let r;try{r=Ne.CID.decode(t.key)}catch(Up){throw me(new Error("Invalid CID"),"ERR_INVALID_CID")}aO("%p asking for providers for %s",e,r);const[n,i]=await Promise.all([this.providers.getProviders(r),this.peerRouting.getCloserPeersOffline(t.key,e)]),s=await this._getPeers(n),o=await this._getPeers(i.map((e=>{let{id:t}=e;return t}))),a=new Dx(t.type,t.key,t.clusterLevel);return s.length>0&&(a.providerPeers=s),o.length>0&&(a.closerPeers=o),aO("got %s providers %s closerPeers",s.length,o.length),a}async _getAddresses(e){return(await this.components.getPeerStore().addressBook.get(e)).map((e=>e.multiaddr))}async _getPeers(e){const t=[],r=this.lan?fx:px;for(const n of e){const e=r({id:n,multiaddrs:await this._getAddresses(n),protocols:[]});e.multiaddrs.length>0&&t.push(e)}return t}}const lO=ge("libp2p:kad-dht:rpc:handlers:get-value");class uO{constructor(e){this.components=new F_;const{peerRouting:t}=e;this.peerRouting=t}init(e){this.components=e}async handle(e,t){const r=t.key;if(lO("%p asked for key %b",e,r),null==r||0===r.length)throw me(new Error("Invalid key"),"ERR_INVALID_KEY");const n=new Dx(Cx.GET_VALUE,r,t.clusterLevel);if(function(e){return"/pk/"===(0,$t.toString)(e.slice(0,4))}(r)){lO("is public key");const e=function(e){return bn(e.slice(4))}(r);let t;try{const r=await this.components.getPeerStore().keyBook.get(e);if(null==r)throw me(new Error("No public key found in key book"),"ERR_NOT_FOUND");t=r}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}if(null!=t)return lO("returning found public key"),n.record=new bc(r,t,new Date),n}const[i,s]=await Promise.all([this._checkLocalDatastore(r),this.peerRouting.getCloserPeersOffline(t.key,e)]);return null!=i&&(lO("had record for %b in local datastore",r),n.record=i),s.length>0&&(lO("had %s closer peers in routing table",s.length),n.closerPeers=s),n}async _checkLocalDatastore(e){lO("checkLocalDatastore looking for %b",e);const t=mx(e);let r;try{r=await this.components.getDatastore().get(t)}catch(Up){if("ERR_NOT_FOUND"===Up.code)return;throw Up}const n=bc.deserialize(r);if(null==n)throw me(new Error("Invalid record"),"ERR_INVALID_RECORD");if(!(null==n.timeReceived||Date.now()-n.timeReceived.getTime()>1296e5))return n;await this.components.getDatastore().delete(t)}}const hO=ge("libp2p:kad-dht:rpc:handlers:ping");class dO{async handle(e,t){return hO("ping from %p",e),t}init(){}}class pO{constructor(e){this.components=new F_;const{validators:t}=e;this.log=ge("libp2p:kad-dht:rpc:handlers:put-value"),this.validators=t}init(e){this.components=e}async handle(e,t){const r=t.key;this.log("%p asked us to store value for key %b",e,r);const n=t.record;if(null==n){const t=`Empty record from: ${e.toString()}`;throw this.log.error(t),me(new Error(t),"ERR_EMPTY_RECORD")}try{await zx(this.validators,n),n.timeReceived=new Date;const e=mx(n.key);await this.components.getDatastore().put(e,n.serialize()),this.log("put record for %b into datastore under key %k",r,e)}catch(Up){this.log("did not put record for key %b into datastore %o",r,Up)}return t}}class fO{constructor(e){const{providers:t,peerRouting:r,validators:n,lan:i}=e;this.log=ge("libp2p:kad-dht:rpc"),this.routingTable=e.routingTable,this.handlers={[Cx.GET_VALUE]:new uO({peerRouting:r}),[Cx.PUT_VALUE]:new pO({validators:n}),[Cx.FIND_NODE]:new oO({peerRouting:r,lan:i}),[Cx.ADD_PROVIDER]:new iO({providers:t}),[Cx.GET_PROVIDERS]:new cO({peerRouting:r,providers:t,lan:i}),[Cx.PING]:new dO}}init(e){for(const t of Object.values(this.handlers))t.init(e)}async handleMessage(e,t){try{await this.routingTable.add(e)}catch(Up){this.log.error("Failed to update the kbucket store",Up)}const r=this.handlers[t.type];if(null!=r)return await r.handle(e,t);this.log.error(`no handler found for message type: ${t.type}`)}onIncomingStream(e){Promise.resolve().then((async()=>{const{stream:t,connection:r}=e,n=r.remotePeer;try{await this.routingTable.add(n)}catch(Up){this.log.error(Up)}const i=this;await bu(t,QE(),(async function*(e){for await(const t of e){const e=Dx.deserialize(t);i.log("incoming %s from %p",e.type,n);const r=await i.handleMessage(n,e);null!=r&&(yield r.serialize())}}),$E(),t)})).catch((e=>{this.log.error(e)}))}}class yO extends FE{constructor(e){super(),this.components=new F_;const{protocol:t,lan:r}=e;this.log=ge("libp2p:kad-dht:topology-listener:"+(r?"lan":"wan")),this.running=!1,this.protocol=t}init(e){this.components=e}isStarted(){return this.running}async start(){if(this.running)return;this.running=!0;const e=LE({onConnect:e=>{this.log("observed peer %p with protocol %s",e,this.protocol),this.dispatchEvent(new VE("peer",{detail:e}))}});this.registrarId=await this.components.getRegistrar().register(this.protocol,e)}stop(){this.running=!1,null!=this.registrarId&&(this.components.getRegistrar().unregister(this.registrarId),this.registrarId=void 0)}}class gO{constructor(e){this.components=new F_;const{peerRouting:t,lan:r,count:n,interval:i,queryTimeout:s}=e;this.log=ge(`libp2p:kad-dht:${r?"lan":"wan"}:query-self`),this.running=!1,this.peerRouting=t,this.count=null!==n&&void 0!==n?n:sx,this.interval=null!==i&&void 0!==i?i:ax,this.queryTimeout=null!==s&&void 0!==s?s:cx}init(e){this.components=e}isStarted(){return this.running}async start(){this.running||(this.running=!0,this._querySelf())}async stop(){this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort()}_querySelf(){Promise.resolve().then((async()=>{const e=new Yt.TimeoutController(this.queryTimeout);try{this.controller=new AbortController;const t=(0,Qt.anySignal)([this.controller.signal,e.signal]);try{null!=OR.setMaxListeners&&(0,OR.setMaxListeners)(1/0,t)}catch{}const r=await bu(this.peerRouting.getClosestPeers(this.components.getPeerId().toBytes(),{signal:t}),(e=>ec(e,this.count)),(async e=>await tv(e)));this.log("query ran successfully - found %d peers",r)}catch(Up){this.log("query error",Up)}finally{this.timeoutId=setTimeout(this._querySelf.bind(this),this.interval),e.clear()}})).catch((e=>{this.log("query error",e)}))}}class mO extends FE{constructor(e){super(),this.components=new F_;const{kBucketSize:t,clientMode:r,validators:n,selectors:i,querySelfInterval:s,lan:o,protocolPrefix:a,pingTimeout:c,pingConcurrency:l}=e;this.running=!1,this.lan=Boolean(o),this.log=ge("libp2p:kad-dht:"+(!0===o?"lan":"wan")),this.protocol=`${null!==a&&void 0!==a?a:"/ipfs"}${!0===o?"/lan":""}/kad/1.0.0`,this.kBucketSize=null!==t&&void 0!==t?t:20,this.clientMode=null===r||void 0===r||r,this.routingTable=new bx({kBucketSize:t,lan:this.lan,pingTimeout:c,pingConcurrency:l,protocol:this.protocol}),this.providers=new Yx,this.validators={...Vx,...n},this.selectors={...Kx,...i},this.network=new Fx({protocol:this.protocol,lan:this.lan}),this.queryManager=new rO({disjointPaths:Math.ceil(this.kBucketSize/2),lan:o}),this.peerRouting=new Wx({routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,lan:this.lan}),this.contentFetching=new $x({validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,network:this.network,lan:this.lan}),this.contentRouting=new qx({network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,lan:this.lan}),this.routingTableRefresh=new Ax({peerRouting:this.peerRouting,routingTable:this.routingTable,lan:this.lan}),this.rpc=new fO({routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,lan:this.lan}),this.topologyListener=new yO({protocol:this.protocol,lan:this.lan}),this.querySelf=new gO({peerRouting:this.peerRouting,interval:s,lan:this.lan}),this.network.addEventListener("peer",(e=>{const t=e.detail;this.onPeerConnect(t).catch((e=>{this.log.error("could not add %p to routing table",t.id,e)})),this.dispatchEvent(new VE("peer",{detail:t}))})),this.topologyListener.addEventListener("peer",(e=>{const t=e.detail;Promise.resolve().then((async()=>{const e=await this.components.getPeerStore().addressBook.get(t),r={id:t,multiaddrs:e.map((e=>e.multiaddr)),protocols:[]};await this.onPeerConnect(r)})).catch((e=>{this.log.error("could not add %p to routing table",t,e)}))}))}get[_R](){return!0}get[Symbol.toStringTag](){return"@libp2p/kad-dht"}init(e){this.components=e,this.routingTable.init(e),this.providers.init(e),this.network.init(e),this.queryManager.init(e),this.peerRouting.init(e),this.contentFetching.init(e),this.contentRouting.init(e),this.routingTableRefresh.init(e),this.rpc.init(e),this.topologyListener.init(e),this.querySelf.init(e)}async onPeerConnect(e){if(this.log("peer %p connected with protocols %s",e.id,e.protocols),0!==(e=this.lan?fx(e):px(e)).multiaddrs.length)try{await this.routingTable.add(e.id)}catch(Up){this.log.error("could not add %p to routing table",e.id,Up)}else this.log("ignoring %p as they do not have any %s addresses in %s",e.id,this.lan?"private":"public",e.multiaddrs.map((e=>e.toString())))}isStarted(){return this.running}async getMode(){return this.clientMode?"client":"server"}async setMode(e){await this.components.getRegistrar().unhandle(this.protocol),"client"===e?(this.log("enabling client mode"),this.clientMode=!0):(this.log("enabling server mode"),this.clientMode=!1,await this.components.getRegistrar().handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc)))}async start(){this.running=!0,await this.setMode(this.clientMode?"client":"server"),await Promise.all([this.providers.start(),this.queryManager.start(),this.network.start(),this.routingTable.start(),this.topologyListener.start(),this.querySelf.start()]),await this.routingTableRefresh.start()}async stop(){this.running=!1,await Promise.all([this.providers.stop(),this.queryManager.stop(),this.network.stop(),this.routingTable.stop(),this.routingTableRefresh.stop(),this.topologyListener.stop(),this.querySelf.stop()])}async*put(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yield*this.contentFetching.put(e,t,r)}async*get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*this.contentFetching.get(e,t)}async*provide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*this.contentRouting.provide(e,this.components.getAddressManager().getAddresses(),t)}async*findProviders(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*this.contentRouting.findProviders(e,t)}async*findPeer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*this.peerRouting.findPeer(e,t)}async*getClosestPeers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*this.peerRouting.getClosestPeers(e,t)}async refreshRoutingTable(){await this.routingTableRefresh.refreshTable(!0)}}const wO=ge("libp2p:kad-dht");class vO extends FE{constructor(e,t){super(),this.components=new F_,this.wan=e,this.lan=t,this.wan.addEventListener("peer",(e=>{this.dispatchEvent(new VE("peer",{detail:e.detail}))})),this.lan.addEventListener("peer",(e=>{this.dispatchEvent(new VE("peer",{detail:e.detail}))}))}get[_R](){return!0}get[Symbol.toStringTag](){return"@libp2p/dual-kad-dht"}init(e){this.components=e,this.wan.init(e),this.lan.init(e)}isStarted(){return this.wan.isStarted()&&this.lan.isStarted()}async getMode(){return await this.wan.getMode()}async setMode(e){await this.wan.setMode(e)}async start(){await Promise.all([this.lan.start(),this.wan.start()])}async stop(){await Promise.all([this.lan.stop(),this.wan.stop()])}async*put(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for await(const n of uc(this.lan.put(e,t,r),this.wan.put(e,t,r)))yield n}async*get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!1,n=!1;for await(const i of uc(this.lan.get(e,t),this.wan.get(e,t)))yield i,"DIALING_PEER"===i.name&&(r=!0),"VALUE"===i.name&&(r=!0,null!=i.value&&(n=!0)),"SENDING_QUERY"===i.name&&(r=!0);if(!r)throw me(new Error("No peers found in routing table!"),"ERR_NO_PEERS_IN_ROUTING_TABLE");n||(yield Lx({from:this.components.getPeerId(),error:me(new Error("Not found"),"ERR_NOT_FOUND")}))}async*provide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=0,n=0;const i=[],s=[this.lan];"server"===await this.wan.getMode()&&s.push(this.wan);for await(const o of uc(...s.map((r=>r.provide(e,t)))))yield o,"SENDING_QUERY"===o.name&&r++,"QUERY_ERROR"===o.name&&i.push(o.error),"PEER_RESPONSE"===o.name&&"ADD_PROVIDER"===o.messageName&&(wO("sent provider record for %s to %p",e,o.from),n++);if(0===n){if(i.length>0)throw me(new Error(`Failed to provide to ${i.length} of ${r} peers`),"ERR_PROVIDES_FAILED",{errors:i});throw me(new Error("Failed to provide - no peers found"),"ERR_PROVIDES_FAILED")}}async*findProviders(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*uc(this.lan.findProviders(e,t),this.wan.findProviders(e,t))}async*findPeer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!1;for await(const n of uc(this.lan.findPeer(e,t),this.wan.findPeer(e,t)))yield n,"SENDING_QUERY"!==n.name&&"FINAL_PEER"!==n.name||(r=!0);if(!r)throw me(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED")}async*getClosestPeers(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*uc(this.lan.getClosestPeers(e,t),this.wan.getClosestPeers(e,t))}async refreshRoutingTable(){await Promise.all([this.lan.refreshRoutingTable(),this.wan.refreshRoutingTable()])}}class bO extends vO{constructor(e){super(new mO({protocolPrefix:"/ipfs",...e,lan:!1}),new mO({protocolPrefix:"/ipfs",...e,clientMode:!1,lan:!0}))}}const EO=ge("libp2p:bootstrap");class _O extends FE{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[]};if(null==t.list||0===t.list.length)throw new Error("Bootstrap requires a list of peer addresses");super(),this.interval=null!==(e=t.interval)&&void 0!==e?e:1e4,this.list=[];for(const r of t.list){if(!iu.matches(r)){EO.error("Invalid multiaddr");continue}const e=new Ml(r),t=e.getPeerId();if(null==t){EO.error("Invalid bootstrap multiaddr without peer id");continue}const n={id:vn(t),multiaddrs:[e],protocols:[]};this.list.push(n)}}get[_R](){return!0}get[Symbol.toStringTag](){return"@libp2p/bootstrap"}isStarted(){return Boolean(this.timer)}start(){null==this.timer&&(this.timer=setInterval((()=>this._discoverBootstrapPeers()),this.interval),EO("Starting bootstrap node discovery"),this._discoverBootstrapPeers())}_discoverBootstrapPeers(){null!=this.timer&&this.list.forEach((e=>{this.dispatchEvent(new VE("peer",{detail:e}))}))}stop(){null!=this.timer&&clearInterval(this.timer),this.timer=void 0}}_O.tag="bootstrap";const SO=WebSocket;var AO=__webpack_require__(3634);function kO(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.name)&&"number"===typeof(null===e||void 0===e?void 0:e.byteLength)}const IO=e=>{if(e.readyState>=2)throw new Error("socket closed");if(1!==e.readyState)return new Promise(((t,r)=>{function n(){e.removeEventListener("open",i),e.removeEventListener("error",s)}function i(){n(),t()}function s(t){var i;n(),r(null!==(i=t.error)&&void 0!==i?i:new Error(`connect ECONNREFUSED ${e.url}`))}e.addEventListener("open",i),e.addEventListener("error",s)}))},CO=(e,t)=>{var r;(t=null!==(r=t)&&void 0!==r?r:{}).closeOnEnd=!1!==t.closeOnEnd;return async r=>{for await(const t of r){try{await IO(e)}catch(Up){if("socket closed"===Up.message)break;throw Up}e.send(t)}if(null!=t.closeOnEnd&&e.readyState<=1)return await new Promise(((t,r)=>{e.addEventListener("close",(e=>{if(e.wasClean||1006===e.code)t();else{const t=Object.assign(new Error("ws error"),{event:e});r(t)}})),setTimeout((()=>e.close()))}))}},RO=(e,t)=>{var r;t=null!==(r=t)&&void 0!==r?r:{};const n=(e=>{e.binaryType="arraybuffer";const t=async()=>await new Promise(((t,r)=>{if(i)return t();if(null!=n)return r(n);const s=t=>{e.removeEventListener("open",o),e.removeEventListener("error",a),t()},o=()=>s(t),a=t=>{s((()=>{var n;return r(null!==(n=t.error)&&void 0!==n?n:new Error(`connect ECONNREFUSED ${e.url}`))}))};e.addEventListener("open",o),e.addEventListener("error",a)})),r=async function*(){const r=new AO.zN((t=>{let{push:r,stop:n,fail:i}=t;const s=e=>{let t=null;"string"===typeof e.data&&(t=(0,zt.fromString)(e.data)),kO(e.data)&&(t=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(t=e.data),null!=t&&r(t)},o=e=>{var t;return i(null!==(t=e.error)&&void 0!==t?t:new Error("Socket error"))};return e.addEventListener("message",s),e.addEventListener("error",o),e.addEventListener("close",n),()=>{e.removeEventListener("message",s),e.removeEventListener("error",o),e.removeEventListener("close",n)}}),{highWaterMark:1/0});await t();for await(const e of r)yield kO(e)?new Uint8Array(e):e}();let n,i=1===e.readyState;return e.addEventListener("open",(()=>{i=!0,n=null})),e.addEventListener("close",(()=>{i=!1,n=null})),e.addEventListener("error",(t=>{var r;i||(n=null!==(r=t.error)&&void 0!==r?r:new Error(`connect ECONNREFUSED ${e.url}`))})),Object.assign(r,{connected:t})})(e);let i=t.remoteAddress,s=t.remotePort;if(null!=e.url)try{const t=new URL(e.url);i=t.hostname,s=parseInt(t.port,10)}catch{}if(null==i||null==s)throw new Error("Remote connection did not have address and/or port");const o={sink:CO(e,t),source:n,connected:async()=>await n.connected(),close:async()=>{e.readyState!==e.CONNECTING&&e.readyState!==e.OPEN||await new Promise((t=>{e.addEventListener("close",(()=>{t()})),e.close()}))},destroy:()=>{null!=e.terminate?e.terminate():e.close()},remoteAddress:i,remotePort:s,socket:e};return o};var TO=__webpack_require__(6791);const DO={http:"ws",https:"wss"};function PO(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};const n=((e,t)=>(0,TO.relative)(e,t,DO,"ws"))(e,("undefined"===typeof window?"":window.location).toString()),i=new SO(n,t.websocket);return RO(i,t)}const NO=ge("libp2p:websockets:socket");const xO=ge("libp2p:websockets");class OO{constructor(e){this.init=e}get[Symbol.toStringTag](){return"@libp2p/websockets"}get[ER](){return!0}async dial(e,t){var r;xO("dialing %s",e),t=null!==(r=t)&&void 0!==r?r:{};const n=function(e,t,r){var n;const i={async sink(t){var n;null!=(null===(n=r)||void 0===n?void 0:n.signal)&&(t=r_(t,r.signal));try{await e.sink(t)}catch(Up){"aborted"!==Up.type&&NO.error(Up)}},source:null!=(r=null!==(n=r)&&void 0!==n?n:{}).signal?r_(e.source,r.signal):e.source,remoteAddr:t,timeline:{open:Date.now()},async close(){const t=Date.now();try{await Er(e.close(),2e3)}catch(Up){const{host:n,port:s}=i.remoteAddr.toOptions();NO("timeout closing stream to %s:%s after %dms, destroying it manually",n,s,Date.now()-t),e.destroy()}finally{i.timeline.close=Date.now()}}};return null!=e.socket.once&&e.socket.once("close",(()=>{null==i.timeline.close&&(i.timeline.close=Date.now())})),i}(await this._connect(e,t),e);xO("new outbound connection %s",n.remoteAddr);const i=await t.upgrader.upgradeOutbound(n);return xO("outbound connection %s upgraded",n.remoteAddr),i}async _connect(e,t){var r;if(!0===(null===t||void 0===t||null===(r=t.signal)||void 0===r?void 0:r.aborted))throw new JR;const n=e.toOptions();xO("dialing %s:%s",n.host,n.port);const i=sS(),s=e=>{xO.error("connection error:",e),i.reject(e)},o=PO(Rg(e),this.init);if(null!=o.socket.on?o.socket.on("error",s):o.socket.onerror=s,null==t.signal)return await Promise.race([o.connected(),i.promise]),xO("connected %s",e),o;let a;const c=new Promise(((e,r)=>{var n,i;if(a=()=>{r(new JR),setTimeout((()=>{o.close().catch((e=>{xO.error("error closing raw socket",e)}))}))},!0===(null===t||void 0===t||null===(n=t.signal)||void 0===n?void 0:n.aborted))return a();null===t||void 0===t||null===(i=t.signal)||void 0===i||i.addEventListener("abort",a)}));try{await Promise.race([c,i.promise,o.connected()])}finally{var l;if(null!=a)null===t||void 0===t||null===(l=t.signal)||void 0===l||l.removeEventListener("abort",a)}return xO("connected %s",e),o}createListener(e){return function(){throw new Error("WebSocket Servers can not be created in the browser!")}(this.init)}filter(e){var t,r;return e=Array.isArray(e)?e:[e],null!=(null===(t=this.init)||void 0===t?void 0:t.filter)?null===(r=this.init)||void 0===r?void 0:r.filter(e):oP.isBrowser||oP.isWebWorker?function(e){return e.filter((e=>{if(e.protoCodes().includes(290))return!1;const t=e.decapsulateCode(421);return Gl.matches(t)&&zl.matches(t.decapsulateCode(6).decapsulateCode(478))}))}(e):function(e){return e.filter((e=>{if(e.protoCodes().includes(290))return!1;const t=e.decapsulateCode(421);return Wl.matches(t)||Gl.matches(t)}))}(e)}}class BO{constructor(e){if(!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class LO{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hwm=null!==(e=t.splitLimit)&&void 0!==e?e:16,this.head=new BO(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=(null===e||void 0===e?void 0:e.byteLength)?e.byteLength:1}push(e){if(null!=(null===e||void 0===e?void 0:e.value)&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new BO(2*this.head.buffer.length),this.head.push(e)}}shift(){var e;let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return null!=(null===(e=t)||void 0===e?void 0:e.value)&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}function MO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}};return UO(t,e)}function UO(e,t){var r;let n,i,s,o=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,a=new LO;const c=e=>null!=i?i(e):(a.push(e),n),l=e=>{var r;if(s)return n;if(!0!==(null===(r=t)||void 0===r?void 0:r.objectMode)&&null==(null===e||void 0===e?void 0:e.byteLength))throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:e})},u=e=>s?n:(s=!0,null!=e?(e=>(a=new LO,null!=i?i({error:e}):(a.push({error:e}),n)))(e):c({done:!0}));if(n={[Symbol.asyncIterator](){return this},next:async()=>a.isEmpty()?s?{done:!0}:await new Promise(((t,r)=>{i=s=>{i=null,a.push(s);try{t(e(a))}catch(Up){r(Up)}return n}})):e(a),return:()=>(a=new LO,u(),{done:!0}),throw:e=>(u(e),{done:!0}),push:l,end:u,get readableLength(){return a.size}},null==o)return n;const h=n;return n={[Symbol.asyncIterator](){return this},next:()=>h.next(),throw:e=>(h.throw(e),null!=o&&(o(e),o=void 0),{done:!0}),return:()=>(h.return(),null!=o&&(o(),o=void 0),{done:!0}),push:l,end:e=>(h.end(e),null!=o&&(o(e),o=void 0),n),get readableLength(){return h.readableLength}},n}var jO;!function(e){e[e.NEW_STREAM=0]="NEW_STREAM",e[e.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",e[e.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",e[e.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",e[e.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",e[e.RESET_RECEIVER=5]="RESET_RECEIVER",e[e.RESET_INITIATOR=6]="RESET_INITIATOR"}(jO||(jO={}));const FO=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),zO=Object.freeze({NEW_STREAM:jO.NEW_STREAM,MESSAGE:jO.MESSAGE_INITIATOR,CLOSE:jO.CLOSE_INITIATOR,RESET:jO.RESET_INITIATOR}),VO=Object.freeze({MESSAGE:jO.MESSAGE_RECEIVER,CLOSE:jO.CLOSE_RECEIVER,RESET:jO.RESET_RECEIVER}),KO=10240;function $O(e){return null!=globalThis.Buffer?Buffer.allocUnsafe(e):new Uint8Array(e)}const qO=new class{constructor(){this._pool=$O(KO),this._poolOffset=0}write(e){const t=this._pool;let r=this._poolOffset;dl.encode(e.id<<3|e.type,t,r),r+=dl.encode.bytes,e.type!==jO.NEW_STREAM&&e.type!==jO.MESSAGE_INITIATOR&&e.type!==jO.MESSAGE_RECEIVER||null==e.data?dl.encode(0,t,r):dl.encode(e.data.length,t,r),r+=dl.encode.bytes;const n=t.slice(this._poolOffset,r);return KO-r<100?(this._pool=$O(KO),this._poolOffset=0):this._poolOffset=r,e.type!==jO.NEW_STREAM&&e.type!==jO.MESSAGE_INITIATOR&&e.type!==jO.MESSAGE_RECEIVER||null==e.data?[n]:[n,e.data instanceof Uint8Array?e.data:e.data.slice()]}};class HO{constructor(){this._buffer=new Fn,this._headerInfo=null}write(e){if(null==e||0===e.length)return[];this._buffer.append(e);const t=[];for(;0!==this._buffer.length;){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(r){break}const{id:e,type:n,length:i,offset:s}=this._headerInfo;if(this._buffer.length-s<i)break;const o={id:e,type:n};n!==jO.NEW_STREAM&&n!==jO.MESSAGE_INITIATOR&&n!==jO.MESSAGE_RECEIVER||(o.data=this._buffer.slice(s,s+i)),t.push(o),this._buffer.consume(s+i),this._headerInfo=null}return t}_decodeHeader(e){const{value:t,offset:r}=GO(e),{value:n,offset:i}=GO(e,r),s=7&t;if(null==FO[s])throw new Error(`Invalid type received: ${s}`);return{id:t>>3,type:s,offset:r+i,length:n}}}const WO=127;function GO(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,i=0,s=r;const o=e.length;do{if(s>=o||i>49)throw r=0,new RangeError("Could not decode varint");t=e.get(s++),n+=i<28?(t&WO)<<i:(t&WO)*Math.pow(2,i),i+=7}while(t>=128);return r=s-r,{value:n,offset:r}}async function*YO(e){const t=new HO;for await(const r of e){const e=t.write(r);e.length>0&&(yield e)}}const QO=1<<20;const JO=ge("libp2p:mplex:stream"),XO="ERR_MPLEX_STREAM_RESET";const ZO=ge("libp2p:mplex");function eB(e){const t={...e,type:`${FO[e.type]} (${e.type})`};return e.type===jO.NEW_STREAM&&(t.data=(0,$t.toString)(e.data instanceof Uint8Array?e.data:e.data.slice())),e.type!==jO.MESSAGE_INITIATOR&&e.type!==jO.MESSAGE_RECEIVER||(t.data=(0,$t.toString)(e.data instanceof Uint8Array?e.data:e.data.slice(),"base16")),t}class tB{constructor(e,t){var r;this.protocol="/mplex/6.7.0",t=null!==(r=t)&&void 0!==r?r:{},this._streamId=0,this._streams={initiators:WR({metrics:e.getMetrics(),component:"mplex",metric:"initiatorStreams"}),receivers:WR({metrics:e.getMetrics(),component:"mplex",metric:"receiverStreams"})},this._init=t,this.sink=this._createSink();const n=this._createSource();this._source=n,this.source=n}init(e){}get streams(){const e=[];return this._streams.initiators.forEach((t=>{e.push(t)})),this._streams.receivers.forEach((t=>{e.push(t)})),e}newStream(e){const t=this._streamId++;e=null==e?t.toString():e.toString();const r=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:r})}_newReceiverStream(e){const{id:t,name:r}=e,n=this._streams.receivers;return this._newStream({id:t,name:r,type:"receiver",registry:n})}_newStream(e){var t;const r=null!==(t=this._init.maxStreamsPerConnection)&&void 0!==t?t:1024;if(this._streams.initiators.size+this._streams.receivers.size===r)throw me(new Error("Too many streams open"),"ERR_TOO_MANY_STREAMS");const{id:n,name:i,type:s,registry:o}=e;if(ZO("new %s stream %s %s",s,n,i),o.has(n))throw new Error(`${s} stream ${n} already exists!`);const a=function(e){const{id:t,name:r,send:n,onEnd:i,type:s="initiator",maxMsgSize:o=QO}=e,a=new AbortController,c=new AbortController,l=new AbortController,u="initiator"===s?zO:VO,h="initiator"===s?`i${t}`:`r${t}`,d=`${null==r?t:r}`;let p,f=!1,y=!1;const g={open:Date.now()},m=e=>{y||(y=!0,JO.trace("%s stream %s sink end - err: %o",s,d,e),null!=e&&null==p&&(p=e),f&&(g.close=Date.now(),null!=i&&i(p)))},w={close:()=>{JO.trace("%s stream %s close",s,d),w.closeRead(),w.closeWrite()},closeRead:()=>{JO.trace("%s stream %s closeRead",s,d),f||w.source.end()},closeWrite:()=>{if(JO.trace("%s stream %s closeWrite",s,d),!y){l.abort();try{n({id:t,type:u.CLOSE})}catch(Up){JO.trace("%s stream %s error sending close",s,r,Up)}m()}},abort:e=>{JO.trace("%s stream %s abort",s,d,e),w.source.end(e),a.abort(),m(e)},reset:()=>{const e=me(new Error("stream reset"),XO);c.abort(),w.source.end(e),m(e)},sink:async e=>{if(y)throw me(new Error("stream closed for writing"),"ERR_MPLEX_SINK_ENDED");e=r_(e,(0,Qt.anySignal)([a.signal,c.signal,l.signal]));try{"initiator"===s&&n({id:t,type:zO.NEW_STREAM,data:(0,zt.fromString)(d)});const r=new Fn;for await(const i of e)for(r.append(i);0!==r.length;){if(r.length<=o){n({id:t,type:u.MESSAGE,data:r.subarray()}),r.consume(r.length);break}const e=r.length-o;n({id:t,type:u.MESSAGE,data:r.subarray(0,e)}),r.consume(e)}}catch(Up){if("aborted"===Up.type&&"The operation was aborted"===Up.message){if(l.signal.aborted)return;c.signal.aborted&&(Up.message="stream reset",Up.code=XO),a.signal.aborted&&(Up.message="stream aborted",Up.code="ERR_MPLEX_STREAM_ABORT")}if(Up.code===XO)JO.trace("%s stream %s reset",s,r);else{JO.trace("%s stream %s error",s,r,Up);try{n({id:t,type:u.RESET})}catch(Up){JO.trace("%s stream %s error sending reset",s,r,Up)}}return w.source.end(Up),void m(Up)}try{n({id:t,type:u.CLOSE})}catch(Up){JO.trace("%s stream %s error sending close",s,r,Up)}m()},source:MO({onEnd:e=>{f||(f=!0,JO.trace("%s stream %s source end - err: %o",s,d,e),null!=e&&null==p&&(p=e),y&&(w.timeline.close=Date.now(),null!=i&&i(p)))}}),timeline:g,id:h};return w}({id:n,name:i,send:e=>{if(!o.has(n))throw me(new Error("the stream is not in the muxer registry, it may have already been closed"),"ERR_STREAM_DOESNT_EXIST");ZO.enabled&&ZO.trace("%s stream %s send",s,n,eB(e)),e.type!==jO.NEW_STREAM&&e.type!==jO.MESSAGE_INITIATOR&&e.type!==jO.MESSAGE_RECEIVER||(e.data=e.data instanceof Uint8Array?e.data:e.data.slice()),this._source.push(e)},type:s,onEnd:()=>{ZO("%s stream %s %s ended",s,n,i),o.delete(n),null!=this._init.onStreamEnd&&this._init.onStreamEnd(a)},maxMsgSize:this._init.maxMsgSize});return o.set(n,a),a}_createSink(){return async e=>{null!=this._init.signal&&(e=r_(e,this._init.signal));try{await bu(e,YO,function(e){const t=null!==e&&void 0!==e?e:QO,r=e=>{if((e.type===jO.NEW_STREAM||e.type===jO.MESSAGE_INITIATOR||e.type===jO.MESSAGE_RECEIVER)&&e.data.byteLength>t)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"})};return e=>async function*(){for await(const t of e)Array.isArray(t)?(t.forEach(r),yield*t):(r(t),yield t)}()}(this._init.maxMsgSize),(async e=>{for await(const t of e)this._handleIncoming(t)})),this._source.end()}catch(Up){ZO("error in sink",Up),this._source.end(Up)}}}_createSource(){const e=function(){return UO((e=>{let t;const r=[];for(;!e.isEmpty()&&(t=e.shift(),null!=t);){if(null!=t.error)throw t.error;!1===t.done&&r.push(t.value)}return null==t?{done:!0}:{done:!0===t.done,value:r}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({objectMode:!0,onEnd:e=>{const{initiators:t,receivers:r}=this._streams;for(const n of t.values())null!=e?n.abort(e):n.close();for(const n of r.values())null!=e?n.abort(e):n.close()}});return Object.assign(async function*(e){for await(const t of e)if(Array.isArray(t))for(const e of t)yield*qO.write(e);else yield*qO.write(t)}(e),{push:e.push,end:e.end,return:e.return})}_handleIncoming(e){var t;const{id:r,type:n}=e;if(ZO.enabled&&ZO.trace("incoming message",eB(e)),e.type===jO.NEW_STREAM){const t=this._newReceiverStream({id:r,name:(0,$t.toString)(e.data instanceof Uint8Array?e.data:e.data.slice())});return void(null!=this._init.onIncomingStream&&this._init.onIncomingStream(t))}const i=(1===(1&n)?this._streams.initiators:this._streams.receivers).get(r);if(null==i)return void ZO("missing stream %s",r);const s=null!==(t=this._init.maxStreamBufferSize)&&void 0!==t?t:4194304;switch(n){case jO.MESSAGE_INITIATOR:case jO.MESSAGE_RECEIVER:if(i.source.readableLength>s){this._source.push({id:e.id,type:n===jO.MESSAGE_INITIATOR?jO.RESET_RECEIVER:jO.RESET_INITIATOR});const t=me(new Error("Input buffer full - increase Mplex maxBufferSize to accomodate slow consumers"),"ERR_STREAM_INPUT_BUFFER_FULL");return void i.abort(t)}i.source.push(e.data.slice());break;case jO.CLOSE_INITIATOR:case jO.CLOSE_RECEIVER:i.closeRead();break;case jO.RESET_INITIATOR:case jO.RESET_RECEIVER:i.reset();break;default:ZO("unknown message type %s",n)}}}class rB{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.protocol="/mplex/6.7.0",this.init=e}createStreamMuxer(e){return new tB(e,{...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},...this.init})}}function nB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=ET(e),n=QE.fromReader(r.reader,t),i={read:async e=>{const{value:t}=await r.reader.next(e);if(null==t)throw new Error("Value is null");return t},readLP:async()=>{const{value:e}=await n.next();if(null==e)throw new Error("Value is null");return e},readPB:async e=>{const t=await i.readLP();if(null==t)throw new Error("Value is null");const r=t instanceof Uint8Array?t:t.slice();return e.decode(r)},write:e=>{e instanceof Uint8Array?r.writer.push(e):r.writer.push(e.slice())},writeLP:e=>{i.write($E.single(e,t))},writePB:(e,t)=>{i.writeLP(t.encode(e))},pb:e=>({read:async()=>await i.readPB(e),write:t=>i.writePB(t,e)}),unwrap:()=>(r.rest(),r.stream)};return i}function iB(){const e=sS();let t=!1;return{sink:async r=>{if(t)throw new Error("already piped");t=!0,e.resolve(r)},source:async function*(){const t=await e.promise;yield*t}()}}var sB,oB;const aB=65535,cB=Boolean(null===(sB=globalThis.process)||void 0===sB||null===(oB=sB.env)||void 0===oB?void 0:oB.DUMP_SESSION_KEYS);var lB=__webpack_require__(2497),uB=__webpack_require__(2029),hB=__webpack_require__(4888),dB=__webpack_require__(3642);const pB={hashSHA256:e=>(0,hB.vp)(e),getHKDF(e,t){const r=new lB.t(hB.mE,t,e).expand(96);return[r.slice(0,32),r.slice(32,64),r.slice(64,96)]},generateX25519KeyPair(){const e=uB.Au();return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519KeyPairFromSeed(e){const t=uB._w(e);return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519SharedKey:(e,t)=>uB.gi(e,t),chaCha20Poly1305Encrypt:(e,t,r,n)=>new dB.OK(n).seal(t,e,r),chaCha20Poly1305Decrypt:(e,t,r,n)=>new dB.OK(n).open(t,e,r)};const fB=(e,t,r)=>{var n,i;return t=null!==(n=t)&&void 0!==n?n:(i=2,globalThis.Buffer?globalThis.Buffer.allocUnsafe(i):new Uint8Array(i)),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint16(null!==r&&void 0!==r?r:0,e,!1),t};fB.bytes=2;const yB=e=>{if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};function gB(e){return(0,Ln.concat)([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}function mB(e){return(0,Ln.concat)([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}function wB(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.slice(0,32),ciphertext:e.slice(32,e.length),ns:new Uint8Array(0)}}function vB(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.slice(0,32),ns:e.slice(32,80),ciphertext:e.slice(80,e.length)}}var bB;yB.bytes=2,function(e){let t;!function(e){e.codec=()=>Ei({1:{name:"identityKey",codec:ci},2:{name:"identitySig",codec:ci},3:{name:"data",codec:ci}}),e.encode=t=>ii(t,e.codec()),e.decode=t=>ni(t,e.codec())}(t=e.NoiseHandshakePayload||(e.NoiseHandshakePayload={}))}(bB||(bB={}));const EB=bB.NoiseHandshakePayload;async function _B(e,t,r){const n=await async function(e,t){if(null==e.privateKey)throw new Error("PrivateKey was missing from PeerId");const r=await ya(e.privateKey);return await r.sign(t)}(e,kB(t)),i=null!==r&&void 0!==r?r:new Uint8Array(0);if(null==e.publicKey)throw new Error("PublicKey was missing from local PeerId");return function(e,t,r){return EB.encode({identityKey:e,identitySig:t,data:null!==r&&void 0!==r?r:new Uint8Array(0)})}(e.publicKey,n,i)}async function SB(e){return await En(e.identityKey)}function AB(e){return EB.decode(e)}function kB(e){const t=(0,zt.fromString)("noise-libp2p-static-key:");return(0,Ln.concat)([t,e],t.length+e.length)}async function IB(e,t,r){const n=t.identityKey;if(!await async function(e,t){return(await En(t)).equals(e)}(r,n))throw new Error("Peer ID doesn't match libp2p public key.");const i=kB(e),s=await En(n);if(null==s.publicKey)throw new Error("PublicKey was missing from PeerId");if(null==t.identitySig)throw new Error("Signature was missing from message");const o=pa(s.publicKey);if(!await o.verify(i,t.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return s}function CB(e){return e instanceof Uint8Array&&32===e.length}const RB=ge("libp2p:noise");let TB;function DB(e){TB(`LOCAL_STATIC_PUBLIC_KEY ${(0,$t.toString)(e.publicKey,"hex")}`),TB(`LOCAL_STATIC_PRIVATE_KEY ${(0,$t.toString)(e.privateKey,"hex")}`)}function PB(e){e?(TB(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,$t.toString)(e.publicKey,"hex")}`),TB(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,$t.toString)(e.privateKey,"hex")}`)):TB("Missing local ephemeral keys.")}function NB(e){TB(`REMOTE_STATIC_PUBLIC_KEY ${(0,$t.toString)(e,"hex")}`)}function xB(e){TB(`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,$t.toString)(e,"hex")}`)}function OB(e){e.cs1&&e.cs2?(TB(`CIPHER_STATE_1 ${e.cs1.n} ${(0,$t.toString)(e.cs1.k,"hex")}`),TB(`CIPHER_STATE_2 ${e.cs2.n} ${(0,$t.toString)(e.cs2.k,"hex")}`)):TB("Missing cipher state.")}TB=cB?RB:Object.assign((()=>{}),{enabled:!1,trace:()=>{},error:()=>{}});const BB=Number.MAX_SAFE_INTEGER,LB="Cipherstate has reached maximum n, a new handshake must be performed";class MB{constructor(e){this.crypto=e}encryptWithAd(e,t,r){const n=this.encrypt(e.k,e.n,t,r);return this.setNonce(e,this.incrementNonce(e.n)),n}decryptWithAd(e,t,r){const{plaintext:n,valid:i}=this.decrypt(e.k,e.n,t,r);return this.setNonce(e,this.incrementNonce(e.n)),{plaintext:n,valid:i}}hasKey(e){return!this.isEmptyKey(e.k)}setNonce(e,t){e.n=t}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){const t=this.createEmptyKey();return(0,un.equals)(t,e)}incrementNonce(e){return e+1}nonceToBytes(e){const t=new Uint8Array(12);return new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(4,e,!0),t}encrypt(e,t,r,n){if(t>BB)throw new Error(LB);const i=this.nonceToBytes(t);return this.crypto.chaCha20Poly1305Encrypt(n,i,r,e)}encryptAndHash(e,t){let r;return r=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,r),r}decrypt(e,t,r,n){if(t>BB)throw new Error(LB);const i=this.nonceToBytes(t),s=this.crypto.chaCha20Poly1305Decrypt(n,i,r,e);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,t){let r,n=!0;return this.hasKey(e.cs)?({plaintext:r,valid:n}=this.decryptWithAd(e.cs,e.h,t)):r=t,this.mixHash(e,t),{plaintext:r,valid:n}}dh(e,t){try{const r=this.crypto.generateX25519SharedKey(e,t);return 32===r.length?r:r.slice(0,32)}catch(r){return RB(r.message),new Uint8Array(32)}}mixHash(e,t){e.h=this.getHash(e.h,t)}getHash(e,t){return this.crypto.hashSHA256((0,Ln.concat)([e,t],e.length+t.length))}mixKey(e,t){const[r,n]=this.crypto.getHKDF(e.ck,t);e.cs=this.initializeKey(n),e.ck=r}initializeKey(e){return{k:e,n:0}}initializeSymmetric(e){const t=(0,zt.fromString)(e,"utf-8"),r=this.hashProtocolName(t),n=r,i=this.createEmptyKey();return{cs:this.initializeKey(i),ck:n,h:r}}hashProtocolName(e){if(e.length<=32){const t=new Uint8Array(32);return t.set(e),t}return this.getHash(e,new Uint8Array(0))}split(e){const[t,r]=this.crypto.getHKDF(e.ck,new Uint8Array(0));return{cs1:this.initializeKey(t),cs2:this.initializeKey(r)}}writeMessageRegular(e,t){const r=this.encryptWithAd(e,new Uint8Array(0),t);return{ne:this.createEmptyKey(),ns:new Uint8Array(0),ciphertext:r}}readMessageRegular(e,t){return this.decryptWithAd(e,new Uint8Array(0),t.ciphertext)}}class UB extends MB{initSession(e,t,r,n){const i=this.createEmptyKey();let s;return s=e?this.initializeInitiator(t,r,n,i):this.initializeResponder(t,r,n,i),{hs:s,i:e,mc:0}}sendMessage(e,t){let r;if(0===e.mc)r=this.writeMessageA(e.hs,t);else if(1===e.mc){const{messageBuffer:n,h:i,cs1:s,cs2:o}=this.writeMessageB(e.hs,t);r=n,e.h=i,e.cs1=s,e.cs2=o}else{if(!(e.mc>1))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");r=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");r=this.writeMessageRegular(e.cs2,t)}}return e.mc++,r}recvMessage(e,t){let r=new Uint8Array(0),n=!1;if(0===e.mc&&({plaintext:r,valid:n}=this.readMessageA(e.hs,t)),1===e.mc){const{plaintext:i,valid:s,h:o,cs1:a,cs2:c}=this.readMessageB(e.hs,t);r=i,n=s,e.h=o,e.cs1=a,e.cs2=c}return e.mc++,{plaintext:r,valid:n}}writeMessageA(e,t){e.e=this.crypto.generateX25519KeyPair();const r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));return{ne:r,ns:i,ciphertext:this.encryptAndHash(e.ss,t)}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();const r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const n=this.encryptAndHash(e.ss,t),i={ne:r,ns:this.createEmptyKey(),ciphertext:n},{cs1:s,cs2:o}=this.split(e.ss);return{messageBuffer:i,cs1:s,cs2:o,h:e.ss.h}}readMessageA(e,t){CB(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);n&&32===r.length&&CB(r)&&(e.rs=r),this.mixKey(e.ss,this.dh(e.s.privateKey,e.rs));const{plaintext:i,valid:s}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:i,valid:n&&s}}readMessageB(e,t){if(CB(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state should contain ephemeral key by now.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re)),this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:i,cs2:s}=this.split(e.ss);return{h:e.ss.h,valid:n,plaintext:r,cs1:i,cs2:s}}initializeInitiator(e,t,r,n){const i=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");this.mixHash(i,e),this.mixHash(i,r);return{ss:i,s:t,rs:r,re:new Uint8Array(32),psk:n}}initializeResponder(e,t,r,n){const i=this.initializeSymmetric("Noise_IK_25519_ChaChaPoly_SHA256");this.mixHash(i,e),this.mixHash(i,t.publicKey);return{ss:i,s:t,rs:r,re:new Uint8Array(32),psk:n}}}class jB extends Error{constructor(e,t){super(t),this.initialMsg=e,this.name="FailedIKhandshake"}}class FB{constructor(e,t,r,n,i,s,o,a,c){this.isInitiator=e,this.payload=t,this.prologue=r,this.staticKeypair=i,this.connection=s,a&&(this.remotePeer=a),this.ik=null!==c&&void 0!==c?c:new UB(n),this.session=this.ik.initSession(this.isInitiator,this.prologue,this.staticKeypair,o),this.remoteEarlyData=new Uint8Array}async stage0(){if(DB(this.session.hs.s),NB(this.session.hs.rs),this.isInitiator){RB("IK Stage 0 - Initiator sending message...");const e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(mB(e)),RB("IK Stage 0 - Initiator sent message."),PB(this.session.hs.e)}else{RB("IK Stage 0 - Responder receiving message...");const t=await this.connection.readLP();try{const e=vB(t.slice()),{plaintext:r,valid:n}=this.ik.recvMessage(this.session,e);if(!n)throw new Error("ik handshake stage 0 decryption validation fail");RB("IK Stage 0 - Responder got message, going to verify payload.");const i=await AB(r);this.remotePeer=this.remotePeer||await SB(i),await IB(this.session.hs.rs,i,this.remotePeer),this.setRemoteEarlyData(i.data),RB("IK Stage 0 - Responder successfully verified payload!"),xB(this.session.hs.re)}catch(e){const r=e;throw RB("Responder breaking up with IK handshake in stage 0."),new jB(t,`Error occurred while verifying initiator's signed payload: ${r.message}`)}}}async stage1(){if(this.isInitiator){RB("IK Stage 1 - Initiator receiving message...");const t=(await this.connection.readLP()).slice(),r=wB(t),{plaintext:n,valid:i}=this.ik.recvMessage(this.session,r);RB("IK Stage 1 - Initiator got message, going to verify payload.");try{if(!i)throw new Error("ik stage 1 decryption validation fail");const e=await AB(n);this.remotePeer=this.remotePeer||await SB(e),await IB(r.ns.slice(0,32),e,this.remotePeer),this.setRemoteEarlyData(e.data),RB("IK Stage 1 - Initiator successfully verified payload!"),xB(this.session.hs.re)}catch(e){const r=e;throw RB("Initiator breaking up with IK handshake in stage 1."),new jB(t,`Error occurred while verifying responder's signed payload: ${r.message}`)}}else{RB("IK Stage 1 - Responder sending message...");const e=this.ik.sendMessage(this.session,this.payload);this.connection.writeLP(gB(e)),RB("IK Stage 1 - Responder sent message..."),PB(this.session.hs.e)}OB(this.session)}decrypt(e,t){const r=this.getCS(t,!1);return this.ik.decryptWithAd(r,new Uint8Array(0),e)}encrypt(e,t){const r=this.getCS(t);return this.ik.encryptWithAd(r,new Uint8Array(0),e)}getLocalEphemeralKeys(){if(!this.session.hs.e)throw new Error("Ephemeral keys do not exist.");return this.session.hs.e}getCS(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.cs1||!e.cs2)throw new Error("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=e)}}class zB extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer"),this.code=zB.code}static get code(){return"ERR_UNEXPECTED_PEER"}}class VB extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange"),this.code=VB.code}static get code(){return"ERR_INVALID_CRYPTO_EXCHANGE"}}Error;class KB extends MB{initializeInitiator(e,t,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,e);return{ss:i,s:t,rs:r,psk:n,re:new Uint8Array(32)}}initializeResponder(e,t,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,e);return{ss:i,s:t,rs:r,psk:n,re:new Uint8Array(32)}}writeMessageA(e,t,r){const n=new Uint8Array(0);e.e=void 0!==r?r:this.crypto.generateX25519KeyPair();const i=e.e.publicKey;this.mixHash(e.ss,i);return{ne:i,ns:n,ciphertext:this.encryptAndHash(e.ss,t)}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();const r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));return{ne:r,ns:i,ciphertext:this.encryptAndHash(e.ss,t)}}writeMessageC(e,t){const r=e.s.publicKey,n=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const i=this.encryptAndHash(e.ss,t),s={ne:this.createEmptyKey(),ns:n,ciphertext:i},{cs1:o,cs2:a}=this.split(e.ss);return{h:e.ss.h,messageBuffer:s,cs1:o,cs2:a}}readMessageA(e,t){return CB(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}readMessageB(e,t){if(CB(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);n&&32===r.length&&CB(r)&&(e.rs=r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:s}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:i,valid:n&&s}}readMessageC(e,t){const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);if(n&&32===r.length&&CB(r)&&(e.rs=r),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:s}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:o,cs2:a}=this.split(e.ss);return{h:e.ss.h,plaintext:i,valid:n&&s,cs1:o,cs2:a}}initSession(e,t,r){const n=this.createEmptyKey(),i=new Uint8Array(32);let s;return s=e?this.initializeInitiator(t,r,i,n):this.initializeResponder(t,r,i,n),{hs:s,i:e,mc:0}}sendMessage(e,t,r){let n;if(0===e.mc)n=this.writeMessageA(e.hs,t,r);else if(1===e.mc)n=this.writeMessageB(e.hs,t);else if(2===e.mc){const{h:r,messageBuffer:i,cs1:s,cs2:o}=this.writeMessageC(e.hs,t);n=i,e.h=r,e.cs1=s,e.cs2=o}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,t)}}return e.mc++,n}recvMessage(e,t){let r=new Uint8Array(0),n=!1;if(0===e.mc)({plaintext:r,valid:n}=this.readMessageA(e.hs,t));else if(1===e.mc)({plaintext:r,valid:n}=this.readMessageB(e.hs,t));else if(2===e.mc){const{h:i,plaintext:s,valid:o,cs1:a,cs2:c}=this.readMessageC(e.hs,t);r=s,n=o,e.h=i,e.cs1=a,e.cs2=c}return e.mc++,{plaintext:r,valid:n}}}class $B{constructor(e,t,r,n,i,s,o,a){this.isInitiator=e,this.payload=t,this.prologue=r,this.staticKeypair=i,this.connection=s,o&&(this.remotePeer=o),this.xx=null!==a&&void 0!==a?a:new KB(n),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair),this.remoteEarlyData=new Uint8Array(0)}async propose(){if(DB(this.session.hs.s),this.isInitiator){RB("Stage 0 - Initiator starting to send first message.");const e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(gB(e)),RB("Stage 0 - Initiator finished sending first message."),PB(this.session.hs.e)}else{RB("Stage 0 - Responder waiting to receive first message...");const e=wB((await this.connection.readLP()).slice()),{valid:t}=this.xx.recvMessage(this.session,e);if(!t)throw new VB("xx handshake stage 0 validation fail");RB("Stage 0 - Responder received first message."),xB(this.session.hs.re)}}async exchange(){if(this.isInitiator){RB("Stage 1 - Initiator waiting to receive first message from responder...");const t=vB((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,t);if(!n)throw new VB("xx handshake stage 1 validation fail");RB("Stage 1 - Initiator received the message."),xB(this.session.hs.re),NB(this.session.hs.rs),RB("Initiator going to check remote's signature...");try{const e=await AB(r);this.remotePeer=this.remotePeer||await SB(e),this.remotePeer=await IB(this.session.hs.rs,e,this.remotePeer),this.setRemoteEarlyData(e.data)}catch(e){throw new zB(`Error occurred while verifying signed payload: ${e.message}`)}RB("All good with the signature!")}else{RB("Stage 1 - Responder sending out first message with signed payload and static key.");const e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(mB(e)),RB("Stage 1 - Responder sent the second handshake message with signed payload."),PB(this.session.hs.e)}}async finish(){if(this.isInitiator){RB("Stage 2 - Initiator sending third handshake message.");const e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(function(e){return(0,Ln.concat)([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}(e)),RB("Stage 2 - Initiator sent message with signed payload.")}else{RB("Stage 2 - Responder waiting for third handshake message...");const t=function(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.slice(0,48),ciphertext:e.slice(48,e.length)}}((await this.connection.readLP()).slice()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,t);if(!n)throw new VB("xx handshake stage 2 validation fail");RB("Stage 2 - Responder received the message, finished handshake.");try{const e=await AB(r);this.remotePeer=this.remotePeer||await SB(e),await IB(this.session.hs.rs,e,this.remotePeer),this.setRemoteEarlyData(e.data)}catch(e){throw new zB(`Error occurred while verifying signed payload: ${e.message}`)}}OB(this.session)}encrypt(e,t){const r=this.getCS(t);return this.xx.encryptWithAd(r,new Uint8Array(0),e)}decrypt(e,t){const r=this.getCS(t,!1);return this.xx.decryptWithAd(r,new Uint8Array(0),e)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.cs1||!e.cs2)throw new VB("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteEarlyData(e){e&&(this.remoteEarlyData=e)}}class qB extends $B{constructor(e,t,r,n,i,s,o,a,c,l){super(e,t,r,n,i,s,a,l),c&&(this.ephemeralKeys=c),this.initialMsg=o}async propose(){if(this.isInitiator)this.xx.sendMessage(this.session,new Uint8Array(0),this.ephemeralKeys),RB("XX Fallback Stage 0 - Initialized state as the first message was sent by initiator."),PB(this.session.hs.e);else{RB("XX Fallback Stage 0 - Responder decoding initial msg from IK.");const e=wB(this.initialMsg),{valid:t}=this.xx.recvMessage(this.session,{ne:e.ne,ns:new Uint8Array(0),ciphertext:new Uint8Array(0)});if(!t)throw new Error("xx fallback stage 0 decryption validation fail");RB("XX Fallback Stage 0 - Responder used received message from IK."),xB(this.session.hs.re)}}async exchange(){if(this.isInitiator){const t=vB(this.initialMsg),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,t);if(!n)throw new Error("xx fallback stage 1 decryption validation fail");RB("XX Fallback Stage 1 - Initiator used received message from IK."),xB(this.session.hs.re),NB(this.session.hs.rs),RB("Initiator going to check remote's signature...");try{const e=await AB(r);this.remotePeer=this.remotePeer||await SB(e),await IB(this.session.hs.rs,e,this.remotePeer),this.setRemoteEarlyData(e.data)}catch(e){throw new Error(`Error occurred while verifying signed payload from responder: ${e.message}`)}RB("All good with the signature!")}else RB("XX Fallback Stage 1 - Responder start"),await super.exchange(),RB("XX Fallback Stage 1 - Responder end")}}const HB=new class{constructor(){this.storage=new XN}store(e,t){this.storage.set(e,t)}load(e){var t;return e&&null!==(t=this.storage.get(e))&&void 0!==t?t:null}resetStorage(){this.storage.clear()}};const WB=new class{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pB;this.protocol="/noise",this.prologue=new Uint8Array(0),this.earlyData=null!==t&&void 0!==t?t:new Uint8Array(0),this.useNoisePipes=!1,this.crypto=r,this.staticKeys=e?this.crypto.generateX25519KeyPairFromSeed(e):this.crypto.generateX25519KeyPair()}async secureOutbound(e,t,r){const n=nB(t,{lengthEncoder:fB,lengthDecoder:yB,maxDataLength:aB}),i=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async secureInbound(e,t,r){const n=nB(t,{lengthEncoder:fB,lengthDecoder:yB,maxDataLength:aB}),i=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remoteEarlyData:i.remoteEarlyData,remotePeer:i.remotePeer}}async performHandshake(e){const t=await _B(e.localPeer,this.staticKeys.publicKey,this.earlyData);let r=this.useNoisePipes;if(e.isInitiator&&null===HB.load(e.remotePeer)&&(r=!1),!r)return await this.performXXHandshake(e,t);{var n;const{remotePeer:r,connection:s,isInitiator:o}=e,a=new FB(o,t,this.prologue,this.crypto,this.staticKeys,s,null!==(n=HB.load(e.remotePeer))&&void 0!==n?n:new Uint8Array(32),r);try{return await this.performIKHandshake(a)}catch(i){const r=i;let n;return e.isInitiator&&(n=a.getLocalEphemeralKeys()),await this.performXXFallbackHandshake(e,t,r.initialMsg,n)}}}async performXXFallbackHandshake(e,t,r,n){const{isInitiator:i,remotePeer:s,connection:o}=e,a=new qB(i,t,this.prologue,this.crypto,this.staticKeys,o,r,s,n);try{await a.propose(),await a.exchange(),await a.finish()}catch(c){const e=c;throw e.message=`Error occurred during XX Fallback handshake: ${e.message}`,RB(e),e}return a}async performXXHandshake(e,t){const{isInitiator:r,remotePeer:n,connection:i}=e,s=new $B(r,t,this.prologue,this.crypto,this.staticKeys,i,n);try{await s.propose(),await s.exchange(),await s.finish(),this.useNoisePipes&&s.remotePeer&&HB.store(s.remotePeer,s.getRemoteStaticKey())}catch(o){if(o instanceof Error)throw o.message=`Error occurred during XX handshake: ${o.message}`,o}return s}async performIKHandshake(e){return await e.stage0(),await e.stage1(),e}async createSecureConnection(e,t){const[r,n]=function(){const e=iB(),t=iB();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}(),i=e.unwrap();return await bu(r,function(e){return async function*(t){for await(const r of t)for(let t=0;t<r.length;t+=65519){let n=t+65519;n>r.length&&(n=r.length);const i=e.encrypt(r.slice(t,n),e.session);yield i}}}(t),$E({lengthEncoder:fB}),i,QE({lengthDecoder:yB}),function(e){return async function*(t){for await(const r of t)for(let t=0;t<r.length;t+=aB){let n=t+aB;n>r.length&&(n=r.length);const{plaintext:i,valid:s}=await e.decrypt(r.slice(t,n),e.session);if(!s)throw new Error("Failed to validate decrypted chunk");yield i}}}(t),r),n}},GB=ue.bind({ignoreUndefined:!0,concatArrays:!0});function YB(n){let{options:i={},peerId:s,multiaddrs:o=[],repo:a,keychainConfig:c={},config:l={}}=n;const{datastore:u}=a,h=function(n){let{options:i,config:s,datastore:o,keychainConfig:a,peerId:c,multiaddrs:l}=n;const u=()=>{const e=sc(s,"Pubsub.Router")||"gossipsub",t={gossipsub:new iS({allowPublishToZeroPeers:!0,fallbackToFloodsub:!0,emitSelf:!0})};if(!t[e])throw me(new Error(`Router unavailable. Configure libp2p.modules.pubsub to use the ${e} router.`),"ERR_NOT_SUPPORTED");return t[e]},h={datastore:o,peerId:c},d={addresses:{listen:l.map((e=>e.toString())),announce:sc(i,"addresses.announce",sc(s,"Addresses.Announce",[])),noAnnounce:sc(i,"addresses.noAnnounce",sc(s,"Addresses.NoAnnounce",[]))},connectionManager:sc(i,"connectionManager",{maxConnections:sc(i,"config.Swarm.ConnMgr.HighWater",sc(s,"Swarm.ConnMgr.HighWater")),minConnections:sc(i,"config.Swarm.ConnMgr.LowWater",sc(s,"Swarm.ConnMgr.LowWater"))}),keychain:a,identify:{host:{agentVersion:"js-ipfs/0.15.4"}},contentRouters:[],peerRouters:[],peerDiscovery:[],transports:[],streamMuxers:[new rB({maxStreamsPerConnection:1/0})],connectionEncryption:[WB],relay:{enabled:sc(i,"relay.enabled",sc(s,"relay.enabled",!0)),hop:{enabled:sc(i,"relay.hop.enabled",sc(s,"relay.hop.enabled",!1)),active:sc(i,"relay.hop.active",sc(s,"relay.hop.active",!1))}},nat:{enabled:!sc(s,"Swarm.DisableNatPortMap",!1)}};sc(i,"config.Pubsub.Enabled",sc(s,"Pubsub.Enabled",!0))&&(d.pubsub=u());"none"!==sc(s,"Routing.Type","dhtclient")&&(d.dht=new bO({clientMode:"dhtserver"!==sc(s,"Routing.Type","dht"),kBucketSize:sc(i,"dht.kBucketSize",20),validators:{ipns:Ka},selectors:{ipns:oc}}));const p=sc(i,"config.Bootstrap",sc(s,"Bootstrap",[]));var f;p.length>0&&(null===(f=d.peerDiscovery)||void 0===f||f.push(new _O({list:p})));let y=sc(i,"libp2p",void 0);"function"===typeof y&&(y=void 0);const g=GB(h,function(){const e=new CR;return{transports:[e],peerDiscovery:[e.discovery],connectionManager:{maxParallelDials:150,maxDialsPerPeer:4,dialTimeout:1e4,autoDial:!0},nat:{enabled:!1},metrics:{enabled:!0}}}(),d,y),m=sc(i,"config.Addresses.Delegates",sc(s,"Addresses.Delegates",[]));if(m.length>0){var w,v;const n=m[Math.floor(Math.random()*m.length)],i=new Ml(n).toOptions(),s=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i={name:Nt.identity.name,code:Nt.identity.code,encode:e=>e,decode:e=>e},s=Object.values(xt.gh);(n.ipld&&n.ipld.bases?n.ipld.bases:[]).forEach((e=>s.push(e)));const o=new dS({bases:s,loadBase:n.ipld&&n.ipld.loadBase}),a=Object.values(xt.QB);[e,t,r,Pt,i].concat(n.ipld&&n.ipld.codecs||[]).forEach((e=>a.push(e)));const c=new fS({codecs:a,loadCodec:n.ipld&&n.ipld.loadCodec}),l=Object.values(xt.kq);(n.ipld&&n.ipld.hashers?n.ipld.hashers:[]).forEach((e=>l.push(e)));const u=new gS({hashers:l,loadHasher:n.ipld&&n.ipld.loadHasher});return{add:II(n),addAll:_I(n),bitswap:MS(n),block:QS(n),bootstrap:rA(n),cat:CI(n),commands:RI(n),config:dA(n),dag:vA(c,n),dht:CA(n),diag:PA(n),dns:TI(n),files:WA(n),get:PI(n),getEndpointConfig:DI(n),id:NI(n),isOnline:xI(n),key:tk(n),log:sk(n),ls:OI(n),mount:LI(n),name:dk(n),object:Ak(c,n),pin:Gk(n),ping:MI(n),pubsub:aI(n),refs:lI(n),repo:pI(n),resolve:UI(n),start:jI(n),stats:yI(n),stop:FI(n),swarm:EI(n),version:zI(n),bases:o,codecs:c,hashers:u}}({host:i.host,protocol:443===parseInt(i.port)?"https":"http",port:i.port});null===(w=g.contentRouters)||void 0===w||w.push(new uS(s)),null===(v=g.peerRouters)||void 0===v||v.push(new aS(s))}var b;sc(i,"config.Discovery.MDNS.Enabled",sc(s,"Discovery.MDNS.Enabled",!0))||(g.peerDiscovery=null===(b=g.peerDiscovery)||void 0===b?void 0:b.filter((e=>null!=e&&"@libp2p/mdns"!==e[Symbol.toStringTag])));null==g.transports&&(g.transports=[]);null==g.transports.find((e=>"@libp2p/websockets"===e[Symbol.toStringTag]))&&g.transports.push(new OO);return g}({options:i,config:l,datastore:u,keychainConfig:c,peerId:s,multiaddrs:o});return"function"===typeof i.libp2p?i.libp2p({libp2pOptions:h,options:i,config:l,datastore:u,peerId:s}):async function(e){return await rx(e)}(h)}const QB=ue.bind({ignoreUndefined:!0}),JB=ge("ipfs:components:peer:storage");class XB{constructor(e,t,r,n,i){this.print=n,this.peerId=e,this.keychain=t,this.repo=r,this.print=n,this.isNew=i}static async start(e,t,r){const{repoAutoMigrate:n,repo:i,onMigrationProgress:s}=r,o="string"===typeof i||null==i?kE(e,t,{path:i,autoMigrate:n,onMigrationProgress:s}):i,{peerId:a,keychain:c,isNew:l}=await ZB(e,o,r);return new XB(a,c,o,e,l)}}const ZB=async(e,t,r)=>{if(!t.closed)return{...await iL(t,r),isNew:!1};try{return await t.open(),{...await iL(t,r),isNew:!1}}catch(Up){if(Up.code!==Nb)throw Up;if(r.init&&!1===r.init.allowNew)throw new Ft("Initialization of new repos disabled by config, pass `config.init.isNew: true` to enable it");return{...await eL(e,t,r),isNew:!0}}},eL=async(e,t,r)=>{const n=r.init||{},i=await t.exists();if(JB("repo exists?",i),!0===i)throw new Error("repo already exists");const s=n.privateKey?await tL(n.privateKey):await rL(e,n),o=nL(s);JB("peer identity: %s",o.PeerID);const a={...QB(oL({Addresses:{Swarm:[],Announce:[],NoAnnounce:[],API:"",Gateway:"",RPC:"",Delegates:["/dns4/node0.delegate.ipfs.io/tcp/443/https","/dns4/node1.delegate.ipfs.io/tcp/443/https","/dns4/node2.delegate.ipfs.io/tcp/443/https","/dns4/node3.delegate.ipfs.io/tcp/443/https"]},Discovery:{MDNS:{Enabled:!1,Interval:10},webRTCStar:{Enabled:!0}},Bootstrap:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmZa1sAxajnQjVM8WjWXoMbmPd7NsWhfKsPkErzpm9wGkp","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dns4/node0.preload.ipfs.io/tcp/443/wss/p2p/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/p2p/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/node2.preload.ipfs.io/tcp/443/wss/p2p/QmV7gnbW5VTcJ3oyM2Xk1rdFBJ3kTkvxc87UFGsun29STS","/dns4/node3.preload.ipfs.io/tcp/443/wss/p2p/QmY7JB6MQXhxHvq7dBDh4HpbH29v4yE9JRadAVpndvzySN"],Pubsub:{Enabled:!0},Swarm:{ConnMgr:{LowWater:5,HighWater:20},DisableNatPortMap:!0},Routing:{Type:"dhtclient"}},n.profiles),r.config),Identity:o};await t.init(a),await t.open(),JB("repo opened");const c={pass:r.pass};try{c.dek=await t.config.get("Keychain.DEK")}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up}const l=await YB({options:void 0,multiaddrs:void 0,peerId:s,repo:t,config:a,keychainConfig:c});return l.keychain&&(await l.loadKeychain(),await t.config.set("Keychain",{DEK:l.keychain.init.dek})),{peerId:s,keychain:l.keychain}},tL=async e=>{if(JB("using user-supplied private-key"),Dn(e))return e;const t=(0,zt.fromString)(e,"base64pad"),r=await ya(t);return await En(r.public.bytes,r.bytes)},rL=(e,t)=>{let{algorithm:r="Ed25519",bits:n=2048}=t;if(e("generating %s keypair...",r),"Ed25519"===r)return WN();if("RSA"===r)return(async e=>{var t;const r=await qN("RSA",null!==(t=null===e||void 0===e?void 0:e.bits)&&void 0!==t?t:2048),n=await GN(r);if("RSA"===n.type)return n;throw new Error(`Generated unexpected PeerId type "${n.type}"`)})({bits:n});throw me(new Error("Unknown PeerId algorithm"),"ERR_UNKNOWN_PEER_ID_ALGORITHM")},nL=e=>{if(null==e.privateKey)throw me(new Error("Private key missing"),"ERR_MISSING_PRIVATE_KEY");return{PeerID:e.toString(),PrivKey:(0,$t.toString)(e.privateKey,"base64pad")}},iL=async(e,t)=>{const r=t.config,n=t.init&&t.init.profiles||[],i=t.pass,s=await e.config.getAll(),o=sL(oL(s,n),r);if(s!==o&&await e.config.replace(o),!o.Identity||!o.Identity.PrivKey)throw new Ot("No private key was found in the config, please intialize the repo");const a=(0,zt.fromString)(o.Identity.PrivKey,"base64pad"),c=await ya(a),l=await En(c.public.bytes,c.bytes),u=await YB({options:void 0,multiaddrs:void 0,peerId:l,repo:e,config:o,keychainConfig:{pass:i,...o.Keychain}});return u.keychain&&await u.loadKeychain(),{peerId:l,keychain:u.keychain}},sL=(e,t)=>t?QB(e,t):e,oL=(e,t)=>(t||[]).reduce(((e,t)=>{const r=Uy[t];if(!r)throw new Error(`Could not find profile with name '${t}'`);return JB("applying profile %s",t),r.transform(e)}),e);var aL=__webpack_require__(9806);const cL=function(e){let t=new Uint8Array(e.reduce(((e,t)=>e+dl.encodingLength(t)),0)),r=0;for(const n of e)t=dl.encode(n,t,r),r+=dl.encodingLength(n);return t};class lL{constructor(e,t,r){this._refCounter=1,this.cid=e,this.priority=t||1,this.wantType=r}inc(){this._refCounter+=1}dec(){this._refCounter=Math.max(0,this._refCounter-1)}hasRefs(){return this._refCounter>0}get[Symbol.toStringTag](){return`WantlistEntry <key: ${this.cid.toString(pe.base58btc)}, priority: ${this.priority}, refs: ${this._refCounter}>`}equals(e){return this._refCounter===e._refCounter&&this.cid.equals(e.cid)&&this.priority===e.priority&&this.wantType===e.wantType}}const uL=we.Reader,hL=we.Writer,dL=we.util,pL=we.roots["ipfs-bitswap"]||(we.roots["ipfs-bitswap"]={}),fL=pL.Message=(()=>{function e(e){if(this.blocks=[],this.payload=[],this.blockPresences=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.wantlist=null,e.prototype.blocks=dL.emptyArray,e.prototype.payload=dL.emptyArray,e.prototype.blockPresences=dL.emptyArray,e.prototype.pendingBytes=0,e.encode=function(e,t){if(t||(t=hL.create()),null!=e.wantlist&&Object.hasOwnProperty.call(e,"wantlist")&&pL.Message.Wantlist.encode(e.wantlist,t.uint32(10).fork()).ldelim(),null!=e.blocks&&e.blocks.length)for(var r=0;r<e.blocks.length;++r)t.uint32(18).bytes(e.blocks[r]);if(null!=e.payload&&e.payload.length)for(r=0;r<e.payload.length;++r)pL.Message.Block.encode(e.payload[r],t.uint32(26).fork()).ldelim();if(null!=e.blockPresences&&e.blockPresences.length)for(r=0;r<e.blockPresences.length;++r)pL.Message.BlockPresence.encode(e.blockPresences[r],t.uint32(34).fork()).ldelim();return null!=e.pendingBytes&&Object.hasOwnProperty.call(e,"pendingBytes")&&t.uint32(40).int32(e.pendingBytes),t},e.decode=function(e,t){e instanceof uL||(e=uL.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pL.Message;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.wantlist=pL.Message.Wantlist.decode(e,e.uint32());break;case 2:n.blocks&&n.blocks.length||(n.blocks=[]),n.blocks.push(e.bytes());break;case 3:n.payload&&n.payload.length||(n.payload=[]),n.payload.push(pL.Message.Block.decode(e,e.uint32()));break;case 4:n.blockPresences&&n.blockPresences.length||(n.blockPresences=[]),n.blockPresences.push(pL.Message.BlockPresence.decode(e,e.uint32()));break;case 5:n.pendingBytes=e.int32();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof pL.Message)return e;var t=new pL.Message;if(null!=e.wantlist){if("object"!==typeof e.wantlist)throw TypeError(".Message.wantlist: object expected");t.wantlist=pL.Message.Wantlist.fromObject(e.wantlist)}if(e.blocks){if(!Array.isArray(e.blocks))throw TypeError(".Message.blocks: array expected");t.blocks=[];for(var r=0;r<e.blocks.length;++r)"string"===typeof e.blocks[r]?dL.base64.decode(e.blocks[r],t.blocks[r]=dL.newBuffer(dL.base64.length(e.blocks[r])),0):e.blocks[r].length&&(t.blocks[r]=e.blocks[r])}if(e.payload){if(!Array.isArray(e.payload))throw TypeError(".Message.payload: array expected");t.payload=[];for(r=0;r<e.payload.length;++r){if("object"!==typeof e.payload[r])throw TypeError(".Message.payload: object expected");t.payload[r]=pL.Message.Block.fromObject(e.payload[r])}}if(e.blockPresences){if(!Array.isArray(e.blockPresences))throw TypeError(".Message.blockPresences: array expected");t.blockPresences=[];for(r=0;r<e.blockPresences.length;++r){if("object"!==typeof e.blockPresences[r])throw TypeError(".Message.blockPresences: object expected");t.blockPresences[r]=pL.Message.BlockPresence.fromObject(e.blockPresences[r])}}return null!=e.pendingBytes&&(t.pendingBytes=0|e.pendingBytes),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocks=[],r.payload=[],r.blockPresences=[]),t.defaults&&(r.wantlist=null,r.pendingBytes=0),null!=e.wantlist&&e.hasOwnProperty("wantlist")&&(r.wantlist=pL.Message.Wantlist.toObject(e.wantlist,t)),e.blocks&&e.blocks.length){r.blocks=[];for(var n=0;n<e.blocks.length;++n)r.blocks[n]=t.bytes===String?dL.base64.encode(e.blocks[n],0,e.blocks[n].length):t.bytes===Array?Array.prototype.slice.call(e.blocks[n]):e.blocks[n]}if(e.payload&&e.payload.length){r.payload=[];for(n=0;n<e.payload.length;++n)r.payload[n]=pL.Message.Block.toObject(e.payload[n],t)}if(e.blockPresences&&e.blockPresences.length){r.blockPresences=[];for(n=0;n<e.blockPresences.length;++n)r.blockPresences[n]=pL.Message.BlockPresence.toObject(e.blockPresences[n],t)}return null!=e.pendingBytes&&e.hasOwnProperty("pendingBytes")&&(r.pendingBytes=e.pendingBytes),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e.Wantlist=function(){function e(e){if(this.entries=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.entries=dL.emptyArray,e.prototype.full=!1,e.encode=function(e,t){if(t||(t=hL.create()),null!=e.entries&&e.entries.length)for(var r=0;r<e.entries.length;++r)pL.Message.Wantlist.Entry.encode(e.entries[r],t.uint32(10).fork()).ldelim();return null!=e.full&&Object.hasOwnProperty.call(e,"full")&&t.uint32(16).bool(e.full),t},e.decode=function(e,t){e instanceof uL||(e=uL.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pL.Message.Wantlist;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.entries&&n.entries.length||(n.entries=[]),n.entries.push(pL.Message.Wantlist.Entry.decode(e,e.uint32()));break;case 2:n.full=e.bool();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof pL.Message.Wantlist)return e;var t=new pL.Message.Wantlist;if(e.entries){if(!Array.isArray(e.entries))throw TypeError(".Message.Wantlist.entries: array expected");t.entries=[];for(var r=0;r<e.entries.length;++r){if("object"!==typeof e.entries[r])throw TypeError(".Message.Wantlist.entries: object expected");t.entries[r]=pL.Message.Wantlist.Entry.fromObject(e.entries[r])}}return null!=e.full&&(t.full=Boolean(e.full)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.entries=[]),t.defaults&&(r.full=!1),e.entries&&e.entries.length){r.entries=[];for(var n=0;n<e.entries.length;++n)r.entries[n]=pL.Message.Wantlist.Entry.toObject(e.entries[n],t)}return null!=e.full&&e.hasOwnProperty("full")&&(r.full=e.full),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e.WantType=function(){const e={},t=Object.create(e);return t[e[0]="Block"]=0,t[e[1]="Have"]=1,t}(),e.Entry=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.block=dL.newBuffer([]),e.prototype.priority=0,e.prototype.cancel=!1,e.prototype.wantType=0,e.prototype.sendDontHave=!1,e.encode=function(e,t){return t||(t=hL.create()),null!=e.block&&Object.hasOwnProperty.call(e,"block")&&t.uint32(10).bytes(e.block),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.cancel&&Object.hasOwnProperty.call(e,"cancel")&&t.uint32(24).bool(e.cancel),null!=e.wantType&&Object.hasOwnProperty.call(e,"wantType")&&t.uint32(32).int32(e.wantType),null!=e.sendDontHave&&Object.hasOwnProperty.call(e,"sendDontHave")&&t.uint32(40).bool(e.sendDontHave),t},e.decode=function(e,t){e instanceof uL||(e=uL.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pL.Message.Wantlist.Entry;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.block=e.bytes();break;case 2:n.priority=e.int32();break;case 3:n.cancel=e.bool();break;case 4:n.wantType=e.int32();break;case 5:n.sendDontHave=e.bool();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof pL.Message.Wantlist.Entry)return e;var t=new pL.Message.Wantlist.Entry;switch(null!=e.block&&("string"===typeof e.block?dL.base64.decode(e.block,t.block=dL.newBuffer(dL.base64.length(e.block)),0):e.block.length&&(t.block=e.block)),null!=e.priority&&(t.priority=0|e.priority),null!=e.cancel&&(t.cancel=Boolean(e.cancel)),e.wantType){case"Block":case 0:t.wantType=0;break;case"Have":case 1:t.wantType=1}return null!=e.sendDontHave&&(t.sendDontHave=Boolean(e.sendDontHave)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.block="":(r.block=[],t.bytes!==Array&&(r.block=dL.newBuffer(r.block))),r.priority=0,r.cancel=!1,r.wantType=t.enums===String?"Block":0,r.sendDontHave=!1),null!=e.block&&e.hasOwnProperty("block")&&(r.block=t.bytes===String?dL.base64.encode(e.block,0,e.block.length):t.bytes===Array?Array.prototype.slice.call(e.block):e.block),null!=e.priority&&e.hasOwnProperty("priority")&&(r.priority=e.priority),null!=e.cancel&&e.hasOwnProperty("cancel")&&(r.cancel=e.cancel),null!=e.wantType&&e.hasOwnProperty("wantType")&&(r.wantType=t.enums===String?pL.Message.Wantlist.WantType[e.wantType]:e.wantType),null!=e.sendDontHave&&e.hasOwnProperty("sendDontHave")&&(r.sendDontHave=e.sendDontHave),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e}(),e}(),e.Block=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.prefix=dL.newBuffer([]),e.prototype.data=dL.newBuffer([]),e.encode=function(e,t){return t||(t=hL.create()),null!=e.prefix&&Object.hasOwnProperty.call(e,"prefix")&&t.uint32(10).bytes(e.prefix),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof uL||(e=uL.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pL.Message.Block;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.prefix=e.bytes();break;case 2:n.data=e.bytes();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof pL.Message.Block)return e;var t=new pL.Message.Block;return null!=e.prefix&&("string"===typeof e.prefix?dL.base64.decode(e.prefix,t.prefix=dL.newBuffer(dL.base64.length(e.prefix)),0):e.prefix.length&&(t.prefix=e.prefix)),null!=e.data&&("string"===typeof e.data?dL.base64.decode(e.data,t.data=dL.newBuffer(dL.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.prefix="":(r.prefix=[],t.bytes!==Array&&(r.prefix=dL.newBuffer(r.prefix))),t.bytes===String?r.data="":(r.data=[],t.bytes!==Array&&(r.data=dL.newBuffer(r.data)))),null!=e.prefix&&e.hasOwnProperty("prefix")&&(r.prefix=t.bytes===String?dL.base64.encode(e.prefix,0,e.prefix.length):t.bytes===Array?Array.prototype.slice.call(e.prefix):e.prefix),null!=e.data&&e.hasOwnProperty("data")&&(r.data=t.bytes===String?dL.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e}(),e.BlockPresenceType=function(){const e={},t=Object.create(e);return t[e[0]="Have"]=0,t[e[1]="DontHave"]=1,t}(),e.BlockPresence=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.cid=dL.newBuffer([]),e.prototype.type=0,e.encode=function(e,t){return t||(t=hL.create()),null!=e.cid&&Object.hasOwnProperty.call(e,"cid")&&t.uint32(10).bytes(e.cid),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),t},e.decode=function(e,t){e instanceof uL||(e=uL.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pL.Message.BlockPresence;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.cid=e.bytes();break;case 2:n.type=e.int32();break;default:e.skipType(7&i)}}return n},e.fromObject=function(e){if(e instanceof pL.Message.BlockPresence)return e;var t=new pL.Message.BlockPresence;switch(null!=e.cid&&("string"===typeof e.cid?dL.base64.decode(e.cid,t.cid=dL.newBuffer(dL.base64.length(e.cid)),0):e.cid.length&&(t.cid=e.cid)),e.type){case"Have":case 0:t.type=0;break;case"DontHave":case 1:t.type=1}return t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(t.bytes===String?r.cid="":(r.cid=[],t.bytes!==Array&&(r.cid=dL.newBuffer(r.cid))),r.type=t.enums===String?"Have":0),null!=e.cid&&e.hasOwnProperty("cid")&&(r.cid=t.bytes===String?dL.base64.encode(e.cid,0,e.cid.length):t.bytes===Array?Array.prototype.slice.call(e.cid):e.cid),null!=e.type&&e.hasOwnProperty("type")&&(r.type=t.enums===String?pL.Message.BlockPresenceType[e.type]:e.type),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,we.util.toJSONOptions)},e}(),e})(),yL=fL.Wantlist.WantType.Block,gL=fL.Wantlist.WantType.Have;class mL{constructor(e,t){this.set=t?WR({system:"ipfs",component:"bitswap",metric:"wantlist",metrics:t.metrics}):new Map,this._stats=e}get length(){return this.set.size}add(e,t,r){const n=e.toString(pe.base58btc),i=this.set.get(n);i?(i.inc(),i.priority=t,i.wantType===gL&&r===yL&&(i.wantType=r)):(this.set.set(n,new lL(e,t,r)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.toString(pe.base58btc),r=this.set.get(t);r&&(r.dec(),r.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map((e=e=>e[1].key,t=Array.from(this.set.entries()),Array.prototype.slice.call(t,0).sort(((t,r)=>{const n=e(t),i=e(r);return n<i?-1:n>i?1:0}))));var e,t}contains(e){const t=e.toString(pe.base58btc);return this.set.has(t)}get(e){const t=e.toString(pe.base58btc);return this.set.get(t)}}mL.Entry=lL;const wL=mL.Entry;class vL{constructor(e,t,r,n,i){this.entry=new wL(e,t,r),this.cancel=Boolean(n),this.sendDontHave=Boolean(i)}get cid(){return this.entry.cid}set cid(e){this.entry.cid=e}get priority(){return this.entry.priority}set priority(e){this.entry.priority=e}get wantType(){return this.entry.wantType}set wantType(e){this.entry.wantType=e}get[Symbol.toStringTag](){return`BitswapMessageEntry ${this.cid.toString(pe.base58btc)} <cancel: ${this.cancel}, priority: ${this.priority}>`}equals(e){return this.cancel===e.cancel&&this.sendDontHave===e.sendDontHave&&this.wantType===e.wantType&&this.entry.equals(e.entry)}}const bL=(e,t)=>{const r=["bitswap"];return t&&r.push(t),e&&r.push(`${e.toString().slice(0,8)}`),Object.assign(de(r.join(":")),{error:de(r.concat(["error"]).join(":"))})},EL=(e,t)=>{if(e.size!==t.size)return!1;for(const[r,n]of e){const e=t.get(r);if(void 0===e)return!1;if(n instanceof Uint8Array&&e instanceof Uint8Array&&!(0,un.equals)(n,e))return!1;if(n instanceof vL&&e instanceof vL&&!n.equals(e))return!1}return!0};class _L{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}get empty(){return 0===this.blocks.size&&0===this.wantlist.size&&0===this.blockPresences.size}addEntry(e,t,r,n,i){null==r&&(r=_L.WantType.Block);const s=e.toString(pe.base58btc),o=this.wantlist.get(s);o?(o.wantType===r&&(o.priority=t),n&&(o.cancel=Boolean(n)),i&&(o.sendDontHave=Boolean(i)),r===_L.WantType.Block&&o.wantType===_L.WantType.Have&&(o.wantType=r)):this.wantlist.set(s,new vL(e,t,r,n,i))}addBlock(e,t){const r=e.toString(pe.base58btc);this.blocks.set(r,t)}addHave(e){const t=e.toString(pe.base58btc);this.blockPresences.has(t)||this.blockPresences.set(t,_L.BlockPresenceType.Have)}addDontHave(e){const t=e.toString(pe.base58btc);this.blockPresences.has(t)||this.blockPresences.set(t,_L.BlockPresenceType.DontHave)}cancel(e){const t=e.toString(pe.base58btc);this.wantlist.delete(t),this.addEntry(e,0,_L.WantType.Block,!0,!1)}setPendingBytes(e){this.pendingBytes=e}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),cancel:Boolean(e.cancel)}))),full:!!this.full||void 0},blocks:Array.from(this.blocks.values())};return fL.encode(e).finish()}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.bytes,priority:Number(e.priority),wantType:e.wantType,cancel:Boolean(e.cancel),sendDontHave:Boolean(e.sendDontHave)}))),full:!!this.full||void 0},blockPresences:[],payload:[],pendingBytes:this.pendingBytes};for(const[t,r]of this.blocks.entries()){const n=Ne.CID.parse(t),i=n.version,s=n.code,o=n.multihash.code,a=n.multihash.digest.length,c=cL([i,s,o,a]);e.payload.push(new fL.Block({prefix:c,data:r}))}for(const[t,r]of this.blockPresences)e.blockPresences.push(new fL.BlockPresence({cid:Ne.CID.parse(t).bytes,type:r}));return this.pendingBytes>0&&(e.pendingBytes=this.pendingBytes),fL.encode(e).finish()}equals(e){return!!(this.full===e.full&&this.pendingBytes===e.pendingBytes&&EL(this.wantlist,e.wantlist)&&EL(this.blocks,e.blocks)&&EL(this.blockPresences,e.blockPresences))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}_L.deserialize=async(e,t)=>{const r=fL.decode(e),n=r.wantlist&&r.wantlist.full||!1,i=new _L(n);return r.wantlist&&r.wantlist.entries&&r.wantlist.entries.forEach((e=>{if(!e.block)return;const t=Ne.CID.decode(e.block);i.addEntry(t,e.priority||0,e.wantType,Boolean(e.cancel),Boolean(e.sendDontHave))})),r.blockPresences&&r.blockPresences.forEach((e=>{if(!e.cid)return;const t=Ne.CID.decode(e.cid);e.type===_L.BlockPresenceType.Have?i.addHave(t):i.addDontHave(t)})),r.blocks.length>0?(await Promise.all(r.blocks.map((async e=>{const t=await hn.sha256.digest(e),r=Ne.CID.createV0(t);i.addBlock(r,e)}))),i):r.payload.length>0?(await Promise.all(r.payload.map((async e=>{if(!e.prefix||!e.data)return;const r=aL(e.prefix),n=r[0],s=r[1],o=r[2],a=o===hn.sha256.code?hn.sha256:t&&await t.getHasher(o);if(!a)throw me(new Error("Unknown hash algorithm"),"ERR_UNKNOWN_HASH_ALG");const c=await a.digest(e.data),l=Ne.CID.create(n,s,c);i.addBlock(l,e.data)}))),i.setPendingBytes(r.pendingBytes),i):i},_L.blockPresenceSize=e=>e.bytes.length+1,_L.Entry=vL,_L.WantType={Block:fL.Wantlist.WantType.Block,Have:fL.Wantlist.WantType.Have},_L.BlockPresenceType={Have:fL.BlockPresenceType.Have,DontHave:fL.BlockPresenceType.DontHave};const SL=Math.pow(2,31)-1;var AL=function(e,t,r){var n=null,i=null,s=function(){n&&(clearTimeout(n),i=null,n=null)},o=function(){if(!t)return e.apply(this,arguments);var o=this,a=arguments,c=r&&!n;return s(),i=function(){e.apply(o,a)},n=setTimeout((function(){if(n=null,!c){var e=i;return i=null,e()}}),t),c?i():void 0};return o.cancel=s,o.flush=function(){var e=i;s(),e&&e()},o};class kL{constructor(e,t,r){this.peerId=t,this.network=r,this.refcnt=1,this._entries=[],this._log=bL(e,"msgqueue"),this.sendEntries=AL(this._sendEntries.bind(this),1)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new _L(!1);this._entries.forEach((t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}async send(e){try{await this.network.connectTo(this.peerId)}catch(Up){return void this._log.error("cant connect to peer %s: %s",this.peerId.toString(),Up.message)}this._log("sending message to peer %s",this.peerId.toString()),this.network.sendMessage(this.peerId,e).catch((e=>{this._log.error("send error: %s",e.message)}))}}class IL{constructor(e,t,r,n){this.peers=WR({system:"ipfs",component:"bitswap",metric:"want-manager-peers",metrics:n.metrics}),this.wantlist=new mL(r,n),this.network=t,this._stats=r,this._peerId=e,this._log=bL(e,"want")}_addEntries(e,t,r){const n=e.map(((e,r)=>new _L.Entry(e,SL-r,_L.WantType.Block,t)));n.forEach((e=>{e.cancel?r?this.wantlist.removeForce(e.cid.toString(pe.base58btc)):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))}));for(const i of this.peers.values())i.addEntries(n)}_startPeerHandler(e){let t=this.peers.get(e.toString());if(t)return void t.refcnt++;t=new kL(this._peerId,e,this.network);const r=new _L(!0);for(const n of this.wantlist.entries())r.addEntry(n[1].cid,n[1].priority);return t.addMessage(r),this.peers.set(e.toString(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toString());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toString()))}wantBlocks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._addEntries(e,!1),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.cancelWants(e)}))}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(){}stop(){this.peers.forEach((e=>this.disconnected(e.peerId)))}}const CL="/ipfs/bitswap/1.0.0",RL="/ipfs/bitswap/1.1.0",TL="/ipfs/bitswap/1.2.0";class DL{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._log=bL(e.peerId,"network"),this._libp2p=e,this._bitswap=t,this._protocols=[CL],n.b100Only||(this._protocols.unshift(RL),this._protocols.unshift(TL)),this._stats=r,this._running=!1,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this._hashLoader=n.hashLoader}async start(){this._running=!0,await this._libp2p.handle(this._protocols,this._onConnection);const e=LE({onConnect:this._onPeerConnect,onDisconnect:this._onPeerDisconnect});this._registrarId=await this._libp2p.registrar.register(this._protocols,e),this._libp2p.getConnections().forEach((e=>{this._onPeerConnect(e.remotePeer)}))}async stop(){this._running=!1,await this._libp2p.unhandle(this._protocols),null!=this._registrarId&&this._libp2p.registrar.unregister(this._registrarId)}_onConnection(e){let{protocol:t,stream:r,connection:n}=e;this._running&&Promise.resolve().then((async()=>{this._log("incoming new bitswap %s connection from %p",t,n.remotePeer),await bu(r,QE(),(async e=>{for await(const t of e)try{const e=await _L.deserialize(t.slice(),this._hashLoader);await this._bitswap._receiveMessage(n.remotePeer,e)}catch(Up){this._bitswap._receiveError(Up);break}}))})).catch((e=>{this._log(e)}))}_onPeerConnect(e){this._bitswap._onPeerConnected(e)}_onPeerDisconnect(e){this._bitswap._onPeerDisconnected(e)}findProviders(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._libp2p.contentRouting.findProviders(e,t)}async findAndConnect(e,t){const r=[];let n=0;for await(const i of this.findProviders(e,t))if(this._log(`connecting to provider ${i.id}`),r.push(this.connectTo(i.id,t).catch((e=>{this._log.error(e)}))),n++,3===n)break;await Promise.all(r)}async provide(e,t){await this._libp2p.contentRouting.provide(e,t)}async sendMessage(e,t){if(!this._running)throw new Error("network isn't running");const r=e.toString();this._log("sendMessage to %s",r,t);const n=await this._libp2p.dial(e),{stream:i,protocol:s}=await n.newStream([TL,RL,CL]);let o;switch(s){case CL:o=t.serializeToBitswap100();break;case RL:case TL:o=t.serializeToBitswap110();break;default:throw new Error("Unknown protocol: "+s)}!async function(e,t,r){try{await bu([t],$E(),e)}catch(Up){r(Up)}}(i,o,this._log),this._updateSentStats(e,t.blocks)}async connectTo(e,t){if(!this._running)throw new Error("network isn't running");return this._libp2p.dial(e,t)}_updateSentStats(e,t){const r=e.toString();if(this._stats){for(const e of t.values())this._stats.push(r,"dataSent",e.length);this._stats.push(r,"blocksSent",t.size)}}}class PL{constructor(e){this.partner=e,this.wantlist=new mL,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t,r){this.wantlist.add(e,t,r)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.get(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}class NL extends Map{constructor(e,t){super(),this._cmp=t||this._defaultSort,this._keys=[];for(const[r,n]of e||[])this.set(r,n)}update(e){if(e<0||e>=this._keys.length)return;const t=this._keys[e];this._keys.splice(e,1);const r=this._find(t);this._keys.splice(r,0,t)}set(e,t){if(this.has(e)){const t=this.indexOf(e);this._keys.splice(t,1)}super.set(e,t);const r=this._find(e);return this._keys.splice(r,0,e),this}clear(){super.clear(),this._keys=[]}delete(e){if(!this.has(e))return!1;const t=this.indexOf(e);return this._keys.splice(t,1),super.delete(e)}indexOf(e){if(!this.has(e))return-1;const t=this._find(e);if(this._keys[t]===e)return t;for(let r=1;r<this._keys.length;r++){if(this._keys[t+r]===e)return t+r;if(this._keys[t-r]===e)return t-r}return-1}_find(e){let t=0,r=this._keys.length;for(;t<r;){const n=t+r>>>1,i=this._kCmp(this._keys[n],e);if(i<0)t=n+1;else{if(!(i>0))return n;r=n}}return t}*keys(){for(const e of this._keys)yield e}*values(){for(const e of this._keys)yield this.get(e)}*entries(){for(const e of this._keys)yield[e,this.get(e)]}*[Symbol.iterator](){yield*this.entries()}forEach(e,t){if(e)for(const r of this._keys)e.apply(t,[[r,this.get(r)]])}_defaultSort(e,t){return e[0]<t[0]?-1:t[0]<e[0]?1:0}_kCmp(e,t){return this._cmp([e,this.get(e)],[t,this.get(t)])}}const xL={hasNewInfo:()=>!1,merge(){}};class OL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xL;this._taskMerger=e,this._byPeer=new NL([],BL.compare)}pushTasks(e,t){let r=this._byPeer.get(e.toString());r||(r=new BL(e,this._taskMerger)),r.pushTasks(t),this._byPeer.set(e.toString(),r)}popTasks(e){const t=this._head();if(void 0===t)return{tasks:[],pendingSize:0};const{tasks:r,pendingSize:n}=t.popTasks(e);if(0===r.length)return{tasks:r,pendingSize:n};const i=t.peerId;return t.isIdle()?this._byPeer.delete(i.toString()):this._byPeer.update(0),{peerId:i,tasks:r,pendingSize:n}}_head(){if(0!==this._byPeer.size)for(const[,e]of this._byPeer)return e}remove(e,t){const r=this._byPeer.get(t.toString());r&&r.remove(e)}tasksDone(e,t){const r=this._byPeer.get(e.toString());if(!r)return;const n=this._byPeer.indexOf(e.toString());for(const i of t)r.taskDone(i);this._byPeer.update(n)}}class BL{constructor(e,t){this.peerId=e,this._taskMerger=t,this._activeTotalSize=0,this._pending=new LL,this._active=new Set}pushTasks(e){for(const t of e)this._pushTask(t)}_pushTask(e){if(!this._taskHasMoreInfoThanActiveTasks(e))return;const t=this._pending.get(e.topic);if(t)return e.priority>t.priority&&this._pending.updatePriority(e.topic,e.priority),void this._taskMerger.merge(e,t);this._pending.add(e)}_taskHasMoreInfoThanActiveTasks(e){const t=[];for(const r of this._active)r.topic===e.topic&&t.push(r);return 0===t.length||this._taskMerger.hasNewInfo(e,t)}popTasks(e){let t=0;const r=[],n=this._pending.tasks();for(let i=0;i<n.length&&t<e;i++){const e=n[i];r.push(e),t+=e.size,this._pending.delete(e.topic),this._activeTotalSize+=e.size,this._active.add(e)}return{tasks:r,pendingSize:this._pending.totalSize}}taskDone(e){this._active.has(e)&&(this._activeTotalSize-=e.size,this._active.delete(e))}remove(e){this._pending.delete(e)}isIdle(){return 0===this._pending.length&&0===this._active.size}static compare(e,t){return 0===e[1]._pending.length?1:0===t[1]._pending.length?-1:e[1]._activeTotalSize===t[1]._activeTotalSize?t[1]._pending.length-e[1]._pending.length:e[1]._activeTotalSize-t[1]._activeTotalSize}}class LL{constructor(){this._tasks=new NL([],this._compare)}get length(){return this._tasks.size}get totalSize(){return[...this._tasks.values()].reduce(((e,t)=>e+t.task.size),0)}get(e){return(this._tasks.get(e)||{}).task}add(e){this._tasks.set(e.topic,{created:Date.now(),task:e})}delete(e){this._tasks.delete(e)}tasks(){return[...this._tasks.values()].map((e=>e.task))}updatePriority(e,t){const r=this._tasks.get(e);if(!r)return;const n=this._tasks.indexOf(e);r.task.priority=t,this._tasks.update(n)}_compare(e,t){return e[1].task.priority===t[1].task.priority?e[1].created-t[1].created:t[1].task.priority-e[1].task.priority}}const ML={hasNewInfo(e,t){let r=!1,n=!1;for(const i of t)i.data.haveBlock&&(r=!0),i.data.isWantBlock&&(n=!0);return!(n||!e.data.isWantBlock)||!(r||!e.data.haveBlock)},merge(e,t){const r=e.data,n=t.data;!n.haveBlock&&r.haveBlock&&(n.haveBlock=r.haveBlock,n.blockSize=r.blockSize),!n.isWantBlock&&r.isWantBlock&&(n.isWantBlock=!0,n.haveBlock&&!r.haveBlock||(n.haveBlock=r.haveBlock,t.size=e.size)),n.isWantBlock&&n.haveBlock&&(t.size=n.blockSize)}},UL=_L.WantType;class jL{constructor(e,t,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this._log=bL(e,"engine"),this.blockstore=t,this.network=r,this._stats=n,this._opts=this._processOpts(s),this.ledgerMap=WR({system:"ipfs",component:"bitswap",metric:"ledger-map",metrics:i.metrics}),this._running=!1,this._requestQueue=new OL(ML)}_processOpts(e){return{maxSizeReplaceHasWithBlock:1024,targetMessageSize:16384,...e}}_scheduleProcessTasks(){setTimeout((()=>{this._processTasks()}))}async _processTasks(){if(!this._running)return;const{peerId:e,tasks:t,pendingSize:r}=this._requestQueue.popTasks(this._opts.targetMessageSize);if(0===t.length)return;const n=new _L(!1);n.setPendingBytes(r);const i=[],s=new Map;for(const a of t){const e=Ne.CID.parse(a.topic);a.data.haveBlock?a.data.isWantBlock?(i.push(e),s.set(a.topic,a.data)):n.addHave(e):n.addDontHave(e)}const o=await this._getBlocks(i);for(const[a,c]of s){const e=Ne.CID.parse(a),t=o.get(a);t?n.addBlock(e,t):c.sendDontHave&&n.addDontHave(e)}if(n.empty)return e&&this._requestQueue.tasksDone(e,t),void this._scheduleProcessTasks();try{e&&await this.network.sendMessage(e,n);for(const[t,r]of o.entries())e&&this.messageSent(e,Ne.CID.parse(t),r)}catch(Up){this._log.error(Up)}e&&this._requestQueue.tasksDone(e,t),this._scheduleProcessTasks()}wantlistForPeer(e){const t=e.toString(),r=this.ledgerMap.get(t);return r?r.wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toString(),r=this.ledgerMap.get(t);return r?{peer:r.partner,value:r.debtRatio(),sent:r.accounting.bytesSent,recv:r.accounting.bytesRecv,exchanged:r.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map((e=>e.partner))}receivedBlocks(e){if(e.length){for(const t of this.ledgerMap.values())for(const r of e){const e=t.wantlistContains(r.cid);if(!e)continue;const n=r.data.length,i=this._sendAsBlock(e.wantType,n);let s=n;i||(s=_L.blockPresenceSize(e.cid)),this._requestQueue.pushTasks(t.partner,[{topic:e.cid.toString(pe.base58btc),priority:e.priority,size:s,data:{blockSize:n,isWantBlock:i,haveBlock:!0,sendDontHave:!1}}])}this._scheduleProcessTasks()}}async messageReceived(e,t){const r=this._findOrCreate(e);if(t.empty)return;if(t.full&&(r.wantlist=new mL),this._updateBlockAccounting(t.blocks,r),0===t.wantlist.size)return void this._scheduleProcessTasks();const n=[],i=[];t.wantlist.forEach((e=>{e.cancel?(r.cancelWant(e.cid),n.push(e.cid)):(r.wants(e.cid,e.priority,e.wantType),i.push(e))})),this._cancelWants(e,n),await this._addWants(e,i),this._scheduleProcessTasks()}_cancelWants(e,t){for(const r of t)this._requestQueue.remove(r.toString(pe.base58btc),e)}async _addWants(e,t){const r=await this._getBlockSizes(t.map((e=>e.cid))),n=[];for(const i of t){const t=i.cid.toString(pe.base58btc),s=r.get(t);if(null==s)i.sendDontHave&&n.push({topic:t,priority:i.priority,size:_L.blockPresenceSize(i.cid),data:{isWantBlock:i.wantType===UL.Block,blockSize:0,haveBlock:!1,sendDontHave:i.sendDontHave}});else{const e=this._sendAsBlock(i.wantType,s);let r=s;e||(r=_L.blockPresenceSize(i.cid)),n.push({topic:t,priority:i.priority,size:r,data:{isWantBlock:e,blockSize:s,haveBlock:!0,sendDontHave:i.sendDontHave}})}this._requestQueue.pushTasks(e,n)}}_sendAsBlock(e,t){return e===UL.Block||t<=this._opts.maxSizeReplaceHasWithBlock}async _getBlockSizes(e){const t=await this._getBlocks(e);return new Map([...t].map((e=>{let[t,r]=e;return[t,r.length]})))}async _getBlocks(e){const t=new Map;return await Promise.all(e.map((async e=>{try{const r=await this.blockstore.get(e);t.set(e.toString(pe.base58btc),r)}catch(r){"ERR_NOT_FOUND"!==r.code&&this._log.error("failed to query blockstore for %s: %s",e,r)}}))),t}_updateBlockAccounting(e,t){for(const r of e.values())this._log("got block (%s bytes)",r.length),t.receivedBytes(r.length)}messageSent(e,t,r){const n=this._findOrCreate(e);n.sentBytes(r.length),n.wantlist.remove(t)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){this.ledgerMap.delete(e.toString())}_findOrCreate(e){const t=e.toString(),r=this.ledgerMap.get(t);if(r)return r;const n=new PL(e);return this.ledgerMap.set(t,n),this._stats&&this._stats.push(t,"peerCount",1),n}start(){this._running=!0}stop(){this._running=!1}}const FL=e=>`unwant:${(0,$t.toString)(e.multihash.bytes,"base64")}`,zL=e=>`block:${(0,$t.toString)(e.multihash.bytes,"base64")}`;class VL extends OR.EventEmitter{constructor(e){super(),this.setMaxListeners(1e3),this._log=bL(e,"notif")}hasBlock(e,t){const r=zL(e);this._log(r),this.emit(r,t)}wantBlock(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Not a valid cid");const r=zL(e),n=FL(e);return this._log(`wantBlock:${e}`),new Promise(((i,s)=>{const o=()=>{this.removeListener(r,a),s(new Error(`Block for ${e} unwanted`))},a=e=>{this.removeListener(n,o),i(e)};this.once(n,o),this.once(r,a),t&&t.signal&&t.signal.addEventListener("abort",(()=>{this.removeListener(r,a),this.removeListener(n,o),s(new Error(`Want for ${e} aborted`))}))}))}unwantBlock(e){const t=FL(e);this._log(t),this.emit(t)}}var KL=__webpack_require__(6755);class $L extends OR.EventEmitter{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach((e=>{this._stats[e]=BigInt(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach((t=>{(this._movingAverages[e][t]=KL(t)).push(this._frequencyLastTime,0)}))})),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();t&&this._applyOp(t)}e&&this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;t&&Object.keys(this._stats).forEach((r=>{this._updateFrequencyFor(r,t,e)})),this._frequencyLastTime=e}_updateFrequencyFor(e,t,r){const n=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const i=n/t*1e3;let s=this._movingAverages[e];s||(s=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((e=>{let t=s[e];t||(t=s[e]=KL(e)),t.push(r,i)}))}_applyOp(e){const t=e[0],r=e[1];if("number"!==typeof r)throw new Error(`invalid increment number: ${r}`);Object.prototype.hasOwnProperty.call(this._stats,t)||(this._stats[t]=BigInt(0)),this._stats[t]=BigInt(this._stats[t])+BigInt(r),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=r}}const qL={enabled:!1,computeThrottleTimeout:1e3,computeThrottleMaxQueueSize:1e3,movingAverageIntervals:[6e4,3e5,9e5]};class HL extends OR.EventEmitter{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qL;super();const n=Object.assign({},qL,r);if("number"!==typeof n.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!==typeof n.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=t,this._options=n,this._enabled=this._options.enabled,this._global=new $L(t,n),this._global.on("update",(e=>this.emit("update",e))),this._peers=WR({system:"ipfs",component:"bitswap",metric:"stats-peers",metrics:e.metrics})}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(const e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){const t="string"!==typeof e&&e.toString?e.toString():`${e}`;return this._peers.get(t)}push(e,t,r){if(this._enabled&&(this._global.push(t,r),e)){let n=this._peers.get(e);n||(n=new $L(this._initialCounters,this._options),this._peers.set(e,n)),n.push(t,r)}}disconnected(e){const t=e.toString(),r=this._peers.get(t);r&&(r.stop(),this._peers.delete(t))}}const WL={statsEnabled:!1,statsComputeThrottleTimeout:1e3,statsComputeThrottleMaxQueueSize:1e3},GL=["blocksReceived","dataReceived","dupBlksReceived","dupDataReceived","blocksSent","dataSent","providesBufferLength","wantListLength","peerCount"];class YL extends bE{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this._libp2p=e,this._log=bL(this.peerId),this._options=Object.assign({},WL,r),this._stats=new HL(e,GL,{enabled:this._options.statsEnabled,computeThrottleTimeout:this._options.statsComputeThrottleTimeout,computeThrottleMaxQueueSize:this._options.statsComputeThrottleMaxQueueSize}),this.network=new DL(e,this,this._stats,{hashLoader:r.hashLoader}),this.blockstore=t,this.engine=new jL(this.peerId,t,this.network,this._stats,e),this.wm=new IL(this.peerId,this.network,this._stats,e),this.notifications=new VL(this.peerId),this.started=!1}isStarted(){return this.started}get peerId(){return this._libp2p.peerId}async _receiveMessage(e,t){try{await this.engine.messageReceived(e,t)}catch(Up){this._log("failed to receive message",t)}if(0===t.blocks.size)return;const r=[];for(const[n,i]of t.blocks.entries()){const e=Ne.CID.parse(n);r.push({wasWanted:this.wm.wantlist.contains(e),cid:e,data:i})}this.wm.cancelWants(r.filter((e=>{let{wasWanted:t}=e;return t})).map((e=>{let{cid:t}=e;return t}))),await Promise.all(r.map((t=>{let{cid:r,wasWanted:n,data:i}=t;return this._handleReceivedBlock(e,r,i,n)})))}async _handleReceivedBlock(e,t,r,n){this._log("received block");const i=await this.blockstore.has(t);this._updateReceiveCounters(e.toString(),t,r,i),n&&await this.put(t,r)}_updateReceiveCounters(e,t,r,n){this._stats.push(e,"blocksReceived",1),this._stats.push(e,"dataReceived",r.length),n&&(this._stats.push(e,"dupBlksReceived",1),this._stats.push(e,"dupDataReceived",r.length))}_receiveError(e){this._log.error("ReceiveError: %s",e.message)}_onPeerConnected(e){this.wm.connected(e)}_onPeerDisconnected(e){this.wm.disconnected(e),this.engine.peerDisconnected(e),this._stats.disconnected(e)}enableStats(){this._stats.enable()}disableStats(){this._stats.disable()}wantlistForPeer(e,t){return this.engine.wantlistForPeer(e)}ledgerForPeer(e){return this.engine.ledgerForPeer(e)}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(e,t)=>(this.wm.wantBlocks([e],t),this.notifications.wantBlock(e,t));let n=!1;const i=async(e,t)=>{try{return await this.blockstore.get(e,t)}catch(Up){if("ERR_NOT_FOUND"!==Up.code)throw Up;return n||(n=!0,this.network.findAndConnect(e,t).catch((e=>this._log.error(e)))),r(e,t)}},s=new AbortController,o=t.signal?(0,Qt.anySignal)([t.signal,s.signal]):s.signal;try{return await Promise.race([this.notifications.wantBlock(e,{signal:o}),i(e,{signal:o})])}finally{s.abort()}}async*getMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for await(const r of e)yield this.get(r,t)}unwant(e){const t=Array.isArray(e)?e:[e];this.wm.unwantBlocks(t),t.forEach((e=>this.notifications.unwantBlock(e)))}cancelWants(e){this.wm.cancelWants(Array.isArray(e)?e:[e])}async put(e,t,r){await this.blockstore.put(e,t),this._sendHaveBlockNotifications(e,t)}async*putMany(e,t){for await(const{key:r,value:n}of this.blockstore.putMany(e,t))this._sendHaveBlockNotifications(r,n),yield{key:r,value:n}}_sendHaveBlockNotifications(e,t){this.notifications.hasBlock(e,t),this.engine.receivedBlocks([{cid:e,data:t}]),this.network.provide(e).catch((e=>{this._log.error("Failed to provide: %s",e.message)}))}getWantlist(){return this.wm.wantlist.entries()}peers(){return this.engine.peers()}stat(){return this._stats}async start(){this.wm.start(),await this.network.start(),this.engine.start(),this.started=!0}async stop(){this._stats.stop(),this.wm.stop(),await this.network.stop(),this.engine.stop(),this.started=!1}unwrap(){return this.blockstore}}function QL(e){return e=e||new Error("Not Found"),me(e,"ERR_NOT_FOUND")}function JL(e){return e=e||new Error("Aborted"),me(e,"ERR_ABORTED")}class XL extends bE{constructor(e,t){super(),this.child=e,this.bitswap=t}open(){return this.child.open()}close(){return this.child.close()}unwrap(){return this.child}async put(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};await this.has(e)||(this.bitswap.isStarted()?await this.bitswap.put(e,t,r):await this.child.put(e,t,r))}async*putMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Za(e,(async e=>{let{key:t}=e;return!await this.has(t)}));this.bitswap.isStarted()?yield*this.bitswap.putMany(r,t):yield*this.child.putMany(r,t)}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!await this.has(e)&&this.bitswap.isStarted()?this.bitswap.get(e,t):this.child.get(e,t)}async*getMany(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=ZE(),n=ZE();Promise.resolve().then((async()=>{for await(const t of e)!await this.has(t)&&this.bitswap.isStarted()?r.push(t):n.push(t);r.end(),n.end()})),yield*uc(this.bitswap.getMany(r,t),this.child.getMany(n,t))}async delete(e,t){await this.child.delete(e,t)}async*deleteMany(e,t){yield*this.child.deleteMany(e,t)}async has(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.child.has(e,t)}async*query(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*this.child.query(e,t)}async*queryKeys(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield*this.child.queryKeys(e,t)}}class ZL{constructor(e,t,r,n,i){this.peerId=e,this.libp2p=t,this.bitswap=r,this.repo=n,this.blockstore=i}static async start(e){let{peerId:t,repo:r,print:n,hashers:i,options:s}=e;r.closed&&await r.open();const o=await r.config.getAll(),a=await YB({options:s,repo:r,peerId:t,multiaddrs:eM(t,o),config:o,keychainConfig:void 0});a.keychain&&await a.loadKeychain(),await a.start();for(const u of a.getMultiaddrs())n(`Swarm listening on ${u.toString()}`);const c=function(e,t){return new YL(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}(a,r.blocks,{statsEnabled:!0,hashLoader:i});await c.start();const l=new XL(r.blocks,c);return r.blocks=l,r.pins.blockstore=l,new ZL(t,a,c,r,l)}static async stop(e){e.repo.blocks=e.blockstore.unwrap(),e.repo.pins.blockstore=e.blockstore.unwrap(),await e.bitswap.stop(),await e.libp2p.stop()}}const eM=(e,t)=>{const r=e.toString(),n=[],i=t.Addresses&&t.Addresses.Swarm||[];for(const s of i){let e=new Ml(s);if(e.protoCodes().includes(tM))throw me(new Error("websocket-star swarm addresses are not supported. See https://github.com/ipfs/js-ipfs/issues/2779"),"ERR_WEBSOCKET_STAR_SWARM_ADDR_NOT_SUPPORTED");const t=e.getPeerId();t&&t!==r&&(e=e.encapsulate(`/p2p/${r}`)),n.push(e)}return n},tM=479;class rM{constructor(e){let{network:t}=e;this.addrs=function(e){let{network:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=[],{libp2p:n}=await t.use(e);return await n.peerStore.forEach((e=>{r.push({id:e.id,addrs:e.addresses.map((e=>e.multiaddr))})})),r}))}({network:t}),this.connect=function(e){let{network:t}=e;return rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:n}=await t.use(r);await n.dial(e,r)}))}({network:t}),this.disconnect=function(e){let{network:t}=e;return rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:n}=await t.use(r);await n.hangUp(e)}))}({network:t}),this.localAddrs=function(e){let{network:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{libp2p:r}=await t.use(e);return r.getMultiaddrs()}))}({network:t}),this.peers=function(e){let{network:t}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{libp2p:r}=await t.use(e);if(e.verbose){const t=[];for(const n of r.getConnections()){const r={addr:n.remoteAddr,peer:n.remotePeer};(e.verbose||e.direction)&&(r.direction=n.stat.direction),e.verbose&&(r.muxer=n.stat.multiplexer,r.latency="n/a",r.streams=[]),t.push(r)}return t}const n=new Map;for(const t of r.getConnections()){const e={addr:t.remoteAddr,peer:t.remotePeer};n.set(t.remotePeer.toString(),e)}return Array.from(n.values())}))}({network:t})}}const nM={success:!0,time:0,text:""};const iM="/ipns/";function sM(e){let t;if(e.startsWith(iM)&&(e=e.substring(iM.length)),"1"!==e[0]&&"Q"!==e[0]||(e=`z${e}`),"z"===e[0]&&(t=pe.base58btc.decode(e)),"k"===e[0]&&(t=Tc.base36.decode(e)),!t)throw new Error("Could not parse string");if(1!==t[0]&&114!==t[1]&&(t=(0,Ln.concat)([[1,114],t])),40!==t.length)throw new Error("Incorrect length "+t.length);return(0,Ln.concat)([(0,zt.fromString)(iM),t.subarray(2)])}const oM=async(e,t,r)=>{const n=await e.use(r);if(null!=n.libp2p.dht)return n;{const e=async function*(){yield{from:t,name:"QUERY_ERROR",type:3,error:new Ft("dht not enabled")}};return{libp2p:{dht:{get:e,put:e,findProviders:e,findPeer:e,provide:e,getClosestPeers:e}}}}};const aM=async()=>{throw new Ft("pubsub not enabled")},cM=ue.bind({ignoreUndefined:!0}),lM=ge("ipfs");class uM{constructor(e){let{print:t,storage:r,codecs:n,options:i}=e;const{peerId:s,repo:o,keychain:a}=r,c=fr.create(ZL),l=Og(i.preload),u=rr((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!0};if("string"!==typeof e)throw new Error("Invalid arguments, domain must be a string");return an(e=cn(e),t)})),h=function(e){let{network:t}=e;return()=>{const e=t.try();return null!=e&&Boolean(e.libp2p.isStarted())}}({network:c}),d=new Ic(i),p=Object.values(xt.kq);(i.ipld&&i.ipld.hashers?i.ipld.hashers:[]).forEach((e=>p.push(e))),this.hashers=new gS({hashers:p,loadHasher:i.ipld&&i.ipld.loadHasher});const f=Object.values(xt.gh);(i.ipld&&i.ipld.bases?i.ipld.bases:[]).forEach((e=>f.push(e))),this.bases=new dS({bases:f,loadBase:i.ipld&&i.ipld.loadBase});const y=new Rn({repo:o,codecs:n}),g=new _u({codecs:n,hashers:this.hashers,preload:l,repo:o}),m=new Lc({dns:u,ipns:d,repo:o,codecs:n,peerId:s,isOnline:h,keychain:a,options:i}),w=function(e){let{repo:t,codecs:r,bases:n,name:i}=e;return rr((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Vt.path(e))throw new Error("invalid argument "+e);if(Vt.ipnsPath(e))for await(const t of i.resolve(e,s))e=t;const[,o,a,...c]=e.split("/"),l=s.cidBase?await n.getBase(s.cidBase):void 0,u=_n(a);if(0===c.length)return`/${o}/${l?l.encoder.encode(u):a}`;const h=Ne.CID.decode(u);e=c.join("/");const d=pr(h,e,r,t,s);let p=h,f=e;for await(const t of d)Ne.CID.asCID(t.value)&&(p=t.value,f=t.remainderPath);return`/ipfs/${p.toString(l&&l.encoder)}${f?"/"+f:""}`}))}({repo:o,codecs:n,bases:this.bases,name:m}),v=new kg({repo:o,codecs:n,hashers:this.hashers,preload:l}),b=Object.assign(function(e){let{repo:t,codecs:r,resolve:n,preload:i}=e;return async function*(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===s.maxDepth)return;if(s.edges&&s.format&&s.format!==Uc)throw new Error("Cannot set edges to true and also specify format");if(s.format=s.edges?jc:s.format,"number"!==typeof s.maxDepth&&(s.maxDepth=s.recursive?1/0:1),s.timeout){const e=[new Yt.TimeoutController(s.timeout).signal];s.signal&&e.push(s.signal),s.signal=(0,Qt.anySignal)(e)}const o=(Array.isArray(e)?e:[e]).map((e=>Fc(i,e,s)));for(const i of o)try{yield*zc(n,t,r,i,s)}catch(Up){yield{ref:"",err:Up.message}}}}({repo:o,codecs:n,resolve:w,preload:l}),{local:$c({repo:r.repo})}),{add:E,addAll:_,cat:S,get:A,ls:k}=new Dy({preload:l,repo:o,options:i.EXPERIMENTAL,hashers:this.hashers}),I=Fw({repo:o,preload:l,hashers:this.hashers,options:i}),C=function(e){let{preload:t,files:r,options:n={}}=e;if(n.interval=n.interval||3e4,!n.enabled){Bg("MFS preload disabled");const e=async()=>{};return{start:e,stop:e}}let i,s="";const o=async()=>{try{const e=await r.stat("/"),a=e.cid.toString();s!==a&&(Bg(`preloading updated MFS root ${s} -> ${e.cid}`),await t(e.cid),s=a)}catch(Up){Bg.error("failed to preload MFS root",Up)}finally{i=setTimeout(o,n.interval)}};return{async start(){const e=await r.stat("/");s=e.cid.toString(),Bg(`monitoring MFS root ${e.cid}`),i=setTimeout(o,n.interval)},stop(){clearTimeout(i)}}}({files:I,preload:l,options:i.preload});this.preload=l,this.name=m,this.ipns=d,this.pin=y,this.resolve=w,this.block=g,this.refs=b,this.start=function(e){let{network:t,preload:r,peerId:n,keychain:i,repo:s,ipns:o,mfsPreload:a,print:c,hashers:l,options:u}=e;return async()=>{const{libp2p:e}=await fr.start(t,{peerId:n,repo:s,print:c,hashers:l,options:u});await Promise.all([o.startOnline({keychain:i,libp2p:e,peerId:n,repo:s}),r.start(),a.start()])}}({network:c,peerId:s,repo:o,preload:l,ipns:d,mfsPreload:C,print:t,keychain:a,hashers:this.hashers,options:i}),this.stop=function(e){let{network:t,preload:r,ipns:n,repo:i,mfsPreload:s}=e;return async()=>{await Promise.all([r.stop(),n.stop(),s.stop()]),await fr.stop(t),await i.close()}}({network:c,preload:l,mfsPreload:C,ipns:d,repo:o}),this.dht=function(e){let{network:t,repo:r,peerId:n}=e;const{get:i,put:s,findProvs:o,findPeer:a,provide:c,query:l}={async*get(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:i}=await oM(t,n,r),s=e instanceof Uint8Array?e:sM(e);if(null==i.dht)throw me(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.get(s,r)},async*put(e,r,i){const{libp2p:s}=await oM(t,n,i),o=e instanceof Uint8Array?e:sM(e);if(null==s.dht)throw me(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.put(o,r)},async*findProvs(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:i}=await oM(t,n,r);if(null==i.dht)throw me(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.findProviders(e,{signal:r.signal})},async*findPeer(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:i}=await oM(t,n,r);if(null==i.dht)throw me(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.findPeer(e,{signal:r.signal})},async*provide(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recursive:!1};const{libp2p:s}=await oM(t,n,i);if(!await r.blocks.has(e))throw me(new Error("block(s) not found locally, cannot provide"),"ERR_BLOCK_NOT_FOUND");if(i.recursive)throw me(new Error("not implemented yet"),"ERR_NOT_IMPLEMENTED_YET");if(null==s.dht)throw me(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*s.dht.provide(e)},async*query(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:i}=await oM(t,n,r);let s;const o=Ne.CID.asCID(e);if(s=null!=o?o.multihash.bytes:vn(e.toString()).toBytes(),null==i.dht)throw me(new Error("dht not configured"),"ERR_DHT_NOT_CONFIGURED");yield*i.dht.getClosestPeers(s,r)}};return{get:rr(i),put:rr(s),findProvs:rr(o),findPeer:rr(a),provide:rr(c),query:rr(l)}}({network:c,repo:o,peerId:s}),this.pubsub=function(e){let{network:t,config:r}=e;const n=sc(r||{},"Pubsub.Enabled",!0),i={};let s;return{subscribe:n?rr((async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{libp2p:o}=await t.use(n);o.pubsub.subscribe(e),null==s&&(s=e=>{const t=e.detail;i[t.topic]&&i[t.topic].forEach((e=>{"function"!==typeof e?null!=e&&null!=e.handleEvent&&e.handleEvent(t):e(t)}))},o.pubsub.addEventListener("message",s)),null!=r&&(null==i[e]&&(i[e]=[]),i[e].push(r))})):aM,unsubscribe:n?rr((async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{libp2p:o}=await t.use(n);null!=r&&null!=i[e]&&(i[e]=i[e].filter((e=>e!==r)),0===i[e].length&&delete i[e]),"function"!==typeof r&&delete i[e],null==i[e]&&o.pubsub.unsubscribe(e),0===Object.keys(i).length&&(o.pubsub.removeEventListener("message",s),s=void 0)})):aM,publish:n?rr((async function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{libp2p:i}=await t.use(n);if(!r)throw me(new Error('argument "data" is required'),"ERR_ARG_REQUIRED");await i.pubsub.publish(e,r)})):aM,ls:n?rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{libp2p:r}=await t.use(e);return r.pubsub.getTopics()})):aM,peers:n?rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:n}=await t.use(r);return n.pubsub.getSubscribers(e)})):aM}}({network:c,config:i.config}),this.dns=u,this.isOnline=h,this.id=function(e){let{peerId:t,network:r}=e;return rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=r.try();if(!n){if(e.peerId)throw new Mt;if(null==t.publicKey)throw me(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");return{id:t,publicKey:(0,$t.toString)(t.publicKey,"base64pad"),addresses:[],agentVersion:"js-ipfs/0.15.4",protocolVersion:"9000",protocols:[]}}const{libp2p:i}=n,s=e.peerId?e.peerId:t,o=await By(s,i,e),a=(0,$t.toString)(o.metadata.get("AgentVersion")||new Uint8Array),c=(0,$t.toString)(o.metadata.get("ProtocolVersion")||new Uint8Array),l=o.id.toString();return{id:s,publicKey:o.publicKey?(0,$t.toString)(o.publicKey,"base64pad"):"",addresses:(o.addresses||[]).map((e=>{const t=e.toString();return t.endsWith(`/p2p/${l}`)?t:`${t}/p2p/${l}`})).sort().map((e=>new Ml(e))),agentVersion:a,protocolVersion:c,protocols:(o.protocols||[]).sort()}}))}({network:c,peerId:s}),this.version=function(e){let{repo:t}=e;return rr((async function(){const e=await t.version.get();return{version:Py,commit:Ny,repo:`${e}`,"ipfs-core":Py,"interface-ipfs-core":xy}}))}({repo:o}),this.bitswap=new Hc({network:c}),this.bootstrap=new hu({repo:o}),this.config=function(e){let{repo:t}=e;return{getAll:rr((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.config.getAll(e)})),get:rr((async function(e,r){return e?t.config.get(e,r):Promise.reject(new Error("key argument is required"))})),set:rr((async function(e,r,n){return t.config.set(e,r,n)})),replace:rr((async function(e,r){return t.config.replace(e,r)})),profiles:{apply:rr((async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{dryRun:!1};const{dryRun:n}=r,i=Uy[e];if(!i)throw new Error(`No profile with name '${e}' exists`);try{const e=await t.config.getAll(r);let s=JSON.parse(JSON.stringify(e));return s=i.transform(s),n||await t.config.replace(s,r),delete e.Identity.PrivKey,delete s.Identity.PrivKey,{original:e,updated:s}}catch(Up){throw jy(Up),new Error(`Could not apply profile '${e}' to config: ${Up.message}`)}})),list:rr(Fy)}}}({repo:o}),this.ping=function(e){let{network:t}=e;return rr((async function*(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{libp2p:n}=await t.use();r.count=r.count||10;const i=await n.peerStore.get(e);let s=i&&i.id;if(!s){yield{...nM,text:`Looking up peer ${e}`};const t=await n.peerRouting.findPeer(e);s=t&&t.id}if(!s)throw new Error("Peer was not found");yield{...nM,text:`PING ${s.toString()}`};let o=0,a=0;for(let t=0;t<r.count;t++)try{const e=await n.ping(s);a+=e,o++,yield{...nM,time:e}}catch(Up){yield{...nM,success:!1,text:Up.toString()}}if(o){const e=a/o;yield{...nM,text:`Average latency: ${e}ms`}}}))}({network:c}),this.add=E,this.addAll=_,this.cat=S,this.get=A,this.ls=k,this.dag=v,this.files=I,this.key=new Kw({keychain:a}),this.object=new Gw({preload:l,codecs:n,repo:o}),this.repo=new Jw({repo:o,hashers:this.hashers}),this.stats=new Zw({repo:o,network:c}),this.swarm=new rM({network:c}),Object.defineProperty(this,"libp2p",{get(){const e=c.try();return e?e.libp2p:void 0}});const R=()=>Promise.reject(me(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED"));this.commands=R,this.diag={cmds:R,net:R,sys:R},this.log={level:R,ls:R,tail:async function*(){throw me(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}},this.mount=R,this.codecs=n}async init(){throw new Lt}}const hM=async e=>{const t=it({Data:new Pe({type:"directory"}).marshal(),Links:[]}),r=await e.block.put(t,{mhtype:"sha2-256",format:"dag-pb"});return await e.pin.add(r),r},dM=()=>({start:!0,EXPERIMENTAL:{},preload:{enabled:!he.isTest,addresses:["/dns4/node0.preload.ipfs.io/https","/dns4/node1.preload.ipfs.io/https","/dns4/node2.preload.ipfs.io/https","/dns4/node3.preload.ipfs.io/https"]}});__webpack_require__(2596);const pM=async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=cM(dM(),n);const i=n.init||{},s={name:Nt.identity.name,code:Nt.identity.code,encode:e=>e,decode:e=>e},o=Object.values(xt.QB);[e,t,r,Pt,s].concat(n.ipld&&n.ipld.codecs||[]).forEach((e=>o.push(e)));const a=new fS({codecs:o,loadCodec:n.ipld&&n.ipld.loadCodec}),c=n.silent?lM:console.log;lM("creating repo");const l=await XB.start(c,a,n);lM("getting repo config");const u=await l.repo.config.getAll(),h=new uM({storage:l,print:c,codecs:a,options:{...n,config:u}});if(lM("starting preload"),await h.preload.start(),lM("starting storage"),h.ipns.startOffline(l),l.isNew&&!i.emptyRepo){const e=await hM(h);if(lM("adding default assets"),await void h.addAll,lM("initializing IPNS keyspace"),null==l.peerId.publicKey)throw me(new Error("Public key missing"),"ERR_MISSING_PUBLIC_KEY");await h.ipns.initializeKeyspace(l.peerId,(0,zt.fromString)(`/ipfs/${e}`))}return!1!==n.start&&(lM("starting node"),await h.start()),h};class fM{constructor(){this.channel=new MessageChannel,this.initialized=!1,this.resolves=new Map}call(e){if(!this.initialized)return Promise.reject(new Error("Not initialized."));const t=(0,Kt.nanoid)(),r={id:t,cmd:e},n=new Promise(((e,r)=>{const n=i=>{if("disconnected"===i.data)this.initialized=!1,r(i);else if(i.data.id===t){const{err:t,data:s}=i.data;s?e(s):r(t||new Error("Empty event.")),this.channel.port1.removeEventListener("message",n)}};this.channel.port1.addEventListener("message",n),this.channel.port1.start()}));return this.channel.port1.postMessage(r),n}daemon(e,t){return this.call({entity:"daemon",action:e,args:t})}wallet(e,t){return this.call({entity:"wallet",action:e,args:t})}init(){return this.initialized?Promise.reject(new Error("Already initialized.")):new Promise(((e,t)=>{let r=setTimeout((()=>{this.initialized||t(new Error("Can't initialized."))}),1e3);this.channel.port1.addEventListener("message",(n=>{"initialized"===n.data?(this.initialized=!0,e()):(clearTimeout(r),t(new Error("Can't initialized.")))}),{once:!0}),this.channel.port1.start(),window.postMessage("init-dero-bridge","*",[this.channel.port2])}))}}var yM=__webpack_require__(184);const gM=p.createContext([{},()=>{}]),mM=e=>{const[t,r]=(0,p.useState)({});return(0,yM.jsx)(gM.Provider,{value:[t,r],children:e.children})};const wM=function(e,t){return e.then((function(e){return[null,e]})).catch((function(e){return t&&Object.assign(e,t),[e,void 0]}))};const vM=function(){const[e,t]=p.useState(null),r=p.useRef(),[n,i]=p.useContext(gM),[s,o]=p.useState((0,yM.jsx)("a",{href:"https://chrome.google.com/webstore/detail/dero-rpc-bridge/nmofcfcaegdplgbjnadipebgfbodplpd",target:"_blank",rel:"noopener noreferrer",children:"Not connected to extension. Download here."})),[a,c]=p.useState(0),l=p.useCallback((async()=>{console.log("GETSCID");const t=r.current,[n,s]=await wM(t.daemon("get-sc",{scid:"0000000000000000000000000000000000000000000000000000000000000001",keysstring:["keystore"]}));let o="80"+s.data.result.valuesstring[0].substring(2,64);const[a,c]=await wM(t.daemon("get-sc",{scid:o,keysstring:["k:private.islands.scid"]}));let l=c.data.result.valuesstring[0];i((e=>({...e,scid:l})));const u=await pM();console.log("id",await u.id());const h=await e.config.get();console.log(h),i((e=>({...e,ipfs:u})))}));p.useEffect((()=>{const e=async()=>{r.current=new fM;const e=r.current,[t]=await wM(e.init());t?o((0,yM.jsx)("a",{href:"https://chrome.google.com/webstore/detail/dero-rpc-bridge/nmofcfcaegdplgbjnadipebgfbodplpd",target:"_blank",rel:"noopener noreferrer",children:"Not connected to extension. Download here."})):(o("rpc-bridge connected"),i((e=>({...e,deroBridgeApiRef:r}))),l(),u(),h())};return window.addEventListener("load",e),()=>window.removeEventListener("load",e)}),[]);const u=p.useCallback((async()=>{const e=r.current,[t,n]=await wM(e.wallet("get-address",{}));console.log("get-address-error",t),console.log(n),null==t&&i((e=>({...e,userAddress:n.data.result.address})))})),h=p.useCallback((async()=>{const e=r.current,[t,n]=await wM(e.daemon("get-random-address",{}));console.log("get-random-address-error",t),console.log(n),null==t&&i((e=>({...e,randomAddress:n.data.result.address[0]})))})),d=p.useCallback((async()=>{const e=r.current,[t,i]=await wM(e.wallet("get-balance",{scid:n.scid}));console.log("balance:",i.data.result.balance),c(i.data.result.balance)}));return p.useEffect((()=>{d()}),[n.scid]),(0,yM.jsxs)("div",{className:"App",children:[(0,yM.jsxs)("div",{className:"navbar",children:[(0,yM.jsx)(ae,{to:"smokesignals?status=0",children:"Browse Smoke Signals"}),(0,yM.jsx)(ae,{to:"newsignal",children:"Create Smoke Signal"}),(0,yM.jsx)(ae,{to:"treasure?status=0",children:"Browse Buried Treasure"}),(0,yM.jsx)(ae,{to:"burytreasure",children:"Bury Treasure"}),(0,yM.jsx)(ae,{to:"about",children:"About"}),(0,yM.jsx)(ae,{to:"oao",children:"OAO"})]}),(0,yM.jsxs)("div",{className:"rpc-bridge-data",children:[s,(0,yM.jsxs)("h3",{children:["Coco Balance: ",a/1e5]})]}),(0,yM.jsx)(Q,{})]})};function bM(){return p.useEffect((()=>{console.log("refresh token")}),[]),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h1",{children:"Welcome to Private Islands"}),(0,yM.jsx)("h3",{children:"Our Mission"}),(0,yM.jsx)("p",{children:"We are building the world's most resilient support network. A place where people can come together to support projects without fear that their funds will be seized or their networks wiped. We've seen legacy platforms like Patreon ban users for differences of opinion. When this happens, creator-supporter relationships are deleted. Here on Private Islands, creator-supporter relationships are stored on the Dero blockchain. We've also seen legacy platforms like GoFundMe confiscate funds over differences of opinion. Here funds are either sent directly to their recipient, or in some cases they are held in a smart contract for a period of time. We've also seen how fundraising with Bitcoin is susceptible to blacklisting and confiscation. That's why we've decided to build on the only private chain with smart contracts, Dero."}),(0,yM.jsx)("h3",{children:"Where We're At"}),(0,yM.jsxs)("p",{children:["This is version 0.0 of Private iPFslands. This is the ipfs version of ",(0,yM.jsx)("a",{href:"https://privateislands.fund",children:"the main site"}),".It is in alpha stage, and thus far has been put together by one man. It is a functional proof-of-concept. It is changing rapidly."]}),(0,yM.jsx)("p",{children:"One of Dero's interesting features is mutable contracts. Many in crypto see immutability as a great virtue, and Dero does have that option too, but having the option for mutability during development is quite handy. The contract is still evolving at this stage. Apollo, the man mentioned earlier, has the ability to do those nasty things that legacy platforms have done. This will change, but for now you have to trust him. Don't worry, he's a good guy."}),(0,yM.jsx)("p",{children:"In version 0.7 you can start fundraisers. Supporters can make refundable or non-refundable donations. Non-refundable donations go straight to the recipient. Refundable donations only make it to the recipient if the fundraising goal is met on time. We call fundraisers smoke signals. We're doing an island theme."}),(0,yM.jsx)("p",{children:"You also have the ability to create subscription tiers and post exclusive content. Subscriptions can cost whatever you want over whatever interval you want. For example, 1 Dero per year or 100 Dero per day. Content is limited to text at the moment, but that text can include html, so you can post images that way. Just no file uploads yet. This content is stored on a central server accessible by apollo. The goal is to move to a private decentralized storage system. We're looking at SIA."}),(0,yM.jsx)("p",{children:"We're also in the process of implementing an experimental form of governance called an OAO. Similar to a DAO but instead of rule by committee it's rule by CEO with a board to keep him in check. The CEO is the only one who can withdraw treasury funds, but the board sets the allowance. The CEO can make changes to contract code, but board must approve it (this for now only applies to the governance contract itself, but if the DVM makes one simple update it will apply to the main contract too)."}),(0,yM.jsx)("h3",{children:"How Do I Start?"}),(0,yM.jsx)("p",{children:"In order to use this website you need two things."}),(0,yM.jsxs)("ol",{children:[(0,yM.jsx)("li",{children:"A Dero wallet running with the rpc-server turned on."}),(0,yM.jsx)("li",{children:(0,yM.jsx)("a",{href:"https://chrome.google.com/webstore/detail/dero-rpc-bridge/nmofcfcaegdplgbjnadipebgfbodplpd",target:"_blank",rel:"noopener noreferrer",children:"The Dero RPC Bridge Extension (only available for chromium-based browsers like Brave)"})})]}),(0,yM.jsx)("p",{children:"Once you have those, you can subscribe to private island subscription tiers to see their exclusive content. If you'd like to claim your own island, you'll need some coco tokens. It costs 10 coco to claim your island, 1 coco to launch smoke signal fundraisers, and 1 coco to add or modify subscription tiers. Everything else including publishing and editing exclusive content is free. You also earn coco each time you support another island."})]})}function EM(e){var t=new Date(1e3*e.deadline),r=(t.getMonth()+1).toString()+"/"+t.getDate().toString();return(0,yM.jsxs)("div",{className:"ProfileCard",children:[(0,yM.jsx)("h1",{children:e.name}),(0,yM.jsxs)("h3",{children:["Initiated by ",e.profile]}),(0,yM.jsx)("img",{src:e.image}),(0,yM.jsx)("p",{children:e.tagline}),(0,yM.jsxs)("p",{children:["Goal:",e.goal," Dero by ",r," "]}),(0,yM.jsx)("b",{children:"Click to See More"})]})}var _M=__webpack_require__(9517),SM=__webpack_require__.n(_M);function AM(){const[e,t]=p.useContext(gM),[r,n]=p.useState([]);let[i,s]=ce();function o(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}const a=p.useCallback((async()=>{const t=e.deroBridgeApiRef.current,[i,s]=await wM(t.daemon("get-sc",{scid:e.scid,code:!1,variables:!0}));var a=new RegExp(".*_sm");console.log("search",a);var c=s.data.result.stringkeys;let l=Object.keys(c).filter((e=>a.test(e))).map((e=>[o(c[e]),c[e.substring(0,66)+"Deadline"],c[e.substring(0,66)+"Goal"],c[e.substring(0,66)+"Raised"],c[e.substring(0,66)+"Fundee"],c[e.substring(0,66)+"Claimed"],e.substring(0,65)]));console.log("hash array",l);for(let o=0;o<l.length;o++){console.log("helllooo",e.ipfs),console.log("funds",r),console.log("fundList",l);for await(const t of e.ipfs.cat(l[o][0].toString())){let e=JSON.parse(t.toString());console.log(e.island),console.log(SM()(e.island).toString()),console.log(l[o][6].substring(0,64)),SM()(e.island).toString()==l[o][6].substring(0,64)&&(e.index=l[o][6].substring(64,65),e.deadline=l[o][1],e.goal=l[o][2]/1e5,e.raised=l[o][3],e.fundee=l[o][4],e.claimed=l[o][5],e.deadline>(new Date).getTime()/1e3?e.status=0:e.deadline<(new Date).getTime()/1e3&&e.goal<e.raised?e.status=1:e.deadline<(new Date).getTime()/1e3&&e.goal>e.raised&&(e.status=2),n((t=>[...t,e])),console.log("fundz",r))}}console.log(i),console.log(s)}));p.useEffect((()=>{a()}),[e.ipfs]);const c=r.map((e=>{if((!i.get("status")||e.status==i.get("status"))&&(!i.get("island")||e.island==i.get("island")))return(0,yM.jsx)("div",{className:"function",children:(0,yM.jsx)(ae,{to:`/island/${e.island}/smokesignal/${e.index}`,children:(0,yM.jsx)(EM,{image:e.image,index:e.index,goal:e.goal,deadline:e.deadline,profile:e.island,name:e.name,tagline:e.tagline})})})}));return(0,yM.jsx)("div",{children:(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h1",{children:"Smoke Signals"}),(0,yM.jsx)("div",{className:"status-selector",children:(0,yM.jsxs)("ul",{children:[(0,yM.jsx)("li",{className:"status-selector-option",onClick:()=>s({status:0}),children:"Active"}),(0,yM.jsx)("li",{onClick:()=>s({status:1}),children:"Successes"}),(0,yM.jsx)("li",{onClick:()=>s({status:2}),children:"Failures"})]})}),c]})})}function kM(){const[e,t]=p.useState({}),r=W(),n=r.island,i=r.index,[s,o]=p.useContext(gM),[a,c]=p.useState(-1);function l(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}const u=p.useCallback((async()=>{const e=s.deroBridgeApiRef.current,[r,o]=await wM(e.daemon("get-sc",{scid:s.scid,variables:!0,keysstring:[SM()(n)+i+"_sm",SM()(n)+i+"_Goal"]}));var a=new RegExp(`${SM()(n).toString()+i}_sm`);console.log("search",a);var u=o.data.result.stringkeys;let h=Object.keys(u).filter((e=>a.test(e))).map((e=>[l(u[e]),u[e.substring(0,66)+"Deadline"],u[e.substring(0,66)+"Goal"],u[e.substring(0,66)+"Raised"],u[e.substring(0,66)+"Fundee"],u[e.substring(0,66)+"Claimed"],e.substring(0,65)]));console.log("hash array",h);for(let n=0;n<h.length;n++){console.log("helllooo",s.ipfs),console.log(await s.ipfs.id()),console.log("fundList",h);for await(const e of s.ipfs.cat(h[n][0].toString())){let r=JSON.parse(e.toString());console.log(r.island),console.log(SM()(r.island).toString()),console.log(h[n][6].substring(0,64)),SM()(r.island).toString()==h[n][6].substring(0,64)&&(r.index=h[n][6].substring(64,65),r.deadline=h[n][1],r.goal=h[n][2]/1e5,r.raised=h[n][3],r.fundee=h[n][4],r.claimed=h[n][5],r.deadline>(new Date).getTime()/1e3?r.status=0:r.deadline<(new Date).getTime()/1e3&&r.goal<r.raised?r.status=1:r.deadline<(new Date).getTime()/1e3&&r.goal>r.raised&&(r.status=2),t(r),c(r.raised/1e5))}}console.log("res",o)})),h=p.useCallback((async()=>{const e=s.deroBridgeApiRef.current,[t,n]=await wM(e.daemon("get-sc",{scid:s.scid,code:!1,variables:!0}));let i=n.data.result.stringkeys[SM()(r.island)+r.index+"_Raised"];return console.log("avail",i),c(i/1e5),i})),d=p.useCallback((async e=>{e.preventDefault();var t=SM()(r.island).toString();const n=s.deroBridgeApiRef.current,[i,o]=await wM(n.wallet("start-transfer",{scid:s.scid,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"WFF"},{name:"H",datatype:"S",value:t},{name:"i",datatype:"U",value:parseInt(r.index)}]}))})),f=p.useCallback((async e=>{e.preventDefault();var t=SM()(r.island)+r.index;if(e.target.refundable.checked)var n=1;else n=0;console.log(t,n,s.scid,s.randomAddress);const i=s.deroBridgeApiRef.current,[o,a]=await wM(i.wallet("start-transfer",{scid:s.scid,ringsize:2,transfers:[{burn:parseInt(1e5*e.target.amount.value),destination:s.randomAddress}],sc_rpc:[{name:"entrypoint",datatype:"S",value:"SG"},{name:"H",datatype:"S",value:t},{name:"R",datatype:"U",value:n}]}))}));var y=new Date(1e3*e.deadline),g=(y.getMonth()+1).toString()+"/"+y.getDate().toString()+"/"+y.getUTCFullYear().toString();return p.useEffect((()=>{console.log("executed only once!"),u()}),[s.deroBridgeApiRef]),(0,yM.jsx)("div",{className:"function",children:(0,yM.jsxs)("div",{className:"profile",children:[(0,yM.jsx)("img",{src:e.image}),(0,yM.jsx)("h1",{children:e.name}),(0,yM.jsx)("h3",{children:e.tagline}),(0,yM.jsxs)("h3",{children:["Goal: ",e.goal," Dero by ",g]}),(0,yM.jsxs)("h3",{children:["Progress: ",-1!=a?a:(0,yM.jsx)("b",{className:"availabilityCheck",onClick:()=>h(),children:" check"}),"/",e.goal]}),(0,yM.jsx)("h3",{children:e.description}),0==e.status?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsxs)("form",{onSubmit:f,children:[(0,yM.jsx)("input",{id:"amount",placeholder:"Dero amount to donate",type:"text"}),(0,yM.jsx)("label",{htmlFor:"refundable",children:"Refundable?"}),(0,yM.jsx)("input",{id:"refundable",type:"checkbox"}),(0,yM.jsx)("button",{type:"submit",children:"Support"})]}),(0,yM.jsx)("p",{children:"If the goal has been met, owner can withdraw to fundee"}),(0,yM.jsx)("form",{onSubmit:d,children:(0,yM.jsx)("button",{type:"submit",children:"Withdraw"})})]}):1==e.status?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"This Smoke Signal has met its fundraiser goal! If you are the owner, you can withdraw the funds to the fundee now."}),(0,yM.jsx)("form",{onSubmit:d,children:(0,yM.jsx)("button",{type:"submit",children:"Withdraw"})})]}):2==e.status?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"This Smoke Signal failed to meet its goal. If you made a refundable donation, you can withdraw those funds now."}),(0,yM.jsx)("form",{onSubmit:d,children:(0,yM.jsx)("button",{type:"submit",children:"Withdraw"})})]}):""]})})}function IM(){const[e,t]=p.useContext(gM),r=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:e.scid,code:!1,variables:!0}));var s=SM()(t.target.island.value).toString()+"_Owner";console.log("search",s);var o=i.data.result.stringkeys[s];console.log(o);var a=0,c=1e5;if(o){var l=new RegExp(`${SM()(t.target.island.value).toString()}.*_sm`);console.log(l);let e=Object.keys(i.data.result.stringkeys).filter((e=>l.test(e)));console.log(e),a=e.length}else c=1e6;var u=new Date(t.target.deadline.value).getTime()/1e3;console.log("DATE",u);var h={name:t.target.fundName.value,goal:t.target.goal.value,deadline:u,tagline:t.target.tagline.value,index:a,description:t.target.description.value,image:t.target.fundPhoto.value,island:t.target.island.value};console.log("fund id",await e.ipfs.id());const d=await e.ipfs.add(JSON.stringify(h).toString()),p=d.cid.toString();console.log(d),console.log(p);const[f,y]=await wM(r.wallet("start-transfer",{scid:e.scid,ringsize:2,transfers:[{scid:e.scid,burn:c}],sc_rpc:[{name:"entrypoint",datatype:"S",value:"NF"},{name:"G",datatype:"U",value:1e5*parseInt(t.target.goal.value)},{name:"D",datatype:"U",value:u},{name:"A",datatype:"S",value:t.target.address.value},{name:"H",datatype:"S",value:SM()(t.target.island.value).toString()},{name:"i",datatype:"U",value:a},{name:"M",datatype:"S",value:"m"},{name:"m",datatype:"S",value:p}]}));console.log(f),console.log(y)}));return(0,yM.jsx)("div",{className:"function",children:(0,yM.jsxs)("div",{className:"profile",children:[(0,yM.jsx)("h3",{children:"Add a Smoke Signal"}),(0,yM.jsx)("p",{children:"If you already own an island, adding a smoke signal costs 1 Coco. Please ensure island name matches exactly, or it will be considered fraudulent and won't be displayed. If you don't already have an island, this will create one for you and it will cost you 10 Coco."}),(0,yM.jsxs)("form",{onSubmit:r,children:[(0,yM.jsx)("input",{placeholder:"Island (case-sensitive)",id:"island",type:"text"}),(0,yM.jsx)("input",{placeholder:"Name",id:"fundName",type:"text"}),(0,yM.jsx)("input",{placeholder:"Image URL",id:"fundPhoto",type:"text"}),(0,yM.jsx)("input",{placeholder:"Tagline",id:"tagline",type:"text"}),(0,yM.jsx)("p",{children:"Deadline"}),(0,yM.jsx)("input",{type:"date",id:"deadline",name:"deadline"}),(0,yM.jsx)("textarea",{placeholder:"Description",rows:"44",cols:"80",id:"description"}),(0,yM.jsx)("input",{placeholder:"Goal",id:"goal",type:"text"}),(0,yM.jsx)("input",{placeholder:"Address",id:"address",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Create"})]})]})})}function CM(){const[e,t]=p.useContext(gM),r=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:e.scid,code:!1,variables:!0}));var s=SM()(t.target.island.value).toString()+"_Owner";console.log("search",s);var o=i.data.result.stringkeys[s];console.log(o);var a=0,c=1e5;if(o){var l=new RegExp(`${SM()(t.target.island.value).toString()}.*_Treasure`);console.log(l);let e=Object.keys(i.data.result.stringkeys).filter((e=>l.test(e)));console.log(e),a=e.length}else c=1e6;var u=new Date(t.target.expiry.value).getTime()/1e3,h={name:t.target.fundName.value,expiry:u,tagline:t.target.tagline.value,index:a,description:t.target.description.value,image:t.target.fundPhoto.value,island:t.target.island.value},d="m";console.log("fund id",await e.ipfs.id());try{const{cid:t}=await e.ipfs.add(JSON.stringify(h).toString(),{timeout:1e4});d=t.toString(),console.log(d)}catch(y){console.log(y)}const[p,f]=await wM(r.wallet("start-transfer",{scid:e.scid,ringsize:2,transfers:[{scid:e.scid,burn:c},{destination:e.randomAddress,burn:parseInt(1e5*t.target.treasure.value)}],sc_rpc:[{name:"entrypoint",datatype:"S",value:"BT"},{name:"H",datatype:"S",value:SM()(t.target.island.value).toString()},{name:"i",datatype:"U",value:a},{name:"J",datatype:"S",value:t.target.judge.value},{name:"E",datatype:"U",value:u},{name:"S",datatype:"U",value:1},{name:"M",datatype:"S",value:"M"},{name:"m",datatype:"S",value:d}]}));console.log(p),console.log(f)}));return(0,yM.jsx)("div",{className:"function",children:(0,yM.jsxs)("div",{className:"profile",children:[(0,yM.jsx)("h3",{children:"Bury Treasure"}),(0,yM.jsx)("p",{children:"When you bury treasure on your private island, you are creating a bounty for some specific goal. Specify the criteria for release of treasure, and appoint a judge (it can be you) to decide when that criteria has been met."}),(0,yM.jsx)("p",{children:"If you already own an island, adding a Buried Treasure Bounty costs 1 Coco. Please ensure island name matches exactly, or it will be considered fraudulent and won't be displayed. If you don't already have an island, this will create one for you and it will cost you 10 Coco."}),(0,yM.jsxs)("form",{onSubmit:r,children:[(0,yM.jsx)("input",{placeholder:"Island (case-sensitive)",id:"island",type:"text"}),(0,yM.jsx)("input",{placeholder:"Name",id:"fundName",type:"text"}),(0,yM.jsx)("input",{placeholder:"Image URL",id:"fundPhoto",type:"text"}),(0,yM.jsx)("input",{placeholder:"Tagline",id:"tagline",type:"text"}),(0,yM.jsx)("input",{placeholder:"Initial Bounty (Dero amount)",id:"treasure",type:"text"}),(0,yM.jsx)("p",{children:"Expiry"}),(0,yM.jsx)("input",{type:"date",id:"expiry",name:"expiry"}),(0,yM.jsx)("textarea",{placeholder:"Description (include precise criteria)",rows:"44",cols:"80",id:"description"}),(0,yM.jsx)("input",{placeholder:"Judge (Dero Address)",id:"judge",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Create"})]})]})})}function RM(){const[e,t]=p.useContext(gM),[r,n]=p.useState(0),[i,s]=p.useState(""),[o,a]=p.useState(null),[c,l]=p.useState(null),[u,h]=p.useState(null),[d,f]=p.useState(null),[y,g]=p.useState(null),[m,w]=p.useState(null),[v,b]=p.useState(null),[E,_]=p.useState(null),[S,A]=p.useState(null);const k=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));let s=i.data.result.stringkeys.vacantSeats;return console.log(n),console.log(i),console.log(s),a(s),s})),I=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));let s=t.target.index.value,o="vote_"+s+"_type",a=i.data.result.stringkeys[o],c="vote_"+t.target.index.value+"_status",u=i.data.result.stringkeys[c],d="vote_"+s+"_amountOrSeat",p=i.data.result.stringkeys[d],y="vote_"+s+"_address",m=function(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}(i.data.result.stringkeys[y]);console.log(n),console.log(i),console.log(u),console.log(a),console.log(p),console.log(m),g(u),l(a),h(p),f(m)})),C=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));let s=t.target.asset.value,o="weeklyAllowance_"+s,a=i.data.result.stringkeys[o]/1e5;w(s),b(a)})),R=p.useCallback((async t=>{t.preventDefault(),console.log("derobridgeee",e);const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));let s=t.target.asset.value,o=0;o="DERO"===s?"0000000000000000000000000000000000000000000000000000000000000000":s;let a=i.data.result.balances[o]/1e5;_(a),A(s)})),T=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"TransferSeat"},{name:"id",datatype:"U",value:parseInt(t.target.id.value)},{name:"address",datatype:"S",value:t.target.address.value}]}));console.log(n),console.log(i)})),D=p.useCallback((async t=>{t.preventDefault();var r=0;r=t.target.aos?t.target.aos.value:0;var n="";n=t.target.address?t.target.address.value:"",4==t.target.motion.value?r*=1e5:5==t.target.motion.value&&(n=SM()(n).toString(),console.log(n));const i=e.deroBridgeApiRef.current,[s,o]=await wM(i.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"OpenVote"},{name:"motion",datatype:"U",value:parseInt(t.target.motion.value)},{name:"address",datatype:"S",value:n},{name:"amountOrSeat",datatype:"U",value:parseInt(r)}]}));console.log(s),console.log(o)})),P=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"CastVote"},{name:"voteIndex",datatype:"U",value:parseInt(t.target.voteIndex.value)},{name:"voterID",datatype:"U",value:parseInt(t.target.voterID.value)},{name:"opinion",datatype:"U",value:parseInt(t.target.opinion.value)}]}));console.log(n),console.log(i)})),N=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"CloseVote"},{name:"voteIndex",datatype:"U",value:parseInt(t.target.voteIndex.value)}]}));console.log(n),console.log(i)}));return p.useEffect((()=>{console.log("refresh token"),(async()=>{const e=await fetch("/api/refresh"),r=await e.json();console.log("refresh says token is",r.accessToken),t((e=>({...e,token:r.accessToken}))),t((e=>({...e,loggedIn:!0}))),r.accessToken})()}),[]),(0,yM.jsx)("div",{children:(0,yM.jsx)("div",{className:"function",children:(0,yM.jsxs)("div",{children:[(0,yM.jsx)("h1",{children:" Board Functions "}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Open Vote "}),(0,yM.jsxs)("form",{onSubmit:D,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID "}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Motion "}),(0,yM.jsxs)("select",{onChange:e=>{n(e.target.value)},id:"motion",name:"motion",children:[(0,yM.jsx)("option",{value:"0",children:"Hire CEO"}),(0,yM.jsx)("option",{value:"1",children:"Fire CEO"}),(0,yM.jsx)("option",{value:"2",children:"Add Board Member"}),(0,yM.jsx)("option",{value:"3",children:"Remove Board Member"}),(0,yM.jsx)("option",{value:"4",children:"Set CEO's Weekly Allowance"}),(0,yM.jsx)("option",{value:"5",children:"Approve OAO Code Update"})]}),0==r||1==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"CEO Address"}),(0,yM.jsx)("input",{id:"address",type:"text"})]}):2==r||3==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"Board Member Address"}),(0,yM.jsx)("input",{id:"address",type:"text"}),(0,yM.jsx)("p",{children:"Board Seat ID"}),(0,yM.jsx)("input",{id:"aos",type:"text"})]}):4==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:'Asset SCID (or "DERO")'}),(0,yM.jsx)("input",{id:"address",type:"text"}),(0,yM.jsx)("p",{children:"New Weekly Allowance"}),(0,yM.jsx)("input",{id:"aos",type:"text"})]}):5==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"New Code"}),(0,yM.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"address"})]}):"",(0,yM.jsx)("button",{type:"submit",children:"Open Vote"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Cast Vote"}),(0,yM.jsxs)("form",{onSubmit:P,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Vote Index"}),(0,yM.jsx)("input",{id:"voteIndex",type:"text"}),(0,yM.jsx)("p",{children:"Voter ID "}),(0,yM.jsx)("input",{id:"voterID",type:"text"}),(0,yM.jsxs)("select",{id:"opinion",name:"opinion",children:[(0,yM.jsx)("option",{value:"0",children:" no "}),(0,yM.jsx)("option",{value:"1",children:" yes"})]}),(0,yM.jsx)("button",{type:"submit",children:"Cast Vote"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Close Vote"}),(0,yM.jsxs)("form",{onSubmit:N,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Vote Index"}),(0,yM.jsx)("input",{id:"voteIndex",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Close Vote"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Transfer Seat"}),(0,yM.jsxs)("form",{onSubmit:T,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Seat ID"}),(0,yM.jsx)("input",{id:"id",type:"text"}),(0,yM.jsx)("p",{children:"Address"}),(0,yM.jsx)("input",{id:"address",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Transfer Seat"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:"Check Contract Balance"}),(0,yM.jsxs)("h4",{children:["Balance is ",E," ",S]}),(0,yM.jsxs)("form",{onSubmit:R,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Asset"}),(0,yM.jsx)("input",{id:"asset",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Check Balance"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Check Vote"}),(0,yM.jsxs)("p",{children:[" Motion to ",0===c?"hire "+d+" as new CEO":1===c?"fire CEO":2===c?"add "+d+" as board member "+u:3===c?"remove "+d+" from seat "+u:4===c?"set weekly allowance of "+d+" to "+u/1e5:"Update OAO Contract code. Hash of proposed code is: "+d,0===y?": Open":1===y?": Passed":2===y?": Rejected":""]}),(0,yM.jsxs)("form",{onSubmit:I,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Vote Index"}),(0,yM.jsx)("input",{id:"index",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Check Vote"})]}),5===c?(0,yM.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(SM()(e.target.code.value).toString())},children:[(0,yM.jsxs)("p",{children:["Hash:",i," "]}),(0,yM.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"code"}),(0,yM.jsx)("button",{type:"submit",children:"Check Hash"})]}):""]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Check Weekly Allowance"}),(0,yM.jsxs)("p",{children:["Allowance for ",m," is ",v]}),(0,yM.jsxs)("form",{onSubmit:C,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Asset"}),(0,yM.jsx)("input",{id:"asset",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Check Allowance"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:"Vacant Seats"}),(0,yM.jsx)("h4",{children:o}),(0,yM.jsxs)("form",{onSubmit:k,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Check Vacancy"})]})]})]})})})}function TM(){const[e,t]=p.useContext(gM),[r,n]=p.useState(0),[i,s]=p.useState(null),[o,a]=p.useState(null),[c,l]=p.useState(null),[u,h]=p.useState(null),[d,f]=p.useState(null),[y,g]=p.useState(null),[m,w]=p.useState(null),[v,b]=p.useState(null),[E,_]=p.useState(null);const S=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));let s=t.target.index.value,o="vote_"+s+"_type",c=i.data.result.stringkeys[o],u="vote_"+t.target.index.value+"_status",d=i.data.result.stringkeys[u],p="vote_"+s+"_amountOrSeat",y=i.data.result.stringkeys[p],g="vote_"+s+"_address",m=function(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}(i.data.result.stringkeys[g]);console.log(n),console.log(i),console.log(d),console.log(c),console.log(y),console.log(m),f(d),a(c),l(y),h(m)})),A=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));let s=t.target.asset.value,o="weeklyAllowance_"+s,a=i.data.result.stringkeys[o]/1e5;g(s),w(a)})),k=p.useCallback((async t=>{t.preventDefault(),console.log("derobridgeee",e);const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.daemon("get-sc",{scid:t.target.scid.value,code:!1,variables:!0}));let s=t.target.asset.value,o=0;o="DERO"===s?"0000000000000000000000000000000000000000000000000000000000000000":s;let a=i.data.result.balances[o]/1e5;b(a),_(s)})),I=p.useCallback((async t=>{t.preventDefault();var r=0;r=t.target.aos?t.target.aos.value:0;var n="";n=t.target.address?t.target.address.value:"",4==t.target.motion.value?r*=1e5:5==t.target.motion.value&&(n=SM()(n).toString(),console.log(n));const i=e.deroBridgeApiRef.current,[s,o]=await wM(i.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"OpenVote"},{name:"motion",datatype:"U",value:parseInt(t.target.motion.value)},{name:"address",datatype:"S",value:n},{name:"amountOrSeat",datatype:"U",value:parseInt(r)}]}));console.log(s),console.log(o)})),C=p.useCallback((async t=>{t.preventDefault();const r=e.deroBridgeApiRef.current,[n,i]=await wM(r.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,sc_rpc:[{name:"entrypoint",datatype:"S",value:"Withdraw"},{name:"asset",datatype:"S",value:t.target.asset.value},{name:"amount",datatype:"U",value:parseInt(t.target.amount.value)}]}));console.log(n),console.log(i)})),R=p.useCallback((async t=>{t.preventDefault();var r=t.target.code.value;const n=e.deroBridgeApiRef.current,[i,s]=await wM(n.wallet("start-transfer",{scid:t.target.scid.value,ringsize:2,fees:1e5,sc_rpc:[{name:"entrypoint",datatype:"S",value:"Update"},{name:"code",datatype:"S",value:r}]}));console.log(i),console.log(s)}));return(0,yM.jsx)("div",{children:(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsxs)("div",{children:[(0,yM.jsx)("h1",{children:" Board Functions "}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Open Vote "}),(0,yM.jsxs)("form",{onSubmit:I,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID "}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Motion "}),(0,yM.jsxs)("select",{onChange:e=>{n(e.target.value)},id:"motion",name:"motion",children:[(0,yM.jsx)("option",{value:"0",children:"Hire CEO"}),(0,yM.jsx)("option",{value:"1",children:"Fire CEO"}),(0,yM.jsx)("option",{value:"2",children:"Add Board Member"}),(0,yM.jsx)("option",{value:"3",children:"Remove Board Member"}),(0,yM.jsx)("option",{value:"4",children:"Set CEO's Weekly Allowance"}),(0,yM.jsx)("option",{value:"5",children:"Approve OAO Code Update"})]}),0==r||1==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"CEO Address"}),(0,yM.jsx)("input",{id:"address",type:"text"})]}):2==r||3==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"Board Member Address"}),(0,yM.jsx)("input",{id:"address",type:"text"}),(0,yM.jsx)("p",{children:"Board Seat ID"}),(0,yM.jsx)("input",{id:"aos",type:"text"})]}):4==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:'Asset SCID (or "DERO")'}),(0,yM.jsx)("input",{id:"address",type:"text"}),(0,yM.jsx)("p",{children:"New Weekly Allowance"}),(0,yM.jsx)("input",{id:"aos",type:"text"})]}):5==r?(0,yM.jsxs)(yM.Fragment,{children:[(0,yM.jsx)("p",{children:"Sha256 of New Code"}),(0,yM.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"address"})]}):"",(0,yM.jsx)("button",{type:"submit",children:"Open Vote"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:"Check Contract Balance"}),(0,yM.jsxs)("h4",{children:["Balance is ",v," ",E]}),(0,yM.jsxs)("form",{onSubmit:k,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Asset"}),(0,yM.jsx)("input",{id:"asset",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Check Balance"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Check Vote"}),(0,yM.jsxs)("p",{children:[" Motion to ",0===o?"hire "+u+" as new CEO":1===o?"fire CEO":2===o?"add "+u+" as board member "+c:3===o?"remove "+u+" from seat "+c:"set weekly allowance of "+u+" to "+c/1e5,0===d?": Open":1===d?": Passed":2===d?": Rejected":""]}),(0,yM.jsxs)("form",{onSubmit:S,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Vote Index"}),(0,yM.jsx)("input",{id:"index",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Check Vote"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Check Weekly Allowance"}),(0,yM.jsxs)("p",{children:["Allowance for ",y," is ",m]}),(0,yM.jsxs)("form",{onSubmit:A,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Asset"}),(0,yM.jsx)("input",{id:"asset",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Check Allowance"})]})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Withdraw Funds "}),(0,yM.jsxs)("form",{onSubmit:C,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"Asset"}),(0,yM.jsx)("input",{id:"asset",type:"text"}),(0,yM.jsx)("p",{children:"Amount"}),(0,yM.jsx)("input",{id:"amount",type:"text"}),(0,yM.jsx)("button",{type:"submit",children:"Withdraw"})]})]}),(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h3",{children:" Update OAO Code "}),(0,yM.jsxs)("form",{onSubmit:R,children:[(0,yM.jsx)("p",{children:"Your OAO Contract's SCID"}),(0,yM.jsx)("input",{id:"scid",type:"text"}),(0,yM.jsx)("p",{children:"New Code"}),(0,yM.jsx)("textarea",{placeholder:"Enter New Code Here",rows:"44",cols:"80",id:"code"}),(0,yM.jsx)("button",{type:"submit",children:"Update"})]})]})]})})}function DM(e){return(0,yM.jsxs)("div",{className:"ProfileCard",children:[(0,yM.jsx)("h1",{children:e.name}),(0,yM.jsxs)("h3",{children:["Initiated by ",e.profile]}),(0,yM.jsx)("img",{src:e.image}),(0,yM.jsx)("p",{children:e.tagline}),(0,yM.jsxs)("p",{children:["Treasure:",e.treasure," Dero"]}),(0,yM.jsx)("b",{children:"Click to See More"})]})}function PM(){const[e,t]=p.useContext(gM),[r,n]=p.useState([]);let[i,s]=ce();function o(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}const a=p.useCallback((async()=>{const t=e.deroBridgeApiRef.current,[i,s]=await wM(t.daemon("get-sc",{scid:e.scid,code:!1,variables:!0}));var a=new RegExp(".*_bm");console.log("search",a);var c=s.data.result.stringkeys;let l=Object.keys(c).filter((e=>a.test(e))).map((e=>[o(c[e]),c[e.substring(0,66)+"Expiry"],c[e.substring(0,66)+"Treasure"],c[e.substring(0,66)+"Judge"],e.substring(0,65)]));console.log("hash array",l);for(let o=0;o<l.length;o++){console.log("helllooo",e.ipfs),console.log("funds",r),console.log("fundList",l);for await(const t of e.ipfs.cat(l[o][0].toString()))try{let e=JSON.parse(t.toString());if(console.log(e.island),console.log(SM()(e.island).toString()),console.log(l[o][4].substring(0,64)),SM()(e.island).toString()!=l[o][4].substring(0,64))continue;e.index=l[o][4].substring(64,65),e.expiry=l[o][1],e.treasure=l[o][2]/1e5,e.judge=l[o][3],e.expiry>(new Date).getTime()/1e3&&(e.status=0),n((t=>[...t,e])),console.log("fundz",r)}catch(u){console.log(u)}console.log(i),console.log(s)}}));p.useEffect((()=>{a()}),[e.ipfs]);const c=r.map((e=>{if((!i.get("status")||e.status==i.get("status"))&&(!i.get("island")||e.island==i.get("island")))return(0,yM.jsx)("div",{className:"function",children:(0,yM.jsx)(ae,{to:`/island/${e.island}/treasure/${e.index}`,children:(0,yM.jsx)(DM,{image:e.image,index:e.index,treasure:e.treasure,deadline:e.deadline,profile:e.island,name:e.name,tagline:e.tagline})})})}));return(0,yM.jsx)("div",{children:(0,yM.jsxs)("div",{className:"function",children:[(0,yM.jsx)("h1",{children:"Buried Treasure"}),(0,yM.jsx)("div",{className:"status-selector",children:(0,yM.jsxs)("ul",{children:[(0,yM.jsx)("li",{className:"status-selector-option",onClick:()=>s({status:0}),children:"Active"}),(0,yM.jsx)("li",{onClick:()=>s({status:1}),children:"Successes"}),(0,yM.jsx)("li",{onClick:()=>s({status:2}),children:"Failures"})]})}),c]})})}function NM(){const[e,t]=p.useState({}),r=W(),n=r.island,i=r.index,[s,o]=p.useContext(gM),a=p.useCallback((async e=>{e.preventDefault();const t=s.deroBridgeApiRef.current,[r,o]=await wM(t.wallet("start-transfer",{scid:s.scid,ringsize:2,transfers:[{destination:s.randomAddress,burn:1e5*parseInt(e.target.amount.value)}],sc_rpc:[{name:"entrypoint",datatype:"S",value:"BT"},{name:"H",datatype:"S",value:SM()(n).toString()},{name:"i",datatype:"U",value:parseInt(i)},{name:"J",datatype:"S",value:"J"},{name:"E",datatype:"U",value:0},{name:"S",datatype:"U",value:1},{name:"M",datatype:"S",value:"M"},{name:"m",datatype:"S",value:"m"}]}))}));function c(e){for(var t="",r=0;r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}const l=p.useCallback((async()=>{const r=s.deroBridgeApiRef.current,[o,a]=await wM(r.daemon("get-sc",{scid:s.scid,variables:!0,keysstring:[SM()(n)+i+"_bm",SM()(n)+i+"_Treasure"]}));var l=new RegExp(`${SM()(n).toString()+i}_bm`);console.log("search",l);var u=a.data.result.stringkeys;let h=Object.keys(u).filter((e=>l.test(e))).map((e=>[c(u[e]),u[e.substring(0,66)+"Expiry"],u[e.substring(0,66)+"Treasure"],u[e.substring(0,66)+"Judge"],e.substring(0,65)]));console.log("hash array",h);for(let n=0;n<h.length;n++){console.log("helllooo",s.ipfs),console.log("funds",e),console.log("fundList",h);for await(const e of s.ipfs.cat(h[n][0].toString())){let r=JSON.parse(e.toString());console.log(r.island),console.log(SM()(r.island).toString()),console.log(h[n][4].substring(0,64)),SM()(r.island).toString()==h[n][4].substring(0,64)&&(r.index=h[n][4].substring(64,65),r.expiry=h[n][1],r.treasure=h[n][2]/1e5,r.judge=h[n][3],r.expiry>(new Date).getTime()/1e3&&(r.status=0),t(r))}}console.log("res",a)})),u=p.useCallback((async t=>{t.preventDefault(),console.log(e.judge);SM()(r.island).toString();const n=s.deroBridgeApiRef.current,[i,o]=await wM(n.wallet("start-transfer",{ringsize:16,transfers:[{destination:c(e.judge),payload_rpc:[{name:"C",datatype:"S",value:"Treasure Claim Submitted by: "+s.userAddress},{name:"POC",datatype:"S",value:t.target.proof.value}]}]}))}));p.useCallback((async e=>{e.preventDefault();var t=SM()(r.island)+r.index;if(e.target.refundable.checked)var n=1;else n=0;console.log(t,n,s.scid,s.randomAddress);const i=s.deroBridgeApiRef.current,[o,a]=await wM(i.wallet("start-transfer",{scid:s.scid,ringsize:2,transfers:[{burn:parseInt(1e5*e.target.amount.value),destination:s.randomAddress}],sc_rpc:[{name:"entrypoint",datatype:"S",value:"SG"},{name:"H",datatype:"S",value:t},{name:"R",datatype:"U",value:n}]}))}));return p.useEffect((()=>{console.log("executed only once!"),l()}),[s.deroBridgeApiRef]),(0,yM.jsx)("div",{className:"function",children:(0,yM.jsxs)("div",{className:"profile",children:[(0,yM.jsx)("img",{src:e.image}),(0,yM.jsx)("h1",{children:e.name}),(0,yM.jsxs)("h3",{children:["Treasure: ",e.treasure," Dero"]}),(0,yM.jsx)("h3",{children:e.tagline}),(0,yM.jsx)("p",{dangerouslySetInnerHTML:{__html:e.description}}),(0,yM.jsxs)("form",{onSubmit:a,children:[(0,yM.jsx)("input",{placeholder:"Amount (Dero)",id:"amount"}),(0,yM.jsx)("button",{type:"submit",children:"Add Treasure"})]}),(0,yM.jsxs)("form",{onSubmit:u,children:[(0,yM.jsx)("button",{type:"submit",children:"Claim Treasure"}),(0,yM.jsx)("input",{placeholder:"proof",id:"proof"})]})]})})}f.render((0,yM.jsx)(mM,{children:(0,yM.jsx)(se,{children:(0,yM.jsx)(Z,{className:"main",children:(0,yM.jsxs)(J,{path:"/",element:(0,yM.jsx)(vM,{}),children:[(0,yM.jsx)(J,{path:"/about",element:(0,yM.jsx)(bM,{})}),(0,yM.jsx)(J,{path:"/island/:island/smokesignal/:index",element:(0,yM.jsx)(kM,{})}),(0,yM.jsx)(J,{path:"/island/:island/treasure/:index",element:(0,yM.jsx)(NM,{})}),(0,yM.jsx)(J,{path:"about",element:(0,yM.jsx)(bM,{})}),(0,yM.jsx)(J,{path:"smokesignals",element:(0,yM.jsx)(AM,{})}),(0,yM.jsx)(J,{path:"treasure",element:(0,yM.jsx)(PM,{})}),(0,yM.jsx)(J,{path:"/newsignal",element:(0,yM.jsx)(IM,{})}),(0,yM.jsx)(J,{path:"/burytreasure",element:(0,yM.jsx)(CM,{})}),(0,yM.jsx)(J,{path:"/oao",element:(0,yM.jsx)(RM,{})}),(0,yM.jsx)(J,{path:"/ceo",element:(0,yM.jsx)(TM,{})})]})})})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.5d9751d7.js.map